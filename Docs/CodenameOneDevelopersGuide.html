<html><head><title>Codename One Developers Guide</title><meta content="text/html; charset=UTF-8" http-equiv="content-type"><style type="text/css">@import url('https://themes.googleusercontent.com/fonts/css?kit=cS6RGr7q58RsNEVv8D6BRQ');ul.lst-kix_w0kfp3vv1roa-4{list-style-type:none}ul.lst-kix_w0kfp3vv1roa-3{list-style-type:none}ul.lst-kix_w0kfp3vv1roa-6{list-style-type:none}ul.lst-kix_w0kfp3vv1roa-5{list-style-type:none}ul.lst-kix_w0kfp3vv1roa-0{list-style-type:none}.lst-kix_brpwnnkpklch-5>li{counter-increment:lst-ctn-kix_brpwnnkpklch-5}.lst-kix_brpwnnkpklch-7>li:before{content:"" counter(lst-ctn-kix_brpwnnkpklch-7,lower-latin) ". "}.lst-kix_swtqs8jd4sfb-4>li{counter-increment:lst-ctn-kix_swtqs8jd4sfb-4}ul.lst-kix_w0kfp3vv1roa-2{list-style-type:none}ul.lst-kix_w0kfp3vv1roa-1{list-style-type:none}ol.lst-kix_nv52f23a6eq2-8.start{counter-reset:lst-ctn-kix_nv52f23a6eq2-8 0}.lst-kix_mxjmykv476bk-6>li:before{content:"\0025cf  "}ol.lst-kix_9gd5k2onmye-4.start{counter-reset:lst-ctn-kix_9gd5k2onmye-4 0}.lst-kix_odqytza08vnw-7>li:before{content:"\0025cb  "}.lst-kix_m6n3l31yanm8-8>li:before{content:"" counter(lst-ctn-kix_m6n3l31yanm8-8,lower-roman) ". "}ol.lst-kix_tj9wfyx2g6g6-7.start{counter-reset:lst-ctn-kix_tj9wfyx2g6g6-7 0}.lst-kix_4lmfa9d5trzd-5>li:before{content:"" counter(lst-ctn-kix_4lmfa9d5trzd-5,lower-roman) ". "}.lst-kix_t9nzdcwm468u-8>li{counter-increment:lst-ctn-kix_t9nzdcwm468u-8}ul.lst-kix_w0kfp3vv1roa-7{list-style-type:none}.lst-kix_9gd5k2onmye-3>li:before{content:"" counter(lst-ctn-kix_9gd5k2onmye-3,decimal) ". "}ul.lst-kix_w0kfp3vv1roa-8{list-style-type:none}.lst-kix_m6n3l31yanm8-5>li{counter-increment:lst-ctn-kix_m6n3l31yanm8-5}ul.lst-kix_waduenz1mfgd-8{list-style-type:none}.lst-kix_9gd5k2onmye-8>li{counter-increment:lst-ctn-kix_9gd5k2onmye-8}ul.lst-kix_waduenz1mfgd-3{list-style-type:none}ul.lst-kix_waduenz1mfgd-2{list-style-type:none}.lst-kix_yh0juvtigter-4>li{counter-increment:lst-ctn-kix_yh0juvtigter-4}ul.lst-kix_waduenz1mfgd-1{list-style-type:none}.lst-kix_waduenz1mfgd-3>li:before{content:"\0025cf  "}ul.lst-kix_waduenz1mfgd-0{list-style-type:none}ul.lst-kix_waduenz1mfgd-7{list-style-type:none}ul.lst-kix_waduenz1mfgd-6{list-style-type:none}.lst-kix_tj9wfyx2g6g6-2>li:before{content:"" counter(lst-ctn-kix_tj9wfyx2g6g6-2,lower-roman) ". "}ul.lst-kix_waduenz1mfgd-5{list-style-type:none}ul.lst-kix_waduenz1mfgd-4{list-style-type:none}.lst-kix_qibc3js0tsci-0>li{counter-increment:lst-ctn-kix_qibc3js0tsci-0}ol.lst-kix_9gd5k2onmye-1.start{counter-reset:lst-ctn-kix_9gd5k2onmye-1 0}.lst-kix_t9nzdcwm468u-0>li{counter-increment:lst-ctn-kix_t9nzdcwm468u-0}.lst-kix_tj9wfyx2g6g6-6>li:before{content:"" counter(lst-ctn-kix_tj9wfyx2g6g6-6,decimal) ". "}.lst-kix_edqdphgklxv4-5>li:before{content:"" counter(lst-ctn-kix_edqdphgklxv4-5,lower-roman) ". "}ol.lst-kix_t9nzdcwm468u-0.start{counter-reset:lst-ctn-kix_t9nzdcwm468u-0 0}.lst-kix_xwo4rv7ts9qz-7>li:before{content:"\0025cb  "}.lst-kix_hi0rwinrlznw-1>li:before{content:"" counter(lst-ctn-kix_hi0rwinrlznw-1,lower-latin) ". "}ol.lst-kix_nv52f23a6eq2-2.start{counter-reset:lst-ctn-kix_nv52f23a6eq2-2 0}.lst-kix_5qvklmjzc0c1-0>li:before{content:"\0025cf  "}.lst-kix_waduenz1mfgd-2>li:before{content:"\0025a0  "}ol.lst-kix_9gd5k2onmye-5.start{counter-reset:lst-ctn-kix_9gd5k2onmye-5 0}.lst-kix_5qvklmjzc0c1-4>li:before{content:"\0025cb  "}ol.lst-kix_hi0rwinrlznw-1.start{counter-reset:lst-ctn-kix_hi0rwinrlznw-1 0}.lst-kix_m6n3l31yanm8-7>li:before{content:"" counter(lst-ctn-kix_m6n3l31yanm8-7,lower-latin) ". "}.lst-kix_fbuo614ks7sr-1>li:before{content:"\0025cb  "}.lst-kix_tj9wfyx2g6g6-4>li{counter-increment:lst-ctn-kix_tj9wfyx2g6g6-4}.lst-kix_p4xnuclvtdfq-1>li{counter-increment:lst-ctn-kix_p4xnuclvtdfq-1}.lst-kix_w0kfp3vv1roa-7>li:before{content:"\0025cb  "}ol.lst-kix_p4xnuclvtdfq-5.start{counter-reset:lst-ctn-kix_p4xnuclvtdfq-5 0}ol.lst-kix_yh0juvtigter-8{list-style-type:none}ol.lst-kix_yh0juvtigter-6{list-style-type:none}.lst-kix_4lmfa9d5trzd-4>li:before{content:"" counter(lst-ctn-kix_4lmfa9d5trzd-4,lower-latin) ". "}ol.lst-kix_yh0juvtigter-7{list-style-type:none}ol.lst-kix_yh0juvtigter-4{list-style-type:none}ol.lst-kix_yh0juvtigter-5{list-style-type:none}ol.lst-kix_yh0juvtigter-2{list-style-type:none}.lst-kix_w0kfp3vv1roa-5>li:before{content:"\0025a0  "}ol.lst-kix_yh0juvtigter-3{list-style-type:none}ol.lst-kix_yh0juvtigter-0{list-style-type:none}ol.lst-kix_yh0juvtigter-1{list-style-type:none}.lst-kix_waduenz1mfgd-5>li:before{content:"\0025a0  "}.lst-kix_mxjmykv476bk-7>li:before{content:"\0025cb  "}ol.lst-kix_yh0juvtigter-2.start{counter-reset:lst-ctn-kix_yh0juvtigter-2 0}.lst-kix_hi0rwinrlznw-5>li{counter-increment:lst-ctn-kix_hi0rwinrlznw-5}.lst-kix_n1ibpjvrx4g3-5>li:before{content:"\0025a0  "}ol.lst-kix_edqdphgklxv4-6.start{counter-reset:lst-ctn-kix_edqdphgklxv4-6 0}.lst-kix_nrrcwey31vi0-7>li{counter-increment:lst-ctn-kix_nrrcwey31vi0-7}.lst-kix_qibc3js0tsci-3>li{counter-increment:lst-ctn-kix_qibc3js0tsci-3}.lst-kix_odqytza08vnw-1>li:before{content:"\0025cb  "}.lst-kix_4lmfa9d5trzd-6>li{counter-increment:lst-ctn-kix_4lmfa9d5trzd-6}.lst-kix_4lmfa9d5trzd-0>li:before{content:"" counter(lst-ctn-kix_4lmfa9d5trzd-0,decimal) ". "}ol.lst-kix_ivg2cuotrsmn-8.start{counter-reset:lst-ctn-kix_ivg2cuotrsmn-8 0}.lst-kix_9gd5k2onmye-5>li{counter-increment:lst-ctn-kix_9gd5k2onmye-5}.lst-kix_m6n3l31yanm8-0>li:before{content:"" counter(lst-ctn-kix_m6n3l31yanm8-0,decimal) ". "}.lst-kix_swtqs8jd4sfb-1>li{counter-increment:lst-ctn-kix_swtqs8jd4sfb-1}.lst-kix_5qvklmjzc0c1-5>li:before{content:"\0025a0  "}ol.lst-kix_4lmfa9d5trzd-2{list-style-type:none}ol.lst-kix_4lmfa9d5trzd-1{list-style-type:none}.lst-kix_m6n3l31yanm8-3>li:before{content:"" counter(lst-ctn-kix_m6n3l31yanm8-3,decimal) ". "}ol.lst-kix_4lmfa9d5trzd-4{list-style-type:none}.lst-kix_p4xnuclvtdfq-6>li{counter-increment:lst-ctn-kix_p4xnuclvtdfq-6}.lst-kix_t9nzdcwm468u-4>li{counter-increment:lst-ctn-kix_t9nzdcwm468u-4}ol.lst-kix_4lmfa9d5trzd-3{list-style-type:none}.lst-kix_p4xnuclvtdfq-8>li:before{content:"" counter(lst-ctn-kix_p4xnuclvtdfq-8,lower-roman) ". "}.lst-kix_urdoyt9ubq3s-1>li:before{content:"\0025cb  "}ol.lst-kix_yh0juvtigter-4.start{counter-reset:lst-ctn-kix_yh0juvtigter-4 0}ol.lst-kix_4lmfa9d5trzd-0{list-style-type:none}.lst-kix_tj9wfyx2g6g6-4>li:before{content:"" counter(lst-ctn-kix_tj9wfyx2g6g6-4,lower-latin) ". "}.lst-kix_4yf2vpczbkfl-2>li:before{content:"\0025a0  "}ol.lst-kix_brpwnnkpklch-1.start{counter-reset:lst-ctn-kix_brpwnnkpklch-1 0}ol.lst-kix_qibc3js0tsci-2.start{counter-reset:lst-ctn-kix_qibc3js0tsci-2 0}.lst-kix_edqdphgklxv4-1>li:before{content:"" counter(lst-ctn-kix_edqdphgklxv4-1,lower-latin) ". "}.lst-kix_5qvklmjzc0c1-2>li:before{content:"\0025a0  "}.lst-kix_p4xnuclvtdfq-1>li:before{content:"" counter(lst-ctn-kix_p4xnuclvtdfq-1,lower-latin) ". "}ol.lst-kix_4lmfa9d5trzd-7{list-style-type:none}ol.lst-kix_4lmfa9d5trzd-8{list-style-type:none}ol.lst-kix_4lmfa9d5trzd-5{list-style-type:none}.lst-kix_j1vik6wjarhd-7>li:before{content:"\0025cb  "}ol.lst-kix_4lmfa9d5trzd-6{list-style-type:none}.lst-kix_xwo4rv7ts9qz-0>li:before{content:"\0025cf  "}.lst-kix_edqdphgklxv4-6>li:before{content:"" counter(lst-ctn-kix_edqdphgklxv4-6,decimal) ". "}.lst-kix_t9nzdcwm468u-5>li:before{content:"" counter(lst-ctn-kix_t9nzdcwm468u-5,lower-roman) ". "}.lst-kix_p4xnuclvtdfq-7>li{counter-increment:lst-ctn-kix_p4xnuclvtdfq-7}.lst-kix_fbuo614ks7sr-8>li:before{content:"\0025a0  "}ol.lst-kix_yh0juvtigter-1.start{counter-reset:lst-ctn-kix_yh0juvtigter-1 0}.lst-kix_tj9wfyx2g6g6-0>li:before{content:"" counter(lst-ctn-kix_tj9wfyx2g6g6-0,decimal) ". "}.lst-kix_edqdphgklxv4-4>li:before{content:"" counter(lst-ctn-kix_edqdphgklxv4-4,lower-latin) ". "}.lst-kix_j1vik6wjarhd-8>li:before{content:"\0025a0  "}.lst-kix_edqdphgklxv4-2>li{counter-increment:lst-ctn-kix_edqdphgklxv4-2}.lst-kix_nrrcwey31vi0-1>li{counter-increment:lst-ctn-kix_nrrcwey31vi0-1}ol.lst-kix_m6n3l31yanm8-4{list-style-type:none}ol.lst-kix_m6n3l31yanm8-5{list-style-type:none}.lst-kix_o0ojb8md1tjt-5>li:before{content:"\0025a0  "}ol.lst-kix_m6n3l31yanm8-2{list-style-type:none}ol.lst-kix_9gd5k2onmye-0.start{counter-reset:lst-ctn-kix_9gd5k2onmye-0 0}ol.lst-kix_m6n3l31yanm8-3{list-style-type:none}ol.lst-kix_m6n3l31yanm8-8{list-style-type:none}.lst-kix_nv52f23a6eq2-3>li:before{content:"" counter(lst-ctn-kix_nv52f23a6eq2-3,decimal) ". "}ol.lst-kix_m6n3l31yanm8-6{list-style-type:none}.lst-kix_9gd5k2onmye-6>li{counter-increment:lst-ctn-kix_9gd5k2onmye-6}ol.lst-kix_m6n3l31yanm8-7{list-style-type:none}.lst-kix_5hjylykze9b8-2>li:before{content:"\0025a0  "}ol.lst-kix_p4xnuclvtdfq-2.start{counter-reset:lst-ctn-kix_p4xnuclvtdfq-2 0}ol.lst-kix_swtqs8jd4sfb-0.start{counter-reset:lst-ctn-kix_swtqs8jd4sfb-0 0}ol.lst-kix_t9nzdcwm468u-2.start{counter-reset:lst-ctn-kix_t9nzdcwm468u-2 0}ol.lst-kix_m6n3l31yanm8-1{list-style-type:none}ol.lst-kix_m6n3l31yanm8-0{list-style-type:none}.lst-kix_qibc3js0tsci-0>li:before{content:"" counter(lst-ctn-kix_qibc3js0tsci-0,decimal) ". "}ol.lst-kix_swtqs8jd4sfb-5.start{counter-reset:lst-ctn-kix_swtqs8jd4sfb-5 0}.lst-kix_m6n3l31yanm8-7>li{counter-increment:lst-ctn-kix_m6n3l31yanm8-7}.lst-kix_n1ibpjvrx4g3-0>li:before{content:"\0025cf  "}ol.lst-kix_qibc3js0tsci-7.start{counter-reset:lst-ctn-kix_qibc3js0tsci-7 0}ul.lst-kix_mxjmykv476bk-1{list-style-type:none}ul.lst-kix_mxjmykv476bk-2{list-style-type:none}.lst-kix_n1ibpjvrx4g3-2>li:before{content:"\0025a0  "}.lst-kix_tj9wfyx2g6g6-3>li:before{content:"" counter(lst-ctn-kix_tj9wfyx2g6g6-3,decimal) ". "}ul.lst-kix_mxjmykv476bk-0{list-style-type:none}ul.lst-kix_mxjmykv476bk-5{list-style-type:none}ul.lst-kix_mxjmykv476bk-6{list-style-type:none}ul.lst-kix_mxjmykv476bk-3{list-style-type:none}ul.lst-kix_mxjmykv476bk-4{list-style-type:none}.lst-kix_4yf2vpczbkfl-8>li:before{content:"\0025a0  "}ul.lst-kix_mxjmykv476bk-7{list-style-type:none}ul.lst-kix_mxjmykv476bk-8{list-style-type:none}.lst-kix_tj9wfyx2g6g6-8>li:before{content:"" counter(lst-ctn-kix_tj9wfyx2g6g6-8,lower-roman) ". "}.lst-kix_qibc3js0tsci-4>li:before{content:"" counter(lst-ctn-kix_qibc3js0tsci-4,lower-latin) ". "}.lst-kix_swtqs8jd4sfb-2>li:before{content:"" counter(lst-ctn-kix_swtqs8jd4sfb-2,lower-roman) ". "}.lst-kix_myukvtuabqpd-7>li:before{content:"\0025cb  "}.lst-kix_fbuo614ks7sr-7>li:before{content:"\0025cb  "}ol.lst-kix_hi0rwinrlznw-4.start{counter-reset:lst-ctn-kix_hi0rwinrlznw-4 0}.lst-kix_m6n3l31yanm8-4>li{counter-increment:lst-ctn-kix_m6n3l31yanm8-4}.lst-kix_edqdphgklxv4-7>li:before{content:"" counter(lst-ctn-kix_edqdphgklxv4-7,lower-latin) ". "}.lst-kix_j1vik6wjarhd-1>li:before{content:"\0025cb  "}.lst-kix_nv52f23a6eq2-3>li{counter-increment:lst-ctn-kix_nv52f23a6eq2-3}.lst-kix_3xsv2kn12h6y-7>li:before{content:"\0025cb  "}ol.lst-kix_brpwnnkpklch-6.start{counter-reset:lst-ctn-kix_brpwnnkpklch-6 0}.lst-kix_qibc3js0tsci-1>li:before{content:"" counter(lst-ctn-kix_qibc3js0tsci-1,lower-latin) ". "}.lst-kix_4yf2vpczbkfl-6>li:before{content:"\0025cf  "}ol.lst-kix_qibc3js0tsci-6.start{counter-reset:lst-ctn-kix_qibc3js0tsci-6 0}.lst-kix_nv52f23a6eq2-7>li:before{content:"" counter(lst-ctn-kix_nv52f23a6eq2-7,lower-latin) ". "}.lst-kix_nv52f23a6eq2-1>li:before{content:"" counter(lst-ctn-kix_nv52f23a6eq2-1,lower-latin) ". "}.lst-kix_qibc3js0tsci-5>li{counter-increment:lst-ctn-kix_qibc3js0tsci-5}ol.lst-kix_tj9wfyx2g6g6-4.start{counter-reset:lst-ctn-kix_tj9wfyx2g6g6-4 0}.lst-kix_waduenz1mfgd-6>li:before{content:"\0025cf  "}.lst-kix_3xsv2kn12h6y-6>li:before{content:"\0025cf  "}.lst-kix_myukvtuabqpd-5>li:before{content:"\0025a0  "}ol.lst-kix_nrrcwey31vi0-2.start{counter-reset:lst-ctn-kix_nrrcwey31vi0-2 0}.lst-kix_p4xnuclvtdfq-0>li:before{content:"" counter(lst-ctn-kix_p4xnuclvtdfq-0,decimal) ". "}.lst-kix_swtqs8jd4sfb-0>li{counter-increment:lst-ctn-kix_swtqs8jd4sfb-0}.lst-kix_j1vik6wjarhd-3>li:before{content:"\0025cf  "}.lst-kix_nv52f23a6eq2-4>li:before{content:"" counter(lst-ctn-kix_nv52f23a6eq2-4,lower-latin) ". "}.lst-kix_m6n3l31yanm8-2>li:before{content:"" counter(lst-ctn-kix_m6n3l31yanm8-2,lower-roman) ". "}.lst-kix_9gd5k2onmye-2>li:before{content:"" counter(lst-ctn-kix_9gd5k2onmye-2,lower-roman) ". "}.lst-kix_fbuo614ks7sr-5>li:before{content:"\0025a0  "}.lst-kix_ivg2cuotrsmn-0>li{counter-increment:lst-ctn-kix_ivg2cuotrsmn-0}ol.lst-kix_nrrcwey31vi0-5.start{counter-reset:lst-ctn-kix_nrrcwey31vi0-5 0}.lst-kix_9gd5k2onmye-1>li:before{content:"" counter(lst-ctn-kix_9gd5k2onmye-1,lower-latin) ". "}ol.lst-kix_t9nzdcwm468u-7.start{counter-reset:lst-ctn-kix_t9nzdcwm468u-7 0}.lst-kix_t9nzdcwm468u-7>li:before{content:"" counter(lst-ctn-kix_t9nzdcwm468u-7,lower-latin) ". "}ol.lst-kix_4lmfa9d5trzd-6.start{counter-reset:lst-ctn-kix_4lmfa9d5trzd-6 0}.lst-kix_m6n3l31yanm8-2>li{counter-increment:lst-ctn-kix_m6n3l31yanm8-2}ol.lst-kix_p4xnuclvtdfq-4.start{counter-reset:lst-ctn-kix_p4xnuclvtdfq-4 0}.lst-kix_tj9wfyx2g6g6-7>li{counter-increment:lst-ctn-kix_tj9wfyx2g6g6-7}.lst-kix_t9nzdcwm468u-2>li:before{content:"" counter(lst-ctn-kix_t9nzdcwm468u-2,lower-roman) ". "}.lst-kix_fbuo614ks7sr-2>li:before{content:"\0025a0  "}ol.lst-kix_4lmfa9d5trzd-7.start{counter-reset:lst-ctn-kix_4lmfa9d5trzd-7 0}.lst-kix_5hjylykze9b8-0>li:before{content:"\0025cf  "}.lst-kix_sxcl9nkaveap-4>li:before{content:"\0025cb  "}.lst-kix_4yf2vpczbkfl-3>li:before{content:"\0025cf  "}.lst-kix_odqytza08vnw-3>li:before{content:"\0025cf  "}.lst-kix_hi0rwinrlznw-3>li{counter-increment:lst-ctn-kix_hi0rwinrlznw-3}.lst-kix_xwo4rv7ts9qz-3>li:before{content:"\0025cf  "}ol.lst-kix_tj9wfyx2g6g6-3.start{counter-reset:lst-ctn-kix_tj9wfyx2g6g6-3 0}ul.lst-kix_5qvklmjzc0c1-7{list-style-type:none}.lst-kix_sxcl9nkaveap-0>li:before{content:"\0025cf  "}ul.lst-kix_5qvklmjzc0c1-6{list-style-type:none}.lst-kix_myukvtuabqpd-8>li:before{content:"\0025a0  "}.lst-kix_w0kfp3vv1roa-0>li:before{content:"\0025cf  "}ul.lst-kix_5qvklmjzc0c1-5{list-style-type:none}ul.lst-kix_5qvklmjzc0c1-4{list-style-type:none}.lst-kix_sxcl9nkaveap-6>li:before{content:"\0025cf  "}ul.lst-kix_5qvklmjzc0c1-8{list-style-type:none}.lst-kix_swtqs8jd4sfb-8>li:before{content:"" counter(lst-ctn-kix_swtqs8jd4sfb-8,lower-roman) ". "}ol.lst-kix_swtqs8jd4sfb-2.start{counter-reset:lst-ctn-kix_swtqs8jd4sfb-2 0}.lst-kix_ivg2cuotrsmn-7>li{counter-increment:lst-ctn-kix_ivg2cuotrsmn-7}.lst-kix_edqdphgklxv4-8>li:before{content:"" counter(lst-ctn-kix_edqdphgklxv4-8,lower-roman) ". "}ul.lst-kix_5qvklmjzc0c1-0{list-style-type:none}ul.lst-kix_5qvklmjzc0c1-1{list-style-type:none}ul.lst-kix_5qvklmjzc0c1-2{list-style-type:none}.lst-kix_sxcl9nkaveap-7>li:before{content:"\0025cb  "}ul.lst-kix_5qvklmjzc0c1-3{list-style-type:none}.lst-kix_p4xnuclvtdfq-0>li{counter-increment:lst-ctn-kix_p4xnuclvtdfq-0}.lst-kix_n1ibpjvrx4g3-6>li:before{content:"\0025cf  "}.lst-kix_brpwnnkpklch-0>li{counter-increment:lst-ctn-kix_brpwnnkpklch-0}.lst-kix_p4xnuclvtdfq-3>li{counter-increment:lst-ctn-kix_p4xnuclvtdfq-3}.lst-kix_5hjylykze9b8-1>li:before{content:"\0025cb  "}.lst-kix_ivg2cuotrsmn-2>li:before{content:"" counter(lst-ctn-kix_ivg2cuotrsmn-2,lower-roman) ". "}ol.lst-kix_brpwnnkpklch-3.start{counter-reset:lst-ctn-kix_brpwnnkpklch-3 0}.lst-kix_n1ibpjvrx4g3-1>li:before{content:"\0025cb  "}.lst-kix_9gd5k2onmye-7>li{counter-increment:lst-ctn-kix_9gd5k2onmye-7}ul.lst-kix_fbuo614ks7sr-8{list-style-type:none}ul.lst-kix_fbuo614ks7sr-7{list-style-type:none}ul.lst-kix_fbuo614ks7sr-6{list-style-type:none}ul.lst-kix_fbuo614ks7sr-0{list-style-type:none}ul.lst-kix_fbuo614ks7sr-1{list-style-type:none}.lst-kix_swtqs8jd4sfb-2>li{counter-increment:lst-ctn-kix_swtqs8jd4sfb-2}ul.lst-kix_fbuo614ks7sr-4{list-style-type:none}.lst-kix_w0kfp3vv1roa-6>li:before{content:"\0025cf  "}ul.lst-kix_fbuo614ks7sr-5{list-style-type:none}ul.lst-kix_4yf2vpczbkfl-8{list-style-type:none}ul.lst-kix_fbuo614ks7sr-2{list-style-type:none}ul.lst-kix_fbuo614ks7sr-3{list-style-type:none}ul.lst-kix_4yf2vpczbkfl-5{list-style-type:none}.lst-kix_hi0rwinrlznw-5>li:before{content:"" counter(lst-ctn-kix_hi0rwinrlznw-5,lower-roman) ". "}ul.lst-kix_4yf2vpczbkfl-4{list-style-type:none}ul.lst-kix_4yf2vpczbkfl-7{list-style-type:none}ul.lst-kix_4yf2vpczbkfl-6{list-style-type:none}ul.lst-kix_4yf2vpczbkfl-1{list-style-type:none}ul.lst-kix_4yf2vpczbkfl-0{list-style-type:none}.lst-kix_nrrcwey31vi0-8>li{counter-increment:lst-ctn-kix_nrrcwey31vi0-8}ul.lst-kix_4yf2vpczbkfl-3{list-style-type:none}ul.lst-kix_4yf2vpczbkfl-2{list-style-type:none}.lst-kix_9gd5k2onmye-1>li{counter-increment:lst-ctn-kix_9gd5k2onmye-1}.lst-kix_nv52f23a6eq2-8>li{counter-increment:lst-ctn-kix_nv52f23a6eq2-8}.lst-kix_edqdphgklxv4-2>li:before{content:"" counter(lst-ctn-kix_edqdphgklxv4-2,lower-roman) ". "}ol.lst-kix_tj9wfyx2g6g6-0.start{counter-reset:lst-ctn-kix_tj9wfyx2g6g6-0 0}.lst-kix_urdoyt9ubq3s-3>li:before{content:"\0025cf  "}.lst-kix_qibc3js0tsci-7>li{counter-increment:lst-ctn-kix_qibc3js0tsci-7}ol.lst-kix_qibc3js0tsci-8.start{counter-reset:lst-ctn-kix_qibc3js0tsci-8 0}ol.lst-kix_swtqs8jd4sfb-6.start{counter-reset:lst-ctn-kix_swtqs8jd4sfb-6 0}.lst-kix_hi0rwinrlznw-7>li:before{content:"" counter(lst-ctn-kix_hi0rwinrlznw-7,lower-latin) ". "}ol.lst-kix_qibc3js0tsci-4.start{counter-reset:lst-ctn-kix_qibc3js0tsci-4 0}.lst-kix_yh0juvtigter-2>li{counter-increment:lst-ctn-kix_yh0juvtigter-2}ol.lst-kix_hi0rwinrlznw-2.start{counter-reset:lst-ctn-kix_hi0rwinrlznw-2 0}.lst-kix_nv52f23a6eq2-8>li:before{content:"" counter(lst-ctn-kix_nv52f23a6eq2-8,lower-roman) ". "}.lst-kix_p4xnuclvtdfq-5>li{counter-increment:lst-ctn-kix_p4xnuclvtdfq-5}.lst-kix_nrrcwey31vi0-4>li:before{content:"" counter(lst-ctn-kix_nrrcwey31vi0-4,lower-latin) ". "}ol.lst-kix_qibc3js0tsci-3.start{counter-reset:lst-ctn-kix_qibc3js0tsci-3 0}.lst-kix_yh0juvtigter-2>li:before{content:"" counter(lst-ctn-kix_yh0juvtigter-2,lower-roman) ". "}.lst-kix_nrrcwey31vi0-0>li:before{content:"" counter(lst-ctn-kix_nrrcwey31vi0-0,decimal) ". "}.lst-kix_xwo4rv7ts9qz-5>li:before{content:"\0025a0  "}.lst-kix_swtqs8jd4sfb-3>li:before{content:"" counter(lst-ctn-kix_swtqs8jd4sfb-3,decimal) ". "}.lst-kix_fbuo614ks7sr-6>li:before{content:"\0025cf  "}ul.lst-kix_sxcl9nkaveap-0{list-style-type:none}ul.lst-kix_sxcl9nkaveap-1{list-style-type:none}.lst-kix_nrrcwey31vi0-6>li:before{content:"" counter(lst-ctn-kix_nrrcwey31vi0-6,decimal) ". "}ol.lst-kix_edqdphgklxv4-2.start{counter-reset:lst-ctn-kix_edqdphgklxv4-2 0}ul.lst-kix_sxcl9nkaveap-8{list-style-type:none}ul.lst-kix_sxcl9nkaveap-6{list-style-type:none}ol.lst-kix_edqdphgklxv4-8.start{counter-reset:lst-ctn-kix_edqdphgklxv4-8 0}ul.lst-kix_sxcl9nkaveap-7{list-style-type:none}.lst-kix_hi0rwinrlznw-4>li{counter-increment:lst-ctn-kix_hi0rwinrlznw-4}ul.lst-kix_sxcl9nkaveap-4{list-style-type:none}ul.lst-kix_sxcl9nkaveap-5{list-style-type:none}ul.lst-kix_sxcl9nkaveap-2{list-style-type:none}ul.lst-kix_sxcl9nkaveap-3{list-style-type:none}ol.lst-kix_tj9wfyx2g6g6-8.start{counter-reset:lst-ctn-kix_tj9wfyx2g6g6-8 0}.lst-kix_hi0rwinrlznw-3>li:before{content:"" counter(lst-ctn-kix_hi0rwinrlznw-3,decimal) ". "}.lst-kix_nv52f23a6eq2-2>li:before{content:"" counter(lst-ctn-kix_nv52f23a6eq2-2,lower-roman) ". "}.lst-kix_swtqs8jd4sfb-5>li{counter-increment:lst-ctn-kix_swtqs8jd4sfb-5}.lst-kix_m6n3l31yanm8-1>li:before{content:"" counter(lst-ctn-kix_m6n3l31yanm8-1,lower-latin) ". "}.lst-kix_tj9wfyx2g6g6-8>li{counter-increment:lst-ctn-kix_tj9wfyx2g6g6-8}.lst-kix_urdoyt9ubq3s-4>li:before{content:"\0025cb  "}ol.lst-kix_m6n3l31yanm8-4.start{counter-reset:lst-ctn-kix_m6n3l31yanm8-4 0}ol.lst-kix_hi0rwinrlznw-7{list-style-type:none}ol.lst-kix_hi0rwinrlznw-8{list-style-type:none}ol.lst-kix_t9nzdcwm468u-6.start{counter-reset:lst-ctn-kix_t9nzdcwm468u-6 0}.lst-kix_m6n3l31yanm8-6>li{counter-increment:lst-ctn-kix_m6n3l31yanm8-6}.lst-kix_t9nzdcwm468u-4>li:before{content:"" counter(lst-ctn-kix_t9nzdcwm468u-4,lower-latin) ". "}.lst-kix_qibc3js0tsci-7>li:before{content:"" counter(lst-ctn-kix_qibc3js0tsci-7,lower-latin) ". "}.lst-kix_n1ibpjvrx4g3-3>li:before{content:"\0025cf  "}.lst-kix_nrrcwey31vi0-0>li{counter-increment:lst-ctn-kix_nrrcwey31vi0-0}ul.lst-kix_n1ibpjvrx4g3-2{list-style-type:none}.lst-kix_m6n3l31yanm8-4>li:before{content:"" counter(lst-ctn-kix_m6n3l31yanm8-4,lower-latin) ". "}ul.lst-kix_n1ibpjvrx4g3-1{list-style-type:none}ul.lst-kix_n1ibpjvrx4g3-0{list-style-type:none}ul.lst-kix_n1ibpjvrx4g3-6{list-style-type:none}.lst-kix_nv52f23a6eq2-6>li{counter-increment:lst-ctn-kix_nv52f23a6eq2-6}ul.lst-kix_n1ibpjvrx4g3-5{list-style-type:none}ul.lst-kix_n1ibpjvrx4g3-4{list-style-type:none}ul.lst-kix_n1ibpjvrx4g3-3{list-style-type:none}ol.lst-kix_hi0rwinrlznw-4{list-style-type:none}ol.lst-kix_hi0rwinrlznw-3{list-style-type:none}ol.lst-kix_hi0rwinrlznw-6{list-style-type:none}ol.lst-kix_hi0rwinrlznw-5{list-style-type:none}ol.lst-kix_hi0rwinrlznw-0{list-style-type:none}.lst-kix_5hjylykze9b8-5>li:before{content:"\0025a0  "}ol.lst-kix_hi0rwinrlznw-2{list-style-type:none}ol.lst-kix_edqdphgklxv4-1.start{counter-reset:lst-ctn-kix_edqdphgklxv4-1 0}ol.lst-kix_hi0rwinrlznw-1{list-style-type:none}.lst-kix_5qvklmjzc0c1-7>li:before{content:"\0025cb  "}ol.lst-kix_4lmfa9d5trzd-5.start{counter-reset:lst-ctn-kix_4lmfa9d5trzd-5 0}ol.lst-kix_nrrcwey31vi0-1.start{counter-reset:lst-ctn-kix_nrrcwey31vi0-1 0}ul.lst-kix_n1ibpjvrx4g3-7{list-style-type:none}ul.lst-kix_n1ibpjvrx4g3-8{list-style-type:none}ol.lst-kix_brpwnnkpklch-7.start{counter-reset:lst-ctn-kix_brpwnnkpklch-7 0}ol.lst-kix_t9nzdcwm468u-3.start{counter-reset:lst-ctn-kix_t9nzdcwm468u-3 0}.lst-kix_urdoyt9ubq3s-8>li:before{content:"\0025a0  "}ol.lst-kix_tj9wfyx2g6g6-6.start{counter-reset:lst-ctn-kix_tj9wfyx2g6g6-6 0}.lst-kix_ivg2cuotrsmn-4>li:before{content:"" counter(lst-ctn-kix_ivg2cuotrsmn-4,lower-latin) ". "}.lst-kix_tj9wfyx2g6g6-3>li{counter-increment:lst-ctn-kix_tj9wfyx2g6g6-3}ol.lst-kix_brpwnnkpklch-0.start{counter-reset:lst-ctn-kix_brpwnnkpklch-0 0}.lst-kix_nv52f23a6eq2-4>li{counter-increment:lst-ctn-kix_nv52f23a6eq2-4}.lst-kix_4lmfa9d5trzd-1>li:before{content:"" counter(lst-ctn-kix_4lmfa9d5trzd-1,lower-latin) ". "}ol.lst-kix_yh0juvtigter-0.start{counter-reset:lst-ctn-kix_yh0juvtigter-0 0}.lst-kix_hi0rwinrlznw-2>li:before{content:"" counter(lst-ctn-kix_hi0rwinrlznw-2,lower-roman) ". "}.lst-kix_nrrcwey31vi0-6>li{counter-increment:lst-ctn-kix_nrrcwey31vi0-6}.lst-kix_odqytza08vnw-0>li:before{content:"\0025cf  "}.lst-kix_t9nzdcwm468u-7>li{counter-increment:lst-ctn-kix_t9nzdcwm468u-7}.lst-kix_ivg2cuotrsmn-6>li{counter-increment:lst-ctn-kix_ivg2cuotrsmn-6}.lst-kix_5hjylykze9b8-3>li:before{content:"\0025cf  "}ol.lst-kix_qibc3js0tsci-7{list-style-type:none}.lst-kix_hi0rwinrlznw-0>li{counter-increment:lst-ctn-kix_hi0rwinrlznw-0}ol.lst-kix_qibc3js0tsci-8{list-style-type:none}ol.lst-kix_qibc3js0tsci-5{list-style-type:none}ol.lst-kix_qibc3js0tsci-6{list-style-type:none}.lst-kix_fbuo614ks7sr-0>li:before{content:"\0025cf  "}ol.lst-kix_qibc3js0tsci-4{list-style-type:none}.lst-kix_brpwnnkpklch-8>li{counter-increment:lst-ctn-kix_brpwnnkpklch-8}ol.lst-kix_qibc3js0tsci-3{list-style-type:none}ol.lst-kix_nrrcwey31vi0-0.start{counter-reset:lst-ctn-kix_nrrcwey31vi0-0 0}ol.lst-kix_qibc3js0tsci-2{list-style-type:none}ol.lst-kix_qibc3js0tsci-1{list-style-type:none}ol.lst-kix_qibc3js0tsci-0{list-style-type:none}.lst-kix_yh0juvtigter-3>li:before{content:"" counter(lst-ctn-kix_yh0juvtigter-3,decimal) ". "}.lst-kix_o0ojb8md1tjt-1>li:before{content:"\0025cb  "}.lst-kix_qibc3js0tsci-5>li:before{content:"" counter(lst-ctn-kix_qibc3js0tsci-5,lower-roman) ". "}.lst-kix_3xsv2kn12h6y-4>li:before{content:"\0025cb  "}.lst-kix_myukvtuabqpd-2>li:before{content:"\0025a0  "}ol.lst-kix_9gd5k2onmye-0{list-style-type:none}ol.lst-kix_9gd5k2onmye-2{list-style-type:none}ol.lst-kix_9gd5k2onmye-1{list-style-type:none}ol.lst-kix_9gd5k2onmye-4{list-style-type:none}ol.lst-kix_9gd5k2onmye-3{list-style-type:none}ol.lst-kix_9gd5k2onmye-6{list-style-type:none}.lst-kix_t9nzdcwm468u-5>li{counter-increment:lst-ctn-kix_t9nzdcwm468u-5}ol.lst-kix_9gd5k2onmye-5{list-style-type:none}ol.lst-kix_9gd5k2onmye-8{list-style-type:none}ol.lst-kix_9gd5k2onmye-7{list-style-type:none}ul.lst-kix_urdoyt9ubq3s-8{list-style-type:none}.lst-kix_yh0juvtigter-5>li{counter-increment:lst-ctn-kix_yh0juvtigter-5}ol.lst-kix_ivg2cuotrsmn-4.start{counter-reset:lst-ctn-kix_ivg2cuotrsmn-4 0}ul.lst-kix_urdoyt9ubq3s-7{list-style-type:none}ul.lst-kix_urdoyt9ubq3s-6{list-style-type:none}.lst-kix_yh0juvtigter-1>li:before{content:"" counter(lst-ctn-kix_yh0juvtigter-1,lower-latin) ". "}ul.lst-kix_urdoyt9ubq3s-5{list-style-type:none}ul.lst-kix_urdoyt9ubq3s-4{list-style-type:none}ul.lst-kix_urdoyt9ubq3s-3{list-style-type:none}ul.lst-kix_j1vik6wjarhd-7{list-style-type:none}ul.lst-kix_urdoyt9ubq3s-1{list-style-type:none}ul.lst-kix_j1vik6wjarhd-6{list-style-type:none}ul.lst-kix_urdoyt9ubq3s-2{list-style-type:none}ul.lst-kix_j1vik6wjarhd-5{list-style-type:none}.lst-kix_xwo4rv7ts9qz-2>li:before{content:"\0025a0  "}ul.lst-kix_j1vik6wjarhd-4{list-style-type:none}ol.lst-kix_nv52f23a6eq2-5.start{counter-reset:lst-ctn-kix_nv52f23a6eq2-5 0}ul.lst-kix_urdoyt9ubq3s-0{list-style-type:none}ul.lst-kix_j1vik6wjarhd-8{list-style-type:none}.lst-kix_myukvtuabqpd-4>li:before{content:"\0025cb  "}ol.lst-kix_nv52f23a6eq2-0.start{counter-reset:lst-ctn-kix_nv52f23a6eq2-0 0}.lst-kix_urdoyt9ubq3s-7>li:before{content:"\0025cb  "}ul.lst-kix_j1vik6wjarhd-3{list-style-type:none}ul.lst-kix_j1vik6wjarhd-2{list-style-type:none}ul.lst-kix_j1vik6wjarhd-1{list-style-type:none}ul.lst-kix_j1vik6wjarhd-0{list-style-type:none}.lst-kix_nrrcwey31vi0-3>li:before{content:"" counter(lst-ctn-kix_nrrcwey31vi0-3,decimal) ". "}.lst-kix_4lmfa9d5trzd-8>li{counter-increment:lst-ctn-kix_4lmfa9d5trzd-8}.lst-kix_brpwnnkpklch-3>li:before{content:"" counter(lst-ctn-kix_brpwnnkpklch-3,decimal) ". "}.lst-kix_tj9wfyx2g6g6-2>li{counter-increment:lst-ctn-kix_tj9wfyx2g6g6-2}.lst-kix_hi0rwinrlznw-6>li:before{content:"" counter(lst-ctn-kix_hi0rwinrlznw-6,decimal) ". "}.lst-kix_4lmfa9d5trzd-8>li:before{content:"" counter(lst-ctn-kix_4lmfa9d5trzd-8,lower-roman) ". "}.lst-kix_p4xnuclvtdfq-7>li:before{content:"" counter(lst-ctn-kix_p4xnuclvtdfq-7,lower-latin) ". "}.lst-kix_waduenz1mfgd-1>li:before{content:"\0025cb  "}.lst-kix_brpwnnkpklch-1>li:before{content:"" counter(lst-ctn-kix_brpwnnkpklch-1,lower-latin) ". "}.lst-kix_ivg2cuotrsmn-5>li{counter-increment:lst-ctn-kix_ivg2cuotrsmn-5}.lst-kix_yh0juvtigter-7>li{counter-increment:lst-ctn-kix_yh0juvtigter-7}.lst-kix_5qvklmjzc0c1-8>li:before{content:"\0025a0  "}ul.lst-kix_o0ojb8md1tjt-2{list-style-type:none}ul.lst-kix_o0ojb8md1tjt-1{list-style-type:none}ul.lst-kix_o0ojb8md1tjt-0{list-style-type:none}ol.lst-kix_9gd5k2onmye-6.start{counter-reset:lst-ctn-kix_9gd5k2onmye-6 0}ul.lst-kix_o0ojb8md1tjt-8{list-style-type:none}ul.lst-kix_o0ojb8md1tjt-7{list-style-type:none}ul.lst-kix_o0ojb8md1tjt-6{list-style-type:none}ul.lst-kix_o0ojb8md1tjt-5{list-style-type:none}ul.lst-kix_o0ojb8md1tjt-4{list-style-type:none}ul.lst-kix_o0ojb8md1tjt-3{list-style-type:none}ol.lst-kix_4lmfa9d5trzd-2.start{counter-reset:lst-ctn-kix_4lmfa9d5trzd-2 0}.lst-kix_odqytza08vnw-8>li:before{content:"\0025a0  "}.lst-kix_m6n3l31yanm8-8>li{counter-increment:lst-ctn-kix_m6n3l31yanm8-8}ol.lst-kix_edqdphgklxv4-4.start{counter-reset:lst-ctn-kix_edqdphgklxv4-4 0}ol.lst-kix_brpwnnkpklch-2{list-style-type:none}ol.lst-kix_brpwnnkpklch-1{list-style-type:none}ol.lst-kix_brpwnnkpklch-4{list-style-type:none}ol.lst-kix_brpwnnkpklch-3{list-style-type:none}ol.lst-kix_brpwnnkpklch-0{list-style-type:none}ol.lst-kix_ivg2cuotrsmn-1.start{counter-reset:lst-ctn-kix_ivg2cuotrsmn-1 0}.lst-kix_o0ojb8md1tjt-8>li:before{content:"\0025a0  "}.lst-kix_nrrcwey31vi0-5>li:before{content:"" counter(lst-ctn-kix_nrrcwey31vi0-5,lower-roman) ". "}ol.lst-kix_tj9wfyx2g6g6-1.start{counter-reset:lst-ctn-kix_tj9wfyx2g6g6-1 0}.lst-kix_sxcl9nkaveap-2>li:before{content:"\0025a0  "}ol.lst-kix_m6n3l31yanm8-8.start{counter-reset:lst-ctn-kix_m6n3l31yanm8-8 0}.lst-kix_9gd5k2onmye-5>li:before{content:"" counter(lst-ctn-kix_9gd5k2onmye-5,lower-roman) ". "}.lst-kix_yh0juvtigter-5>li:before{content:"" counter(lst-ctn-kix_yh0juvtigter-5,lower-roman) ". "}.lst-kix_9gd5k2onmye-3>li{counter-increment:lst-ctn-kix_9gd5k2onmye-3}.lst-kix_sxcl9nkaveap-1>li:before{content:"\0025cb  "}ol.lst-kix_brpwnnkpklch-7{list-style-type:none}ol.lst-kix_brpwnnkpklch-8{list-style-type:none}.lst-kix_tj9wfyx2g6g6-6>li{counter-increment:lst-ctn-kix_tj9wfyx2g6g6-6}ol.lst-kix_brpwnnkpklch-5{list-style-type:none}ol.lst-kix_swtqs8jd4sfb-3.start{counter-reset:lst-ctn-kix_swtqs8jd4sfb-3 0}ol.lst-kix_brpwnnkpklch-6{list-style-type:none}.lst-kix_4lmfa9d5trzd-6>li:before{content:"" counter(lst-ctn-kix_4lmfa9d5trzd-6,decimal) ". "}ol.lst-kix_nrrcwey31vi0-8.start{counter-reset:lst-ctn-kix_nrrcwey31vi0-8 0}.lst-kix_5hjylykze9b8-8>li:before{content:"\0025a0  "}.lst-kix_hi0rwinrlznw-4>li:before{content:"" counter(lst-ctn-kix_hi0rwinrlznw-4,lower-latin) ". "}ul.lst-kix_xwo4rv7ts9qz-0{list-style-type:none}ol.lst-kix_hi0rwinrlznw-6.start{counter-reset:lst-ctn-kix_hi0rwinrlznw-6 0}ul.lst-kix_xwo4rv7ts9qz-4{list-style-type:none}ol.lst-kix_ivg2cuotrsmn-2.start{counter-reset:lst-ctn-kix_ivg2cuotrsmn-2 0}.lst-kix_4yf2vpczbkfl-5>li:before{content:"\0025a0  "}ul.lst-kix_xwo4rv7ts9qz-3{list-style-type:none}ul.lst-kix_xwo4rv7ts9qz-2{list-style-type:none}ul.lst-kix_xwo4rv7ts9qz-1{list-style-type:none}.lst-kix_p4xnuclvtdfq-5>li:before{content:"" counter(lst-ctn-kix_p4xnuclvtdfq-5,lower-roman) ". "}ul.lst-kix_xwo4rv7ts9qz-8{list-style-type:none}ul.lst-kix_xwo4rv7ts9qz-7{list-style-type:none}ul.lst-kix_xwo4rv7ts9qz-6{list-style-type:none}.lst-kix_5hjylykze9b8-7>li:before{content:"\0025cb  "}.lst-kix_brpwnnkpklch-3>li{counter-increment:lst-ctn-kix_brpwnnkpklch-3}.lst-kix_brpwnnkpklch-6>li:before{content:"" counter(lst-ctn-kix_brpwnnkpklch-6,decimal) ". "}ul.lst-kix_xwo4rv7ts9qz-5{list-style-type:none}.lst-kix_o0ojb8md1tjt-6>li:before{content:"\0025cf  "}.lst-kix_brpwnnkpklch-7>li{counter-increment:lst-ctn-kix_brpwnnkpklch-7}ol.lst-kix_p4xnuclvtdfq-7.start{counter-reset:lst-ctn-kix_p4xnuclvtdfq-7 0}ol.lst-kix_4lmfa9d5trzd-3.start{counter-reset:lst-ctn-kix_4lmfa9d5trzd-3 0}.lst-kix_tj9wfyx2g6g6-1>li:before{content:"" counter(lst-ctn-kix_tj9wfyx2g6g6-1,lower-latin) ". "}.lst-kix_yh0juvtigter-0>li{counter-increment:lst-ctn-kix_yh0juvtigter-0}ol.lst-kix_yh0juvtigter-3.start{counter-reset:lst-ctn-kix_yh0juvtigter-3 0}.lst-kix_mxjmykv476bk-5>li:before{content:"\0025a0  "}.lst-kix_nrrcwey31vi0-4>li{counter-increment:lst-ctn-kix_nrrcwey31vi0-4}.lst-kix_nv52f23a6eq2-7>li{counter-increment:lst-ctn-kix_nv52f23a6eq2-7}ol.lst-kix_t9nzdcwm468u-4.start{counter-reset:lst-ctn-kix_t9nzdcwm468u-4 0}.lst-kix_tj9wfyx2g6g6-1>li{counter-increment:lst-ctn-kix_tj9wfyx2g6g6-1}.lst-kix_ivg2cuotrsmn-2>li{counter-increment:lst-ctn-kix_ivg2cuotrsmn-2}.lst-kix_9gd5k2onmye-2>li{counter-increment:lst-ctn-kix_9gd5k2onmye-2}.lst-kix_urdoyt9ubq3s-6>li:before{content:"\0025cf  "}.lst-kix_mxjmykv476bk-0>li:before{content:"\0025cf  "}.lst-kix_odqytza08vnw-6>li:before{content:"\0025cf  "}.lst-kix_m6n3l31yanm8-3>li{counter-increment:lst-ctn-kix_m6n3l31yanm8-3}.lst-kix_qibc3js0tsci-2>li{counter-increment:lst-ctn-kix_qibc3js0tsci-2}.lst-kix_swtqs8jd4sfb-5>li:before{content:"" counter(lst-ctn-kix_swtqs8jd4sfb-5,lower-roman) ". "}ol.lst-kix_swtqs8jd4sfb-8.start{counter-reset:lst-ctn-kix_swtqs8jd4sfb-8 0}.lst-kix_mxjmykv476bk-4>li:before{content:"\0025cb  "}ol.lst-kix_edqdphgklxv4-5.start{counter-reset:lst-ctn-kix_edqdphgklxv4-5 0}.lst-kix_9gd5k2onmye-0>li{counter-increment:lst-ctn-kix_9gd5k2onmye-0}ol.lst-kix_tj9wfyx2g6g6-2.start{counter-reset:lst-ctn-kix_tj9wfyx2g6g6-2 0}.lst-kix_9gd5k2onmye-0>li:before{content:"" counter(lst-ctn-kix_9gd5k2onmye-0,decimal) ". "}ol.lst-kix_qibc3js0tsci-1.start{counter-reset:lst-ctn-kix_qibc3js0tsci-1 0}ol.lst-kix_9gd5k2onmye-3.start{counter-reset:lst-ctn-kix_9gd5k2onmye-3 0}.lst-kix_ivg2cuotrsmn-8>li:before{content:"" counter(lst-ctn-kix_ivg2cuotrsmn-8,lower-roman) ". "}.lst-kix_brpwnnkpklch-4>li{counter-increment:lst-ctn-kix_brpwnnkpklch-4}.lst-kix_yh0juvtigter-7>li:before{content:"" counter(lst-ctn-kix_yh0juvtigter-7,lower-latin) ". "}.lst-kix_n1ibpjvrx4g3-8>li:before{content:"\0025a0  "}.lst-kix_edqdphgklxv4-7>li{counter-increment:lst-ctn-kix_edqdphgklxv4-7}.lst-kix_4lmfa9d5trzd-0>li{counter-increment:lst-ctn-kix_4lmfa9d5trzd-0}.lst-kix_edqdphgklxv4-0>li:before{content:"" counter(lst-ctn-kix_edqdphgklxv4-0,decimal) ". "}.lst-kix_4lmfa9d5trzd-5>li{counter-increment:lst-ctn-kix_4lmfa9d5trzd-5}.lst-kix_t9nzdcwm468u-6>li:before{content:"" counter(lst-ctn-kix_t9nzdcwm468u-6,decimal) ". "}.lst-kix_mxjmykv476bk-8>li:before{content:"\0025a0  "}ol.lst-kix_nv52f23a6eq2-6.start{counter-reset:lst-ctn-kix_nv52f23a6eq2-6 0}.lst-kix_9gd5k2onmye-4>li:before{content:"" counter(lst-ctn-kix_9gd5k2onmye-4,lower-latin) ". "}.lst-kix_ivg2cuotrsmn-6>li:before{content:"" counter(lst-ctn-kix_ivg2cuotrsmn-6,decimal) ". "}.lst-kix_4yf2vpczbkfl-4>li:before{content:"\0025cb  "}.lst-kix_tj9wfyx2g6g6-0>li{counter-increment:lst-ctn-kix_tj9wfyx2g6g6-0}.lst-kix_yh0juvtigter-8>li{counter-increment:lst-ctn-kix_yh0juvtigter-8}.lst-kix_w0kfp3vv1roa-2>li:before{content:"\0025a0  "}.lst-kix_hi0rwinrlznw-1>li{counter-increment:lst-ctn-kix_hi0rwinrlznw-1}.lst-kix_sxcl9nkaveap-5>li:before{content:"\0025a0  "}.lst-kix_nrrcwey31vi0-8>li:before{content:"" counter(lst-ctn-kix_nrrcwey31vi0-8,lower-roman) ". "}ol.lst-kix_m6n3l31yanm8-2.start{counter-reset:lst-ctn-kix_m6n3l31yanm8-2 0}ol.lst-kix_nrrcwey31vi0-8{list-style-type:none}ol.lst-kix_nv52f23a6eq2-7.start{counter-reset:lst-ctn-kix_nv52f23a6eq2-7 0}ol.lst-kix_nrrcwey31vi0-6.start{counter-reset:lst-ctn-kix_nrrcwey31vi0-6 0}ol.lst-kix_nrrcwey31vi0-7{list-style-type:none}ol.lst-kix_nrrcwey31vi0-6{list-style-type:none}.lst-kix_edqdphgklxv4-6>li{counter-increment:lst-ctn-kix_edqdphgklxv4-6}ol.lst-kix_nrrcwey31vi0-1{list-style-type:none}ol.lst-kix_nrrcwey31vi0-0{list-style-type:none}.lst-kix_o0ojb8md1tjt-3>li:before{content:"\0025cf  "}ol.lst-kix_nrrcwey31vi0-5{list-style-type:none}ol.lst-kix_nrrcwey31vi0-4{list-style-type:none}.lst-kix_mxjmykv476bk-2>li:before{content:"\0025a0  "}ol.lst-kix_nrrcwey31vi0-3{list-style-type:none}ol.lst-kix_nrrcwey31vi0-2{list-style-type:none}.lst-kix_ivg2cuotrsmn-7>li:before{content:"" counter(lst-ctn-kix_ivg2cuotrsmn-7,lower-latin) ". "}.lst-kix_swtqs8jd4sfb-1>li:before{content:"" counter(lst-ctn-kix_swtqs8jd4sfb-1,lower-latin) ". "}ol.lst-kix_9gd5k2onmye-7.start{counter-reset:lst-ctn-kix_9gd5k2onmye-7 0}.lst-kix_p4xnuclvtdfq-4>li:before{content:"" counter(lst-ctn-kix_p4xnuclvtdfq-4,lower-latin) ". "}.lst-kix_sxcl9nkaveap-3>li:before{content:"\0025cf  "}.lst-kix_3xsv2kn12h6y-5>li:before{content:"\0025a0  "}.lst-kix_urdoyt9ubq3s-5>li:before{content:"\0025a0  "}.lst-kix_nrrcwey31vi0-5>li{counter-increment:lst-ctn-kix_nrrcwey31vi0-5}.lst-kix_qibc3js0tsci-1>li{counter-increment:lst-ctn-kix_qibc3js0tsci-1}.lst-kix_p4xnuclvtdfq-8>li{counter-increment:lst-ctn-kix_p4xnuclvtdfq-8}ol.lst-kix_brpwnnkpklch-4.start{counter-reset:lst-ctn-kix_brpwnnkpklch-4 0}.lst-kix_w0kfp3vv1roa-4>li:before{content:"\0025cb  "}.lst-kix_hi0rwinrlznw-0>li:before{content:"" counter(lst-ctn-kix_hi0rwinrlznw-0,decimal) ". "}.lst-kix_edqdphgklxv4-8>li{counter-increment:lst-ctn-kix_edqdphgklxv4-8}ol.lst-kix_swtqs8jd4sfb-8{list-style-type:none}ol.lst-kix_swtqs8jd4sfb-5{list-style-type:none}.lst-kix_3xsv2kn12h6y-3>li:before{content:"\0025cf  "}ol.lst-kix_swtqs8jd4sfb-4{list-style-type:none}ol.lst-kix_swtqs8jd4sfb-7{list-style-type:none}ol.lst-kix_swtqs8jd4sfb-6{list-style-type:none}ol.lst-kix_swtqs8jd4sfb-1{list-style-type:none}ol.lst-kix_swtqs8jd4sfb-0{list-style-type:none}ol.lst-kix_swtqs8jd4sfb-3{list-style-type:none}.lst-kix_mxjmykv476bk-1>li:before{content:"\0025cb  "}ol.lst-kix_m6n3l31yanm8-3.start{counter-reset:lst-ctn-kix_m6n3l31yanm8-3 0}ol.lst-kix_swtqs8jd4sfb-2{list-style-type:none}.lst-kix_3xsv2kn12h6y-0>li:before{content:"\0025cf  "}ol.lst-kix_ivg2cuotrsmn-0.start{counter-reset:lst-ctn-kix_ivg2cuotrsmn-0 0}.lst-kix_p4xnuclvtdfq-3>li:before{content:"" counter(lst-ctn-kix_p4xnuclvtdfq-3,decimal) ". "}.lst-kix_hi0rwinrlznw-8>li{counter-increment:lst-ctn-kix_hi0rwinrlznw-8}.lst-kix_o0ojb8md1tjt-7>li:before{content:"\0025cb  "}.lst-kix_w0kfp3vv1roa-3>li:before{content:"\0025cf  "}ol.lst-kix_nv52f23a6eq2-1.start{counter-reset:lst-ctn-kix_nv52f23a6eq2-1 0}ol.lst-kix_qibc3js0tsci-5.start{counter-reset:lst-ctn-kix_qibc3js0tsci-5 0}.lst-kix_brpwnnkpklch-4>li:before{content:"" counter(lst-ctn-kix_brpwnnkpklch-4,lower-latin) ". "}ol.lst-kix_p4xnuclvtdfq-0.start{counter-reset:lst-ctn-kix_p4xnuclvtdfq-0 0}.lst-kix_xwo4rv7ts9qz-1>li:before{content:"\0025cb  "}.lst-kix_j1vik6wjarhd-6>li:before{content:"\0025cf  "}ol.lst-kix_4lmfa9d5trzd-4.start{counter-reset:lst-ctn-kix_4lmfa9d5trzd-4 0}ol.lst-kix_hi0rwinrlznw-0.start{counter-reset:lst-ctn-kix_hi0rwinrlznw-0 0}.lst-kix_j1vik6wjarhd-5>li:before{content:"\0025a0  "}.lst-kix_ivg2cuotrsmn-0>li:before{content:"" counter(lst-ctn-kix_ivg2cuotrsmn-0,decimal) ". "}ol.lst-kix_nrrcwey31vi0-7.start{counter-reset:lst-ctn-kix_nrrcwey31vi0-7 0}.lst-kix_qibc3js0tsci-3>li:before{content:"" counter(lst-ctn-kix_qibc3js0tsci-3,decimal) ". "}.lst-kix_hi0rwinrlznw-8>li:before{content:"" counter(lst-ctn-kix_hi0rwinrlznw-8,lower-roman) ". "}.lst-kix_nrrcwey31vi0-2>li:before{content:"" counter(lst-ctn-kix_nrrcwey31vi0-2,lower-roman) ". "}ol.lst-kix_hi0rwinrlznw-3.start{counter-reset:lst-ctn-kix_hi0rwinrlznw-3 0}.lst-kix_myukvtuabqpd-0>li:before{content:"\0025cf  "}.lst-kix_9gd5k2onmye-7>li:before{content:"" counter(lst-ctn-kix_9gd5k2onmye-7,lower-latin) ". "}ol.lst-kix_swtqs8jd4sfb-1.start{counter-reset:lst-ctn-kix_swtqs8jd4sfb-1 0}ol.lst-kix_edqdphgklxv4-7.start{counter-reset:lst-ctn-kix_edqdphgklxv4-7 0}.lst-kix_swtqs8jd4sfb-6>li:before{content:"" counter(lst-ctn-kix_swtqs8jd4sfb-6,decimal) ". "}ol.lst-kix_4lmfa9d5trzd-0.start{counter-reset:lst-ctn-kix_4lmfa9d5trzd-0 0}.lst-kix_brpwnnkpklch-1>li{counter-increment:lst-ctn-kix_brpwnnkpklch-1}ol.lst-kix_p4xnuclvtdfq-3.start{counter-reset:lst-ctn-kix_p4xnuclvtdfq-3 0}.lst-kix_tj9wfyx2g6g6-5>li{counter-increment:lst-ctn-kix_tj9wfyx2g6g6-5}ol.lst-kix_m6n3l31yanm8-7.start{counter-reset:lst-ctn-kix_m6n3l31yanm8-7 0}.lst-kix_nv52f23a6eq2-0>li{counter-increment:lst-ctn-kix_nv52f23a6eq2-0}ol.lst-kix_hi0rwinrlznw-8.start{counter-reset:lst-ctn-kix_hi0rwinrlznw-8 0}ol.lst-kix_p4xnuclvtdfq-1.start{counter-reset:lst-ctn-kix_p4xnuclvtdfq-1 0}.lst-kix_3xsv2kn12h6y-2>li:before{content:"\0025a0  "}.lst-kix_m6n3l31yanm8-0>li{counter-increment:lst-ctn-kix_m6n3l31yanm8-0}ol.lst-kix_edqdphgklxv4-0.start{counter-reset:lst-ctn-kix_edqdphgklxv4-0 0}.lst-kix_qibc3js0tsci-4>li{counter-increment:lst-ctn-kix_qibc3js0tsci-4}.lst-kix_odqytza08vnw-2>li:before{content:"\0025a0  "}.lst-kix_edqdphgklxv4-4>li{counter-increment:lst-ctn-kix_edqdphgklxv4-4}ol.lst-kix_hi0rwinrlznw-7.start{counter-reset:lst-ctn-kix_hi0rwinrlznw-7 0}.lst-kix_m6n3l31yanm8-5>li:before{content:"" counter(lst-ctn-kix_m6n3l31yanm8-5,lower-roman) ". "}.lst-kix_4lmfa9d5trzd-3>li:before{content:"" counter(lst-ctn-kix_4lmfa9d5trzd-3,decimal) ". "}.lst-kix_o0ojb8md1tjt-4>li:before{content:"\0025cb  "}.lst-kix_yh0juvtigter-6>li:before{content:"" counter(lst-ctn-kix_yh0juvtigter-6,decimal) ". "}.lst-kix_t9nzdcwm468u-1>li:before{content:"" counter(lst-ctn-kix_t9nzdcwm468u-1,lower-latin) ". "}.lst-kix_t9nzdcwm468u-3>li:before{content:"" counter(lst-ctn-kix_t9nzdcwm468u-3,decimal) ". "}.lst-kix_ivg2cuotrsmn-1>li:before{content:"" counter(lst-ctn-kix_ivg2cuotrsmn-1,lower-latin) ". "}ol.lst-kix_p4xnuclvtdfq-8.start{counter-reset:lst-ctn-kix_p4xnuclvtdfq-8 0}.lst-kix_ivg2cuotrsmn-1>li{counter-increment:lst-ctn-kix_ivg2cuotrsmn-1}.lst-kix_4yf2vpczbkfl-7>li:before{content:"\0025cb  "}ol.lst-kix_ivg2cuotrsmn-7.start{counter-reset:lst-ctn-kix_ivg2cuotrsmn-7 0}.lst-kix_n1ibpjvrx4g3-7>li:before{content:"\0025cb  "}ol.lst-kix_nrrcwey31vi0-3.start{counter-reset:lst-ctn-kix_nrrcwey31vi0-3 0}.lst-kix_3xsv2kn12h6y-8>li:before{content:"\0025a0  "}ol.lst-kix_yh0juvtigter-5.start{counter-reset:lst-ctn-kix_yh0juvtigter-5 0}.lst-kix_qibc3js0tsci-6>li:before{content:"" counter(lst-ctn-kix_qibc3js0tsci-6,decimal) ". "}ol.lst-kix_9gd5k2onmye-8.start{counter-reset:lst-ctn-kix_9gd5k2onmye-8 0}.lst-kix_fbuo614ks7sr-4>li:before{content:"\0025cb  "}.lst-kix_brpwnnkpklch-0>li:before{content:"" counter(lst-ctn-kix_brpwnnkpklch-0,decimal) ". "}.lst-kix_t9nzdcwm468u-8>li:before{content:"" counter(lst-ctn-kix_t9nzdcwm468u-8,lower-roman) ". "}.lst-kix_nv52f23a6eq2-0>li:before{content:"" counter(lst-ctn-kix_nv52f23a6eq2-0,decimal) ". "}ol.lst-kix_nv52f23a6eq2-3.start{counter-reset:lst-ctn-kix_nv52f23a6eq2-3 0}.lst-kix_odqytza08vnw-4>li:before{content:"\0025cb  "}.lst-kix_edqdphgklxv4-0>li{counter-increment:lst-ctn-kix_edqdphgklxv4-0}.lst-kix_o0ojb8md1tjt-0>li:before{content:"\0025cf  "}.lst-kix_brpwnnkpklch-6>li{counter-increment:lst-ctn-kix_brpwnnkpklch-6}.lst-kix_p4xnuclvtdfq-2>li{counter-increment:lst-ctn-kix_p4xnuclvtdfq-2}ol.lst-kix_t9nzdcwm468u-8.start{counter-reset:lst-ctn-kix_t9nzdcwm468u-8 0}.lst-kix_sxcl9nkaveap-8>li:before{content:"\0025a0  "}ol.lst-kix_t9nzdcwm468u-1.start{counter-reset:lst-ctn-kix_t9nzdcwm468u-1 0}ol.lst-kix_hi0rwinrlznw-5.start{counter-reset:lst-ctn-kix_hi0rwinrlznw-5 0}ol.lst-kix_9gd5k2onmye-2.start{counter-reset:lst-ctn-kix_9gd5k2onmye-2 0}ol.lst-kix_t9nzdcwm468u-5.start{counter-reset:lst-ctn-kix_t9nzdcwm468u-5 0}.lst-kix_j1vik6wjarhd-0>li:before{content:"\0025cf  "}ol.lst-kix_brpwnnkpklch-2.start{counter-reset:lst-ctn-kix_brpwnnkpklch-2 0}.lst-kix_urdoyt9ubq3s-0>li:before{content:"\0025cf  "}.lst-kix_9gd5k2onmye-8>li:before{content:"" counter(lst-ctn-kix_9gd5k2onmye-8,lower-roman) ". "}.lst-kix_5qvklmjzc0c1-1>li:before{content:"\0025cb  "}.lst-kix_5hjylykze9b8-4>li:before{content:"\0025cb  "}ul.lst-kix_5hjylykze9b8-5{list-style-type:none}ol.lst-kix_p4xnuclvtdfq-5{list-style-type:none}ul.lst-kix_5hjylykze9b8-6{list-style-type:none}ol.lst-kix_p4xnuclvtdfq-4{list-style-type:none}.lst-kix_myukvtuabqpd-3>li:before{content:"\0025cf  "}ul.lst-kix_5hjylykze9b8-7{list-style-type:none}ol.lst-kix_p4xnuclvtdfq-3{list-style-type:none}ul.lst-kix_5hjylykze9b8-8{list-style-type:none}ol.lst-kix_p4xnuclvtdfq-2{list-style-type:none}.lst-kix_hi0rwinrlznw-2>li{counter-increment:lst-ctn-kix_hi0rwinrlznw-2}ul.lst-kix_5hjylykze9b8-1{list-style-type:none}ul.lst-kix_5hjylykze9b8-2{list-style-type:none}ol.lst-kix_p4xnuclvtdfq-8{list-style-type:none}ul.lst-kix_5hjylykze9b8-3{list-style-type:none}ol.lst-kix_p4xnuclvtdfq-7{list-style-type:none}ul.lst-kix_5hjylykze9b8-4{list-style-type:none}ol.lst-kix_p4xnuclvtdfq-6{list-style-type:none}.lst-kix_t9nzdcwm468u-1>li{counter-increment:lst-ctn-kix_t9nzdcwm468u-1}ol.lst-kix_ivg2cuotrsmn-3.start{counter-reset:lst-ctn-kix_ivg2cuotrsmn-3 0}ol.lst-kix_edqdphgklxv4-3.start{counter-reset:lst-ctn-kix_edqdphgklxv4-3 0}ul.lst-kix_5hjylykze9b8-0{list-style-type:none}ol.lst-kix_p4xnuclvtdfq-1{list-style-type:none}ol.lst-kix_p4xnuclvtdfq-0{list-style-type:none}.lst-kix_swtqs8jd4sfb-7>li:before{content:"" counter(lst-ctn-kix_swtqs8jd4sfb-7,lower-latin) ". "}.lst-kix_xwo4rv7ts9qz-6>li:before{content:"\0025cf  "}ul.lst-kix_myukvtuabqpd-8{list-style-type:none}ul.lst-kix_myukvtuabqpd-7{list-style-type:none}ul.lst-kix_myukvtuabqpd-6{list-style-type:none}.lst-kix_4yf2vpczbkfl-0>li:before{content:"\0025cf  "}ul.lst-kix_myukvtuabqpd-5{list-style-type:none}ul.lst-kix_myukvtuabqpd-4{list-style-type:none}ul.lst-kix_myukvtuabqpd-3{list-style-type:none}ul.lst-kix_myukvtuabqpd-2{list-style-type:none}ol.lst-kix_yh0juvtigter-7.start{counter-reset:lst-ctn-kix_yh0juvtigter-7 0}.lst-kix_yh0juvtigter-6>li{counter-increment:lst-ctn-kix_yh0juvtigter-6}ol.lst-kix_p4xnuclvtdfq-6.start{counter-reset:lst-ctn-kix_p4xnuclvtdfq-6 0}ul.lst-kix_myukvtuabqpd-0{list-style-type:none}ul.lst-kix_myukvtuabqpd-1{list-style-type:none}.lst-kix_edqdphgklxv4-5>li{counter-increment:lst-ctn-kix_edqdphgklxv4-5}.lst-kix_waduenz1mfgd-7>li:before{content:"\0025cb  "}.lst-kix_brpwnnkpklch-8>li:before{content:"" counter(lst-ctn-kix_brpwnnkpklch-8,lower-roman) ". "}ol.lst-kix_m6n3l31yanm8-1.start{counter-reset:lst-ctn-kix_m6n3l31yanm8-1 0}.lst-kix_fbuo614ks7sr-3>li:before{content:"\0025cf  "}.lst-kix_4lmfa9d5trzd-7>li:before{content:"" counter(lst-ctn-kix_4lmfa9d5trzd-7,lower-latin) ". "}ol.lst-kix_4lmfa9d5trzd-1.start{counter-reset:lst-ctn-kix_4lmfa9d5trzd-1 0}.lst-kix_ivg2cuotrsmn-5>li:before{content:"" counter(lst-ctn-kix_ivg2cuotrsmn-5,lower-roman) ". "}.lst-kix_swtqs8jd4sfb-0>li:before{content:"" counter(lst-ctn-kix_swtqs8jd4sfb-0,decimal) ". "}ol.lst-kix_brpwnnkpklch-5.start{counter-reset:lst-ctn-kix_brpwnnkpklch-5 0}.lst-kix_qibc3js0tsci-6>li{counter-increment:lst-ctn-kix_qibc3js0tsci-6}.lst-kix_4lmfa9d5trzd-4>li{counter-increment:lst-ctn-kix_4lmfa9d5trzd-4}.lst-kix_nv52f23a6eq2-6>li:before{content:"" counter(lst-ctn-kix_nv52f23a6eq2-6,decimal) ". "}.lst-kix_qibc3js0tsci-2>li:before{content:"" counter(lst-ctn-kix_qibc3js0tsci-2,lower-roman) ". "}ol.lst-kix_nv52f23a6eq2-8{list-style-type:none}.lst-kix_tj9wfyx2g6g6-7>li:before{content:"" counter(lst-ctn-kix_tj9wfyx2g6g6-7,lower-latin) ". "}.lst-kix_qibc3js0tsci-8>li{counter-increment:lst-ctn-kix_qibc3js0tsci-8}.lst-kix_waduenz1mfgd-8>li:before{content:"\0025a0  "}ol.lst-kix_yh0juvtigter-8.start{counter-reset:lst-ctn-kix_yh0juvtigter-8 0}ol.lst-kix_nv52f23a6eq2-4.start{counter-reset:lst-ctn-kix_nv52f23a6eq2-4 0}.lst-kix_m6n3l31yanm8-1>li{counter-increment:lst-ctn-kix_m6n3l31yanm8-1}.lst-kix_4lmfa9d5trzd-2>li:before{content:"" counter(lst-ctn-kix_4lmfa9d5trzd-2,lower-roman) ". "}ol.lst-kix_nv52f23a6eq2-6{list-style-type:none}ol.lst-kix_nv52f23a6eq2-7{list-style-type:none}ol.lst-kix_nv52f23a6eq2-4{list-style-type:none}.lst-kix_yh0juvtigter-4>li:before{content:"" counter(lst-ctn-kix_yh0juvtigter-4,lower-latin) ". "}ol.lst-kix_nv52f23a6eq2-5{list-style-type:none}ol.lst-kix_nv52f23a6eq2-2{list-style-type:none}ol.lst-kix_nv52f23a6eq2-3{list-style-type:none}ol.lst-kix_nv52f23a6eq2-0{list-style-type:none}ol.lst-kix_nv52f23a6eq2-1{list-style-type:none}.lst-kix_nv52f23a6eq2-2>li{counter-increment:lst-ctn-kix_nv52f23a6eq2-2}ol.lst-kix_swtqs8jd4sfb-7.start{counter-reset:lst-ctn-kix_swtqs8jd4sfb-7 0}.lst-kix_j1vik6wjarhd-2>li:before{content:"\0025a0  "}.lst-kix_waduenz1mfgd-0>li:before{content:"\0025cf  "}ol.lst-kix_m6n3l31yanm8-5.start{counter-reset:lst-ctn-kix_m6n3l31yanm8-5 0}.lst-kix_5qvklmjzc0c1-6>li:before{content:"\0025cf  "}.lst-kix_o0ojb8md1tjt-2>li:before{content:"\0025a0  "}.lst-kix_yh0juvtigter-1>li{counter-increment:lst-ctn-kix_yh0juvtigter-1}.lst-kix_qibc3js0tsci-8>li:before{content:"" counter(lst-ctn-kix_qibc3js0tsci-8,lower-roman) ". "}.lst-kix_swtqs8jd4sfb-7>li{counter-increment:lst-ctn-kix_swtqs8jd4sfb-7}ol.lst-kix_4lmfa9d5trzd-8.start{counter-reset:lst-ctn-kix_4lmfa9d5trzd-8 0}.lst-kix_p4xnuclvtdfq-2>li:before{content:"" counter(lst-ctn-kix_p4xnuclvtdfq-2,lower-roman) ". "}.lst-kix_hi0rwinrlznw-7>li{counter-increment:lst-ctn-kix_hi0rwinrlznw-7}.lst-kix_nrrcwey31vi0-7>li:before{content:"" counter(lst-ctn-kix_nrrcwey31vi0-7,lower-latin) ". "}.lst-kix_9gd5k2onmye-4>li{counter-increment:lst-ctn-kix_9gd5k2onmye-4}.lst-kix_hi0rwinrlznw-6>li{counter-increment:lst-ctn-kix_hi0rwinrlznw-6}ul.lst-kix_3xsv2kn12h6y-6{list-style-type:none}ul.lst-kix_3xsv2kn12h6y-7{list-style-type:none}ul.lst-kix_3xsv2kn12h6y-4{list-style-type:none}ul.lst-kix_3xsv2kn12h6y-5{list-style-type:none}.lst-kix_yh0juvtigter-0>li:before{content:"" counter(lst-ctn-kix_yh0juvtigter-0,decimal) ". "}ul.lst-kix_3xsv2kn12h6y-8{list-style-type:none}.lst-kix_odqytza08vnw-5>li:before{content:"\0025a0  "}.lst-kix_edqdphgklxv4-3>li:before{content:"" counter(lst-ctn-kix_edqdphgklxv4-3,decimal) ". "}.lst-kix_ivg2cuotrsmn-3>li{counter-increment:lst-ctn-kix_ivg2cuotrsmn-3}.lst-kix_ivg2cuotrsmn-4>li{counter-increment:lst-ctn-kix_ivg2cuotrsmn-4}.lst-kix_w0kfp3vv1roa-8>li:before{content:"\0025a0  "}ol.lst-kix_m6n3l31yanm8-0.start{counter-reset:lst-ctn-kix_m6n3l31yanm8-0 0}.lst-kix_edqdphgklxv4-3>li{counter-increment:lst-ctn-kix_edqdphgklxv4-3}.lst-kix_nv52f23a6eq2-5>li{counter-increment:lst-ctn-kix_nv52f23a6eq2-5}.lst-kix_swtqs8jd4sfb-6>li{counter-increment:lst-ctn-kix_swtqs8jd4sfb-6}ul.lst-kix_3xsv2kn12h6y-1{list-style-type:none}ul.lst-kix_3xsv2kn12h6y-0{list-style-type:none}ul.lst-kix_3xsv2kn12h6y-3{list-style-type:none}.lst-kix_nv52f23a6eq2-5>li:before{content:"" counter(lst-ctn-kix_nv52f23a6eq2-5,lower-roman) ". "}ul.lst-kix_3xsv2kn12h6y-2{list-style-type:none}.lst-kix_4lmfa9d5trzd-7>li{counter-increment:lst-ctn-kix_4lmfa9d5trzd-7}.lst-kix_w0kfp3vv1roa-1>li:before{content:"\0025cb  "}.lst-kix_brpwnnkpklch-2>li:before{content:"" counter(lst-ctn-kix_brpwnnkpklch-2,lower-roman) ". "}.lst-kix_p4xnuclvtdfq-6>li:before{content:"" counter(lst-ctn-kix_p4xnuclvtdfq-6,decimal) ". "}.lst-kix_swtqs8jd4sfb-3>li{counter-increment:lst-ctn-kix_swtqs8jd4sfb-3}.lst-kix_yh0juvtigter-3>li{counter-increment:lst-ctn-kix_yh0juvtigter-3}ul.lst-kix_odqytza08vnw-4{list-style-type:none}ol.lst-kix_qibc3js0tsci-0.start{counter-reset:lst-ctn-kix_qibc3js0tsci-0 0}ul.lst-kix_odqytza08vnw-5{list-style-type:none}ul.lst-kix_odqytza08vnw-6{list-style-type:none}ul.lst-kix_odqytza08vnw-7{list-style-type:none}ul.lst-kix_odqytza08vnw-0{list-style-type:none}ul.lst-kix_odqytza08vnw-1{list-style-type:none}ul.lst-kix_odqytza08vnw-2{list-style-type:none}ul.lst-kix_odqytza08vnw-3{list-style-type:none}ol.lst-kix_ivg2cuotrsmn-2{list-style-type:none}ol.lst-kix_ivg2cuotrsmn-3{list-style-type:none}ol.lst-kix_ivg2cuotrsmn-4{list-style-type:none}ol.lst-kix_ivg2cuotrsmn-5{list-style-type:none}.lst-kix_nv52f23a6eq2-1>li{counter-increment:lst-ctn-kix_nv52f23a6eq2-1}ol.lst-kix_ivg2cuotrsmn-0{list-style-type:none}ol.lst-kix_ivg2cuotrsmn-1{list-style-type:none}ul.lst-kix_odqytza08vnw-8{list-style-type:none}.lst-kix_xwo4rv7ts9qz-4>li:before{content:"\0025cb  "}.lst-kix_5hjylykze9b8-6>li:before{content:"\0025cf  "}.lst-kix_mxjmykv476bk-3>li:before{content:"\0025cf  "}.lst-kix_4lmfa9d5trzd-1>li{counter-increment:lst-ctn-kix_4lmfa9d5trzd-1}ol.lst-kix_nrrcwey31vi0-4.start{counter-reset:lst-ctn-kix_nrrcwey31vi0-4 0}.lst-kix_ivg2cuotrsmn-8>li{counter-increment:lst-ctn-kix_ivg2cuotrsmn-8}ol.lst-kix_ivg2cuotrsmn-7{list-style-type:none}ol.lst-kix_ivg2cuotrsmn-6{list-style-type:none}.lst-kix_9gd5k2onmye-6>li:before{content:"" counter(lst-ctn-kix_9gd5k2onmye-6,decimal) ". "}ol.lst-kix_ivg2cuotrsmn-8{list-style-type:none}ol.lst-kix_tj9wfyx2g6g6-8{list-style-type:none}ol.lst-kix_ivg2cuotrsmn-6.start{counter-reset:lst-ctn-kix_ivg2cuotrsmn-6 0}ol.lst-kix_swtqs8jd4sfb-4.start{counter-reset:lst-ctn-kix_swtqs8jd4sfb-4 0}ol.lst-kix_yh0juvtigter-6.start{counter-reset:lst-ctn-kix_yh0juvtigter-6 0}.lst-kix_4lmfa9d5trzd-3>li{counter-increment:lst-ctn-kix_4lmfa9d5trzd-3}.lst-kix_t9nzdcwm468u-2>li{counter-increment:lst-ctn-kix_t9nzdcwm468u-2}.lst-kix_t9nzdcwm468u-6>li{counter-increment:lst-ctn-kix_t9nzdcwm468u-6}.lst-kix_t9nzdcwm468u-3>li{counter-increment:lst-ctn-kix_t9nzdcwm468u-3}.lst-kix_nrrcwey31vi0-3>li{counter-increment:lst-ctn-kix_nrrcwey31vi0-3}ol.lst-kix_edqdphgklxv4-7{list-style-type:none}ol.lst-kix_t9nzdcwm468u-0{list-style-type:none}ol.lst-kix_edqdphgklxv4-8{list-style-type:none}.lst-kix_brpwnnkpklch-5>li:before{content:"" counter(lst-ctn-kix_brpwnnkpklch-5,lower-roman) ". "}ol.lst-kix_t9nzdcwm468u-1{list-style-type:none}ol.lst-kix_brpwnnkpklch-8.start{counter-reset:lst-ctn-kix_brpwnnkpklch-8 0}.lst-kix_nrrcwey31vi0-1>li:before{content:"" counter(lst-ctn-kix_nrrcwey31vi0-1,lower-latin) ". "}ol.lst-kix_edqdphgklxv4-3{list-style-type:none}ol.lst-kix_m6n3l31yanm8-6.start{counter-reset:lst-ctn-kix_m6n3l31yanm8-6 0}ol.lst-kix_edqdphgklxv4-4{list-style-type:none}ol.lst-kix_edqdphgklxv4-5{list-style-type:none}ol.lst-kix_edqdphgklxv4-6{list-style-type:none}.lst-kix_p4xnuclvtdfq-4>li{counter-increment:lst-ctn-kix_p4xnuclvtdfq-4}.lst-kix_4lmfa9d5trzd-2>li{counter-increment:lst-ctn-kix_4lmfa9d5trzd-2}.lst-kix_edqdphgklxv4-1>li{counter-increment:lst-ctn-kix_edqdphgklxv4-1}ol.lst-kix_edqdphgklxv4-0{list-style-type:none}ol.lst-kix_edqdphgklxv4-1{list-style-type:none}ol.lst-kix_edqdphgklxv4-2{list-style-type:none}.lst-kix_t9nzdcwm468u-0>li:before{content:"" counter(lst-ctn-kix_t9nzdcwm468u-0,decimal) ". "}ol.lst-kix_tj9wfyx2g6g6-3{list-style-type:none}ol.lst-kix_tj9wfyx2g6g6-2{list-style-type:none}.lst-kix_n1ibpjvrx4g3-4>li:before{content:"\0025cb  "}ol.lst-kix_tj9wfyx2g6g6-1{list-style-type:none}ol.lst-kix_tj9wfyx2g6g6-0{list-style-type:none}ol.lst-kix_tj9wfyx2g6g6-7{list-style-type:none}.lst-kix_yh0juvtigter-8>li:before{content:"" counter(lst-ctn-kix_yh0juvtigter-8,lower-roman) ". "}ol.lst-kix_tj9wfyx2g6g6-6{list-style-type:none}ol.lst-kix_tj9wfyx2g6g6-5{list-style-type:none}ol.lst-kix_tj9wfyx2g6g6-4{list-style-type:none}.lst-kix_nrrcwey31vi0-2>li{counter-increment:lst-ctn-kix_nrrcwey31vi0-2}.lst-kix_5qvklmjzc0c1-3>li:before{content:"\0025cf  "}.lst-kix_tj9wfyx2g6g6-5>li:before{content:"" counter(lst-ctn-kix_tj9wfyx2g6g6-5,lower-roman) ". "}.lst-kix_4yf2vpczbkfl-1>li:before{content:"\0025cb  "}.lst-kix_ivg2cuotrsmn-3>li:before{content:"" counter(lst-ctn-kix_ivg2cuotrsmn-3,decimal) ". "}.lst-kix_j1vik6wjarhd-4>li:before{content:"\0025cb  "}ol.lst-kix_t9nzdcwm468u-7{list-style-type:none}ol.lst-kix_t9nzdcwm468u-6{list-style-type:none}ol.lst-kix_t9nzdcwm468u-8{list-style-type:none}ol.lst-kix_t9nzdcwm468u-3{list-style-type:none}ol.lst-kix_t9nzdcwm468u-2{list-style-type:none}ol.lst-kix_t9nzdcwm468u-5{list-style-type:none}ol.lst-kix_ivg2cuotrsmn-5.start{counter-reset:lst-ctn-kix_ivg2cuotrsmn-5 0}ol.lst-kix_t9nzdcwm468u-4{list-style-type:none}.lst-kix_brpwnnkpklch-2>li{counter-increment:lst-ctn-kix_brpwnnkpklch-2}.lst-kix_myukvtuabqpd-1>li:before{content:"\0025cb  "}.lst-kix_waduenz1mfgd-4>li:before{content:"\0025cb  "}.lst-kix_swtqs8jd4sfb-4>li:before{content:"" counter(lst-ctn-kix_swtqs8jd4sfb-4,lower-latin) ". "}.lst-kix_3xsv2kn12h6y-1>li:before{content:"\0025cb  "}.lst-kix_swtqs8jd4sfb-8>li{counter-increment:lst-ctn-kix_swtqs8jd4sfb-8}.lst-kix_myukvtuabqpd-6>li:before{content:"\0025cf  "}.lst-kix_urdoyt9ubq3s-2>li:before{content:"\0025a0  "}.lst-kix_xwo4rv7ts9qz-8>li:before{content:"\0025a0  "}.lst-kix_m6n3l31yanm8-6>li:before{content:"" counter(lst-ctn-kix_m6n3l31yanm8-6,decimal) ". "}ol.lst-kix_tj9wfyx2g6g6-5.start{counter-reset:lst-ctn-kix_tj9wfyx2g6g6-5 0}ol{margin:0;padding:0}.c13{vertical-align:top;width:155.2pt;border-style:solid;border-color:#000000;border-width:1pt;padding:5pt 5pt 5pt 5pt}.c69{vertical-align:top;width:234pt;border-style:solid;border-color:#ffffff;border-width:1pt;padding:5pt 5pt 5pt 5pt}.c70{vertical-align:middle;width:234pt;border-style:solid;border-color:#ffffff;border-width:1pt;padding:5pt 5pt 5pt 5pt}.c39{vertical-align:top;width:330pt;border-style:solid;border-color:#000000;border-width:1pt;padding:5pt 5pt 5pt 5pt}.c26{vertical-align:top;width:312.8pt;border-style:solid;border-color:#000000;border-width:1pt;padding:5pt 5pt 5pt 5pt}.c2{line-height:1.15;padding-top:0pt;height:11pt;text-align:left;direction:ltr;padding-bottom:0pt}.c41{vertical-align:top;width:138pt;border-style:solid;border-color:#000000;border-width:1pt;padding:5pt 5pt 5pt 5pt}.c1{vertical-align:top;width:156pt;border-style:solid;border-color:#000000;border-width:1pt;padding:5pt 5pt 5pt 5pt}.c40{vertical-align:baseline;color:#000000;font-style:normal;font-family:"Arial";text-decoration:none}.c21{line-height:1.15;padding-top:0pt;text-align:left;padding-bottom:0pt}.c33{font-size:12pt;background-color:#f8f8ff;font-family:"Verdana"}.c55{margin-right:auto;border-collapse:collapse}.c18{line-height:1.0;padding-top:0pt;padding-bottom:0pt}.c15{color:inherit;text-decoration:inherit}.c32{text-align:center;margin-left:11pt}.c4{color:#4444ff;font-weight:bold}.c17{font-size:11pt;font-weight:normal}.c37{padding-top:18pt;padding-bottom:4pt}.c28{line-height:1.15;text-align:center}.c75{font-size:48pt;font-family:"Verdana"}.c49{padding-top:14pt;padding-bottom:4pt}.c67{max-width:468pt;padding:72pt 72pt 72pt 72pt}.c31{margin-right:19pt;margin-left:19pt}.c23{padding-top:24pt;padding-bottom:6pt}.c6{color:#999999;font-weight:bold}.c61{line-height:1.0;text-align:center}.c45{margin:0;padding:0}.c29{height:1px;width:33%}.c62{font-size:13pt;font-family:"Trebuchet MS"}.c25{padding-top:0pt;padding-bottom:0pt}.c8{color:#1155cc;text-decoration:underline}.c47{color:#000080}.c3{direction:ltr}.c60{color:#008080}.c51{text-align:right}.c64{line-height:1.0}.c30{text-align:left}.c0{color:#2040a0}.c16{background-color:#ffffff}.c48{height:18pt}.c73{font-weight:normal}.c20{padding-left:0pt}.c36{text-decoration:underline}.c77{text-align:center}.c63{height:24pt}.c9{font-weight:bold}.c38{font-size:14pt}.c46{font-size:12pt}.c35{margin-left:18pt}.c56{font-style:italic}.c42{height:0pt}.c10{color:#999999}.c57{font-family:"Arial Black"}.c43{font-size:10pt}.c50{margin-left:54pt}.c5{height:11pt}.c19{color:#909090}.c58{vertical-align:baseline}.c76{margin-right:19pt}.c59{color:#77dd77}.c7{color:#4444ff}.c72{padding-top:4pt}.c22{color:#008000}.c71{text-align:justify}.c53{margin-right:11pt}.c52{font-family:"Times New Roman"}.c24{font-size:18pt}.c66{padding-top:10pt}.c65{line-height:1.15}.c44{color:#dd1144}.c68{color:#666666}.c74{padding-top:14pt}.c27{color:#0000ff}.c14{color:#ff0000}.c34{margin-left:72pt}.c11{color:#444444}.c54{color:#1155cc}.c12{margin-left:36pt}.title{padding-top:24pt;line-height:1.15;text-align:left;color:#000000;font-size:36pt;font-family:"Arial";font-weight:bold;padding-bottom:6pt}.subtitle{padding-top:18pt;line-height:1.15;text-align:left;color:#666666;font-style:italic;font-size:24pt;font-family:"Georgia";padding-bottom:4pt}li{color:#000000;font-size:11pt;font-family:"Arial"}p{color:#000000;font-size:11pt;margin:0;font-family:"Arial"}h1{padding-top:24pt;line-height:1.15;text-align:left;color:#000000;font-size:24pt;font-family:"Arial";font-weight:bold;padding-bottom:6pt}h2{padding-top:18pt;line-height:1.15;text-align:left;color:#000000;font-size:18pt;font-family:"Arial";font-weight:bold;padding-bottom:4pt}h3{padding-top:14pt;line-height:1.15;text-align:left;color:#000000;font-size:14pt;font-family:"Arial";font-weight:bold;padding-bottom:4pt}h4{padding-top:12pt;line-height:1.15;text-align:left;color:#000000;font-size:12pt;font-family:"Arial";font-weight:bold;padding-bottom:2pt}h5{padding-top:11pt;line-height:1.15;text-align:left;color:#000000;font-size:11pt;font-family:"Arial";font-weight:bold;padding-bottom:2pt}h6{padding-top:10pt;line-height:1.15;text-align:left;color:#000000;font-size:10pt;font-family:"Arial";font-weight:bold;padding-bottom:2pt}</style></head><body class="c16 c67"><div><p class="c25 c3 c5 c65"><span class="c10 c43 c52"></span></p><a href="#" name="6e52989dce3e269c3fd9f48ecb78bee1dbe250f0"></a><a href="#" name="3"></a><table cellpadding="0" cellspacing="0" class="c55"><tbody><tr><td class="c70"><p class="c18 c3"><span class="c10 c43 c52">Developers Guide | Version 2.0</span></p></td><td class="c69"><p class="c18 c3 c51"><img height="39" src="images/image107.png" width="120"></p></td></tr></tbody></table><p class="c25 c3 c5 c65"><span class="c40 c17"></span></p></div><p class="c3 c30 c5"><span class="c52"></span></p><p class="c3 c30 c5"><span class="c52"></span></p><p class="c3 c30 c5"><span class="c52"></span></p><p class="c3 c30 c5"><span class="c52"></span></p><p class="c3 c30 c5"><span class="c52"></span></p><p class="c3 c30 c5"><span class="c52"></span></p><p class="c3 c30 c5"><span class="c52"></span></p><p class="c3 c30 c5"><span class="c52"></span></p><p class="c3 c30 c5"><span class="c52"></span></p><p class="c3 c30 c5"><span class="c52"></span></p><p class="c3 c30 c5"><span class="c52"></span></p><hr><p class="c3 c5"><span></span></p><p class="c3 c5"><span class="c10 c57"></span></p><p class="c25 c3 c77"><span class="c75">Developers<br>Guide </span></p><p class="c25 c3 c5"><span class="c10 c57"></span></p><hr><p class="c2"><span class="c10 c57"></span></p><p class="c2"><span class="c10 c57"></span></p><p class="c3 subtitle"><a name="h.96qokfiiodh5"></a><span>Authors</span></p><p class="c3"><span>Shai Almog, Chen Fishbein, Eric Coolman</span></p><hr style="page-break-before:always;display:none;"><h2 class="c3 c48"><a name="h.9yfurxuqzgxp"></a></h2><h2 class="c3"><a name="h.l60u8dj5ie0m"></a><span class="c10 c57">Table of contents</span></h2><p class="c25 c3 c5"><span class="c10 c57"></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.l60u8dj5ie0m">Table of contents</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.vr60qhbz22q">Introduction</a></span></p><p class="c3 c50"><span class="c17 c8"><a class="c15" href="#h.80ffhl4rkjbo">History</a></span></p><p class="c3 c34"><span class="c17 c8"><a class="c15" href="#h.n00axz5e7v0d">Limitations &amp; Capabilities</a></span></p><p class="c3 c34"><span class="c17 c8"><a class="c15" href="#h.rtobd9g9bi9j">Lightweight UI</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.wb2smhncg57w">Installation</a></span></p><p class="c3 c50"><span class="c17 c8"><a class="c15" href="#h.wusaesr2ylc3">Installing Codename One In NetBeans</a></span></p><p class="c3 c50"><span class="c17 c8"><a class="c15" href="#h.4welv2ieylav">Installing Codename One In Eclipse</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.2bf132xwt35o">GUI Builder Hello World</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.hkhukb43r8e3">Manual Hello World</a></span></p><p class="c3 c35"><span class="c17 c8"><a class="c15" href="#h.sigzbtxsj6x0">Basics: Themes, Styles, Components &amp; Layouts</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.4xyfrc23wuk1">What Is A Theme, What Is A Style &amp; What Is a Component?</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.spivgagzeboh">Creating A Native Theme</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.f5pxz8xq62a7">Component/Container Hierarchy</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.f1mad4ddby9x">Layout Managers</a></span></p><p class="c3 c50"><span class="c17 c8"><a class="c15" href="#h.qblduptrdajb">Flow Layout</a></span></p><p class="c3 c50"><span class="c17 c8"><a class="c15" href="#h.9t8vuxzb4zud">Box Layout</a></span></p><p class="c3 c50"><span class="c17 c8"><a class="c15" href="#h.8988yqte3ge9">Border Layout</a></span></p><p class="c3 c50"><span class="c17 c8"><a class="c15" href="#h.1ygretn1wdqs">Grid Layout</a></span></p><p class="c3 c50"><span class="c17 c8"><a class="c15" href="#h.33ccap67bm5p">Table Layout</a></span></p><p class="c3 c50"><span class="c17 c8"><a class="c15" href="#h.fyizjm7mjt8w">Layered Layout</a></span></p><p class="c3 c50"><span class="c17 c8"><a class="c15" href="#h.czct9yaif6m3">Understanding Preferred Size</a></span></p><p class="c3 c50"><span class="c17 c8"><a class="c15" href="#h.o9xqs8sp3net">Layout Reflow</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.mhhay8sarq0g">Layout Animations</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.olo2ojco6xdz">Building Your Own Layout Manager</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.xq7af4af8crs">Porting a Swing/AWT Layout Manager</a></span></p><p class="c3 c35"><span class="c17 c8"><a class="c15" href="#h.tfx6czcg5to0">Theme Basics</a></span></p><p class="c3 c35"><span class="c17 c8"><a class="c15" href="#h.yeoqgzicsh3a">Advanced Theming</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.b1m7jbt4l4t4">Understanding Codename One Themes</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.x2fe8b3dreub">Working With UIID</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.2l758zkgk5ew">Style Inheritance</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.v3nzq2tge8h0">Colors &amp; Transparency</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.1hvz9h2slmzl">Backgrounds</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.npmdhc74vgk">Fonts</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.owfuvclt6dcx">Borders</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.u6dmunttum3a">Padding/Margin</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.9mkjuq1b0khz">Theme Constants</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.34qok1mgjsuz">How Does A Theme Work</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.u5dx1yemxc2s">Understanding Images &amp; Multi-Images</a></span></p><p class="c3 c35"><span class="c17 c8"><a class="c15" href="#h.2ppkkcsbn67j">Working With The GUI Builder</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.mtadu4ksyom5">Basic Concepts</a></span></p><p class="c3 c35"><span class="c17 c8"><a class="c15" href="#h.mwa07ewl9esg">The Components Of Codename One</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.ohzz78tn2lfk">Container</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.yijvamn6ymig">Composite Components</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.v5pp6tbzl9lx">Form</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.ugbcaet3dlk3">Dialog</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.fajvhqps8d94">Label</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.fnfx054esyyu">Button</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.je0npi99li1e">CheckBox/Radio Button</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.x0y730y5huyc">Multi-Button</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.wtelvm8oammf">Span Button</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.5jmt1vyh8dm7">Span Label</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.3jq61jxpzrsj">On Off Switch</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.l9fan0w3niql">TextField/TextArea</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.fh8ecobifjd1">Toggle Button</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.eof01apexjwb">List, ContainerList, Renderers &amp; Models</a></span></p><p class="c3 c50"><span class="c17 c8"><a class="c15" href="#h.2zh2wht85zgn">Important - Lists &amp; Layout Managers</a></span></p><p class="c3 c50"><span class="c17 c8"><a class="c15" href="#h.wgcias7n8jvz">Using Lists In The GUI Builder</a></span></p><p class="c3 c50"><span class="c17 c8"><a class="c15" href="#h.88ipu1mp0ubv">Understanding MVC</a></span></p><p class="c3 c50"><span class="c17 c8"><a class="c15" href="#h.64jttxjpxji">List Cell Renderer</a></span></p><p class="c3 c50"><span class="c17 c8"><a class="c15" href="#h.trvbrfshufsm">Generic List Cell Renderer</a></span></p><p class="c3 c50"><span class="c17 c8"><a class="c15" href="#h.m11kzdojxcva">The List Model</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.5hfrd1k8j5d5">MultiList</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.drl3fffazu5n">Slider</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.vdpto6qems0b">Table</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.v7dpj4oiucub">Tree</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.b9sw7eyk7a3m">Share Button</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.yxs0ydrizw06">Infinite Progress</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.g0ixxkg21hx5">Tabs</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.vvbpbr6nosf2">MediaPlayer</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.xx3y19cnr4jt">ImageViewer</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.3f0iv0xw60ts">WebBrowser</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.yazkqtisar5y">Auto Complete</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.6ldpjkwz6qzc">Spinner &amp; Picker</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.76xad6h57fbl">Embedded Container</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.g3wg6yaz6s38">The Map Component</a></span></p><p class="c3 c35"><span class="c17 c8"><a class="c15" href="#h.vj77f6wj2rbu">Animations &amp; Transitions</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.d6sqggvrefhu">Low Level Animations</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.glim6sv7163y">Transitions</a></span></p><p class="c3 c35"><span class="c17 c8"><a class="c15" href="#h.m0jj4ee9occe">The EDT - Event Dispatch Thread</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.1r5ue2d7iaz2">What Is The EDT</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.lo2stl7wctco">Debugging EDT Violations</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.k377dh805b42">Call Serially (And Wait)</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.1874wilv5xo7">Invoke And Block</a></span></p><p class="c3 c35"><span class="c17 c8"><a class="c15" href="#h.upfmetl8u62a">Monetization</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.ctj1sqtkmtqp">Ad Networks</a></span></p><p class="c3 c50"><span class="c17 c8"><a class="c15" href="#h.1b59lihegqno">vserv</a></span></p><p class="c3 c50"><span class="c17 c8"><a class="c15" href="#h.x5vaj57s4a39">Inneractive</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.dd0rvvummsfi">Google Play Ads</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.yyfbuxwbl0we">In App Purchase</a></span></p><p class="c3 c35"><span class="c17 c8"><a class="c15" href="#h.66znh1vydyao">Graphics, Drawing, Images &amp; Fonts</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.htp0o9rhpby3">Basics - Where &amp; How Do I Draw Manually?</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.q3at4ssros8b">Images</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.o6gl4rj5u8ho">Understanding Encoded Images &amp; Image Locking</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.2rwcbqq8sake">Glass Pane</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.rsc14lw5md42">True Type Fonts (TTF)</a></span></p><p class="c3 c35"><span class="c17 c8"><a class="c15" href="#h.d3uhe2c3epxy">File System, Storage, Network &amp; Parsing</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.jkoy0sp3ans5">Externalizable Objects</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.29xz5cqmoyv6">Storage vs. File System</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.7nxor8fpvg2k">Storage</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.n1ttcg63rl9v">File System</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.lqoq9qd9x8ie">Cloud Storage</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.o9s121ke6w29">Cloud File Storage</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.vhkncoed4s3c">SQL</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.g0e51ieofzv6">Network Manager &amp; Connection Request</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.u6pdcjz3exvo">Debugging Network Connections</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.6qqrykdfvbqw">Network Services</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.kfvvil8yqu9l">UI Bindings &amp; Utilities</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.5ni2826pk0b9">Logging &amp; Crash Protection</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.cfw98fvrf692">Parsing: JSON, XML &amp; CSV</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.5q5b33obmp47">Cached Data Service</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.9l64bmper8wn">GZIP</a></span></p><p class="c3 c35"><span class="c17 c8"><a class="c15" href="#h.ld5sseu7svpb">Miscellaneous Features</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.t9gxf0cvhfkf">SMS, Dial (Phone) &amp; E-Mail</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.vupmnxpkvdii">Contacts API</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.dhwbgzywq8l6">Localization &amp; Internationalization (L10N &amp; I18N)</a></span></p><p class="c3 c50"><span class="c17 c8"><a class="c15" href="#h.3iugqinslaci">Localization Manager</a></span></p><p class="c3 c50"><span class="c17 c8"><a class="c15" href="#h.5il7j9jwgniy">RTL/Bidi</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.e6yl1s5jb2yh">Location - GPS</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.bhvclly0c6qz">Capture - Photos, Video, Audio</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.l7cqdxdwd6cr">Codescan - Barcode &amp; QR code scanner</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.x470awke4krg">Analytics Integration</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.8rj3eg89s4rm">Facebook Support (legacy)</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.9rdpor3lm5z">SideMenuBar - Hamburger Sidemenu</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.nrj77fbzb9kb">Pull To Refresh</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.4r6f1y2qd3hg">Infinite Scroll Adapter</a></span></p><p class="c3 c35"><span class="c17 c8"><a class="c15" href="#h.fb3e21f697it">Performance, Size &amp; Debugging</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.16ip0cegdvy1">Reducing Resource File Size</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.cbag7ym5xf3">Improving Performance</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.gzv0iqlm9ait">Performance Monitor</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.oe5snqwo6192">Network Speed</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.cnr6tswj28gi">Debugging Codename One Sources</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.bh99ptqu9isj">Device Testing Framework/Unit Testing</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.t1gaxk28tb8y">EDT Error Handler and sendLog</a></span></p><p class="c3 c35"><span class="c17 c8"><a class="c15" href="#h.5ptiwp44cd0x">Advanced Topics/Under The Hood</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.y0qxqk6afyqd">Sending Arguments To The Build Server</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.sbh5atmztfo1">The Architecture Of The GUI Builder</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.vex457cyb0ke">Native Interfaces</a></span></p><p class="c3 c50"><span class="c17 c8"><a class="c15" href="#h.hhmaw4yonao1">Native Permissions</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.a6jdm9if0py5">Libraries - cn1lib</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.w88h0452gckm">Drag &amp; Drop</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.sox7bnnscjij">Physics - The Motion Class</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.99ye48qud1lz">BiDi/RTL Language Support</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.jxxr8b55w4q9">Signing, Certificates &amp; Provisioning</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.1v7vqb435g0u">iOS (iPhone/iPad)</a></span></p><p class="c3 c50"><span class="c17 c8"><a class="c15" href="#h.tldws0zggzfp">iOS Code Signing Fail Checklist</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.qoxszgwsxe3h">Android</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.2g6o8dzdpmib">RIM/BlackBerry</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.vd83p05pvfb0">J2ME</a></span></p><p class="c3 c35"><span class="c17 c8"><a class="c15" href="#h.p6bjojo49yea">Appendix: Working With iOS</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.fnk9uq2hq5mz">Provisioning Profile &amp; Certificates</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.6yplae24bm9q">Push Notifications</a></span></p><p class="c3 c34"><span class="c17 c8"><a class="c15" href="#h.wta05zuu0n3v">Argument</a></span></p><p class="c3 c34"><span class="c17 c8"><a class="c15" href="#h.1mzngaxejn76">Values</a></span></p><p class="c3 c34"><span class="c17 c8"><a class="c15" href="#h.sh019nk71wed">Description</a></span></p><p class="c3 c35"><span class="c17 c8"><a class="c15" href="#h.t13ls9xq2cmm">Appendix: Creating Codename One Maker Plugins</a></span></p><p class="c3 c35"><span class="c17 c8"><a class="c15" href="#h.5gy3k2h5cese">Appendix: Cloud Object API On The Desktop</a></span></p><p class="c3 c35"><span class="c17 c8"><a class="c15" href="#h.adqh1xcdmcry">Appendix: Casual Game Programming</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.wfcyz8shkf0">While game developers have traditionally used C/OpenGL to get every bit of performance out of a device, Java offers a unique opportunity for casual game developers. In this article we will build a simple card game in Java that can run unchanged on iOS, Android and RIM devices.</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.8pkz6orm737f">The Game</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.xxflo1xfhxas">Getting Started</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.bk0ctz2amdr2">Handling Multiple Device Resolutions</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.qtp9kmjjxviu">Resources</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.d1pk0e9p259q">The Splash Screen</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.c3vescr4stg5">The Game UI</a></span></p><p class="c3 c12"><span class="c17 c8"><a class="c15" href="#h.sdu0y9tiy4fq">Summary</a></span></p><hr style="page-break-before:always;display:none;"><h2 class="c3 c48"><a name="h.3jgldfy5x9vu"></a></h2><h2 class="c3"><a name="h.vr60qhbz22q"></a><span class="c10 c57">Introduction</span></h2><p class="c25 c3"><span>Codename One is a set of tools for mobile application development that derive a great deal of its architecture from Java. It stands both as the name of the startup that created the set of tools and as a prefix to the distinct tools that make up the Codename One product. </span></p><p class="c25 c3 c5"><span></span></p><p class="c21 c3"><span>The goal of the Codename One project is to take the complex and fragmented task of mobile device programming and unify it under a single set of tools, APIs and services to create a more manageable approach to mobile application development without sacrificing development power/control. </span></p><p class="c25 c3 c5"><span></span></p><h3 class="c49 c3 c30 c65"><a name="h.80ffhl4rkjbo"></a><span class="c68">History</span><img height="218" src="images/image102.png" width="175"></h3><p class="c21 c3"><span>Codename One was started by Chen Fishbein &amp; Shai Almog who authored the Open Source LWUIT</span><sup><a href="#ftnt1" name="ftnt_ref1">[1]</a></sup><span>&nbsp;project at Sun Microsystems starting at 2007. The LWUIT project aimed at solving the fragmentation within J2ME/Blackberry devices by targeting a higher standard of user interface than the common baseline at the time. LWUIT received critical acclaim and traction within multiple industries but was limited by the declining feature phone market.</span></p><p class="c21 c3"><span>In 2012 the Codename One project has taken many of the basic concepts developed within the LWUIT project and adapted them to the smartphone world which is experiencing similar issues to the device fragmentation of the old J2ME phones. </span></p><p class="c2"><span></span></p><p class="c21 c3"><span class="c6 c38">How Does It Work</span></p><p class="c21 c3"><span>Codename One has 4 major parts: API, Designer, Simulator, Build/Cloud server.</span></p><p class="c25 c3 c5"><span></span></p><ul class="c45 lst-kix_j1vik6wjarhd-0 start"><li class="c25 c3 c20 c12"><span>API - abstracts platform specific functionality</span></li><li class="c3 c20 c12 c25"><span>Designer - allows developers/designers to design the GUI/theme and package various resources required by the application</span></li><li class="c25 c3 c20 c12"><span>Simulator - allows previewing and debugging applications within the IDE</span></li><li class="c21 c3 c20 c12"><span>Build/Cloud server - the server performs the build of the native application, removing the need to install additional software stacks.</span></li></ul><p class="c2"><span></span></p><p class="c2"><span></span></p><p class="c2"><span></span></p><p class="c21 c3"><img height="419" src="images/image104.png" width="604"></p><p class="c21 c3"><span>Codename One unifies the pieces illustrated above allowing developers to use them as a single coherent product. When building the final native application the build server produces the actual native application removing the need for a dedicated machine/installation.</span></p><p class="c2"><span></span></p><h4 class="c3"><a name="h.n00axz5e7v0d"></a><span class="c10">Limitations &amp; Capabilities</span></h4><p class="c21 c3"><span>J2ME &amp; RIM are very limited platforms to achieve partial Java 5 compatibility Codename One automatically strips the Java 5 language requirements from bytecode and injects its own implementation of Java 5 classes. Not everything is supported so consult the Codename One JavaDoc when you get a compiler error to see what is available.</span></p><p class="c21 c3"><span>Due to the implementation of the NetBeans IDE it is very difficult to properly replace and annotate the supported Java API&rsquo;s so the completion and error marking might not represent correctly what is actually working and implemented on the devices. However, the compilation phase will not succeed if you used classes that are unsupported. </span></p><p class="c2"><span></span></p><h4 class="c3"><a name="h.rtobd9g9bi9j"></a><span class="c10">Lightweight UI</span></h4><p class="c3 c21"><span>The biggest differentiation for Codename One is the lightweight architecture which allows for a great deal of the capabilities within Codename One. A Lightweight component is a component which is written entirely in Java, it draws its own interface and handles its own events/states. This has huge portability advantages since the same code executes on all platforms, but it carries many additional advantages. </span></p><p class="c21 c3"><span>The components are infinitely customizable just by using standard inheritance and overriding paint/event handling. Theming and the GUI builder allow for live preview and accurate reproduction across platforms since the same code executes everywhere. </span></p><h2 class="c3"><a name="h.wb2smhncg57w"></a><span class="c10">Installation</span></h2><h3 class="c3"><a name="h.wusaesr2ylc3"></a><span class="c10">Installing Codename One In NetBeans </span></h3><p class="c3"><span>For the purpose of this document we will focus mostly on the NetBeans IDE for development, however most operations are almost identical in the Eclipse IDE as well. For instructions specific for Eclipse please go to the following section. </span></p><p class="c3 c5"><span></span></p><p class="c21 c3"><span>These instructions assume you have downloaded</span><span><a class="c15" href="http://www.netbeans.org/">&nbsp;</a></span><span class="c8"><a class="c15" href="http://www.netbeans.org/">NetBeans</a></span><span>&nbsp;7.x,installed and launchedit.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>Select the Tools-&gt;Plugins menu option &amp; select the Settings tab</span></p><p class="c3"><img height="153" src="images/image03.png" width="250"></p><p class="c3 c5"><span></span></p><p class="c3"><span>Click the &quot;Add&quot; button &amp; enter the details below</span></p><p class="c3"><img height="151" src="images/image40.png" width="250"></p><p class="c3 c5"><span class="c9 c24"></span></p><p class="c3"><span>For the name enter: Codename One</span></p><p class="c3"><span>For the URL enter:</span><span class="c8"><a class="c15" href="https://codenameone.googlecode.com/svn/trunk/CodenameOne/repo/netbeans/updates.xml">&nbsp;https://codenameone.googlecode.com/svn/trunk/CodenameOne/repo/netbeans/updates.xml</a></span></p><p class="c3"><span>In The Available Plugins Tab Click &quot;Reload Catalog&quot; Then Check The CodenameOne Plugin</span></p><p class="c3"><img height="225" src="images/image88.png" width="250"></p><p class="c3 c5"><span class="c9 c24"></span></p><p class="c21 c3"><span>After that click the install button below. </span><span>Follow the Wizard instructions to install the plugin</span></p><p class="c3"><img height="150" src="images/image106.png" width="250"></p><p class="c3 c5"><span class="c9 c24"></span></p><p class="c3"><span>You will be informed that the plugin is unsigned which is indeed true, you just continue anyway.</span></p><p class="c3"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><h3 class="c3 c74"><a name="h.4welv2ieylav"></a><span class="c10">Installing Codename One In Eclipse </span></h3><p class="c21 c3"><span>Startup Eclipse and click Help-&gt;Install New Software. You should get this dialog </span><img height="221" src="images/image74.png" width="250"></p><p class="c3"><span>Click the Add button on the right side &amp; fill out the entries</span></p><p class="c3"><img height="94" src="images/image60.png" width="250"></p><p class="c21 c3"><span>Enter Codename One for the name &amp;</span><span class="c8"><a class="c15" href="https://codenameone.googlecode.com/svn/trunk/CodenameOne/repo/eclipse/site.xml">https://codenameone.googlecode.com/svn/trunk/CodenameOne/repo/eclipse/site.xml</a></span><span>&nbsp;for the location.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>Select the entries &amp; follow the wizard to install</span></p><p class="c3"><img height="218" src="images/image75.png" width="250"></p><p class="c3 c5"><span></span></p><hr style="page-break-before:always;display:none;"><h2 class="c37 c3 c48"><a name="h.z0joh182t17x"></a></h2><h2 class="c3 c37"><a name="h.2bf132xwt35o"></a><span class="c10">GUI Builder Hello World</span></h2><p class="c21 c3"><span>Start by creating a new project in the IDE and selecting the Codename One project.</span></p><p class="c21 c3"><img height="156" src="images/image41.png" width="250"><img height="158" src="images/image29.png" width="253"></p><p class="c3 c5"><span></span></p><p class="c3"><span class="c9">Use a proper package name for the project!</span></p><p class="c3"><img height="156" src="images/image32.png" width="250"></p><p class="c21 c3"><span>It is important to use proper package names for the project since platforms such as iOS &amp; Android rely on these names for future updates. They are thus painful to change! The convention is the common Java convention of reverse domain names (e.g. com.codenameone for the owner of codenameone.com etc.).</span></p><p class="c2"><span></span></p><p class="c21 c3"><span>By default a GUI builder project is created, we will maintain this default for the purpose of this hello world.</span></p><p class="c3"><img height="156" src="images/image59.png" width="250"></p><p class="c3"><span>Since this is a GUI builder project you can </span><span>open the Codename One Designer with the content of the theme.res file by double clicking the file. FYI: If you choose to rename this file in the future it is important to update the resource file name in the project properties settings.</span></p><p class="c3 c5"><span></span></p><p class="c3"><img height="156" src="images/image19.png" width="250"></p><p class="c3"><span>Within the Codename One Designer we can see several categories the most interesting of which are theme &amp; GUI. We will start by opening the theme section and clicking the entry there.</span></p><p class="c3"><span>The</span><span>&nbsp;default Codename One theme, derives from the platform native theme. We can easily change the &quot;base theme&quot; in the preview to see how the theme will act in different devices by clicking the native theme option in the application menu as such.</span></p><p class="c3 c5"><span></span></p><p class="c3"><img height="264" src="images/image33.png" width="422"></p><p class="c3 c5"><span></span></p><p class="c3 c5"><span></span></p><p class="c3"><span>To edit the UI for the application we need to select the GUI section and click &ldquo;GUI 1&rdquo; within that section. We are then faced with a drag and drop interface to manipulate the GUI of the application we saw within the theme preview. All changes made here are reflected instantly to the theme preview.</span></p><p class="c3"><img height="156" src="images/image63.png" width="250"></p><p class="c21 c3"><span>The GUI builder allows us to </span><span>bind events, we will drag a new button into the GUI and use this functionality to select the button from the GUI and then add an action event to a button listener to a button..</span></p><p class="c2"><span></span></p><p class="c3"><img height="156" src="images/image01.png" width="250"></p><p class="c3"><span>Clicking the action event button creates a new method within the IDE which</span><span>&nbsp;we can can use to bind functionality to the button. Within the code we show a dialog by adding the code: &nbsp;Dialog.show(&quot;Hello&quot;, &quot;Hi There&quot;, &quot;OK&quot;, null);</span></p><p class="c3 c5"><span></span></p><p class="c3"><img height="264" src="images/image13.png" width="422"></p><p class="c3 c5"><span></span></p><p class="c3"><span>If we inspect the Codename One project to some degree we will notice that it is pretty close to a standard Java project hence it can be modified/used in very similar ways. You can use the debugger and most refactoring functionality as usual. </span><span class="c9">Notice</span><span>&nbsp;that you should not change the classpath settings for the project since library support is a more complex issue than just modifying the classpath!</span></p><p class="c3"><span>Furthermore, if you change package/class names for some of the core classes you will need to update the project settings accordingly.</span></p><p class="c3"><img height="156" src="images/image101.png" width="250"></p><p class="c3 c5"><span></span></p><p class="c21 c3"><span>In order to get a native application for the devices you need to send a build to the &nbsp;build server. Before you get started you will probably need to read the </span><span class="c8"><a class="c15" href="#id.dyfdmuc07a22">signing section</a></span><span>&nbsp;of this guide in order to produce an actual working application. Right click the project and select the device type for which you wish to build. If you haven&rsquo;t registered in the build server just visit </span><span class="c8"><a class="c15" href="http://www.codenameone.com/">http://www.codenameone.com/</a></span><span>&nbsp;and signup for free to get an account there!</span></p><p class="c3"><img height="156" src="images/image57.png" width="250"></p><p class="c3 c5"><span></span></p><p class="c3"><span>Within the build server at</span><span><a class="c15" href="http://www.codenameone.com/">&nbsp;</a></span><span class="c8"><a class="c15" href="http://www.codenameone.com/">http://www.codenameone.com/</a></span><span>&nbsp;you can follow the status of your current build.</span></p><p class="c3"><img height="156" src="images/image55.png" width="250"></p><p class="c3 c5"><span class="c9 c24"></span></p><p class="c3"><span>In the build server we can follow the progress of the build and the results for the current build. We can email a link to the deployment files, download them or use a QR reader to install them to the phone. The Codename One LIVE! application allows following the status and installing applications directly from the build server.</span></p><p class="c3 c5"><span></span></p><h2 class="c37 c3"><a name="h.hkhukb43r8e3"></a><span class="c10">Manual Hello World</span></h2><p class="c3"><span>Some developers prefer writing all their code and avoiding the GUI builder like a plague, for them this tutorial covers the creation of a hello world application without the GUI builder.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>Start by creating a new project in the IDE and selecting the Codename One project.</span></p><p class="c3"><img height="156" src="images/image41.png" width="250"><img height="158" src="images/image29.png" width="253"></p><p class="c3 c5"><span></span></p><p class="c3"><span class="c9">Use a proper package name for the project!</span></p><p class="c3"><img height="156" src="images/image32.png" width="250"></p><p class="c3"><span>It is important to use proper package names for the project since platforms such as iOS &amp; Android rely on these names for future updates. They are thus painful to change! The convention is the common Java convention of reverse domain names (e.g. com.codenameone for the owner of codenameone.com etc.).</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>Make sure to select the Hello World project and NOT the GUI Builder project!</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>Within your project main class you will see a start method that contains the code: </span></p><p class="c3 c5"><span></span></p><p class="c3"><span>&nbsp; </span><span class="c0">Form</span><span>&nbsp;</span><span class="c0">f</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Form</span><span class="c4">(</span><span class="c22">&quot;Hello World&quot;</span><span class="c4">)</span><span class="c7">;</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>to add a button to the form that will show a dialog add the following:</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>&nbsp; &nbsp;</span><span class="c0">Button</span><span>&nbsp;</span><span class="c0">d</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Button</span><span class="c4">(</span><span>&ldquo;</span><span class="c0">Show</span><span>&nbsp;</span><span class="c0">Dialog</span><span>&rdquo;</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp;</span><span class="c0">f</span><span>.</span><span class="c0">addComponent</span><span class="c4">(</span><span class="c0">d</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp;</span><span class="c0">d</span><span>.</span><span class="c0">addActionListener</span><span class="c4">(</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">ActionListener</span><span class="c4">()</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">public</span><span>&nbsp;</span><span class="c9">void</span><span>&nbsp;</span><span class="c0">ActionPerformed</span><span class="c4">(</span><span class="c0">ActionEvent</span><span>&nbsp;</span><span class="c0">ev</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">Dialog</span><span>.</span><span class="c0">show</span><span class="c4">(</span><span class="c22">&quot;Hello&quot;</span><span>, </span><span class="c22">&quot;Hi There&quot;</span><span>, </span><span class="c22">&quot;OK&quot;</span><span>, </span><span class="c9">null</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">}</span><span><br> &nbsp; &nbsp;</span><span class="c4">})</span><span class="c7">;</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>This will show a dialog when the user clicks the button. You can use the play button in the IDE to run the application.</span></p><p class="c3 c5"><span></span></p><p class="c3 c5"><span></span></p><h2 class="c3 c48"><a name="h.dgcishsqu6rb"></a></h2><hr style="page-break-before:always;display:none;"><h2 class="c3 c48"><a name="h.lov3x032qqtu"></a></h2><h1 class="c3"><a name="h.sigzbtxsj6x0"></a><span class="c10">Basics: Themes, Styles, Components &amp; Layouts</span></h1><p class="c3"><span>This chapter covers the basic ideas underlying a Codename One application. It focuses mostly on the issues related to UI.</span></p><p class="c3 c5"><span></span></p><h2 class="c3"><a name="h.4xyfrc23wuk1"></a><span class="c10">What Is A Theme, What Is A Style &amp; What Is a Component?</span></h2><p class="c3"><span>Every visual element within Codename One is is a component, the button on the screen is a Component and so is the Form in which it is placed. This is all represented within the </span><span class="c8"><a class="c15" href="https://codenameone.googlecode.com/svn/trunk/CodenameOne/javadoc/com/codename1/ui/Component.html">Component class</a></span><span>&nbsp;which is probably the most central class in Codename One.</span></p><p class="c3"><span>The appearance of the component is determined by several style objects, every component has 4 style objects associated with it: Selected, Unselected, Disabled &amp; Pressed.</span></p><p class="c3"><span>Only one style is applicable at any given time and it can be queried via the getStyle() method. A style contains the colors, fonts, border, spacing information relating to how the component is presented to the user.</span></p><p class="c3"><span>A theme allows the designer to define the styles externally via a set of UIID&rsquo;s (User Interface ID&rsquo;s), the themes are created via the Codename One Designer tool and allow developers to separate the look of the component from the application logic. </span></p><h2 class="c3"><a name="h.spivgagzeboh"></a><span class="c10">Creating A Native Theme</span></h2><p class="c3"><span>When creating a Codename One theme the default uses the platform native theme</span></p><p class="c3"><img height="156" src="images/image49.jpg" width="250"></p><p class="c3 c5"><span class="c9 c24"></span></p><p class="c3"><span>You can easily create a theme with any look you desire or you can &quot;inherit&quot; the platform native theme and start from that point. When adding a new theme you are given the option.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>Any theme can be configured to derive a native theme</span></p><p class="c3"><img height="156" src="images/image11.jpg" width="250"></p><p class="c3 c5"><span class="c9 c24"></span></p><p class="c3"><span>Codename One uses a theme constant called &quot;includeNativeBool&quot;, when that constant is set to true Codename One starts by loading the native theme first and then applying all the theme settings. This effectively means your theme &quot;derives&quot; the style of the native theme first, similar to the cascading effect of CSS.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>By avoiding this flag you can create themes that look EXACTLY the same on all platforms.</span></p><p class="c3"><span>You can simulate different OS platforms by using the native theme menu option</span></p><p class="c3"><img height="156" src="images/image45.jpg" width="250"></p><p class="c3 c5"><span class="c9 c24"></span></p><p class="c3"><span>Developers can pick the platform of their liking and see how the theme will appear in that particular platform by selecting it and having the preview update on the fly.</span></p><p class="c3 c5"><span class="c17"></span></p><p class="c3"><span>You can easily create deep customizations that span across all themes</span></p><p class="c3"><img height="156" src="images/image05.jpg" width="250"></p><p class="c3 c5"><span class="c9 c24"></span></p><p class="c3"><span>In this case we just customized the UIID of a label and created a style for the new UIID. When deriving a native theme its important to check the various platform options to make sure that basic assumptions aren&#39;t violated. E.g. labels might be transparent on one platform but opaque on others. Or labels might look good in a dialog in Android but look horrible in an iOS dialog (hint: use the DialogBody UIID for text content within a dialog).</span></p><p class="c3 c5"><span class="c17"></span></p><p class="c3"><span>Codename One allows you to override a resource for a specific platform</span></p><p class="c3"><img height="156" src="images/image10.jpg" width="250"></p><p class="c3 c5"><span class="c9 c24"></span></p><p class="c3"><span>A common case we run into when adapting for platform specific looks is that a specific resource should be different to match the platform conventions. The Override feature allows us to define resources that are specific to a given platform combination. Override resources take precedence over embedded resources thus allowing us to change the look or even behavior (when overriding a GUI builder element) for a specific platform/OS.</span></p><p class="c3 c5"><span class="c17"></span></p><p class="c3"><span>To override select the platform where overriding is applicable</span></p><p class="c3"><img height="156" src="images/image90.jpg" width="250"></p><p class="c3 c5"><span class="c9 c24"></span></p><p class="c3"><span>Then click the green checkbox to define that this resource is specific to this platform. All resources added at this point will only apply to the given platform. If you change your mind and are no longer interested in a particular override just delete it in the override mode and it will no longer be overridden.</span></p><h2 class="c37 c3 c48"><a name="h.9jb4qyuner8n"></a></h2><p class="c3"><span>In this case we just select a new image object applicable to this platform</span></p><p class="c3"><img height="156" src="images/image68.jpg" width="250"></p><p class="c3 c5"><span class="c9 c24"></span></p><p class="c3"><span>This is easily done by selecting the &quot;...&quot; button. We can easily do the same in the GUI builder although this is a dangerous road to start following since it might end up with a great deal of fragmentation.</span></p><p class="c3 c5"><span></span></p><h2 class="c37 c3"><a name="h.f5pxz8xq62a7"></a><span class="c10">Component/Container Hierarchy</span></h2><p class="c3"><img height="228" src="images/image43.png" width="606"></p><p class="c3"><span>The component class is the basis of all UI widgets in Codename One, to arrange multiple components together we use the Container class which itself &ldquo;IS A&rdquo; Component subclass. </span></p><p class="c3"><span>The Container is a Component that contains Components effectively allowing us to nest Containers infinitely to build any type of visual hierarchy we want by nesting Containers.</span></p><p class="c3"><img height="200" src="images/image42.png" width="565"></p><h2 class="c3"><a name="h.f1mad4ddby9x"></a><span class="c10">Layout Managers</span></h2><p class="c3"><span>Layout managers are installed on the Container class and effectively position the Components within the given container. The LayoutManager class is abstract and allows users to create their own layout managers, however Codename One ships with multiple layout managers allowing for the creation of many layout types.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>The layout managers are designed to allow developers to build user interfaces that seamlessly adapt to all resolutions and thus they don&rsquo;t state the component size/position but rather the intended layout behavior. &nbsp;To install a layout manager one does something like this:</span></p><p class="c3 c5"><span></span></p><p class="c3"><span class="c0">Container</span><span>&nbsp;</span><span class="c0">c</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Container</span><span class="c4">(</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">BoxLayout</span><span class="c4">(</span><span class="c0">BoxLayout</span><span>.</span><span class="c0">X_AXIS</span><span class="c4">))</span><span class="c7">;</span><span><br></span><span class="c0">c</span><span>.</span><span class="c0">addComponent</span><span class="c4">(</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Button</span><span class="c4">(</span><span class="c22">&quot;1&quot;</span><span class="c4">))</span><span class="c7">;</span><span><br></span><span class="c0">c</span><span>.</span><span class="c0">addComponent</span><span class="c4">(</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Button</span><span class="c4">(</span><span class="c22">&quot;2&quot;</span><span class="c4">))</span><span class="c7">;</span><span><br></span><span class="c0">c</span><span>.</span><span class="c0">addComponent</span><span class="c4">(</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Button</span><span class="c4">(</span><span class="c22">&quot;3&quot;</span><span class="c4">))</span><span class="c7">;</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>This would produce 3 buttons one next to the other horizontally.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>There are two major types of layout managers: Constraint based &amp; regular. The regular layout managers like the box layout are just installed on the container and &ldquo;do their job&rdquo;. The constraint based layout managers associate a value with a Component sometimes explicitly and sometimes implicitly. Codename One ships with 3 such layouts BorderLayout, TableLayout &amp; GroupLayout. </span></p><p class="c3"><span>A constraint layout can/must accept a value when adding the component to indicate its position e.g.:</span></p><p class="c3 c5"><span></span></p><p class="c3"><span class="c0">Container</span><span>&nbsp;</span><span class="c0">c</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Container</span><span class="c4">(</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">BorderLayout</span><span class="c4">())</span><span class="c7">;</span><span><br></span><span class="c0">c</span><span>.</span><span class="c0">addComponent</span><span class="c4">(</span><span class="c0">BorderLayout</span><span>.</span><span class="c0">CENTER</span><span>, </span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Button</span><span class="c4">(</span><span class="c22">&quot;1&quot;</span><span class="c4">))</span><span class="c7">;</span><span><br></span><span class="c0">c</span><span>.</span><span class="c0">addComponent</span><span class="c4">(</span><span class="c0">BorderLayout</span><span>.</span><span class="c0">NORTH</span><span>, </span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Button</span><span class="c4">(</span><span class="c22">&quot;2&quot;</span><span class="c4">))</span><span class="c7">;</span><span><br></span><span class="c0">c</span><span>.</span><span class="c0">addComponent</span><span class="c4">(</span><span class="c0">BorderLayout</span><span>.</span><span class="c0">SOUTH</span><span>, </span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Button</span><span class="c4">(</span><span class="c22">&quot;3&quot;</span><span class="c4">))</span><span class="c7">;</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>This will stretch button 1 across the center of the container and buttons 2-3 will be stretched horizontally at the top and bottom of the container. Notice that the order to adding doesn&rsquo;t mean much once we have a constraint involved... </span></p><h3 class="c3"><a name="h.qblduptrdajb"></a><span class="c10">Flow Layout</span><img height="120" src="images/image98.png" width="321"></h3><p class="c3"><span>F</span><span>low layout can be used to just let the components &ldquo;flow&rdquo; horizontally and break a line when reaching the end of the component. It is the default layout manager for Codename One but because it is so flexible it could be problematic since it can cause the preferred size of the Container to provide false information triggering endless layout reflows (see below). </span></p><p class="c3 c5"><span></span></p><p class="c3"><span>Flow layout can be aligned to the left (by default) center or to the right. Components within the flow layout get their natural preferred size by default and are not stretched in any axis.</span></p><p class="c3"><span>The layout manager also supports modifying the horizontal alignment of the flow layout in cases where the container grows vertically.</span></p><p class="c3"><img height="121" src="images/image20.png" width="318"></p><p class="c3 c5"><span></span></p><p class="c3"><span class="c9">final</span><span>&nbsp;</span><span class="c0">Container</span><span>&nbsp;</span><span class="c0">layouts</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Container</span><span class="c4">()</span><span class="c7">;</span><span>&nbsp; &nbsp; &nbsp; &nbsp; <br></span><span class="c9">final</span><span>&nbsp;</span><span class="c0">Button</span><span>&nbsp;</span><span class="c0">borderLayout</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Button</span><span class="c4">(</span><span class="c22">&quot;Border&quot;</span><span class="c4">)</span><span class="c7">;</span><span><br></span><span class="c9">final</span><span>&nbsp;</span><span class="c0">Button</span><span>&nbsp;</span><span class="c0">boxYLayout</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Button</span><span class="c4">(</span><span class="c22">&quot;Box Y&quot;</span><span class="c4">)</span><span class="c7">;</span><span><br></span><span class="c9">final</span><span>&nbsp;</span><span class="c0">Button</span><span>&nbsp;</span><span class="c0">boxXLayout</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Button</span><span class="c4">(</span><span class="c22">&quot;Box X&quot;</span><span class="c4">)</span><span class="c7">;</span><span><br></span><span class="c9">final</span><span>&nbsp;</span><span class="c0">Button</span><span>&nbsp;</span><span class="c0">flowLayout</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Button</span><span class="c4">(</span><span class="c22">&quot;Flow&quot;</span><span class="c4">)</span><span class="c7">;</span><span><br></span><span class="c9">final</span><span>&nbsp;</span><span class="c0">Button</span><span>&nbsp;</span><span class="c0">flowCenterLayout</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Button</span><span class="c4">(</span><span class="c22">&quot;Flow Center&quot;</span><span class="c4">)</span><span class="c7">;</span><span><br></span><span class="c9">final</span><span>&nbsp;</span><span class="c0">Button</span><span>&nbsp;</span><span class="c0">gridLayout</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Button</span><span class="c4">(</span><span class="c22">&quot;Grid&quot;</span><span class="c4">)</span><span class="c7">;</span><span><br></span><span class="c9">final</span><span>&nbsp;</span><span class="c0">Button</span><span>&nbsp;</span><span class="c0">tableLayout</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Button</span><span class="c4">(</span><span class="c22">&quot;Table&quot;</span><span class="c4">)</span><span class="c7">;</span><span><br></span><span class="c0">layouts</span><span>.</span><span class="c0">setLayout</span><span class="c4">(</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">FlowLayout</span><span class="c4">(</span><span class="c0">Component</span><span>.</span><span class="c0">CENTER</span><span class="c4">))</span><span class="c7">;</span><span><br></span><span class="c0">layouts</span><span>.</span><span class="c0">addComponent</span><span class="c4">(</span><span class="c0">borderLayout</span><span class="c4">)</span><span class="c7">;</span><span><br></span><span class="c0">layouts</span><span>.</span><span class="c0">addComponent</span><span class="c4">(</span><span class="c0">boxYLayout</span><span class="c4">)</span><span class="c7">;</span><span><br></span><span class="c0">layouts</span><span>.</span><span class="c0">addComponent</span><span class="c4">(</span><span class="c0">boxXLayout</span><span class="c4">)</span><span class="c7">;</span><span><br></span><span class="c0">layouts</span><span>.</span><span class="c0">addComponent</span><span class="c4">(</span><span class="c0">flowLayout</span><span class="c4">)</span><span class="c7">;</span><span><br></span><span class="c0">layouts</span><span>.</span><span class="c0">addComponent</span><span class="c4">(</span><span class="c0">flowCenterLayout</span><span class="c4">)</span><span class="c7">;</span><span><br></span><span class="c0">layouts</span><span>.</span><span class="c0">addComponent</span><span class="c4">(</span><span class="c0">gridLayout</span><span class="c4">)</span><span class="c7">;</span><span><br></span><span class="c0">layouts</span><span>.</span><span class="c0">addComponent</span><span class="c4">(</span><span class="c0">tableLayout</span><span class="c4">)</span><span class="c7">;</span></p><h3 class="c49 c3"><a name="h.9t8vuxzb4zud"></a><span class="c10">Box Layout</span></h3><p class="c3"><span>Box layout allows placing components in a horizontal or a vertical line that doesn&rsquo;t break the line. Components are stretched along the opposite axis, e.g. X axis box will flow components horizontally and stretch them vertically.</span></p><p class="c3"><span>.</span><img height="299" src="images/image91.png" width="230"><img height="297" src="images/image86.png" width="230"></p><p class="c3 c5"><span></span></p><p class="c3"><span>Box layout accepts the axis in its constructor, the axis can be either BoxLayout.X_AXIS or BoxLayout.Y_AXIS.</span></p><h3 class="c49 c3"><a name="h.8988yqte3ge9"></a><span class="c10">Border Layout</span><img height="266" src="images/image28.png" width="205"></h3><p class="c3 c5"><span></span></p><p class="c3"><span>Border layout is quite unique, its a &nbsp;constraint based layout that can place up to 5 components in one of the 5 positions: North, South, East, West or Center.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>The layout always stretches the North/South components on the X axis to completely fill the container and the East/West components on the Y axis. The center component is stretched to fill the remaining area by default. However, the border layout has a flag to manipulate the behavior of the center component allowing it to be placed in the absolute center without stretching.</span></p><p class="c3 c5 c71"><span></span></p><h3 class="c49 c3"><a name="h.1ygretn1wdqs"></a><span class="c10">Grid Layout</span></h3><p class="c3"><span>The Grid Layout accepts a predefined grid rows/columns and grants all components within it an equal size based on the dimensions of the largest component. It is an excellent layout for a set of icons in a grid. </span><img height="185" src="images/image12.png" width="144"></p><p class="c3"><span>It can also dynamically calculate the columns/rows based on available space.</span></p><h3 class="c49 c3"><a name="h.33ccap67bm5p"></a><span class="c10">Table Layout</span></h3><p class="c3"><span>The table layout is far more elaborate than the grid layout and more akin to the HTML table structure. It is a constraint based layout, however it includes a default constraint if none are specified (e.g. using </span></p><p class="c3 c5"><span></span></p><p class="c3"><span class="c0">container</span><span>.</span><span class="c0">addComponent</span><span class="c4">(</span><span class="c0">component</span><span class="c4">)</span><span class="c7">;</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>&nbsp;is equivalent to using addComponent((layout.createConstraint(), cmp)).</span></p><p class="c3"><span>A table generally gives elements their preferred sizes but stretches them based on column/row. There are abilities within the constraint element to define multiple behaviors such as row/column spanning, alignments and grow behavior. </span></p><p class="c3"><img height="186" src="images/image00.png" width="286"></p><p class="c25 c3 c5"><span></span></p><p class="c25 c3"><span>The table layout will automatically size components to the largest preferred size in the row/column until running out of space, if the table is not horizontally scrollable this will happen when the edge of the parent container is reached (close to the edge of the screen) and further components will be &quot;crammed together&quot;. Notice that all cells in the table layout are sized to fit the entire cell always. To align, or margin cell&#39;s a developer can use the methods of the component/Style appropriately.</span></p><p class="c25 c3 c5"><span></span></p><p class="c25 c3"><span>A developer can provide hints to the table layout to enable spanning and more detailed column/row sizes using the constraint argument to the addComponent method. The constraint argument is an instance of TableLayout.Constraint that </span><span class="c9">must not</span><span>&nbsp;be reused for more than one cell, this will cause an exception.</span></p><p class="c25 c3 c5"><span></span></p><p class="c25 c3"><span>A constraint can specify the absolute row/column where the entry should fit as well as spanning between cell boundaries. Notice that in the picture the &quot;First&quot; cell is spanned vertically while the &quot;Spanning&quot; cell is spanned horizontally. This is immensely useful in creating elaborate UI&#39;s,</span></p><p class="c25 c3 c5"><span></span></p><p class="c25 c3"><span>Constraints can also specify a height/width for a column/row that will override the default, this size is indicated in percentage of the total table layout size. In the picture you can see that the &quot;First&quot; label is sized to 50% width while the &quot;Forth&quot; label is sized to 20% height.</span></p><p class="c25 c3 c5"><span></span></p><p class="c25 c3"><span class="c0">Form</span><span>&nbsp;</span><span class="c0">mainForm</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Form</span><span class="c4">(</span><span class="c22">&quot;Table Layout&quot;</span><span class="c4">)</span><span class="c7">;</span></p><p class="c25 c3"><span class="c0">TableLayout</span><span>&nbsp;</span><span class="c0">layout</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">TableLayout</span><span class="c4">(</span><span class="c14">4</span><span>, </span><span class="c14">3</span><span class="c4">)</span><span class="c7">;</span></p><p class="c25 c3"><span class="c0">mainForm</span><span>.</span><span class="c0">setLayout</span><span class="c4">(</span><span class="c0">layout</span><span class="c4">)</span><span class="c7">;</span></p><p class="c25 c3"><span class="c0">TableLayout</span><span>.</span><span class="c0">Constraint</span><span>&nbsp;</span><span class="c0">constraint</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c0">layout</span><span>.</span><span class="c0">createConstraint</span><span class="c4">()</span><span class="c7">;</span></p><p class="c25 c3"><span class="c0">constraint</span><span>.</span><span class="c0">setVerticalSpan</span><span class="c4">(</span><span class="c14">2</span><span class="c4">)</span><span class="c7">;</span></p><p class="c25 c3"><span class="c0">constraint</span><span>.</span><span class="c0">setWidthPercentage</span><span class="c4">(</span><span class="c14">50</span><span class="c4">)</span><span class="c7">;</span></p><p class="c25 c3"><span class="c0">mainForm</span><span>.</span><span class="c0">addComponent</span><span class="c4">(</span><span class="c0">constraint</span><span>, </span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Label</span><span class="c4">(</span><span class="c22">&quot;First&quot;</span><span class="c4">))</span><span class="c7">;</span></p><p class="c25 c3"><span class="c0">mainForm</span><span>.</span><span class="c0">addComponent</span><span class="c4">(</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Label</span><span class="c4">(</span><span class="c22">&quot;Second&quot;</span><span class="c4">))</span><span class="c7">;</span></p><p class="c25 c3"><span class="c0">mainForm</span><span>.</span><span class="c0">addComponent</span><span class="c4">(</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Label</span><span class="c4">(</span><span class="c22">&quot;Third&quot;</span><span class="c4">))</span><span class="c7">;</span></p><p class="c25 c3 c5"><span class="c7"></span></p><p class="c25 c3"><span class="c0">constraint</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c0">layout</span><span>.</span><span class="c0">createConstraint</span><span class="c4">()</span><span class="c7">;</span></p><p class="c25 c3"><span class="c0">constraint</span><span>.</span><span class="c0">setHeightPercentage</span><span class="c4">(</span><span class="c14">20</span><span class="c4">)</span><span class="c7">;</span></p><p class="c25 c3"><span class="c0">mainForm</span><span>.</span><span class="c0">addComponent</span><span class="c4">(</span><span class="c0">constraint</span><span>, </span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Label</span><span class="c4">(</span><span class="c22">&quot;Forth&quot;</span><span class="c4">))</span><span class="c7">;</span></p><p class="c25 c3"><span class="c0">mainForm</span><span>.</span><span class="c0">addComponent</span><span class="c4">(</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Label</span><span class="c4">(</span><span class="c22">&quot;Fifth&quot;</span><span class="c4">))</span><span class="c7">;</span></p><p class="c25 c3"><span class="c0">constraint</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c0">layout</span><span>.</span><span class="c0">createConstraint</span><span class="c4">()</span><span class="c7">;</span></p><p class="c25 c3"><span class="c0">constraint</span><span>.</span><span class="c0">setHorizontalSpan</span><span class="c4">(</span><span class="c14">3</span><span class="c4">)</span><span class="c7">;</span></p><p class="c25 c3"><span class="c0">Label</span><span>&nbsp;</span><span class="c0">span</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Label</span><span class="c4">(</span><span class="c22">&quot;Spanning&quot;</span><span class="c4">)</span><span class="c7">;</span></p><p class="c25 c3"><span class="c0">span</span><span>.</span><span class="c0">getStyle</span><span class="c4">()</span><span>.</span><span class="c0">setBorder</span><span class="c4">(</span><span class="c0">Border</span><span>.</span><span class="c0">createLineBorder</span><span class="c4">(</span><span class="c14">2</span><span class="c4">))</span><span class="c7">;</span></p><p class="c25 c3"><span class="c0">span</span><span>.</span><span class="c0">setAlignment</span><span class="c4">(</span><span class="c0">Component</span><span>.</span><span class="c0">CENTER</span><span class="c4">)</span><span class="c7">;</span></p><p class="c25 c3"><span class="c0">mainForm</span><span>.</span><span class="c0">addComponent</span><span class="c4">(</span><span class="c0">constraint</span><span>, </span><span class="c0">span</span><span class="c4">)</span><span class="c7">;</span></p><p class="c25 c3"><span class="c0">mainForm</span><span>.</span><span class="c0">show</span><span class="c4">()</span><span class="c7">;</span></p><h3 class="c49 c3"><a name="h.fyizjm7mjt8w"></a><span class="c10">Layered Layout</span></h3><p class="c3"><span>The layered layout just places the components in order one on top of the other and sizes them all to the size of the largest component. This is useful when trying to create an overlay on top of an existing component e.g. an &ldquo;x&rdquo; button to allow removing the component. </span></p><p class="c3 c5"><span></span></p><p class="c3"><span>E.g. this code will place a green &ldquo;online&rdquo; icon at the bottom right position on top of an icon for instance to indicate that a friend is currently online:</span></p><p class="c3 c5"><span></span></p><p class="c3"><span class="c0">Label</span><span>&nbsp;</span><span class="c0">pictureOfFriend</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Label</span><span class="c4">(</span><span>..</span><span class="c4">)</span><span class="c7">;</span><span><br></span><span class="c0">Label</span><span>&nbsp;</span><span class="c0">onlineGreenImage</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Label</span><span class="c4">(</span><span class="c0">greenImage</span><span class="c4">)</span><span class="c7">;</span><span><br></span><span class="c0">Container</span><span>&nbsp;</span><span class="c0">layered</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Container</span><span class="c4">(</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">LayeredLayout</span><span class="c4">())</span><span class="c7">;</span><span><br></span><span class="c0">layered</span><span>.</span><span class="c0">addComponent</span><span class="c4">(</span><span class="c0">pictureOfFriend</span><span class="c4">)</span><span class="c7">;</span><span><br><br></span><span class="c11">// assuming you want bottom right position</span><span><br></span><span class="c0">Layout</span><span>&nbsp;</span><span class="c0">flow</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">FlowLayout</span><span class="c4">(</span><span class="c0">Component</span><span>.</span><span class="c0">RIGHT</span><span class="c4">)</span><span class="c7">;</span><span><br></span><span class="c0">flow</span><span>.</span><span class="c0">setValign</span><span class="c4">(</span><span class="c0">Component</span><span>.</span><span class="c0">BOTTOM</span><span class="c4">)</span><span class="c7">;</span><span><br></span><span class="c0">Container</span><span>&nbsp;</span><span class="c0">bottomRight</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Container</span><span class="c4">(</span><span class="c0">flow</span><span class="c4">)</span><span class="c7">;</span><span><br></span><span class="c0">bottomRight</span><span>.</span><span class="c0">addComponent</span><span class="c4">(</span><span class="c0">onlineGreenImage</span><span class="c4">)</span><span class="c7">;</span><span><br></span><span class="c0">layered</span><span>.</span><span class="c0">addComponent</span><span class="c4">(</span><span class="c0">bottomRight</span><span class="c4">)</span><span class="c7">;</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>Form&rsquo;s have a built in layered layout that you can access via getLayeredPane(), this will allow you to overlay elements on top of the content pane. </span></p><h3 class="c49 c3"><a name="h.czct9yaif6m3"></a><span class="c10">Understanding Preferred Size</span></h3><p class="c3"><span>The component class contains many useful methods, one of the most important ones is calcPreferredSize() which is invoked to recalculate the size a component &ldquo;wants&rdquo; when something changes (by default Codename One calls getPreferredSize() which caches the value).</span></p><p class="c3"><span>The preferred size is decided by the component based on many constraints such as the font size, border sizes, padding etc. When a layout places the component it will size it based on its preferred size or ignore its preferred size either entirely or partially. Eg. FlowLayout always gives components their exact preferred size yet BorderLayout resizes the center component by default (and the other components on one of their axis).</span></p><h3 class="c3 c49"><a name="h.o9xqs8sp3net"></a><span class="c10">Layout Reflow</span></h3><p class="c3"><span>When adding a component to a form which isn&rsquo;t shown on the screen there is no need to tell the UI to repaint or reflow. This happens implicitly. However, when adding a component to a UI which is already visible the component will not show by default. </span></p><p class="c3"><span>The reason for this is performance based. E.g. imagine adding 100 components to an already visible form with 100 components within it. If we laid out automatically layout would have &nbsp;happened 100 times when it can happen only once. </span></p><p class="c3"><span>That is why when you add components to a form that is already showing you should invoke revalidate or animate the layout appropriately. This also enables layout animation behavior explained below.</span></p><a href="#" name="id.tdspb2pzbz8o"></a><h2 class="c3"><a name="h.mhhay8sarq0g"></a><span class="c10">Layout Animations</span></h2><p class="c3"><span>To understand animations you need to understand a couple of things about Codename One components. When we add a component to a container it&#39;s generally just added but not positioned anywhere. A novice might notice the setX/Y/Width/Height methods on a component and just try to position it absolutely.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>This won&#39;t work since these methods are meant for the layout manager which it implicitly invoked when a form is shown (internally in Codename One) and the layout manager uses these methods to position the components as it sees fit.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>However, if you add components to a Codename One Form that is already shown it is your responsibility to invoke revalidate (or layoutContainer) to arrange the newly added components. Codename One doesn&#39;t &quot;reflow&quot; implicitly since that would be hugely expensive, imagine doing the layout calculations for every component added to the container the cost would be closer to a factorial of the original cost of adding a component.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>The animateLayout() is simply a fancy form of revalidate. After changing the layout when you invoke this method it will animation the components to their new sizes and positions seamlessly.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>The first example in the tipster demo shows an &quot;interlace&quot; effect where the components each slide from a separate direction into the screen. &nbsp;This is the code I used before showing the form:</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>&nbsp; &nbsp; &nbsp; </span><span class="c0">f</span><span>.</span><span class="c0">revalidate</span><span class="c4">()</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; </span><span class="c9">for</span><span class="c4">(</span><span class="c9">int</span><span>&nbsp;</span><span class="c0">iter</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c14">0</span><span>&nbsp;</span><span class="c7">;</span><span>&nbsp;</span><span class="c0">iter</span><span>&nbsp;</span><span class="c7">&lt;</span><span>&nbsp;</span><span class="c0">c</span><span>.</span><span class="c0">getComponentCount</span><span class="c4">()</span><span>&nbsp;</span><span class="c7">;</span><span>&nbsp;</span><span class="c0">iter</span><span class="c7">++</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">Component</span><span>&nbsp;</span><span class="c0">current</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c0">c</span><span>.</span><span class="c0">getComponentAt</span><span class="c4">(</span><span class="c0">iter</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c9">if</span><span class="c4">(</span><span class="c0">iter</span><span>&nbsp;</span><span class="c7">%</span><span>&nbsp;</span><span class="c14">2</span><span>&nbsp;</span><span class="c7">==</span><span>&nbsp;</span><span class="c14">0</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">current</span><span>.</span><span class="c0">setX</span><span class="c4">(</span><span class="c7">-</span><span class="c0">current</span><span>.</span><span class="c0">getWidth</span><span class="c4">())</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c4">}</span><span>&nbsp;</span><span class="c9">else</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">current</span><span>.</span><span class="c0">setX</span><span class="c4">(</span><span class="c0">current</span><span>.</span><span class="c0">getWidth</span><span class="c4">())</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c4">}</span><span><br> &nbsp; &nbsp; &nbsp; </span><span class="c4">}</span><span><br> &nbsp; &nbsp; &nbsp; </span><span class="c0">c</span><span>.</span><span class="c0">setShouldCalcPreferredSize</span><span class="c4">(</span><span class="c9">true</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; </span><span class="c0">c</span><span>.</span><span class="c0">animateLayout</span><span class="c4">(</span><span class="c14">1000</span><span class="c4">)</span><span class="c7">;</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>Lets go over this line by line:</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>&nbsp; &nbsp; &nbsp; </span><span class="c0">f</span><span>.</span><span class="c0">revalidate</span><span class="c4">()</span><span class="c7">;</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>I make sure the layout is valid so I can start from the correct component positions.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c9">if</span><span class="c4">(</span><span class="c0">iter</span><span>&nbsp;</span><span class="c7">%</span><span>&nbsp;</span><span class="c14">2</span><span>&nbsp;</span><span class="c7">==</span><span>&nbsp;</span><span class="c14">0</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">current</span><span>.</span><span class="c0">setX</span><span class="c4">(</span><span class="c7">-</span><span class="c0">current</span><span>.</span><span class="c0">getWidth</span><span class="c4">())</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c4">}</span><span>&nbsp;</span><span class="c9">else</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">current</span><span>.</span><span class="c0">setX</span><span class="c4">(</span><span class="c0">current</span><span>.</span><span class="c0">getWidth</span><span class="c4">())</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c4">}</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>I manually position every component outside of the screen, if they are odd I place them to the right and if they are even I place them to the left.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>&nbsp; &nbsp; &nbsp; </span><span class="c0">c</span><span>.</span><span class="c0">setShouldCalcPreferredSize</span><span class="c4">(</span><span class="c9">true</span><span class="c4">)</span><span class="c7">;</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>I mark the UI as needing layout. This is crucial since I validated the UI earlier (by calling revalidate). Changing the X/Y/Width/Height doesn&#39;t trigger a validation! Codename One doesn&#39;t know I made that change!</span></p><p class="c3"><span>By calling setShouldCalcPreferredSize I&#39;m explicitly telling Codename One that I changed something in the UI and I want it to validate, normally this method is implicitly invoked by Codename One.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>&nbsp; &nbsp; &nbsp; </span><span class="c0">c</span><span>.</span><span class="c0">animateLayout</span><span class="c4">(</span><span class="c14">1000</span><span class="c4">)</span><span class="c7">;</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>Perform the animation over the length of a second, this might seem like much but the animation starts before the form entry transition so it isn&#39;t that much.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>The other animations are even simpler than this one and all follow the same basic rules, place the components wherever you want either manually (or by changing the layout) and use animateLayout() to automatically rearrange them to the new position.</span></p><p class="c3 c5"><span></span></p><h2 class="c37 c3"><a name="h.olo2ojco6xdz"></a><span class="c10">Building Your Own Layout Manager</span></h2><p class="c3"><span>Layout managers in Codename One are a remarkably powerful tool, I won&#39;t go into all the elaborate ways in which you can modify the layout in Codename One since this is covered rather well in the tutorial and developer guide. Instead I will try to show something that is a bit under documented, mostly because its almost exactly like its Swing/AWT equivalent: building a layout manager.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>A layout manager contains all the logic for positioning Codename One components, it essentially traverses a Codename One container and positions components absolutely based on internal logic. When we build our own component we need to take padding into consideration, when we build the layout we need to take margin into consideration. Building a layout manager involves two simple methods: layoutContainer &amp; getPreferredSize.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>layoutContainer is invoked whenever Codename One decides the container needs rearranging, Codename One tries to avoid calling this method and only invokes it at the last possible moment. Since this method is generally very expensive (imagine the recursion with nested layouts...), Codename One just marks a flag indicating layout is &quot;dirty&quot; when something important changes and tries to avoid &quot;reflows&quot;.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>getPreferredSize allows the layout to determine the size desired for the container, this might be a difficult call to make for some layout managers that try to provide both flexibility and simplicity. Most of flow layout bugs stem from the fact that this method is just impossible to implement for flow layout. The size of the final layout won&#39;t necessarily match the requested size (it probably won&#39;t) but the requested size is taken into consideration, especially when scrolling and also when sizing parent containers.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>This is a layout manager that just arranges components in a center column aligned to the middle:</span></p><p class="c3 c5"><span></span></p><p class="c3"><span class="c56 c11">/**</span></p><p class="c3"><span class="c56 c11">* Layout manager that arranges components in a center column</span></p><p class="c3"><span class="c56 c11">*</span></p><p class="c3"><span class="c56 c11">* @author Shai Almog</span></p><p class="c3"><span class="c56 c11">*/</span></p><p class="c3"><span class="c9">public</span><span>&nbsp;</span><span class="c9">class</span><span>&nbsp;</span><span class="c0">CenterLayout</span><span>&nbsp;</span><span class="c9">extends</span><span>&nbsp;</span><span class="c0">Layout</span><span>&nbsp;</span><span class="c4">{</span></p><p class="c3"><span class="c9">public</span><span>&nbsp;</span><span class="c9">void</span><span>&nbsp;</span><span class="c0">layoutContainer</span><span class="c4">(</span><span class="c0">Container</span><span>&nbsp;</span><span class="c0">parent</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span></p><p class="c3"><span>&nbsp; &nbsp; </span><span class="c9">int</span><span>&nbsp;</span><span class="c0">components</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c0">parent</span><span>.</span><span class="c0">getComponentCount</span><span class="c4">()</span><span class="c7">;</span></p><p class="c3"><span>&nbsp; &nbsp; </span><span class="c0">Style</span><span>&nbsp;</span><span class="c0">parentStyle</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c0">parent</span><span>.</span><span class="c0">getStyle</span><span class="c4">()</span><span class="c7">;</span></p><p class="c3"><span>&nbsp; &nbsp; </span><span class="c9">int</span><span>&nbsp;</span><span class="c0">centerPos</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c0">parent</span><span>.</span><span class="c0">getLayoutWidth</span><span class="c4">()</span><span>&nbsp;/ </span><span class="c14">2</span><span>&nbsp;</span><span class="c7">+</span><span>&nbsp;</span><span class="c0">parentStyle</span><span>.</span><span class="c0">getMargin</span><span class="c4">(</span><span class="c0">Component</span><span>.</span><span class="c0">LEFT</span><span class="c4">)</span><span class="c7">;</span></p><p class="c3"><span>&nbsp; &nbsp; </span><span class="c9">int</span><span>&nbsp;</span><span class="c0">y</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c0">parentStyle</span><span>.</span><span class="c0">getMargin</span><span class="c4">(</span><span class="c0">Component</span><span>.</span><span class="c0">TOP</span><span class="c4">)</span><span class="c7">;</span></p><p class="c3"><span>&nbsp; &nbsp; </span><span class="c9">for</span><span class="c4">(</span><span class="c9">int</span><span>&nbsp;</span><span class="c0">iter</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c14">0</span><span>&nbsp;</span><span class="c7">;</span><span>&nbsp;</span><span class="c0">iter</span><span>&nbsp;</span><span class="c7">&lt;</span><span>&nbsp;</span><span class="c0">components</span><span>&nbsp;</span><span class="c7">;</span><span>&nbsp;</span><span class="c0">iter</span><span class="c7">++</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span></p><p class="c3"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">Component</span><span>&nbsp;</span><span class="c0">current</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c0">parent</span><span>.</span><span class="c0">getComponentAt</span><span class="c4">(</span><span class="c0">iter</span><span class="c4">)</span><span class="c7">;</span></p><p class="c3"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">Dimension</span><span>&nbsp;</span><span class="c0">d</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c0">current</span><span>.</span><span class="c0">getPreferredSize</span><span class="c4">()</span><span class="c7">;</span></p><p class="c3"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">current</span><span>.</span><span class="c0">setSize</span><span class="c4">(</span><span class="c0">d</span><span class="c4">)</span><span class="c7">;</span></p><p class="c3"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">current</span><span>.</span><span class="c0">setX</span><span class="c4">(</span><span class="c0">centerPos</span><span>&nbsp;</span><span class="c7">-</span><span>&nbsp;</span><span class="c0">d</span><span>.</span><span class="c0">getWidth</span><span class="c4">()</span><span>&nbsp;/ </span><span class="c14">2</span><span class="c4">)</span><span class="c7">;</span></p><p class="c3"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">Style</span><span>&nbsp;</span><span class="c0">currentStyle</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c0">current</span><span>.</span><span class="c0">getStyle</span><span class="c4">()</span><span class="c7">;</span></p><p class="c3"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">y</span><span>&nbsp;</span><span class="c7">+=</span><span>&nbsp;</span><span class="c0">currentStyle</span><span>.</span><span class="c0">getMargin</span><span class="c4">(</span><span class="c0">Component</span><span>.</span><span class="c0">TOP</span><span class="c4">)</span><span class="c7">;</span></p><p class="c3"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">current</span><span>.</span><span class="c0">setY</span><span class="c4">(</span><span class="c0">y</span><span class="c4">)</span><span class="c7">;</span></p><p class="c3"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">y</span><span>&nbsp;</span><span class="c7">+=</span><span>&nbsp;</span><span class="c0">d</span><span>.</span><span class="c0">getHeight</span><span class="c4">()</span><span>&nbsp;</span><span class="c7">+</span><span>&nbsp;</span><span class="c0">currentStyle</span><span>.</span><span class="c0">getMargin</span><span class="c4">(</span><span class="c0">Component</span><span>.</span><span class="c0">BOTTOM</span><span class="c4">)</span><span class="c7">;</span></p><p class="c3"><span>&nbsp; &nbsp; </span><span class="c4">}</span></p><p class="c3"><span class="c4">}</span></p><p class="c3 c5"><span class="c4"></span></p><p class="c3"><span class="c9">public</span><span>&nbsp;</span><span class="c0">Dimension</span><span>&nbsp;</span><span class="c0">getPreferredSize</span><span class="c4">(</span><span class="c0">Container</span><span>&nbsp;</span><span class="c0">parent</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span></p><p class="c3"><span>&nbsp; &nbsp; </span><span class="c9">int</span><span>&nbsp;</span><span class="c0">components</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c0">parent</span><span>.</span><span class="c0">getComponentCount</span><span class="c4">()</span><span class="c7">;</span></p><p class="c3"><span>&nbsp; &nbsp; </span><span class="c0">Style</span><span>&nbsp;</span><span class="c0">parentStyle</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c0">parent</span><span>.</span><span class="c0">getStyle</span><span class="c4">()</span><span class="c7">;</span></p><p class="c3"><span>&nbsp; &nbsp; </span><span class="c9">int</span><span>&nbsp;</span><span class="c0">height</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c0">parentStyle</span><span>.</span><span class="c0">getMargin</span><span class="c4">(</span><span class="c0">Component</span><span>.</span><span class="c0">TOP</span><span class="c4">)</span><span>&nbsp;</span><span class="c7">+</span><span>&nbsp;</span><span class="c0">parentStyle</span><span>.</span><span class="c0">getMargin</span><span class="c4">(</span><span class="c0">Component</span><span>.</span><span class="c0">BOTTOM</span><span class="c4">)</span><span class="c7">;</span></p><p class="c3"><span>&nbsp; &nbsp; </span><span class="c9">int</span><span>&nbsp;</span><span class="c0">marginX</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c0">parentStyle</span><span>.</span><span class="c0">getMargin</span><span class="c4">(</span><span class="c0">Component</span><span>.</span><span class="c0">RIGHT</span><span class="c4">)</span><span>&nbsp;</span><span class="c7">+</span><span>&nbsp;</span><span class="c0">parentStyle</span><span>.</span><span class="c0">getMargin</span><span class="c4">(</span><span class="c0">Component</span><span>.</span><span class="c0">LEFT</span><span class="c4">)</span><span class="c7">;</span></p><p class="c3"><span>&nbsp; &nbsp; </span><span class="c9">int</span><span>&nbsp;</span><span class="c0">width</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c0">marginX</span><span class="c7">;</span></p><p class="c3"><span>&nbsp; &nbsp; </span><span class="c9">for</span><span class="c4">(</span><span class="c9">int</span><span>&nbsp;</span><span class="c0">iter</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c14">0</span><span>&nbsp;</span><span class="c7">;</span><span>&nbsp;</span><span class="c0">iter</span><span>&nbsp;</span><span class="c7">&lt;</span><span>&nbsp;</span><span class="c0">components</span><span>&nbsp;</span><span class="c7">;</span><span>&nbsp;</span><span class="c0">iter</span><span class="c7">++</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span></p><p class="c3"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">Component</span><span>&nbsp;</span><span class="c0">current</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c0">parent</span><span>.</span><span class="c0">getComponentAt</span><span class="c4">(</span><span class="c0">iter</span><span class="c4">)</span><span class="c7">;</span></p><p class="c3"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">Dimension</span><span>&nbsp;</span><span class="c0">d</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c0">current</span><span>.</span><span class="c0">getPreferredSize</span><span class="c4">()</span><span class="c7">;</span></p><p class="c3"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">Style</span><span>&nbsp;</span><span class="c0">currentStyle</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c0">current</span><span>.</span><span class="c0">getStyle</span><span class="c4">()</span><span class="c7">;</span></p><p class="c3"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">width</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c0">Math</span><span>.</span><span class="c0">max</span><span class="c4">(</span><span class="c0">d</span><span>.</span><span class="c0">getWidth</span><span class="c4">()</span><span>&nbsp;</span><span class="c7">+</span><span>&nbsp;</span><span class="c0">marginX</span><span>&nbsp;</span><span class="c7">+</span><span>&nbsp;</span><span class="c0">currentStyle</span><span>.</span><span class="c0">getMargin</span><span class="c4">(</span><span class="c0">Component</span><span>.</span><span class="c0">RIGHT</span><span class="c4">)</span><span>&nbsp; &nbsp; </span></p><p class="c3"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c7">+ </span><span class="c0">currentStyle</span><span>.</span><span class="c0">getMargin</span><span class="c4">(</span><span class="c0">Component</span><span>.</span><span class="c0">LEFT</span><span class="c4">)</span><span>, </span><span class="c0">width</span><span class="c4">)</span><span class="c7">;</span></p><p class="c3"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">height</span><span>&nbsp;</span><span class="c7">+=</span><span>&nbsp;</span><span class="c0">currentStyle</span><span>.</span><span class="c0">getMargin</span><span class="c4">(</span><span class="c0">Component</span><span>.</span><span class="c0">TOP</span><span class="c4">)</span><span>&nbsp;</span><span class="c7">+</span><span>&nbsp;</span><span class="c0">d</span><span>.</span><span class="c0">getHeight</span><span class="c4">()</span><span>&nbsp;</span><span class="c7">+</span></p><p class="c3"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">currentStyle</span><span>.</span><span class="c0">getMargin</span><span class="c4">(</span><span class="c0">Component</span><span>.</span><span class="c0">BOTTOM</span><span class="c4">)</span><span class="c7">;</span></p><p class="c3"><span>&nbsp; &nbsp; </span><span class="c4">}</span></p><p class="c3"><span>&nbsp; &nbsp; </span><span class="c0">Dimension</span><span>&nbsp;</span><span class="c0">size</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Dimension</span><span class="c4">(</span><span class="c0">width</span><span>, </span><span class="c0">height</span><span class="c4">)</span><span class="c7">;</span></p><p class="c3"><span>&nbsp; &nbsp; </span><span class="c9">return</span><span>&nbsp;</span><span class="c0">size</span><span class="c7">;</span></p><p class="c3"><span class="c4">}</span></p><p class="c3"><span class="c4">}</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>Here is a simple example of using it:</span></p><p class="c3"><span class="c0">Form</span><span>&nbsp;</span><span class="c0">f</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Form</span><span class="c4">(</span><span class="c22">&quot;Centered&quot;</span><span class="c4">)</span><span class="c7">;</span></p><p class="c3"><span class="c0">f</span><span>.</span><span class="c0">setLayout</span><span class="c4">(</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">CenterLayout</span><span class="c4">())</span><span class="c7">;</span></p><p class="c3"><span class="c9">for</span><span class="c4">(</span><span class="c9">int</span><span>&nbsp;</span><span class="c0">iter</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c14">1</span><span>&nbsp;</span><span class="c7">;</span><span>&nbsp;</span><span class="c0">iter</span><span>&nbsp;</span><span class="c7">&lt;</span><span>&nbsp;</span><span class="c14">20</span><span>&nbsp;</span><span class="c7">;</span><span>&nbsp;</span><span class="c0">iter</span><span class="c7">++</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; f</span><span>.</span><span class="c0">addComponent</span><span class="c4">(</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Button</span><span class="c4">(</span><span class="c22">&quot;Button: &quot;</span><span>&nbsp;</span><span class="c7">+</span><span>&nbsp;</span><span class="c0">iter</span><span class="c4">))</span><span class="c7">;</span></p><p class="c3"><span class="c4">}</span></p><p class="c3"><span class="c0">f</span><span>.</span><span class="c0">addComponent</span><span class="c4">(</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Button</span><span class="c4">(</span><span class="c22">&quot;Really Wide Button Text!!!&quot;</span><span class="c4">))</span><span class="c7">;</span></p><p class="c3"><span class="c0">f</span><span>.</span><span class="c0">show</span><span class="c4">()</span><span class="c7">;</span></p><p class="c3 c5"><span></span></p><h2 class="c3"><a name="h.xq7af4af8crs"></a><span class="c10">Porting a Swing/AWT Layout Manager</span></h2><p class="c3"><span>We recently ported GridBagLayout to Codename One and while that was pretty easy considering the complexity of that layout there are still some tips you should take into account when evaluating this:</span></p><ol class="c45 lst-kix_swtqs8jd4sfb-0 start" start="1"><li class="c3 c20 c12"><span>Codename One doesn&#39;t have Insets, we added some support for them in order to port gridbag but components in Codename One have a Margin they need to consider instead of the insets (the padding is in the preferred size).<br></span></li><li class="c3 c20 c12"><span>AWT layout managers also synchronize a lot on the AWT thread. This is no longer necessary since Codename One is single threaded like Swing.<br></span></li><li class="c3 c20 c12"><span>Components are positioned relatively to container so the layout code can start at 0, 0 (otherwise it will be slightly offset).<br></span></li></ol><p class="c3"><span>Other than those things it&rsquo;s mostly just fixing method signatures and import statements which are slightly different. Pretty trivial stuff and GridBagLayout from project Harmony is now working on Codename One.</span></p><p class="c3 c5"><span></span></p><hr style="page-break-before:always;display:none;"><h2 class="c3 c48"><a name="h.5152pcths0u8"></a></h2><h1 class="c3"><a name="h.tfx6czcg5to0"></a><span class="c10">Theme Basics</span></h1><p class="c3"><span>This chapter covers the creation of a simple hello world style theme and how it can be customized visually. It uses the Codename One Designer tool to demonstrate basic concepts in theme creation such as 9-piece borders, selectors and style types.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>Codename One themes are effectively a set of UIID&#39;s mapped to a Style object, we can create a new theme by adding it in the Designer tool and customizing the UIID values.</span></p><p class="c3 c5"><span></span></p><p class="c32 c3 c53"><img height="353" src="images/image77.png" width="565"></p><p class="c3 c5"><span></span></p><p class="c3"><span>We can add a component style to a component such as Button, typically UIID&#39;s are named with the same name as the Component class. You can modify the UIID of a component by invoking setUIID(String) on an arbitrary component or changing the UIID property in the GUI builder.</span></p><p class="c3"><span>&nbsp;</span></p><p class="c32 c3 c53"><img height="366" src="images/image96.png" width="586"></p><p class="c3"><span>&nbsp;</span></p><p class="c3"><span>Styles can have one of 4 states:</span></p><ol class="c45 lst-kix_t9nzdcwm468u-0 start" start="1"><li class="c3 c20 c12"><span>Default (unselected) - the way a component appears when its in none of the other states.</span></li><li class="c3 c20 c12"><span>Selected - shown when the component has focus or is active (on a touch screen device this only appears when the user interacts with the device with touch or with a physical key).</span></li><li class="c3 c20 c12"><span>Pressed - shown when the component is pressed. This is only active for Button&#39;s.</span></li><li class="c3 c20 c12"><span>Disabled - shown when the component is disabled.</span></li></ol><p class="c3"><span>&nbsp;</span></p><p class="c3"><span>You can add a style to any one of the states in the Designer to make the component appear as expected in those cases.</span></p><p class="c3"><span>&nbsp; </span></p><p class="c32 c3 c53"><img height="391" src="images/image14.png" width="626"></p><p class="c3 c5"><span></span></p><p class="c3"><span>When editing the style of the component you can customize multiple things such as the background image, the way such a background image is displayed or a gradient/solid color background. You can customize colors, fonts, padding/margin, border etc.</span></p><p class="c3 c5"><span></span></p><p class="c32 c3 c53"><img height="361" src="images/image100.png" width="577"></p><p class="c3 c5"><span></span></p><p class="c3"><span>Borders are a remarkably powerful tool for customizing a Component. The most powerful approach is the 9-piece image border which is easiest to use when using the Image Border Wizard.</span></p><p class="c3"><span>&nbsp;</span></p><p class="c32 c3 c53"><img height="366" src="images/image25.png" width="586"></p><p class="c3 c5"><span></span></p><p class="c3"><span>The image border wizard allows you to take an image and &quot;cut it&quot; into 9 distinct pieces: 4 corners, top, bottom, left, right &amp; center.</span></p><p class="c3"><span>The corners are placed as usual in the edges of the component and the other elements are tiled to fill up the available space.</span></p><p class="c3 c5"><span></span></p><p class="c32 c3 c53"><img height="370" src="images/image26.png" width="592"></p><p class="c3 c5"><span></span></p><p class="c3"><span>Its important when using a gradient effect within the image border to make sure the center piece is as narrow as possible to avoid a case of a &quot;broken&quot; gradient.</span></p><p class="c3 c5"><span></span></p><p class="c32 c3 c53"><img height="375" src="images/image38.png" width="600"></p><p class="c3 c5"><span></span></p><p class="c3 c5"><span></span></p><hr style="page-break-before:always;display:none;"><h1 class="c3 c63"><a name="h.fwrwosodqj"></a></h1><h1 class="c3"><a name="h.yeoqgzicsh3a"></a><span class="c10">Advanced Theming</span></h1><p class="c3"><span>This chapter covers the advanced concepts of theming as well as deeper understanding of how to build/design a Codename One Theme.</span></p><h2 class="c3"><a name="h.b1m7jbt4l4t4"></a><span class="c10">Understanding Codename One Themes</span></h2><p class="c3"><span>Codename One themes are pluggable CSS like elements that allow developers to determine/switch the look of the application in runtime. A theme can be installed via the UIManager class and themes can be layered one on top of the other (like CSS).</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>By default Codename One themes derive the native operating system themes although this behavior is entirely optional. </span></p><p class="c3 c5"><span></span></p><p class="c3"><span>A theme initializes the Style objects which are then used by the components to render themselves or by the LookAndFee/DefaultLookAndFeel class to create the appearance of the application.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>Codename One themes have some builtin defaults e.g. borders for buttons and padding/margin/opacity for various components. These are a set of &ldquo;common sense&rdquo; defaults that can be overridden within the theme.</span></p><h2 class="c3"><a name="h.x2fe8b3dreub"></a><span class="c10">Working With UIID</span></h2><p class="c3"><span>UIID&rsquo;s (User Interface IDentifier) are effectively a unique name given to a UI component that allow associating a set of theme definitions with a specific component. The class name of the component is commonly the same as the UIID but they are separate entities for a few important reasons.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>One of the biggest advantages with UIID&rsquo;s is the ability to change the UIID of a component, e.g. to create a multiline label one can use something like:</span></p><p class="c3 c5"><span></span></p><p class="c3"><span class="c0">TextArea</span><span>&nbsp;</span><span class="c0">t</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;&hellip;</span><span class="c7">;</span><span><br></span><span class="c0">t</span><span>.</span><span class="c0">setUIID</span><span class="c4">(</span><span class="c22">&quot;Label&quot;</span><span class="c4">)</span><span class="c7">;</span><span><br></span><span class="c0">t</span><span>.</span><span class="c0">setEditable</span><span class="c4">(</span><span class="c9">false</span><span class="c4">)</span><span class="c7">;</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>UIID can be customized via the GUI builder and allows for powerful selection of individual components.</span></p><h2 class="c3"><a name="h.2l758zkgk5ew"></a><span class="c10">Style Inheritance</span></h2><p class="c25 c3"><span>There are multiple defaults defined for elements within Codename One, e.g. a Container defaults to zero padding/margin and full transparency. </span></p><p class="c25 c3 c5"><span></span></p><p class="c25 c3"><span>By default every style inherits from these common cross platform defaults. Other than that a theme may derive from the platform native theme providing further defaults. </span></p><p class="c25 c3 c5"><span></span></p><p class="c25 c3"><span>In the designer we can define whether a specific entry derives from the global default or defines its own override:</span></p><p class="c25 c3"><img height="228" src="images/image30.png" width="600"><span>&nbsp;</span></p><p class="c25 c3 c5"><span></span></p><p class="c25 c3"><span>By unchecking the derive flag we can override the appearance of a specific entry within the style.</span></p><p class="c25 c3 c5"><span></span></p><p class="c25 c3"><img height="209" src="images/image07.png" width="620"></p><p class="c25 c3 c5"><span></span></p><p class="c25 c3"><span>The Derive entry within the style allows a specific style to derive and extend another style, e.g. a Button selected style can derive from a Button unselected style thus removing the need to redefine style behavior for every state. This is very useful when defining commonalities among entries in a theme.</span></p><p class="c25 c3 c5"><span class="c10"></span></p><h2 class="c37 c3"><a name="h.v3nzq2tge8h0"></a><span class="c10">Colors &amp; Transparency</span></h2><p class="c3"><span>The colors of the style are represented as web style RGB entries, the foreground color is usually used to draw text. The background color applies when a border isn&rsquo;t defined.</span></p><p class="c3"><span>Transparency is only used to draw the background color when applicable.</span></p><p class="c3"><span>&nbsp;</span></p><p class="c3"><img height="259" src="images/image81.png" width="599"></p><h2 class="c37 c3"><a name="h.1hvz9h2slmzl"></a><span class="c10">Backgrounds</span></h2><p class="c3"><span>The background tab is one of the more elaborate entries within the style section. Notice that a background will only apply when no border is defined.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>In general 2 types of background are supported: Image or Gradient. You can pick several modes for each. For the gradients you can pick one of horizontal, vertical or radial gradient.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>In the case of gradients you need to define all the gradient variables mentioned within the screen to define the source/destination colors and in the case of a radial the properties relevant to that.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>When using an image background there are basically three options: Scaled, Tiled or Aligned.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>An image can be scaled across the background of the component, this can create a decent effect in some cases but often causes some distortion. You can use scale to fit/fill both of which create a more compelling scale effect that preserves aspect ratio.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>An image can be aligned to a specific location within the component background, in which case the component will be painted based on the transparency setting and the image will be painted in the appropriate location based on the alignment.</span></p><p class="c3"><span>Finally an image can be tiled either completely over the background or tiled as a single row/column aligned to a specific area within the component.</span></p><p class="c3 c5"><span></span></p><p class="c3"><img height="285" src="images/image21.png" width="626"><span>&nbsp; </span></p><h2 class="c37 c3"><a name="h.npmdhc74vgk"></a><span class="c10">Fonts</span></h2><p class="c3"><img height="117" src="images/image44.png" width="620"></p><p class="c3"><span>Codename One supports 2 major font types</span><sup><a href="#ftnt2" name="ftnt_ref2">[2]</a></sup><span>&nbsp;system fonts and truetype fonts. The system fonts are very limited in selection but are highly recommended for portability. They use the built in font on the given device which is often the font the user is used to. A developer has a selection from one of 3 generic sizes small, medium or large and basic style choices: bold/plain/italic. </span></p><p class="c3"><span>When a specific truetype font is needed Codename One allows the developer to place a truetype font within the src directory of the project. This font will be automatically detected by the designer tool and offered as an option. Since truetype fonts are only supported on iOS, Android and RIM devices you should still define a system font which will be used as a fallback on unsupported platforms.</span></p><p class="c3"><span>Truetype fonts allow specifying their sizes using one of 3 approaches:</span></p><ol class="c45 lst-kix_ivg2cuotrsmn-0 start" start="1"><li class="c3 c20 c12"><span>System font size scheme - the truetype font will have the same size as a small, medium or large system font. This allows the developer to size the font based on the device DPI.</span></li><li class="c3 c20 c12"><span>Millimeter size - allows sizing the font in a more DPI aware size.</span></li><li class="c3 c20 c12"><span>Pixels - a font can be sized in pixels, which is useful for some unique cases but highly problematic in multi-DPI scenarios. </span></li></ol><h2 class="c37 c3"><a name="h.owfuvclt6dcx"></a><span class="c10">Borders</span></h2><p class="c3"><span>See the theme basics above about cutting a 9-piece border using the image border class.</span></p><p class="c3"><span>Codename One supports configuring the border according to several configurations:</span></p><p class="c3 c5"><span></span></p><p class="c3"><img height="206" src="images/image78.png" width="568"></p><p class="c3 c5"><span></span></p><p class="c3"><span>When pressing the &lsquo;...&rsquo; button you can customize the border using multiple configuration types:</span></p><p class="c3"><img height="251" src="images/image69.png" width="599"></p><p class="c3 c5"><span></span></p><p class="c3"><span>There are several border types that can be used to customize the look of the component.</span></p><h2 class="c37 c3"><a name="h.u6dmunttum3a"></a><span class="c10">Padding/Margin</span></h2><p class="c3"><span>Padding and margin are concepts derived from the CSS box model. Its slightly different in Codename One where the border spacing is part of the padding but other than that they are pretty similar:</span></p><p class="c3 c5"><span></span></p><p class="c3"><img height="245" src="images/image110.png" width="610"></p><p class="c3 c5"><span></span></p><p class="c3"><span>In the above diagram we can see the component represented in yellow occupying its preferred size. The padding portion in blue effectively increases the components size. The margin is an area which effectively belongs to the component but the component doesn&rsquo;t draw anything within that area it is represented in red.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>The theme allows us to customize the padding/margin and specify them for all 4 sides of a component. They can be specified in pixels, millimeters, or screen percentage: </span></p><p class="c3"><img height="224" src="images/image23.png" width="635"></p><p class="c3 c5"><span></span></p><p class="c3"><span>Padding is especially important when a border is defined and we need to space the component drawing from the edge of the border. Margin allows us to space components from one another easily and create &ldquo;whitespace&rdquo; within the user interface.</span></p><h2 class="c3"><a name="h.9mkjuq1b0khz"></a><span class="c10">Theme Constants</span></h2><p class="c3"><span>The Codename One Designer has a tab for creating constants which can be used to add global values of various types and behavior hints to Codename One and its compoennts. Constants are always strings, they have some conventions where a constant ending with Bool is treated as a boolean true/false value and a constant ending with Int or Image (for image the string name of the image is stored but the image instance will be returned).</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>To use a constant one can use the </span><span class="c8"><a class="c15" href="https://codenameone.googlecode.com/svn/trunk/CodenameOne/javadoc/com/codename1/ui/plaf/UIManager.html">UIManager</a></span><span>&#39;s methods to get the appropriate constant type specifically:</span></p><p class="c3"><span>getThemeConstant</span></p><p class="c3"><span>isThemeConstant</span></p><p class="c3"><span>getThemeImageConstant</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>Internally Codename One has several built in constants and the list is constantly growing as we add features to Codename One, we will try to keep this list up to date when possible.</span></p><p class="c3 c5"><span></span></p><a href="#" name="a06e6f0477b6801dbefe1cc34357eee5e85e3728"></a><a href="#" name="0"></a><table cellpadding="0" cellspacing="0" class="c55"><tbody><tr><td class="c13"><p class="c18 c3"><span class="c9">Constant</span></p></td><td class="c26"><p class="c18 c3"><span class="c9">Description/Argument</span></p></td></tr><tr><td class="c13"><p class="c18 c3"><span>alwaysTensileBool &nbsp; &nbsp;</span></p></td><td class="c26"><p class="c3 c64"><span>Enables tensile drag even when there is no scrolling in the container (only for scrollable containers though)</span></p><p class="c18 c3 c5"><span></span></p></td></tr><tr><td class="c13"><p class="c3"><span>defaultCommandImage &nbsp; &nbsp;</span></p></td><td class="c26"><p class="c18 c3"><span>Image to give a command with no icon</span></p></td></tr><tr><td class="c13"><p class="c18 c3"><span>dialogButtonCommandsBool</span></p></td><td class="c26"><p class="c3"><span>Place commands in the dialogs as buttons</span></p></td></tr><tr><td class="c13"><p class="c18 c3"><span>dialogPosition</span></p></td><td class="c26"><p class="c18 c3"><span>Place the dialog in an arbitrary border layout position (e.g. North, South, Center etc.)</span></p></td></tr><tr><td class="c13"><p class="c3"><span>centeredPopupBool</span></p></td><td class="c26"><p class="c3"><span>Popup of the combo box will appear in the center of the screen</span></p><p class="c3"><span>checkBoxCheckDisImage &nbsp; &nbsp;CheckBox image to use instead of Codename One drawing it on its own</span></p></td></tr><tr><td class="c13"><p class="c18 c3"><span>checkBoxCheckedImage</span></p></td><td class="c26"><p class="c18 c3"><span>CheckBox image to use instead of Codename One drawing it on its own</span></p></td></tr><tr><td class="c13"><p class="c18 c3"><span>checkBoxUncheckDisImage</span></p></td><td class="c26"><p class="c3"><span>CheckBox image to use instead of Codename One drawing it on its own</span></p></td></tr><tr><td class="c13"><p class="c18 c3"><span>checkBoxUncheckedImage</span></p></td><td class="c26"><p class="c18 c3"><span>CheckBox image to use instead of Codename One drawing it on its own</span></p></td></tr><tr><td class="c13"><p class="c3"><span>comboImage</span></p></td><td class="c26"><p class="c18 c3"><span>Combo image to use instead of Codename One drawing it on its own</span></p></td></tr><tr><td class="c13"><p class="c18 c3"><span>commandBehavior</span></p></td><td class="c26"><p class="c18 c3"><span>Indicates how commands should act, as a touch menu, native menu etc. Possible values: SoftKey, Touch, Bar, Title, Right, Native</span></p></td></tr><tr><td class="c13"><p class="c18 c3"><span>ComponentGroupBool</span></p></td><td class="c26"><p class="c18 c3"><span>Enables component group which allows components to be logically grouped together so the UIID&#39;s of components would be modified based on their group placement. This allows for some unique styling effects where the first/last elements have different styles from the rest of the elements. Its disabled by default thus leaving its usage up to the designer.</span></p></td></tr><tr><td class="c13"><p class="c18 c3"><span>dialogTransitionIn</span></p></td><td class="c26"><p class="c18 c3"><span>Default transition for dialog</span></p></td></tr><tr><td class="c13"><p class="c18 c3"><span>dialogTransitionInImage</span></p></td><td class="c26"><p class="c18 c3"><span>Default transition Image for dialog, causes a Timeline transition effect</span></p></td></tr><tr><td class="c13"><p class="c18 c3"><span>dialogTransitionOut</span></p></td><td class="c26"><p class="c18 c3"><span>Default transition for dialog</span></p></td></tr><tr><td class="c13"><p class="c18 c3"><span>dialogTransitionOutImage</span></p></td><td class="c26"><p class="c18 c3"><span>Default transition Image for dialog, causes a Timeline transition effect</span></p></td></tr><tr><td class="c13"><p class="c3"><span>disabledColor</span></p></td><td class="c26"><p class="c18 c3"><span>Color to use when disabling entries by default</span></p></td></tr><tr><td class="c13"><p class="c18 c3"><span>dlgCommandButtonSizeInt</span></p></td><td class="c26"><p class="c18 c3"><span>Minimum size to give to command buttons in the dialog</span></p></td></tr><tr><td class="c13"><p class="c18 c3"><span>dlgCommandGridBool</span></p></td><td class="c26"><p class="c18 c3"><span>Places the dialog commands in a grid for uniform sizes</span></p></td></tr><tr><td class="c13"><p class="c18 c3"><span>dlgSlideDirection</span></p></td><td class="c26"><p class="c18 c3"><span>Slide hints</span></p></td></tr><tr><td class="c13"><p class="c18 c3"><span>dlgSlideInDirBool</span></p></td><td class="c26"><p class="c18 c3"><span>Slide hints</span></p></td></tr><tr><td class="c13"><p class="c18 c3"><span>dlgSlideOutDirBool</span></p></td><td class="c26"><p class="c18 c3"><span>Slide hints</span></p></td></tr><tr><td class="c13"><p class="c3"><span>fadeScrollBarBool </span></p></td><td class="c26"><p class="c18 c3"><span>Boolean indicating if the scrollbar show fade when there is inactivity</span></p></td></tr><tr><td class="c13"><p class="c18 c3"><span>fadeScrollEdgeBool</span></p></td><td class="c26"><p class="c18 c3"><span>Places a fade effect at the edges of the screen to indicate that its possible to scroll until we reach the edge (common on Android).</span></p></td></tr><tr><td class="c13"><p class="c18 c3"><span>fadeScrollEdgeInt</span></p></td><td class="c26"><p class="c18 c3"><span>Amount of pixels to fade out at the edge</span></p></td></tr><tr><td class="c13"><p class="c18 c3"><span>firstCharRTLBool</span></p></td><td class="c26"><p class="c18 c3"><span>Indicates to the GenericListCellRenderer that it should determine RTL status based on the first character in the sentence</span></p></td></tr><tr><td class="c13"><p class="c18 c3"><span>fixedSelectionInt</span></p></td><td class="c26"><p class="c18 c3"><span>Number corresponding to the fixed selection constants in List</span></p></td></tr><tr><td class="c13"><p class="c18 c3"><span>formTransitionIn</span></p></td><td class="c26"><p class="c3"><span>Default transition for form</span></p></td></tr><tr><td class="c13"><p class="c18 c3"><span>formTransitionInImage</span></p></td><td class="c26"><p class="c18 c3"><span>Default transition Image for form, causes a Timeline transition effect</span></p></td></tr><tr><td class="c13"><p class="c3"><span>formTransitionOut &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span></p></td><td class="c26"><p class="c3"><span>Default transition for form</span></p><p class="c18 c3 c5"><span></span></p></td></tr><tr><td class="c13"><p class="c18 c3"><span>formTransitionOutImage</span></p></td><td class="c26"><p class="c3"><span>Default transition Image for form, causes a Timeline transition effect</span></p><p class="c18 c3 c5"><span></span></p></td></tr><tr><td class="c13"><p class="c18 c3"><span>hideEmptyTitleBool</span></p></td><td class="c26"><p class="c3"><span>Indicates that a title with no content should be hidden even if the border for the title occupies space</span></p></td></tr><tr><td class="c13"><p class="c3"><span>ignorListFocusBool</span></p></td><td class="c26"><p class="c18 c3"><span>Hide the focus component of the list when the list doesn&#39;t have focus</span></p></td></tr><tr><td class="c13"><p class="c18 c3"><span>includeNativeBool</span></p></td><td class="c26"><p class="c18 c3"><span>True to derive from the platform native theme, false to create a blank theme that only uses the basic defaults.</span></p></td></tr><tr><td class="c13"><p class="c3"><span>listItemGapInt </span></p></td><td class="c26"><p class="c18 c3"><span>Builtin item gap in the list, this defaults to 2 which predated padding/margin in Codename One</span></p></td></tr><tr><td class="c13"><p class="c18 c3"><span>menuHeightPercent</span></p></td><td class="c26"><p class="c18 c3"><span>Allows positioning and sizing the menu</span></p></td></tr><tr><td class="c13"><p class="c18 c3"><span>menuPrefSizeBool</span></p></td><td class="c26"><p class="c18 c3"><span>Allows positioning and sizing the menu</span></p></td></tr><tr><td class="c13"><p class="c18 c3"><span>menuSlideDirection</span></p></td><td class="c26"><p class="c18 c3"><span>Defines menu entrance effect</span></p></td></tr><tr><td class="c13"><p class="c18 c3"><span>menuSlideInDirBool</span></p></td><td class="c26"><p class="c18 c3"><span>Defines menu entrance effect</span></p></td></tr><tr><td class="c13"><p class="c18 c3"><span>menuSlideOutDirBool</span></p></td><td class="c26"><p class="c18 c3"><span>Defines menu entrance effect</span></p></td></tr><tr><td class="c13"><p class="c18 c3"><span>menuTransitionIn</span></p></td><td class="c26"><p class="c18 c3"><span>Defines menu entrance effect</span></p></td></tr><tr><td class="c13"><p class="c18 c3"><span>menuTransitionInImage</span></p></td><td class="c26"><p class="c3"><span>Defines menu entrance effect</span></p></td></tr><tr><td class="c13"><p class="c18 c3"><span>menuTransitionOut</span></p></td><td class="c26"><p class="c3"><span>Defines menu exit effect</span></p></td></tr><tr><td class="c13"><p class="c18 c3"><span>menuTransitionOutImage</span></p></td><td class="c26"><p class="c18 c3"><span>Defines menu entrance effect</span></p></td></tr><tr><td class="c13"><p class="c18 c3"><span>menuWidthPercent</span></p></td><td class="c26"><p class="c18 c3"><span>Allows positioning and sizing the menu</span></p></td></tr><tr><td class="c13"><p class="c18 c3"><span>minimizeOnBackBool</span></p></td><td class="c26"><p class="c18 c3"><span>Indicates whether the form should minimize the entire application when the physical back button is pressed (if available) and no command is defined as the back command. Defaults to true.</span></p></td></tr><tr><td class="c13"><p class="c3"><span>otherPopupRendererBool</span></p><p class="c18 c3 c5"><span></span></p></td><td class="c26"><p class="c3"><span>Indicates that a separate renderer UIID/instance should be used to the list within the combo box popup</span></p><p class="c18 c3 c5"><span></span></p></td></tr><tr><td class="c13"><p class="c3"><span>PackTouchMenuBool</span></p></td><td class="c26"><p class="c3"><span>Enables preferred sized packing of the touch menu (true by default), when set to false this allows manually determining the touch menu size using percentages</span></p></td></tr><tr><td class="c13"><p class="c3"><span>popupCancelBodyBool</span></p></td><td class="c26"><p class="c18 c3"><span>Indicates that a cancel button should appear within the combo box popup</span></p></td></tr><tr><td class="c13"><p class="c3"><span>popupTitleBool</span></p></td><td class="c26"><p class="c18 c3"><span>Indicates that a title should appear within the combo box popup</span></p></td></tr><tr><td class="c13"><p class="c18 c3"><span>pureTouchBool</span></p></td><td class="c26"><p class="c18 c3"><span>Indicates the pure touch mode</span></p></td></tr><tr><td class="c13"><p class="c3"><span>radioSelectedDisImage</span></p></td><td class="c26"><p class="c18 c3"><span>Radio button image</span></p></td></tr><tr><td class="c13"><p class="c18 c3"><span>radioSelectedImage</span></p></td><td class="c26"><p class="c18 c3"><span>Radio button image</span></p></td></tr><tr><td class="c13"><p class="c18 c3"><span>radioUnselectedDisImage</span></p></td><td class="c26"><p class="c18 c3"><span>Radio button image</span></p></td></tr><tr><td class="c13"><p class="c18 c3"><span>radioUnselectedImage</span></p></td><td class="c26"><p class="c18 c3"><span>Radio button image</span></p></td></tr><tr><td class="c13"><p class="c18 c3"><span>rendererShowsNumbersBool</span></p></td><td class="c26"><p class="c18 c3"><span>Indicates whether renderers should render the entry number</span></p></td></tr><tr><td class="c13"><p class="c18 c3"><span>reverseSoftButtonsBool</span></p></td><td class="c26"><p class="c18 c3"><span>Swaps the softbutton positions</span></p></td></tr><tr><td class="c13"><p class="c3"><span>slideDirection</span></p></td><td class="c26"><p class="c18 c3"><span>Default slide transition settings</span></p></td></tr><tr><td class="c13"><p class="c18 c3"><span>slideInDirBool</span></p></td><td class="c26"><p class="c18 c3"><span>Default slide transition settings</span></p></td></tr><tr><td class="c13"><p class="c18 c3"><span>slideOutDirBool</span></p></td><td class="c26"><p class="c18 c3"><span>Default slide transition settings</span></p></td></tr><tr><td class="c13"><p class="c18 c3"><span>snapGridBool</span></p></td><td class="c26"><p class="c18 c3"><span>Snap to grid toggle</span></p></td></tr><tr><td class="c13"><p class="c18 c3"><span>tabPlacementInt</span></p></td><td class="c26"><p class="c18 c3"><span>The placement of the tabs in the Tabs component: TOP = 0, BOTTOM = 2, LEFT = 1, RIGHT = 3</span></p></td></tr><tr><td class="c13"><p class="c3"><span>tabsFillRowsBool</span></p></td><td class="c26"><p class="c18 c3"><span>Indicates if the tabs should fill the row using flow layout</span></p></td></tr><tr><td class="c13"><p class="c18 c3"><span>tabsGridBool</span></p></td><td class="c26"><p class="c18 c3"><span>Indicates whether tabs should use a grid layout thus forcing all tabs to have identical sizes</span></p></td></tr><tr><td class="c13"><p class="c3"><span>textCmpVAlignInt</span></p></td><td class="c26"><p class="c18 c3"><span>The vertical alignment of the text component: TOP = 0, CENTER = 4, BOTTOM = 2</span></p></td></tr><tr><td class="c13"><p class="c18 c3"><span>textFieldCursorColorInt</span></p></td><td class="c26"><p class="c18 c3"><span>The color of the cursor as an integer (not hex)</span></p></td></tr><tr><td class="c13"><p class="c18 c3"><span>tickerSpeedInt</span></p></td><td class="c26"><p class="c18 c3"><span>The speed of label/button etc. tickering in ms.</span></p></td></tr><tr><td class="c13"><p class="c18 c3"><span>tintColor</span></p></td><td class="c26"><p class="c18 c3"><span>The aarrggbb hex color to tint the screen when a dialog is shown</span></p></td></tr><tr><td class="c13"><p class="c18 c3"><span>touchCommandFillBool</span></p></td><td class="c26"><p class="c18 c3"><span>Indicates how the touch menu should layout the commands within</span></p></td></tr><tr><td class="c13"><p class="c18 c3"><span>touchCommandFlowBool</span></p></td><td class="c26"><p class="c18 c3"><span>Indicates how the touch menu should layout the commands within</span></p></td></tr><tr><td class="c13"><p class="c3"><span>transitionSpeedInt</span></p></td><td class="c26"><p class="c18 c3"><span>Indicates the default speed for transitions</span></p></td></tr><tr><td class="c13"><p class="c18 c3"><span>tensileDragBool</span></p></td><td class="c26"><p class="c3"><span>indicates that tensile drag should be enabled/disabled. This is usually set by platform themes.</span></p></td></tr></tbody></table><p class="c3 c5"><span></span></p><p class="c3"><span>One &quot;odd&quot; behavior of constants is that once they are set by a theme they don&#39;t get &quot;lost&quot; when replacing the theme. E.g. if one would set the comboImage constant to a specific value in theme A and then switch to theme B that doesn&#39;t define the comboImage, the original theme A comboImage might remain. The reason for this is simple, when extracting the constant values components keep the values in cache locally and just don&#39;t track the change in value. Furthermore, since the components allow manually setting values its impractical for them to track whether a value was set by a constant or explicitly by the user.</span></p><p class="c3"><span>The solution for this is to either manually reset undesired values before replacing a theme (e.g. for the case above by calling the default look and feel method for setting the combo image with a null value) or defining a constant value to replace the existing value.</span></p><h2 class="c37 c3"><a name="h.34qok1mgjsuz"></a><span class="c10">How Does A Theme Work</span></h2><p class="c3"><span>Codename One themes are effectively a simple hashtable containing key/value pairs. Such a hashtable is passed on to the setThemeProps() method of the UIManager (or one of its equivalents e.g. addThemeProps()) to install a theme.</span></p><p class="c3"><span>When a Codename One component is rendered or laid out, style related data is requested, in which case the UIManager generates a </span><span class="c8"><a class="c15" href="https://codenameone.googlecode.com/svn/trunk/CodenameOne/javadoc/com/codename1/ui/plaf/Style.html">Style</a></span><span>&nbsp;object based on the theme hashtable values.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>A theme hashtable key is comprised of:</span></p><p class="c3"><span>[UIID.][type#]attribute</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>The UIID, corresponds to the component&rsquo;s UIID e.g. Button, CheckBox etc. It is optional and may be omitted to address the global default style.</span></p><p class="c3"><span>The type is omitted for the default unselected type and may be one of sel (selected type), dis (disabled type) or press (pressed type). The attribute should be one of:</span></p><ul class="c45 lst-kix_o0ojb8md1tjt-0 start"><li class="c3 c20 c12"><span>derive - the value for this attribute should be a string representing the base component.</span></li><li class="c3 c20 c12"><span>bgColor - represents the background color for the component if applicable in a web hex string format RRGGBB e.g. ff0000 for red.</span></li><li class="c3 c20 c12"><span>fgColor - represents the foreground color if applicable. </span></li><li class="c3 c20 c12"><span>border - an instance of the border class, used to display the border for the component.</span></li><li class="c3 c20 c12"><span>bgImage - an Image object used in the background of a component</span></li><li class="c3 c20 c12"><span>transparency - a String containing a number between 0-255 representing the alpha value for the background. This only applies to the bgColor.</span></li><li class="c3 c20 c12"><span>margin - the margin of the component as a String containing 4 comma separated numbers for top,bottom,left,right.</span></li><li class="c3 c20 c12"><span>padding - the padding of the component, it has an identical format to the margin attribute.</span></li><li class="c3 c20 c12"><span>font - A Font object instance</span></li><li class="c3 c20 c12"><span>alignment - an Integer object containing the LEFT/RIGHT/CENTER constant values defined in Component.</span></li><li class="c3 c20 c12"><span>textDecoration - an Integer value containing one of the TEXT_DECORATION_* constant values defined in Style.</span></li><li class="c3 c20 c12"><span>backgroundType - a Byte object containing one of the constants for the background type defined in Style under BACKGROUND_*.</span></li><li class="c3 c20 c12"><span>backgroundGradient - contains an Object array containing 2 integers for the colors of the gradient. If the gradient is radial it contains 3 floating points defining the x, y &amp; size of the gradient.</span></li></ul><p class="c3 c5"><span></span></p><p class="c3"><span>So to set the foreground color of a selected button to red a theme will define a property like:</span></p><p class="c3"><span>Button.sel#fgColor=ff0000</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>This information is mostly useful for understanding how things work within Codename One, but it can also be useful in runtime. </span></p><p class="c3 c5"><span></span></p><p class="c3"><span>E.g. to increase the size of all fonts in the application we can do something like:</span></p><p class="c3"><span class="c0">Hashtable</span><span>&nbsp;</span><span class="c0">h</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Hashtable</span><span class="c4">()</span><span class="c7">;</span><span><br></span><span class="c0">h</span><span>.</span><span class="c0">put</span><span class="c4">(</span><span class="c22">&quot;font&quot;</span><span>, </span><span class="c0">largeFont</span><span class="c4">)</span><span class="c7">;</span><span><br></span><span class="c0">UIManager</span><span>.</span><span class="c0">getInstance</span><span class="c4">()</span><span>.</span><span class="c0">addThemeProps</span><span class="c4">(</span><span class="c0">h</span><span class="c4">)</span><span class="c7">;</span><span><br></span><span class="c0">Display</span><span>.</span><span class="c0">getInstance</span><span class="c4">()</span><span>.</span><span class="c0">getCurrent</span><span class="c4">()</span><span>.</span><span class="c0">refreshTheme</span><span class="c4">()</span><span class="c7">;</span></p><h2 class="c37 c3"><a name="h.u5dx1yemxc2s"></a><span class="c10">Understanding Images &amp; Multi-Images</span></h2><p class="c3"><span>When working with a theme we often use images for borders or backgrounds. We also use images within the GUI for various purposes and most such images will be extracted from the resource file. </span></p><p class="c3"><span>Adding a standard JPEG/PNG image to the resource file is straightforward &nbsp;and it can be viewed within the images section. However, due to the wide difference between device types an image that would be appropriate in size for an iPhone 3gs would not be appropriate in size for a Nexus device or an iPhone 4 (but perhaps surprisingly it will be just right for iPad 1 &amp; iPad 2). </span></p><p class="c3"><span>The reason for this is DPI or device density, the density of the devices varies significantly and Codename One tries to make matters simple by unifying everything into one set of values to indicate density. For simplicities sake density is expressed in terms of pixels but it is mapped internally to actual screen measurements where possible.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>A multi-image is an image that has multiple varieties for different densities and thus looks much better on all the different resolutions. Since scaling on the device can&rsquo;t interpolate the data (due to performance considerations) scaling on the device becomes impractical. However, a multi-image will just provide the &ldquo;right&rdquo; resolution image for the given device type.</span></p><p class="c3"><span>From the programming perspective this is completely seamless, a developer just access one image and has no ability to access the images in the different resolutions. Within the designer however, we can explicitly define images for multiple resolutions and perform high quality scaling so the &ldquo;right&rdquo; image is available.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>To add a multi-image we can use two basic methods: quick add &amp; standard add.</span></p><p class="c3"><span>Both rely on understanding the source resolution of the image, e.g. you have an icon that you expect to be 128x128 pixels on iPhone 4, 102x102 on nexus one and 64x64 on iPhone 3gs. You can provide the source image as the 128 pixel image and just perform a quick add option while picking the Very High density option as an option.</span></p><p class="c3"><span>This will indicate to the algorithm that your source image is designed for very high density and it will scale for the rest of the densities accordingly.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>Alternatively you can use the standard add multi-image dialog and set it like this:</span></p><p class="c3"><img height="456" src="images/image103.png" width="538"></p><p class="c3 c5"><span></span></p><p class="c3"><span>Notice that I selected square images essentially eliminating the height option. Setting values to 0 prevents the system from generating a multi-image entry for that resolution, which will mean a device in that category will fall on the closest alternative.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>The percentage value will change the entire column and it means the percentage of the screen. E.g. We know the icon is 128 for the very high resolution, we can just move the percentage until we reach something close to 128 in the &ldquo;Very High&rdquo; row and the other rows will represent a size that should be pretty close in terms of physical size to the 128 figure. &nbsp;</span></p><p class="c3 c5"><span></span></p><p class="c3 c5"><span></span></p><hr style="page-break-before:always;display:none;"><p class="c3 c5"><span></span></p><h1 class="c3"><a name="h.2ppkkcsbn67j"></a><span class="c10">Working With The GUI Builder</span></h1><h2 class="c3"><a name="h.mtadu4ksyom5"></a><span class="c10">Basic Concepts</span></h2><p class="c3"><span>The basic premise is this: the designer creates a UI version and names GUI components, he can create commands as well including navigation commands, exit, minimize. He can also define a long running command which will by default trigger a thread to execute...</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>All UI elements can be loaded using the UIBuilder class. Why not just use the Resources API?</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>Since the Resources class is essential for using Codename One, adding the UIBuilder as an import would cause any application (even those that don&#39;t use the UIBuilder) to increase in size! We don&#39;t want people who aren&#39;t using the feature to pay the penalty for its existence!</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>The UI Builder is designed for use as a state machine carrying out the current state of the application so when any event occurs a subclass of the UIBuilder can just process it. The simplest way and most robust way for changes is to use the Codename One Designer to generate some code for you (yes we know its not a code generation tool but there is a hack...). </span></p><p class="c3 c5"><span></span></p><p class="c3"><span>When using a GUI builder project it will constantly regenerate the state machine base class which is a UIBuilder subclass containing most of what you need...</span></p><p class="c3"><span class="c9">The trick is not to touch that code! DO NOT CHANGE THAT CODE!</span></p><p class="c3 c5"><span class="c9"></span></p><p class="c3"><span>Sure you can change it and everything will be just fine, however it you will make changes to the GUI regenerating that file will obviously lose all those changes which is not something you want!</span></p><p class="c3"><span>To solve it you need to write your code within the State machine class which is a subclass of the state machine base class and just override the appropriate methods, then when the UI changes the GUI builder just safely overwrites the base class since you didn&#39;t change anything there...</span></p><p class="c3 c5"><span></span></p><hr style="page-break-before:always;display:none;"><p class="c3 c5"><span></span></p><h1 class="c3"><a name="h.mwa07ewl9esg"></a><span class="c10">The Components Of Codename One</span></h1><p class="c3"><span>This chapter covers the components of Codename One, not all are covered but it tries to go deeper than the JavaDocs.</span></p><p class="c3 c5"><span></span></p><h2 class="c3"><a name="h.ohzz78tn2lfk"></a><span class="c10">Container</span></h2><p class="c3"><span>The Codename One container is a base class for many high level components, a container is basically a component that can contain other components. That is all.</span></p><p class="c3"><span>Every component has a parent container which can be null if it isn&rsquo;t within a container at the moment or is a top level container. A container can have many children.</span></p><p class="c3"><span>Components are arranged in containers using layout managers which are just algorithms to determine the flow within a specific container.</span></p><p class="c3"><span>You can read more about layout managers in the section below dedicated to layout &nbsp;managers. The default layout of a Container is flow layout which is useful for simple types of layouts but problematic with many scenarios. We recommend you read about this in the layout manager section.</span></p><a href="#" name="id.e5eprbqyo8o0"></a><h2 class="c3"><a name="h.yijvamn6ymig"></a><span class="c10">Composite Components</span></h2><p class="c3"><span>Codename One components share a very generic hierarchy of inheritance e.g. Button derives from Label and thus receives all its abilities.</span></p><p class="c3"><span>However, some components are composites and derive from the Container class. E.g. the Multi-Button is a composite button that derives from Container but acts as a button externally. Normally this is pretty seamless for the developer with a few things to keep in mind.</span></p><p class="c3"><span>You should not use the Container derived methods on such a composite component.</span></p><p class="c3"><span>You can&rsquo;t cast it to the type which it relates to e.g. you can&rsquo;t cast MultiButton to Button.</span></p><h2 class="c3"><a name="h.v5pp6tbzl9lx"></a><span class="c10">Form</span></h2><p class="c3"><span>The top level container of Codename One. Form derives container and it is effectively the element we &ldquo;show&rdquo;. Only one form can be visible at any given time and we can get the currently visible form using the code:</span></p><p class="c3"><span class="c0">Form</span><span>&nbsp;</span><span class="c0">currentForm</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c0">Display</span><span>.</span><span class="c0">getInstance</span><span class="c4">()</span><span>.</span><span class="c0">getCurrent</span><span class="c4">()</span><span class="c7">;</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>A form is a unique container in the sense that it has a title, a content area and optionally a menu/menu bar area. When invoking methods such as add/removeComponent on a form you are in fact invoking something that looks like:</span></p><p class="c3"><span class="c0">myForm</span><span>.</span><span class="c0">getContentPane</span><span class="c4">()</span><span>.</span><span class="c0">addComponent</span><span class="c4">(</span><span>...</span><span class="c4">)</span><span class="c7">;</span></p><p class="c3"><span>&nbsp;</span></p><p class="c3"><span>Which makes sense since a form is really just a Container that has a border layout, its north section is occupied by the title area and its south section by the optional menu bar. The center (which stretches) is the content pane. The content pane is where you place all your components.</span></p><p class="c3 c5"><span></span></p><p class="c3"><img height="551" src="images/image39.png" width="627"></p><p class="c3"><span>There is one important piece missing from this image which is the glass pane (more on that soon), but basically you can see that every form has space allocated for the title/menu bar. If you don&rsquo;t set the title if won&rsquo;t show up (its size will be zero) but it will still be there. The same isn&rsquo;t always true for the case of the menu bar which can vary significantly. Effectively the section that matters is the content pane, so the form tries to do the &ldquo;right thing&rdquo; by pretending to be the content pane. However, this isn&rsquo;t always seamless and sometimes code needs to just invoke getContentPane() in order to work directly with the container.</span></p><p class="c3"><span>In addition to this the form has a layer on top of the content pane that is added implicitly when you invoke getLayeredPane(). This is a container that is placed on top of the content pane and allows you to place a component over another. Notice that you still need to place components using layout managers in order to get them to appear in the right place when using the layered pane.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>Form&rsquo;s have an additional layer painted on top of them called the glass pane, this allows developers to overlay UI on top of existing UI and paint as they see fit. This is useful for things that provide notification but don&rsquo;t want to intrude with application functionality.</span></p><h2 class="c3"><a name="h.ugbcaet3dlk3"></a><span class="c10">Dialog</span></h2><p class="c3"><span>A dialog is a special kind of form that can occupy only a portion of the screen, it also has the additional functionality of the modal show method. When showing a dialog we have two basic options modless and modal. Modal dialogs (the default) block the current EDT thread until the dialog is dismissed (to understand how they do it read about invokeAndBlock). &nbsp; </span></p><p class="c3"><span>Modal dialogs are an extremely useful way to prompt the used since the code has the users response on the next line of execution promoting a very linear way of coding.</span></p><p class="c3"><span>The dialog class contains multiple static helper methods to quickly show user notifications, but also allows a developer to create a dialog instance, add information to its content pane and show the dialog. When showing a dialog in this way you can either ask Codename One to position the dialog in a specific general location (taken from the BorderLayout concept for locations) or position it by spacing it (in pixels) from the 4 edges of the screen. </span></p><h2 class="c3"><a name="h.fajvhqps8d94"></a><span class="c10">Label</span></h2><p class="c3"><span>Label allows drawing text or placing an icon, it is a single line label that might ticker and might end with &ldquo;...&rdquo; in some cases where appropriate. Developers can determine the placement of the label relatively to its icon in quite a few powerful ways.</span></p><p class="c3"><span>Label serves as the base class for button which inherits all its functionality.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>Label doesn&rsquo;t break lines since line break support is expensive in terms of CPU, however TextArea does break lines and a common use case for creating a multi-line label is to set the UIID of text area to &ldquo;Label&rdquo; and invoke its setEditable(false) method.</span></p><h2 class="c3"><a name="h.fnfx054esyyu"></a><span class="c10">Button</span></h2><p class="c3"><span>A button is a subclass of label and so it inherits much of its functionality, specifically icon placement, tickering etc.</span></p><p class="c3"><span>Besides being &ldquo;pressable&rdquo; which is a unique feature to Button and its subclasses, it also allows for icons based on its states (pressed, hover etc.).</span></p><h2 class="c3"><a name="h.je0npi99li1e"></a><span class="c10">CheckBox/Radio Button</span></h2><p class="c3"><span>CheckBox &amp; Radio Button are both subclasses of button that allow for either a toggle state or exclusive selection state. Both of these components can be displayed as toggle buttons (see the toggle button section below) or just use the default check mark/filled circle appearance based on the type/OS. &nbsp;</span></p><h2 class="c3"><a name="h.x0y730y5huyc"></a><span class="c10">Multi-Button</span></h2><p class="c3"><span>A multi button is a special component that allows button like functionality (it&rsquo;s a </span><span class="c8"><a class="c15" href="#id.e5eprbqyo8o0">composite component</a></span><span>) with more advanced features. It supports up to 4 lines of text (it doesn&rsquo;t automatically wrap the text), an emblem (usually navigational arrow, or check box) and an icon. </span><img height="187" src="images/image66.jpg" width="250"></p><p class="c3"><span>It can be used as a button, a label, a checkbox or a radio button and allows creating richer UI&rsquo;s. </span></p><p class="c3 c5"><span></span></p><p class="c3"><span>The MultiButton is meant to provide developers with the ability to replicate some of the UI paradigms that are common to the UITableView iOS UI&#39;s. The MultiButton doesn&#39;t include anything radically special, its just a standard container with a Lead Component &nbsp;based UI.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>The MultiButton is mostly designed for use with the GUI builder although using it from code is similar. A common source of confusion is the difference between the icon and the emblem since both may have an icon image associated with them. The icon is an image representing the entry while the emblem is an optional visual representation of the action that will be undertaken when the element is pressed. Both may be used simultaneously or individually of one another.</span></p><h2 class="c3"><a name="h.wtelvm8oammf"></a><span class="c10">Span Button</span></h2><p class="c3"><span>SpanButton is a </span><span class="c8"><a class="c15" href="#id.e5eprbqyo8o0">composite component</a></span><span>&nbsp;that looks/acts like a button but can break lines rather than crop them when the text is very long.</span></p><h2 class="c37 c3"><a name="h.5jmt1vyh8dm7"></a><span class="c10">Span Label</span></h2><p class="c3"><span>SpanLabel is a </span><span class="c8"><a class="c15" href="#id.e5eprbqyo8o0">composite component</a></span><span>&nbsp;that looks/acts like a Label but can break lines rather than crop them when the text is very long.</span></p><h2 class="c3"><a name="h.3jq61jxpzrsj"></a><span class="c10">On Off Switch</span></h2><p class="c3"><span>The OnOffSwitch allows you to write an application where the user can swipe a switch between two states on-off. This is a common UI paradigm in Android and iOS although its implemented in a radically different way in both platforms.</span></p><p class="c3"><span>This is a rather elaborate component because of its very unique design on iOS but we were able to accommodate most of the small behaviors of the component into our version and it seamlessly adapts between the Android style and the iOS style.</span></p><h2 class="c3"><a name="h.l9fan0w3niql"></a><span class="c10">TextField/TextArea</span></h2><p class="c3"><span>The TextField class derives from the TextArea class and both are the mechanisms for user text input in Codename One. The semantic difference between the two classes dates back to the roots of Codename One in LWUIT where feature phones don&rsquo;t have &ldquo;proper&rdquo; in-place editing capabilities. </span></p><p class="c3"><span>Text field allowed input on various device types without opening the native full screen editing facilities. This is not used in any smartphone platform other than Symbian. On those platforms TextField and TextArea are practically identical. Both provide multi-line editing capabilities etc.</span></p><p class="c3"><span>One small difference in text field is the blinking cursor animation which doesn&rsquo;t appear in the text area implementation when it isn&rsquo;t edited. </span></p><p class="c3 c5"><span></span></p><p class="c3"><span>A common alternative use case of text area is as a multi-line label, to understand more about that please read the label section above.</span></p><h2 class="c3"><a name="h.fh8ecobifjd1"></a><span class="c10">Toggle Button</span></h2><p class="c3"><span>A toggle button is a button that is pressed and then stays pressed, when pressed again it&#39;s released. Hence the button has a selected state to indicate if it&#39;s pressed or not. Just like the radio button or checkbox components in Codename One. So Codename One&#39;s new toggle buttons are really any button (checkbox &amp; radio buttons derive from Button) that has the setToggle() method invoked with true. It thus paints itself with the toggle button style unless explicitly defined otherwise (note that the UIID will be implicitly changed to &quot;ToggleButton&quot;).</span><img height="103" src="images/image52.jpg" width="298"></p><p class="c3 c5"><span></span></p><p class="c3"><span>The cool thing about this is that you can effectively take your knowledge about checkboxes &amp; radio buttons and apply it to toggle buttons.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>That&#39;s half the story though, to get the full effect of some cool toggle button UI&#39;s we would like to assign the buttons on the edges with a rounded feel like some platforms choose to do... That&#39;s pretty easy, you can just assign a different UIID to the first/last buttons and be over with it.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>But what if you want your code to be generic? After all you might add/remove a button in runtime based on application state and you would like it to have the right style.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>To solve this we introduced the ComponentGroup.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>The ComponentGroup is a special container that can be either horizontal or vertical (Box X or Y respectively), it also does nothing else. You need to explicitly activate it in the theme by setting a theme property to true (by default you need to set ComponentGroupBool to true).</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>When ComponentGroupBool is set to true the component group will modify the styles of all components placed within it to match the element UIID given to it (by default GroupElement) with special caveats to the first/last/only elements. E.g.</span></p><p class="c3"><span>1. If I have one element within a component group it will have the UIID: GroupElementOnly</span></p><p class="c3"><span>2. If I have two elements within a component group they will have the UIID&#39;s GroupElementFirst, GroupElementLast</span></p><p class="c3"><span>3. If I have three elements within a component group they will have the UIID&#39;s GroupElementFirst, GroupElement, GroupElementLast</span></p><p class="c3"><span>4. If I have four elements within a component group they will have the UIID&#39;s GroupElementFirst, GroupElement, GroupElement, GroupElementLast</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>You get the picture... This allows you to define special styles for the sides (don&#39;t forget to use the derive attribute to generalize your theme) and provide toggle buttons that include special effects simply by placing them into this group.</span></p><p class="c3"><span>You can customize the UIID set by the component group by calling setElementUIID in the component group e.g. setElementUIID(&quot;ToggleButton&quot;) for the picture above will result in:</span></p><p class="c3"><span>ToggleButtonFirst, ToggleButton, ToggleButtonLast</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>This is a short sample:</span></p><p class="c3"><span><br></span><span class="c0">ComponentGroup</span><span>&nbsp;</span><span class="c0">buttons</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">ComponentGroup</span><span class="c4">()</span><span class="c7">;</span><span><br></span><span class="c0">buttons</span><span>.</span><span class="c0">setElementUIID</span><span class="c4">(</span><span class="c22">&quot;ToggleButton&quot;</span><span class="c4">)</span><span class="c7">;</span><span><br></span><span class="c0">buttons</span><span>.</span><span class="c0">setHorizontal</span><span class="c4">(</span><span class="c9">true</span><span class="c4">)</span><span class="c7">;</span><span><br></span><span class="c0">RadioButton</span><span>&nbsp;</span><span class="c0">plain</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">RadioButton</span><span class="c4">(</span><span class="c22">&quot;Plain&quot;</span><span class="c4">)</span><span class="c7">;</span><span><br></span><span class="c0">RadioButton</span><span>&nbsp;</span><span class="c0">underline</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">RadioButton</span><span class="c4">(</span><span class="c22">&quot;Underline&quot;</span><span class="c4">)</span><span class="c7">;</span><span><br></span><span class="c0">RadioButton</span><span>&nbsp;</span><span class="c0">strikeout</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">RadioButton</span><span class="c4">(</span><span class="c22">&quot;Strikethru&quot;</span><span class="c4">)</span><span class="c7">;</span><span><br></span><span class="c0">ButtonGroup</span><span>&nbsp;</span><span class="c0">bg</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">ButtonGroup</span><span class="c4">()</span><span class="c7">;</span><span><br></span><span class="c0">initRb</span><span class="c4">(</span><span class="c0">bg</span><span>, </span><span class="c0">buttons</span><span>, </span><span class="c0">listener</span><span>, </span><span class="c0">plain</span><span class="c4">)</span><span class="c7">;</span><span><br></span><span class="c0">initRb</span><span class="c4">(</span><span class="c0">bg</span><span>, </span><span class="c0">buttons</span><span>, </span><span class="c0">listener</span><span>, </span><span class="c0">underline</span><span class="c4">)</span><span class="c7">;</span><span><br></span><span class="c0">initRb</span><span class="c4">(</span><span class="c0">bg</span><span>, </span><span class="c0">buttons</span><span>, </span><span class="c0">listener</span><span>, </span><span class="c0">strikeout</span><span class="c4">)</span><span class="c7">;</span><span><br></span><span class="c0">Container</span><span>&nbsp;</span><span class="c0">centerFlow</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Container</span><span class="c4">(</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">FlowLayout</span><span class="c4">(</span><span class="c0">Component</span><span>.</span><span class="c0">CENTER</span><span class="c4">))</span><span class="c7">;</span><span><br></span><span class="c0">f</span><span>.</span><span class="c0">addComponent</span><span class="c4">(</span><span class="c0">centerFlow</span><span class="c4">)</span><span class="c7">;</span><span><br></span><span class="c0">centerFlow</span><span>.</span><span class="c0">addComponent</span><span class="c4">(</span><span class="c0">buttons</span><span class="c4">)</span><span class="c7">;</span><span><br><br></span><span class="c9">private</span><span>&nbsp;</span><span class="c9">void</span><span>&nbsp;</span><span class="c0">initRb</span><span class="c4">(</span><span class="c0">ButtonGroup</span><span>&nbsp;</span><span class="c0">bg</span><span>, </span><span class="c0">Container</span><span>&nbsp;</span><span class="c0">buttons</span><span>, </span><span class="c0">ActionListener</span><span>&nbsp;</span><span class="c0">listener</span><span>, </span><span class="c0">RadioButton</span><span>&nbsp;</span><span class="c0">rb</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; </span><span class="c0">bg</span><span>.</span><span class="c0">add</span><span class="c4">(</span><span class="c0">rb</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; </span><span class="c0">rb</span><span>.</span><span class="c0">setToggle</span><span class="c4">(</span><span class="c9">true</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; </span><span class="c0">buttons</span><span>.</span><span class="c0">addComponent</span><span class="c4">(</span><span class="c0">rb</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; </span><span class="c0">rb</span><span>.</span><span class="c0">addActionListener</span><span class="c4">(</span><span class="c0">listener</span><span class="c4">)</span><span class="c7">;</span><span><br></span><span class="c4">}</span></p><p class="c3 c5"><span></span></p><h2 class="c3"><a name="h.eof01apexjwb"></a><span class="c10">List, ContainerList, Renderers &amp; Models</span></h2><p class="c3"><span class="c9">Warning: This is a rather complex chapter. If you are just interested in creating a simple list we suggest you skip ahead to the MultiList section.</span><span>&nbsp;</span></p><p class="c3"><span>A Codename One list doesn&#39;t contain components but rather arbitrary data, this seems odd at first but makes perfect sense... If you want a list to contain components just use a Container.</span></p><p class="c3"><span>The advantage of using a List in this way is that we can display it in many ways (e.g. fixed focus positions, horizontally etc.) and that we can have more than a million entries without performance overhead. We can also do some pretty nifty things like filter the list on the fly or fetch it dynamically from the internet as the user scrolls down the list.</span></p><p class="c3"><span>To achieve these things the list uses two interfaces: ListModel and ListCellRenderer.</span></p><p class="c3"><span>List model represents the data, its responsibility is to return the arbitrary object within the list at a given offset. Its second responsibility is to notify the list when the data changes so the list can refresh, think of it as an array of objects that can notify you when you get changes.</span></p><p class="c3"><span>The list renderer is like a rubber stamp that knows how to draw an object from the model, its called many times per entry in an animated list and must be very fast. Unlike standard LWUIT components it is only used to draw the entry in the model and immediately discarded hence it has no memory overhead but if it takes too long to process a model value it can be a big bottleneck!</span></p><p class="c3"><span>This is all very generic but a bit too much for most, doing a list &quot;properly&quot; requires some understanding. The main source of confusion for developers is the stateless nature of the list and transfer of state to the model (e.g. a checkbox list needs to listen to action events on the list and update the model in order for the renderer to display that state... Once you understand that it&rsquo;s easy).</span></p><h3 class="c49 c3"><a name="h.2zh2wht85zgn"></a><span class="c10">Important - Lists &amp; Layout Managers</span></h3><p class="c3"><span>Usually when working with lists you want the list to handle the scrolling (otherwise it will perform badly). This means you should place the list in a non-scrollable container (no parent can be scrollable), notice that the content pane is scrolled by default so you should disable that.</span></p><p class="c3"><span>It is also recommended to place the list in the CENTER location of a BorderLayout to produce the most effective results. e.g.:</span></p><p class="c3"><span class="c0">form</span><span>.</span><span class="c0">setScrollable</span><span class="c4">(</span><span class="c9">false</span><span class="c4">)</span><span class="c7">;</span><span><br></span><span class="c0">form</span><span>.</span><span class="c0">setLayout</span><span class="c4">(</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">BorderLayout</span><span class="c4">())</span><span class="c7">;</span><span><br></span><span class="c0">form</span><span>.</span><span class="c0">addComponent</span><span class="c4">(</span><span class="c0">BorderLayout</span><span>.</span><span class="c0">CENTER</span><span>, </span><span class="c0">myList</span><span class="c4">)</span><span class="c7">;</span><span>&nbsp;</span></p><h3 class="c49 c3"><a name="h.wgcias7n8jvz"></a><span class="c10">Using Lists In The GUI Builder</span></h3><p class="c3"><span>The Codename One GUI builder provides several simplifications to the concepts outlined below, you can build all portions of the list through the GUI builder or build portions of them using code if you so desire.</span></p><p class="c3"><span>This is a step by step guide with explanations on how to achieve this. Again you might prefer using the MultiList component mentioned below which is even easier to use.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>Start by creating a new GUI form, set its scrollable Y to false and set its layout to border layout</span></p><p class="c3"><img height="285" src="images/image61.png" width="503"></p><p class="c3 c5"><span></span></p><p class="c3"><span>Next drag a list into the center of the layout and you should now have a functioning basic list with 3 items.</span></p><p class="c3"><img height="286" src="images/image08.png" width="497"></p><p class="c3 c5"><span></span></p><p class="c3 c5"><span></span></p><p class="c3"><span>Next we will create the Renderer which indicates how an individual item in the list appears, start by pressing the Add New GUI Element button and </span><span class="c9">select the &ldquo;Blank Container&rdquo;</span><span>&nbsp;option! &nbsp;Fill the name as &ldquo;MyRenderer&rdquo; or anything like that.</span></p><p class="c3"><img height="246" src="images/image62.png" width="560"></p><p class="c3 c5"><span></span></p><p class="c3"><span>Within the renderer you can drag any component you would like to appear, labels, checkboxes, etc. You can nest them in containers and layouts as you desire. Give them names that are representative of what you are trying to accomplish e.g. Firstname, selected etc. </span></p><p class="c3"><img height="156" src="images/image79.png" width="542"></p><p class="c3 c5"><span></span></p><p class="c3"><span>You can now go back to the list, select it and click the Renderer property in order to select the render container you created previously resulting in something like this.</span></p><p class="c3"><img height="320" src="images/image22.png" width="309"></p><p class="c3 c5"><span></span></p><p class="c3"><span>You&rsquo;ll notice that the data doesn&rsquo;t match the original content of the list, that is because the list contains strings instead of Hashtables. To fix this we must edit the list data. </span></p><p class="c3 c5"><span></span></p><p class="c3"><span>You can place your own data in the list using the GUI builder which is generally desired regardless of what you end up doing since this allows you to preview your designer in the GUI builder.</span></p><p class="c3"><span>If you wish to populate your list from code just click the events tab and press the ListModel button, you can fill up the model with an array of Hashtables as we explain soon enough (you can read more about the list model below).</span></p><p class="c3"><span>&nbsp;</span></p><p class="c3"><span>To populate the list via the GUI builder click the properties of the list and within them click the ListItems entry. The entries within can be strings or Hashtables, however in order to be customizable in the rendering stage we will need them all to be Hashtables. Remove all the current entries and add a new entry:</span></p><p class="c3"><img height="289" src="images/image70.png" width="637"></p><p class="c3 c5"><span></span></p><p class="c3"><span>After adding two entries as such:</span></p><p class="c3"><img height="307" src="images/image16.png" width="529"></p><p class="c3 c5"><span></span></p><p class="c3"><span>We now have a customized list that&rsquo;s adapted to its renderer:</span></p><p class="c3"><img height="211" src="images/image89.png" width="268"></p><h3 class="c3"><a name="h.88ipu1mp0ubv"></a><span class="c10">Understanding MVC</span></h3><p class="c3"><span>Lets recap, what is MVC:</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>Model - Represents the data for the component (list), the model can tell us exactly how many items are in it and which item resides at a given offset within the model. This differs from a simple Vector (or array) since all access to the model is controlled (the interface is simpler) and unlike a Vector/Array the model can notify us of changes that occur within it.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>View - The view draws the content of the model. It is a &quot;dumb&quot; layer that has no notion of what is displayed and only knows how to draw. It tracks changes in the model (the model sends events) and redraws itself when it changes.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>Controller - The controller accepts user input and performs changes to model which in turn cause the view to refresh.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>Codename One&#39;s List component uses the MVC paradigm to separate its implementation. List itself is the Controller (with a bit of View mixed in). The ListCellRenderer interface is a View and the ListModel is (you guessed it by now) the model.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>When the list is painted it iterates over the visible elements in the model and asks for them, it then draws them using the renderer.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>Why is this useful?</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>Since the model is a lightweight interface it can be implemented by you and replaced in runtime if so desired, this allows several very cool use cases:</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>1. A list can contain thousands of entries but only load the portion visible to the user. Since the model will only be queried for the elements that are visible to the user it won&#39;t need to load into memory a very large data set until the user starts scrolling down (at which point other elements may be offloaded from memory).</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>2. A list can cache efficiently. E.g. a list can mirror data from the server into local RAM without actually downloading all the data. Data can also be mirrored from RMS for better performance and discarded for better memory utilization.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>3. No need for state copying. Since renderers allow us to display any object type, the list model interface can be implemented by the applications data structures (e.g. persistence/network engine) which would return internal application data structures saving you the need of copying application state into a list specific data structure.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>4. Using the proxy pattern (as explained in a previous post) we can layer logic such as filtering, sorting, caching etc. on top of existing models without changing the model source code.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>5. We can reuse generic models for several views e.g. a model that fetches data from the server can be initialized with different arguments to fetch different data for different views. View objects in different Form&#39;s can display the same model instance in different view instances thus they would update automatically when we change one global model.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>Most of these use cases work best for lists that grow to a larger size or represent complex data which is what the list object is designed to do.</span></p><p class="c3 c5"><span></span></p><h3 class="c3"><a name="h.64jttxjpxji"></a><span class="c10">List Cell Renderer</span></h3><p class="c3"><span>List is one of the most important widgets in Codename One, unfortunately it is also one of the most difficult widgets to understand.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>The List component uses the MVC model inspired from Swing (which was inspired from SmallTalk), we created a data model to encapsulate the data and a renderer to display the data items on the screen.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>Let&#39;s have a closer look at the List Renderer, the Renderer is a simple interface with 2 methods:</span></p><p class="c3 c5"><span></span></p><p class="c3"><span class="c9">public</span><span>&nbsp;</span><span class="c9">interface</span><span>&nbsp;</span><span class="c0">ListCellRenderer</span><span>&nbsp;</span><span class="c4">{</span></p><p class="c3"><span class="c11">//This method is called by the List for each item, when the List paints itself.</span></p><p class="c3"><span class="c9">public</span><span>&nbsp;</span><span class="c0">Component</span><span>&nbsp;</span><span class="c0">getListCellRendererComponent</span><span class="c4">(</span><span class="c0">List</span><span>&nbsp;</span><span class="c0">list</span><span>, </span><span class="c0">Object</span><span>&nbsp;</span><span class="c0">value</span><span>, </span><span class="c9">int</span><span>&nbsp;</span><span class="c0">index</span><span>, </span><span class="c9">boolean</span><span>&nbsp;</span><span class="c0">isSelected</span><span class="c4">)</span><span class="c7">;</span></p><p class="c3 c5"><span class="c7"></span></p><p class="c3"><span class="c11">//This method returns the List animated focus which is animated when list selection changes</span></p><p class="c3"><span class="c9">public</span><span>&nbsp;</span><span class="c0">Component</span><span>&nbsp;</span><span class="c0">getListFocusComponent</span><span class="c4">(</span><span class="c0">List</span><span>&nbsp;</span><span class="c0">list</span><span class="c4">)</span><span class="c7">;</span></p><p class="c3 c5"><span class="c7"></span></p><p class="c3"><span class="c4">}</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>L</span><span>et&#39;s try to implement our own renderer.</span></p><p class="c3"><span>The most simple/naive implementation may choose to implement the renderer as follows:</span></p><p class="c3 c5"><span></span></p><p class="c3 c5"><span></span></p><p class="c3"><span class="c9">public</span><span>&nbsp;</span><span class="c0">Component</span><span>&nbsp;</span><span class="c0">getListCellRendererComponent</span><span class="c4">(</span><span class="c0">List</span><span>&nbsp;</span><span class="c0">list</span><span>, </span><span class="c0">Object</span><span>&nbsp;</span><span class="c0">value</span><span>, </span><span class="c9">int</span><span>&nbsp;</span><span class="c0">index</span><span>, </span><span class="c9">boolean</span><span>&nbsp;</span><span class="c0">isSelected</span><span class="c4">){</span></p><p class="c3"><span class="c9">return</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Label</span><span class="c4">(</span><span class="c0">value</span><span>.</span><span class="c0">toString</span><span class="c4">())</span><span class="c7">;</span></p><p class="c3"><span class="c4">}</span></p><p class="c3 c5"><span class="c4"></span></p><p class="c3"><span class="c9">public</span><span>&nbsp;</span><span class="c0">Component</span><span>&nbsp;</span><span class="c0">getListFocusComponent</span><span class="c4">(</span><span class="c0">List</span><span>&nbsp;</span><span class="c0">list</span><span class="c4">){</span></p><p class="c3"><span class="c9">return</span><span>&nbsp;</span><span class="c9">null</span><span class="c7">;</span></p><p class="c3"><span class="c4">}</span></p><p class="c3 c5"><span class="c4"></span></p><p class="c3"><span>This will compile and work, but won&#39;t give you much, notice that you won&#39;t see the List selection move on the List, this is just because the renderer returns a Label with the same style regardless if it&#39;s being selected or not.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>Now Let&#39;s try to make it a bit more useful.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span class="c9">public</span><span>&nbsp;</span><span class="c0">Component</span><span>&nbsp;</span><span class="c0">getListCellRendererComponent</span><span class="c4">(</span><span class="c0">List</span><span>&nbsp;</span><span class="c0">list</span><span>, </span><span class="c0">Object</span><span>&nbsp;</span><span class="c0">value</span><span>, </span><span class="c9">int</span><span>&nbsp;</span><span class="c0">index</span><span>, </span><span class="c9">boolean</span><span>&nbsp;</span><span class="c0">isSelected</span><span class="c4">){</span></p><p class="c3"><span>&nbsp; &nbsp; &nbsp; </span><span class="c0">Label</span><span>&nbsp;</span><span class="c0">l</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Label</span><span class="c4">(</span><span class="c0">value</span><span>.</span><span class="c0">toString()</span><span class="c4">)</span><span class="c7">;</span></p><p class="c3"><span class="c9">if</span><span>&nbsp;</span><span class="c4">(</span><span class="c0">isSelected</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span></p><p class="c3"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">l</span><span>.</span><span class="c0">setFocus</span><span class="c4">(</span><span class="c9">true</span><span class="c4">)</span><span class="c7">;</span></p><p class="c3"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">l</span><span>.</span><span class="c0">getStyle</span><span class="c4">()</span><span>.</span><span class="c0">setBgTransparency</span><span class="c4">(</span><span class="c14">100</span><span class="c4">)</span><span class="c7">;</span></p><p class="c3"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">}</span><span>&nbsp;</span><span class="c9">else</span><span>&nbsp;</span><span class="c4">{</span></p><p class="c3"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">l</span><span>.</span><span class="c0">setFocus</span><span class="c4">(</span><span class="c9">false</span><span class="c4">)</span><span class="c7">;</span></p><p class="c3"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">l</span><span>.</span><span class="c0">getStyle</span><span class="c4">()</span><span>.</span><span class="c0">setBgTransparency</span><span class="c4">(</span><span class="c14">0</span><span class="c4">)</span><span class="c7">;</span></p><p class="c3"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c4">}</span></p><p class="c3"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c9">return</span><span>&nbsp;</span><span class="c0">l</span><span class="c7">;</span></p><p class="c3"><span class="c4">}</span><span>&nbsp;</span><span class="c9">&nbsp; public</span><span>&nbsp;</span><span class="c0">Component</span><span>&nbsp;</span><span class="c0">getListFocusComponent</span><span class="c4">(</span><span class="c0">List</span><span>&nbsp;</span><span class="c0">list</span><span class="c4">){</span></p><p class="c3"><span>&nbsp; &nbsp; &nbsp; </span><span class="c9">return</span><span>&nbsp;</span><span class="c9">null</span><span class="c7">;</span></p><p class="c3"><span class="c4">}</span></p><p class="c3 c5"><span class="c4"></span></p><p class="c3"><span>In this renderer we set the Label.setFocus(true) if it&#39;s selected, calling to this method doesn&#39;t really gives the focus to the Label, it simply indicates to the LookAndFeel to draw the Label with fgSelectionColor and bgSelectionColor instead of fgColor and bgColor.</span></p><p class="c3"><span>Then we call to Label.getStyle().setBgTransparency(100) to give the selection semi transparency and 0 for full transparency if not selected.</span></p><p class="c3"><span>OK that&#39;s a bit more functional, but not very efficient that&#39;s because we create a new Label each time the method is called.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>To make it more device friendly keep a reference to the Component or extend the Widget.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span class="c9">class</span><span>&nbsp;</span><span class="c0">MyRenderer</span><span>&nbsp;</span><span class="c9">extends</span><span>&nbsp;</span><span class="c0">Label </span><span class="c9">implements</span><span>&nbsp;</span><span class="c0">ListCellRenderer </span><span class="c4">{</span></p><p class="c3 c5"><span class="c4"></span></p><p class="c3"><span class="c9">public</span><span>&nbsp;</span><span class="c0">Component</span><span>&nbsp;</span><span class="c0">getListCellRendererComponent</span><span class="c4">(</span><span class="c0">List</span><span>&nbsp;</span><span class="c0">list</span><span>, </span><span class="c0">Object</span><span>&nbsp;</span><span class="c0">value</span><span>, </span><span class="c9">int</span><span>&nbsp;</span><span class="c0">index</span><span>, </span><span class="c9">boolean</span><span>&nbsp;</span><span class="c0">isSelected</span><span class="c4">){</span></p><p class="c3"><span class="c0">setText</span><span class="c4">(</span><span class="c0">value</span><span>.</span><span class="c0">toString()</span><span class="c4">)</span><span class="c7">;</span></p><p class="c3"><span class="c9">if</span><span>&nbsp;</span><span class="c4">(</span><span class="c0">isSelected</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span></p><p class="c3"><span>&nbsp; </span><span class="c0">setFocus</span><span class="c4">(</span><span class="c9">true</span><span class="c4">)</span><span class="c7">;</span></p><p class="c3"><span>&nbsp; </span><span class="c0">getStyle</span><span class="c4">()</span><span>.</span><span class="c0">setBgTransparency</span><span class="c4">(</span><span class="c14">100</span><span class="c4">)</span><span class="c7">;</span></p><p class="c3"><span class="c4">}</span><span>&nbsp;</span><span class="c9">else</span><span>&nbsp;</span><span class="c4">{</span></p><p class="c3"><span class="c0">setFocus</span><span class="c4">(</span><span class="c9">false</span><span class="c4">)</span><span class="c7">;</span></p><p class="c3"><span>&nbsp; </span><span class="c0">getStyle</span><span class="c4">()</span><span>.</span><span class="c0">setBgTransparency</span><span class="c4">(</span><span class="c14">0</span><span class="c4">)</span><span class="c7">;</span></p><p class="c3"><span class="c4">}</span></p><p class="c3"><span class="c9">return</span><span>&nbsp;</span><span class="c9">this</span><span class="c7">;</span></p><p class="c3"><span class="c4">}</span></p><p class="c3"><span class="c4">}</span></p><p class="c3"><span class="c4">}</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>Now Let&#39;s have a look at a more advanced Renderer </span></p><p class="c3 c5"><span class="c9"></span></p><p class="c3"><span class="c9">class</span><span>&nbsp;</span><span class="c0">ContactsRenderer</span><span>&nbsp;</span><span class="c9">extends</span><span>&nbsp;</span><span class="c0">Container</span><span>&nbsp;</span><span class="c9">implements</span><span>&nbsp;</span><span class="c0">ListCellRenderer</span><span>&nbsp;</span><span class="c4">{</span></p><p class="c3 c5"><span class="c4"></span></p><p class="c3"><span>&nbsp;</span><span class="c9">private</span><span>&nbsp;</span><span class="c0">Label</span><span>&nbsp;</span><span class="c0">name</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Label</span><span class="c4">(</span><span class="c22">&quot;&quot;</span><span class="c4">)</span><span class="c7">;</span></p><p class="c3"><span>&nbsp;</span><span class="c9">private</span><span>&nbsp;</span><span class="c0">Label</span><span>&nbsp;</span><span class="c0">email</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Label</span><span class="c4">(</span><span class="c22">&quot;&quot;</span><span class="c4">)</span><span class="c7">;</span></p><p class="c3"><span>&nbsp;</span><span class="c9">private</span><span>&nbsp;</span><span class="c0">Label</span><span>&nbsp;</span><span class="c0">pic</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Label</span><span class="c4">(</span><span class="c22">&quot;&quot;</span><span class="c4">)</span><span class="c7">;</span></p><p class="c3 c5"><span class="c7"></span></p><p class="c3"><span>&nbsp;</span><span class="c9">private</span><span>&nbsp;</span><span class="c0">Label</span><span>&nbsp;</span><span class="c0">focus</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Label</span><span class="c4">(</span><span class="c22">&quot;&quot;</span><span class="c4">)</span><span class="c7">;</span></p><p class="c3 c5"><span class="c7"></span></p><p class="c3"><span>&nbsp;</span><span class="c9">public</span><span>&nbsp;</span><span class="c0">ContactsRenderer</span><span class="c4">()</span><span>&nbsp;</span><span class="c4">{</span></p><p class="c3"><span>&nbsp; &nbsp; &nbsp;</span><span class="c0">setLayout</span><span class="c4">(</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">BorderLayout</span><span class="c4">())</span><span class="c7">;</span></p><p class="c3"><span>&nbsp; &nbsp; &nbsp;</span><span class="c0">addComponent</span><span class="c4">(</span><span class="c0">BorderLayout</span><span>.</span><span class="c0">WEST</span><span>, </span><span class="c0">pic</span><span class="c4">)</span><span class="c7">;</span></p><p class="c3"><span>&nbsp; &nbsp; &nbsp;</span><span class="c0">Container</span><span>&nbsp;</span><span class="c0">cnt</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Container</span><span class="c4">(</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">BoxLayout</span><span class="c4">(</span><span class="c0">BoxLayout</span><span>.</span><span class="c0">Y_AXIS</span><span class="c4">))</span><span class="c7">;</span></p><p class="c3"><span>&nbsp; &nbsp; &nbsp;</span><span class="c0">name</span><span>.</span><span class="c0">getStyle</span><span class="c4">()</span><span>.</span><span class="c0">setBgTransparency</span><span class="c4">(</span><span class="c14">0</span><span class="c4">)</span><span class="c7">;</span></p><p class="c3"><span>&nbsp; &nbsp; &nbsp;</span><span class="c0">name</span><span>.</span><span class="c0">getStyle</span><span class="c4">()</span><span>.</span><span class="c0">setFont</span><span class="c4">(</span><span class="c0">Font</span><span>.</span><span class="c0">createSystemFont</span><span class="c4">(</span><span class="c0">Font</span><span>.</span><span class="c0">FACE_SYSTEM</span><span>, </span><span class="c0">Font</span><span>.</span><span class="c0">STYLE_BOLD</span><span>, </span><span class="c0">Font</span><span>.</span><span class="c0">SIZE_MEDIUM</span><span class="c4">))</span><span class="c7">;</span></p><p class="c3"><span>&nbsp; &nbsp; &nbsp;</span><span class="c0">email</span><span>.</span><span class="c0">getStyle</span><span class="c4">()</span><span>.</span><span class="c0">setBgTransparency</span><span class="c4">(</span><span class="c14">0</span><span class="c4">)</span><span class="c7">;</span></p><p class="c3"><span>&nbsp; &nbsp; &nbsp;</span><span class="c0">cnt</span><span>.</span><span class="c0">addComponent</span><span class="c4">(</span><span class="c0">name</span><span class="c4">)</span><span class="c7">;</span></p><p class="c3"><span>&nbsp; &nbsp; &nbsp;</span><span class="c0">cnt</span><span>.</span><span class="c0">addComponent</span><span class="c4">(</span><span class="c0">email</span><span class="c4">)</span><span class="c7">;</span></p><p class="c3"><span>&nbsp; &nbsp; &nbsp;</span><span class="c0">addComponent</span><span class="c4">(</span><span class="c0">BorderLayout</span><span>.</span><span class="c0">CENTER</span><span>, </span><span class="c0">cnt</span><span class="c4">)</span><span class="c7">;</span></p><p class="c3 c5"><span class="c7"></span></p><p class="c3"><span>&nbsp; &nbsp; &nbsp;</span><span class="c0">focus</span><span>.</span><span class="c0">getStyle</span><span class="c4">()</span><span>.</span><span class="c0">setBgTransparency</span><span class="c4">(</span><span class="c14">100</span><span class="c4">)</span><span class="c7">;</span></p><p class="c3"><span>&nbsp;</span><span class="c4">}</span></p><p class="c3 c5"><span class="c4"></span></p><p class="c3"><span>&nbsp;</span><span class="c9">public</span><span>&nbsp;</span><span class="c0">Component</span><span>&nbsp;</span><span class="c0">getListCellRendererComponent</span><span class="c4">(</span><span class="c0">List</span><span>&nbsp;</span><span class="c0">list</span><span>, </span><span class="c0">Object</span><span>&nbsp;</span><span class="c0">value</span><span>, </span><span class="c9">int</span><span>&nbsp;</span><span class="c0">index</span><span>, </span><span class="c9">boolean</span><span>&nbsp;</span><span class="c0">isSelected</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span></p><p class="c3 c5"><span class="c4"></span></p><p class="c3"><span>&nbsp; &nbsp; &nbsp;</span><span class="c0">Contact</span><span>&nbsp;</span><span class="c0">person</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c4">(</span><span class="c0">Contact</span><span class="c4">)</span><span>&nbsp;</span><span class="c0">value</span><span class="c7">;</span></p><p class="c3"><span>&nbsp; &nbsp; &nbsp;</span><span class="c0">name</span><span>.</span><span class="c0">setText</span><span class="c4">(</span><span class="c0">person</span><span>.</span><span class="c0">getName</span><span class="c4">())</span><span class="c7">;</span></p><p class="c3"><span>&nbsp; &nbsp; &nbsp;</span><span class="c0">email</span><span>.</span><span class="c0">setText</span><span class="c4">(</span><span class="c0">person</span><span>.</span><span class="c0">getEmail</span><span class="c4">())</span><span class="c7">;</span></p><p class="c3"><span>&nbsp; &nbsp; &nbsp;</span><span class="c0">pic</span><span>.</span><span class="c0">setIcon</span><span class="c4">(</span><span class="c0">person</span><span>.</span><span class="c0">getPic</span><span class="c4">())</span><span class="c7">;</span></p><p class="c3"><span>&nbsp; &nbsp; &nbsp;</span><span class="c9">return</span><span>&nbsp;</span><span class="c9">this</span><span class="c7">;</span></p><p class="c3"><span>&nbsp;</span><span class="c4">}</span></p><p class="c3 c5"><span class="c4"></span></p><p class="c3"><span>&nbsp;</span><span class="c9">public</span><span>&nbsp;</span><span class="c0">Component</span><span>&nbsp;</span><span class="c0">getListFocusComponent</span><span class="c4">(</span><span class="c0">List</span><span>&nbsp;</span><span class="c0">list</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span></p><p class="c3"><span>&nbsp; &nbsp; &nbsp;</span><span class="c9">return</span><span>&nbsp;</span><span class="c0">focus</span><span class="c7">;</span></p><p class="c3"><span>&nbsp;</span><span class="c4">}</span></p><p class="c3"><span class="c4">}</span></p><p class="c3 c5"><span class="c4"></span></p><p class="c3 c5"><span class="c4"></span></p><p class="c3"><span>In this renderer we want to renderer a Contact Object to the Screen, we build the Component in the constructor and in the getListCellRendererComponent we simply updates the Labels texts according to the Contact Object.</span></p><p class="c3"><span>Notice that in this renderer I return a focus Label with semi transparency, as mentioned before the focus component can be modified by using this method.</span></p><p class="c3"><span>For example I can modify the focus Component to have an icon.</span></p><p class="c3"><span class="c0">&nbsp; &nbsp;focus</span><span>.</span><span class="c0">getStyle</span><span class="c4">()</span><span>.</span><span class="c0">setBgTransparency</span><span class="c4">(</span><span class="c14">100</span><span class="c4">)</span><span class="c7">;</span></p><p class="c3"><span class="c9">try</span><span>&nbsp;</span><span class="c4">{</span></p><p class="c3"><span>&nbsp; </span><span class="c0">focus</span><span>.</span><span class="c0">setIcon</span><span class="c4">(</span><span class="c0">Image</span><span>.</span><span class="c0">createImage</span><span class="c4">(</span><span class="c22">&quot;/duke.png&quot;</span><span class="c4">))</span><span class="c7">;</span></p><p class="c3"><span>&nbsp; </span><span class="c0">focus</span><span>.</span><span class="c0">setAlignment</span><span class="c4">(</span><span class="c0">Component</span><span>.</span><span class="c0">RIGHT</span><span class="c4">)</span><span class="c7">;</span></p><p class="c3"><span class="c4">}</span><span>&nbsp;</span><span class="c9">catch</span><span>&nbsp;</span><span class="c4">(</span><span class="c0">IOException</span><span>&nbsp;</span><span class="c0">ex</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span></p><p class="c3"><span>&nbsp; &nbsp; &nbsp;</span><span class="c0">ex</span><span>.</span><span class="c0">printStackTrace</span><span class="c4">()</span><span class="c7">;</span></p><p class="c3"><span class="c4">}</span></p><p class="c3 c5"><span></span></p><h3 class="c3"><a name="h.trvbrfshufsm"></a><span class="c10">Generic List Cell Renderer</span></h3><p class="c3"><span>Codename One is really powerful and flexible, we took the power and flexibility of Swing and went even further (styles, painters) and one such power is the</span><span class="c8"><a class="c15" href="http://codenameone.blogspot.com/2008/07/lwuit-list-renderer-by-chen-fishbein.html">&nbsp;cell renderer</a></span><span>. This is a concept we derived from Swing which is both remarkably powerful and pretty hard for newbies to figure out, frankly it&rsquo;s pretty hard for everyone...</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>As part of the GUI builder work we needed a way to</span><span><a class="c15" href="http://lwuit.blogspot.com/2010/12/lwuit-resource-editor-tutorial-part-6.html">&nbsp;</a></span><span class="c8"><a class="c15" href="http://lwuit.blogspot.com/2010/12/lwuit-resource-editor-tutorial-part-6.html">customize rendering</a></span><span>&nbsp;for a List but the</span><span><a class="c15" href="http://lwuit.blogspot.com/2008/07/lwuit-list-renderer-by-chen-fishbein.html">&nbsp;</a></span><span class="c8"><a class="c15" href="http://lwuit.blogspot.com/2008/07/lwuit-list-renderer-by-chen-fishbein.html">renderer</a></span><span>/</span><span class="c8"><a class="c15" href="http://lwuit.blogspot.com/2008/08/model-mvc-million-contacts-march.html">model</a></span><span>&nbsp;approach seemed impossible to adapt to a GUI builder (it seems the Swing GUI builders had a similar issue). Our solution was to introduce the GenericListCellRenderer which while introducing limitations and implementation requirements still manages to make life easier both in the GUI builder and outside of it.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>GenericListCellRenderer is a renderer designed to be as simple to use as a Component-Container hierarchy, we effectively crammed most of the common renderer use cases into one class. To enable that we need to know the content of the objects within the model, so the GenericListCellRenderer assumes the model contains only Hashtable objects. Since Hashtable&#39;s can contain arbitrary data the list model is still quite generic and allows storing application specific data, furthermore a Hashtable can still be derived and extended to provide domain specific business logic.</span></p><p class="c3"><span>The GenericListCellRenderer accepts two container instances (more later on why at least two and not one) which it maps to individual Hashtable entries within the model by finding the appropriate components within the given container hierarchy. Components are mapped to the Hashtable entries based on the name property of the component (get/setName) and the key value within the Hashtable e.g.:</span></p><p class="c3"><span>For a model that contains a Hashtable entry like this:</span></p><p class="c3"><span>&quot;Foo&quot;: &quot;Bar&quot;</span></p><p class="c3"><span>&quot;X&quot;: &quot;Y&quot;</span></p><p class="c3"><span>&quot;Not&quot;: &quot;Applicable&quot;</span></p><p class="c3"><span>&quot;Number&quot;: Integer(1)</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>A renderer will loop over the component hierarchy in the container searching for component&#39;s whose name matches Foo, X, Not and Number and assign to them the appropriate value. Notice that you can also use image objects as values and they will be assigned to labels as expected. However, you can&#39;t assign both an image and a text to a single label since the key will be taken. That isn&#39;t a big problem since two labels can be used quite easily in such a renderer.</span></p><p class="c3"><span>To make matters even more attractive the renderer seamlessly supports list tickering when appropriate and if a CheckBox appears within the renderer it will toggle a boolean flag within the Hashtable seamlessly.</span></p><p class="c3"><span>One &nbsp;issue that crops up with this approach is that if a value is missing from the hashtable it is treated as empty and the component is reset, this can pose an issue if we hardcode an image or text within the renderer and we don&#39;t want them replace (e.g. an arrow graphic). The solution for this is to name the component with Fixed in the end of the name e.g.: HardcodedIconFixed.</span></p><p class="c3"><span>Naming a component within the renderer with $number will automatically set it as a counter component for the offset of the component within the list.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>Styling the GenericListCellRenderer is slightly different, the renderer uses the UIID of the container passed to the generic list cell renderer and the background focus uses that same UIID with the word &quot;Focus&quot; appended.</span></p><p class="c3"><span>It is important to notice that the generic list cell renderer will grant focus to the child components of the selected entry if they are focusable thus changing the style of said entries. E.g. a Container might have a child label that has one style when the parent container is unselected and another when its selected (focused), this can be easily achieved by defining the label as focusable. Notice that the component will never receive direct focus since it is still a par of a renderer.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>Last but not least, the generic list cell renderer accepts two or four instances of a Container rather than the obvious choice of accepting only one instance. This allows the renderer to treat the selected entry differently which is especially important to tickering although its also useful for fisheye. Since it might not be practical to seamlessly clone the Container for the renderer&#39;s needs Codename One expects the developer to provide two separate instances, they can be identical in all respects but they must be separate instances for tickering to work. The renderer also allows for a fisheye effect where the selected entry is actually different from the unselected entry in its structure, it also allows for a pinstripe effect where odd/even rows have different styles (this is accomplished by providing 4 instances of the containers selected/unselected for odd/even).</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>The best way to learn about the generic list cell renderer and the hashtable model is by playing with them in the GUI builder, however they can be used in code without any dependency on the GUI builder and can be quite useful at that.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>Here is a simple sample for a list with checkboxes that get updated automatically:</span></p><p class="c3 c5"><span></span></p><p class="c3"><span class="c0">List</span><span>&nbsp;</span><span class="c0">list</span><span>&nbsp;= </span><span class="c9">new</span><span>&nbsp;</span><span class="c0">List</span><span class="c9">(</span><span class="c0">createGenericListCellRendererModelData</span><span class="c9">())</span><span>;<br></span><span class="c0">list</span><span>.</span><span class="c0">setRenderer</span><span class="c9">(new</span><span>&nbsp;</span><span class="c0">GenericListCellRenderer</span><span class="c9">(</span><span class="c0">createGenericRendererContainer</span><span class="c9">()</span><span>, </span><span class="c0">createGenericRendererContainer</span><span class="c9">()))</span><span>;<br><br><br></span><span class="c9">private</span><span>&nbsp;</span><span class="c0">Container</span><span>&nbsp;</span><span class="c0">createGenericRendererContainer</span><span class="c9">()</span><span>&nbsp;</span><span class="c9">{</span><span><br> &nbsp; &nbsp;</span><span class="c0">Container</span><span>&nbsp;</span><span class="c0">c</span><span>&nbsp;= </span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Container</span><span class="c9">(new</span><span>&nbsp;</span><span class="c0">BorderLayout</span><span class="c9">())</span><span>;<br> &nbsp; &nbsp;</span><span class="c0">c</span><span>.</span><span class="c0">setUIID</span><span class="c9">(</span><span>&quot;ListRenderer&quot;</span><span class="c9">)</span><span>;<br> &nbsp; &nbsp;</span><span class="c0">Label</span><span>&nbsp;</span><span class="c0">name</span><span>&nbsp;= </span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Label</span><span class="c9">()</span><span>;<br> &nbsp; &nbsp;</span><span class="c0">name</span><span>.</span><span class="c0">setFocusable</span><span class="c9">(true)</span><span>;<br> &nbsp; &nbsp;</span><span class="c0">name</span><span>.</span><span class="c0">setName</span><span class="c9">(</span><span>&quot;Name&quot;</span><span class="c9">)</span><span>;<br> &nbsp; &nbsp;</span><span class="c0">c</span><span>.</span><span class="c0">addComponent</span><span class="c9">(</span><span class="c0">BorderLayout</span><span>.</span><span class="c0">CENTER</span><span>, </span><span class="c0">name</span><span class="c9">)</span><span>;<br> &nbsp; &nbsp;</span><span class="c0">Label</span><span>&nbsp;</span><span class="c0">surname</span><span>&nbsp;= </span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Label</span><span class="c9">()</span><span>;<br> &nbsp; &nbsp;</span><span class="c0">surname</span><span>.</span><span class="c0">setFocusable</span><span class="c9">(true)</span><span>;<br> &nbsp; &nbsp;</span><span class="c0">surname</span><span>.</span><span class="c0">setName</span><span class="c9">(</span><span>&quot;Surname&quot;</span><span class="c9">)</span><span>;<br> &nbsp; &nbsp;</span><span class="c0">c</span><span>.</span><span class="c0">addComponent</span><span class="c9">(</span><span class="c0">BorderLayout</span><span>.</span><span class="c0">SOUTH</span><span>, </span><span class="c0">surname</span><span class="c9">)</span><span>;<br> &nbsp; &nbsp;</span><span class="c0">CheckBox</span><span>&nbsp;</span><span class="c0">selected</span><span>&nbsp;= </span><span class="c9">new</span><span>&nbsp;</span><span class="c0">CheckBox</span><span class="c9">()</span><span>;<br> &nbsp; &nbsp;</span><span class="c0">selected</span><span>.</span><span class="c0">setName</span><span class="c9">(</span><span>&quot;Selected&quot;</span><span class="c9">)</span><span>;<br> &nbsp; &nbsp;</span><span class="c0">selected</span><span>.</span><span class="c0">setFocusable</span><span class="c9">(true)</span><span>;<br> &nbsp; &nbsp;</span><span class="c0">c</span><span>.</span><span class="c0">addComponent</span><span class="c9">(</span><span class="c0">BorderLayout</span><span>.</span><span class="c0">WEST</span><span>, </span><span class="c0">selected</span><span class="c9">)</span><span>;<br> &nbsp; &nbsp;</span><span class="c9">return</span><span>&nbsp;</span><span class="c0">c</span><span>;<br></span><span class="c9">}</span><span><br><br></span><span class="c9">private</span><span>&nbsp;</span><span class="c0">Hashtable</span><span class="c9">[]</span><span>&nbsp;</span><span class="c0">createGenericListCellRendererModelData</span><span class="c9">()</span><span>&nbsp;</span><span class="c9">{</span><span><br> &nbsp; &nbsp;</span><span class="c0">Hashtable</span><span class="c9">[]</span><span>&nbsp;</span><span class="c0">data</span><span>&nbsp;= </span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Hashtable</span><span class="c9">[</span><span>5</span><span class="c9">]</span><span>;<br> &nbsp; &nbsp;</span><span class="c0">data</span><span class="c9">[</span><span>0</span><span class="c9">]</span><span>&nbsp;= </span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Hashtable</span><span class="c9">()</span><span>;<br> &nbsp; &nbsp;</span><span class="c0">data</span><span class="c9">[</span><span>0</span><span class="c9">]</span><span>.</span><span class="c0">put</span><span class="c9">(</span><span>&quot;Name&quot;, &quot;Shai&quot;</span><span class="c9">)</span><span>;<br> &nbsp; &nbsp;</span><span class="c0">data</span><span class="c9">[</span><span>0</span><span class="c9">]</span><span>.</span><span class="c0">put</span><span class="c9">(</span><span>&quot;Surname&quot;, &quot;Almog&quot;</span><span class="c9">)</span><span>;<br> &nbsp; &nbsp;</span><span class="c0">data</span><span class="c9">[</span><span>0</span><span class="c9">]</span><span>.</span><span class="c0">put</span><span class="c9">(</span><span>&quot;Selected&quot;, </span><span class="c0">Boolean</span><span>.</span><span class="c0">TRUE</span><span class="c9">)</span><span>;<br> &nbsp; &nbsp;</span><span class="c0">data</span><span class="c9">[</span><span>1</span><span class="c9">]</span><span>&nbsp;= </span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Hashtable</span><span class="c9">()</span><span>;<br> &nbsp; &nbsp;</span><span class="c0">data</span><span class="c9">[</span><span>1</span><span class="c9">]</span><span>.</span><span class="c0">put</span><span class="c9">(</span><span>&quot;Name&quot;, &quot;Chen&quot;</span><span class="c9">)</span><span>;<br> &nbsp; &nbsp;</span><span class="c0">data</span><span class="c9">[</span><span>1</span><span class="c9">]</span><span>.</span><span class="c0">put</span><span class="c9">(</span><span>&quot;Surname&quot;, &quot;Fishbein&quot;</span><span class="c9">)</span><span>;<br> &nbsp; &nbsp;</span><span class="c0">data</span><span class="c9">[</span><span>1</span><span class="c9">]</span><span>.</span><span class="c0">put</span><span class="c9">(</span><span>&quot;Selected&quot;, </span><span class="c0">Boolean</span><span>.</span><span class="c0">TRUE</span><span class="c9">)</span><span>;<br> &nbsp; &nbsp;</span><span class="c0">data</span><span class="c9">[</span><span>2</span><span class="c9">]</span><span>&nbsp;= </span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Hashtable</span><span class="c9">()</span><span>;<br> &nbsp; &nbsp;</span><span class="c0">data</span><span class="c9">[</span><span>2</span><span class="c9">]</span><span>.</span><span class="c0">put</span><span class="c9">(</span><span>&quot;Name&quot;, &quot;Ofir&quot;</span><span class="c9">)</span><span>;<br> &nbsp; &nbsp;</span><span class="c0">data</span><span class="c9">[</span><span>2</span><span class="c9">]</span><span>.</span><span class="c0">put</span><span class="c9">(</span><span>&quot;Surname&quot;, &quot;Leitner&quot;</span><span class="c9">)</span><span>;<br> &nbsp; &nbsp;</span><span class="c0">data</span><span class="c9">[</span><span>3</span><span class="c9">]</span><span>&nbsp;= </span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Hashtable</span><span class="c9">()</span><span>;<br> &nbsp; &nbsp;</span><span class="c0">data</span><span class="c9">[</span><span>3</span><span class="c9">]</span><span>.</span><span class="c0">put</span><span class="c9">(</span><span>&quot;Name&quot;, &quot;Yaniv&quot;</span><span class="c9">)</span><span>;<br> &nbsp; &nbsp;</span><span class="c0">data</span><span class="c9">[</span><span>3</span><span class="c9">]</span><span>.</span><span class="c0">put</span><span class="c9">(</span><span>&quot;Surname&quot;, &quot;Vakarat&quot;</span><span class="c9">)</span><span>;<br> &nbsp; &nbsp;</span><span class="c0">data</span><span class="c9">[</span><span>4</span><span class="c9">]</span><span>&nbsp;= </span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Hashtable</span><span class="c9">()</span><span>;<br> &nbsp; &nbsp;</span><span class="c0">data</span><span class="c9">[</span><span>4</span><span class="c9">]</span><span>.</span><span class="c0">put</span><span class="c9">(</span><span>&quot;Name&quot;, &quot;Meirav&quot;</span><span class="c9">)</span><span>;<br> &nbsp; &nbsp;</span><span class="c0">data</span><span class="c9">[</span><span>4</span><span class="c9">]</span><span>.</span><span class="c0">put</span><span class="c9">(</span><span>&quot;Surname&quot;, &quot;Nachmanovitch&quot;</span><span class="c9">)</span><span>;<br> &nbsp; &nbsp;</span><span class="c9">return</span><span>&nbsp;</span><span class="c0">data</span><span>;<br></span><span class="c9">}</span></p><h3 class="c3"><a name="h.m11kzdojxcva"></a><span class="c10">The List Model</span></h3><p class="c3"><span>Swing&#39;s approach to MVC is one of the hardest concepts for people to fully grasp, which is a real shame as it is probably the most important and powerful feature in Swing. Codename One copied Swing&#39;s approach to MVC almost entirely but on a smaller scale. </span></p><p class="c3 c5"><span></span></p><p class="c3"><span>To show off the power of the list model we create a list with one million entries... What I am trying to prove here is that a list and a model have a very low overhead when used properly. Most of the overhead for rendering a list is in the renderer and the model implementation, both of which you can optimize to your hearts content. This is a very small price to pay for something as flexible, powerful and customizable as the Codename One list!</span></p><p class="c3 c5"><span></span></p><p class="c3"><span class="c9">class</span><span>&nbsp;</span><span class="c0">Contact</span><span>&nbsp;</span><span class="c4">{</span></p><p class="c3"><span>&nbsp;</span><span class="c9">private</span><span>&nbsp;</span><span class="c0">String</span><span>&nbsp;</span><span class="c0">name</span><span class="c7">;</span></p><p class="c3"><span>&nbsp;</span><span class="c9">private</span><span>&nbsp;</span><span class="c0">String</span><span>&nbsp;</span><span class="c0">email</span><span class="c7">;</span></p><p class="c3"><span>&nbsp;</span><span class="c9">private</span><span>&nbsp;</span><span class="c0">Image</span><span>&nbsp;</span><span class="c0">pic</span><span class="c7">;</span></p><p class="c3 c5"><span class="c7"></span></p><p class="c3"><span>&nbsp;</span><span class="c9">public</span><span>&nbsp;</span><span class="c0">Contact</span><span class="c4">(</span><span class="c0">String</span><span>&nbsp;</span><span class="c0">name</span><span>, </span><span class="c0">String</span><span>&nbsp;</span><span class="c0">email</span><span>, </span><span class="c0">Image</span><span>&nbsp;</span><span class="c0">pic</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span></p><p class="c3"><span>&nbsp; &nbsp; &nbsp;</span><span class="c9">this</span><span>.</span><span class="c0">name</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c0">name</span><span class="c7">;</span></p><p class="c3"><span>&nbsp; &nbsp; &nbsp;</span><span class="c9">this</span><span>.</span><span class="c0">email</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c0">email</span><span class="c7">;</span></p><p class="c3"><span>&nbsp; &nbsp; &nbsp;</span><span class="c9">this</span><span>.</span><span class="c0">pic</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c0">pic</span><span class="c7">;</span></p><p class="c3"><span>&nbsp;</span><span class="c4">}</span></p><p class="c3 c5"><span class="c4"></span></p><p class="c3"><span>&nbsp;</span><span class="c9">public</span><span>&nbsp;</span><span class="c0">String</span><span>&nbsp;</span><span class="c0">getName</span><span class="c4">()</span><span>&nbsp;</span><span class="c4">{</span></p><p class="c3"><span>&nbsp; &nbsp; &nbsp;</span><span class="c9">return</span><span>&nbsp;</span><span class="c0">name</span><span class="c7">;</span></p><p class="c3"><span>&nbsp;</span><span class="c4">}</span></p><p class="c3 c5"><span class="c4"></span></p><p class="c3"><span>&nbsp;</span><span class="c9">public</span><span>&nbsp;</span><span class="c0">String</span><span>&nbsp;</span><span class="c0">getEmail</span><span class="c4">()</span><span>&nbsp;</span><span class="c4">{</span></p><p class="c3"><span>&nbsp; &nbsp; &nbsp;</span><span class="c9">return</span><span>&nbsp;</span><span class="c0">email</span><span class="c7">;</span></p><p class="c3"><span>&nbsp;</span><span class="c4">}</span></p><p class="c3 c5"><span class="c4"></span></p><p class="c3"><span>&nbsp;</span><span class="c9">public</span><span>&nbsp;</span><span class="c0">Image</span><span>&nbsp;</span><span class="c0">getPic</span><span class="c4">()</span><span>&nbsp;</span><span class="c4">{</span></p><p class="c3"><span>&nbsp; &nbsp; &nbsp;</span><span class="c9">return</span><span>&nbsp;</span><span class="c0">pic</span><span class="c7">;</span></p><p class="c3"><span>&nbsp;</span><span class="c4">}</span></p><p class="c3"><span class="c4">}</span></p><p class="c3 c5"><span class="c4"></span></p><p class="c3"><span class="c9">class</span><span>&nbsp;</span><span class="c0">ContactsRenderer</span><span>&nbsp;</span><span class="c9">extends</span><span>&nbsp;</span><span class="c0">Container</span><span>&nbsp;</span><span class="c9">implements</span><span>&nbsp;</span><span class="c0">ListCellRenderer</span><span>&nbsp;</span><span class="c4">{</span></p><p class="c3 c5"><span class="c4"></span></p><p class="c3"><span>&nbsp;</span><span class="c9">private</span><span>&nbsp;</span><span class="c0">Label</span><span>&nbsp;</span><span class="c0">name</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Label</span><span class="c4">(</span><span class="c22">&quot;&quot;</span><span class="c4">)</span><span class="c7">;</span></p><p class="c3"><span>&nbsp;</span><span class="c9">private</span><span>&nbsp;</span><span class="c0">Label</span><span>&nbsp;</span><span class="c0">email</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Label</span><span class="c4">(</span><span class="c22">&quot;&quot;</span><span class="c4">)</span><span class="c7">;</span></p><p class="c3"><span>&nbsp;</span><span class="c9">private</span><span>&nbsp;</span><span class="c0">Label</span><span>&nbsp;</span><span class="c0">pic</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Label</span><span class="c4">(</span><span class="c22">&quot;&quot;</span><span class="c4">)</span><span class="c7">;</span></p><p class="c3 c5"><span class="c7"></span></p><p class="c3"><span>&nbsp;</span><span class="c9">private</span><span>&nbsp;</span><span class="c0">Label</span><span>&nbsp;</span><span class="c0">focus</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Label</span><span class="c4">(</span><span class="c22">&quot;&quot;</span><span class="c4">)</span><span class="c7">;</span></p><p class="c3 c5"><span class="c7"></span></p><p class="c3"><span>&nbsp;</span><span class="c9">public</span><span>&nbsp;</span><span class="c0">ContactsRenderer</span><span class="c4">()</span><span>&nbsp;</span><span class="c4">{</span></p><p class="c3"><span>&nbsp; &nbsp; &nbsp;</span><span class="c0">setLayout</span><span class="c4">(</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">BorderLayout</span><span class="c4">())</span><span class="c7">;</span></p><p class="c3"><span>&nbsp; &nbsp; &nbsp;</span><span class="c0">addComponent</span><span class="c4">(</span><span class="c0">BorderLayout</span><span>.</span><span class="c0">WEST</span><span>, </span><span class="c0">pic</span><span class="c4">)</span><span class="c7">;</span></p><p class="c3"><span>&nbsp; &nbsp; &nbsp;</span><span class="c0">Container</span><span>&nbsp;</span><span class="c0">cnt</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Container</span><span class="c4">(</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">BoxLayout</span><span class="c4">(</span><span class="c0">BoxLayout</span><span>.</span><span class="c0">Y_AXIS</span><span class="c4">))</span><span class="c7">;</span></p><p class="c3"><span>&nbsp; &nbsp; &nbsp;</span><span class="c0">name</span><span>.</span><span class="c0">getStyle</span><span class="c4">()</span><span>.</span><span class="c0">setBgTransparency</span><span class="c4">(</span><span class="c14">0</span><span class="c4">)</span><span class="c7">;</span></p><p class="c3"><span>&nbsp; &nbsp; &nbsp;</span><span class="c0">email</span><span>.</span><span class="c0">getStyle</span><span class="c4">()</span><span>.</span><span class="c0">setBgTransparency</span><span class="c4">(</span><span class="c14">0</span><span class="c4">)</span><span class="c7">;</span></p><p class="c3"><span>&nbsp; &nbsp; &nbsp;</span><span class="c0">cnt</span><span>.</span><span class="c0">addComponent</span><span class="c4">(</span><span class="c0">name</span><span class="c4">)</span><span class="c7">;</span></p><p class="c3"><span>&nbsp; &nbsp; &nbsp;</span><span class="c0">cnt</span><span>.</span><span class="c0">addComponent</span><span class="c4">(</span><span class="c0">email</span><span class="c4">)</span><span class="c7">;</span></p><p class="c3"><span>&nbsp; &nbsp; &nbsp;</span><span class="c0">addComponent</span><span class="c4">(</span><span class="c0">BorderLayout</span><span>.</span><span class="c0">CENTER</span><span>, </span><span class="c0">cnt</span><span class="c4">)</span><span class="c7">;</span></p><p class="c3"><span>&nbsp;</span><span class="c4">}</span></p><p class="c3 c5"><span class="c4"></span></p><p class="c3"><span>&nbsp;</span><span class="c9">public</span><span>&nbsp;</span><span class="c0">Component</span><span>&nbsp;</span><span class="c0">getListCellRendererComponent</span><span class="c4">(</span><span class="c0">List</span><span>&nbsp;</span><span class="c0">list</span><span>, </span><span class="c0">Object</span><span>&nbsp;</span><span class="c0">value</span><span>, </span><span class="c9">int</span><span>&nbsp;</span><span class="c0">index</span><span>, </span><span class="c9">boolean</span><span>&nbsp;</span><span class="c0">isSelected</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span></p><p class="c3"><span>&nbsp; &nbsp; &nbsp;</span><span class="c0">Contact</span><span>&nbsp;</span><span class="c0">person</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c4">(</span><span class="c0">Contact</span><span class="c4">)</span><span>&nbsp;</span><span class="c0">value</span><span class="c7">;</span></p><p class="c3"><span>&nbsp; &nbsp; &nbsp;</span><span class="c0">name</span><span>.</span><span class="c0">setText</span><span class="c4">(</span><span class="c0">index</span><span>&nbsp;</span><span class="c7">+</span><span>&nbsp;</span><span class="c22">&quot;: &quot;</span><span>&nbsp;</span><span class="c7">+</span><span>&nbsp;</span><span class="c0">person</span><span>.</span><span class="c0">getName</span><span class="c4">())</span><span class="c7">;</span></p><p class="c3"><span>&nbsp; &nbsp; &nbsp;</span><span class="c0">email</span><span>.</span><span class="c0">setText</span><span class="c4">(</span><span class="c0">person</span><span>.</span><span class="c0">getEmail</span><span class="c4">())</span><span class="c7">;</span></p><p class="c3"><span>&nbsp; &nbsp; &nbsp;</span><span class="c0">pic</span><span>.</span><span class="c0">setIcon</span><span class="c4">(</span><span class="c0">person</span><span>.</span><span class="c0">getPic</span><span class="c4">())</span><span class="c7">;</span></p><p class="c3"><span>&nbsp; &nbsp; &nbsp;</span><span class="c9">return</span><span>&nbsp;</span><span class="c9">this</span><span class="c7">;</span></p><p class="c3"><span>&nbsp;</span><span class="c4">}</span></p><p class="c3 c5"><span class="c4"></span></p><p class="c3"><span>&nbsp;</span><span class="c9">public</span><span>&nbsp;</span><span class="c0">Component</span><span>&nbsp;</span><span class="c0">getListFocusComponent</span><span class="c4">(</span><span class="c0">List</span><span>&nbsp;</span><span class="c0">list</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span></p><p class="c3"><span>&nbsp; &nbsp; &nbsp;</span><span class="c9">return</span><span>&nbsp;</span><span class="c0">focus</span><span class="c7">;</span></p><p class="c3"><span>&nbsp;</span><span class="c4">}</span></p><p class="c3"><span class="c4">}</span></p><p class="c3"><span class="c0">String</span><span class="c4">[][]</span><span>&nbsp;</span><span class="c0">CONTACTS_INFO</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c4">{</span></p><p class="c3"><span>&nbsp;</span><span class="c4">{</span><span class="c22">&quot;Nir V.&quot;</span><span>,</span><span class="c22">&quot;Nir.V@Sun.COM&quot;</span><span class="c4">}</span><span>,</span></p><p class="c3"><span>&nbsp;</span><span class="c4">{</span><span class="c22">&quot;Tidhar G.&quot;</span><span>,</span><span class="c22">&quot;Tidhar.G@Sun.COM&quot;</span><span class="c4">}</span><span>,</span></p><p class="c3"><span>&nbsp;</span><span class="c4">{</span><span class="c22">&quot;Iddo A.&quot;</span><span>,</span><span class="c22">&quot;Iddo.A@Sun.COM&quot;</span><span class="c4">}</span><span>,</span></p><p class="c3"><span>&nbsp;</span><span class="c4">{</span><span class="c22">&quot;Ari S.&quot;</span><span>,</span><span class="c22">&quot;Ari.S@Sun.COM&quot;</span><span class="c4">}</span><span>,</span></p><p class="c3"><span>&nbsp;</span><span class="c4">{</span><span class="c22">&quot;Chen F.&quot;</span><span>,</span><span class="c22">&quot;Chen.F@Sun.COM&quot;</span><span class="c4">}</span><span>,</span></p><p class="c3"><span>&nbsp;</span><span class="c4">{</span><span class="c22">&quot;Yoav B.&quot;</span><span>,</span><span class="c22">&quot;Yoav.B@Sun.COM&quot;</span><span class="c4">}</span><span>,</span></p><p class="c3"><span>&nbsp;</span><span class="c4">{</span><span class="c22">&quot;Moshe S.&quot;</span><span>,</span><span class="c22">&quot;Moshe.S@Sun.COM&quot;</span><span class="c4">}</span><span>,</span></p><p class="c3"><span>&nbsp;</span><span class="c4">{</span><span class="c22">&quot;Keren S.&quot;</span><span>,</span><span class="c22">&quot;Keren.S@Sun.COM&quot;</span><span class="c4">}</span><span>,</span></p><p class="c3"><span>&nbsp;</span><span class="c4">{</span><span class="c22">&quot;Amit H.&quot;</span><span>,</span><span class="c22">&quot;Amit.H@Sun.COM&quot;</span><span class="c4">}</span><span>,</span></p><p class="c3"><span>&nbsp;</span><span class="c4">{</span><span class="c22">&quot;Arkady N.&quot;</span><span>,</span><span class="c22">&quot;Arcadi.N@Sun.COM&quot;</span><span class="c4">}</span><span>,</span></p><p class="c3"><span>&nbsp;</span><span class="c4">{</span><span class="c22">&quot;Shai A.&quot;</span><span>,</span><span class="c22">&quot;Shai.A@Sun.COM&quot;</span><span class="c4">}</span><span>,</span></p><p class="c3"><span>&nbsp;</span><span class="c4">{</span><span class="c22">&quot;Elina K.&quot;</span><span>,</span><span class="c22">&quot;Elina.K@Sun.COM&quot;</span><span class="c4">}</span><span>,</span></p><p class="c3"><span>&nbsp;</span><span class="c4">{</span><span class="c22">&quot;Yaniv V.&quot;</span><span>,</span><span class="c22">&quot;Yaniv.V@Sun.COM&quot;</span><span class="c4">}</span><span>,</span></p><p class="c3"><span>&nbsp;</span><span class="c4">{</span><span class="c22">&quot;Nadav B.&quot;</span><span>,</span><span class="c22">&quot;Nadav.B@Sun.COM&quot;</span><span class="c4">}</span><span>,</span></p><p class="c3"><span>&nbsp;</span><span class="c4">{</span><span class="c22">&quot;Martin L.&quot;</span><span>,</span><span class="c22">&quot;Martin.L@Sun.COM&quot;</span><span class="c4">}</span><span>,</span></p><p class="c3"><span>&nbsp;</span><span class="c4">{</span><span class="c22">&quot;Tamir S.&quot;</span><span>,</span><span class="c22">&quot;Tamir.S@Sun.COM&quot;</span><span class="c4">}</span><span>,</span></p><p class="c3"><span>&nbsp;</span><span class="c4">{</span><span class="c22">&quot;Nir S.&quot;</span><span>,</span><span class="c22">&quot;Nir.S@Sun.COM&quot;</span><span class="c4">}</span><span>,</span></p><p class="c3"><span>&nbsp;</span><span class="c4">{</span><span class="c22">&quot;Eran K.&quot;</span><span>,</span><span class="c22">&quot;Eran.K@Sun.COM&quot;</span><span class="c4">}</span></p><p class="c3"><span>&nbsp;</span><span class="c4">}</span><span class="c7">;</span></p><p class="c3 c5"><span class="c7"></span></p><p class="c3"><span class="c9">int</span><span>&nbsp;</span><span class="c0">contactWidth</span><span class="c7">=</span><span>&nbsp;</span><span class="c14">36</span><span class="c7">;</span></p><p class="c3"><span class="c9">int</span><span>&nbsp;</span><span class="c0">contactHeight</span><span class="c7">=</span><span>&nbsp;</span><span class="c14">48</span><span class="c7">;</span></p><p class="c3"><span class="c9">int</span><span>&nbsp;</span><span class="c0">cols</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c14">4</span><span class="c7">;</span></p><p class="c3"><span class="c0">Resources</span><span>&nbsp;</span><span class="c0">images</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c0">Resources</span><span>.</span><span class="c0">open</span><span class="c4">(</span><span class="c22">&quot;/images.res&quot;</span><span class="c4">)</span><span class="c7">;</span></p><p class="c3"><span class="c0">Image</span><span>&nbsp;</span><span class="c0">contacts</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c0">images</span><span>.</span><span class="c0">getImage</span><span class="c4">(</span><span class="c22">&quot;people.jpg&quot;</span><span class="c4">)</span><span class="c7">;</span></p><p class="c3"><span class="c0">Image</span><span class="c4">[]</span><span>&nbsp;</span><span class="c0">persons</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Image</span><span class="c4">[</span><span class="c0">CONTACTS_INFO</span><span>.</span><span class="c0">length</span><span class="c4">]</span><span class="c7">;</span></p><p class="c3"><span class="c9">for</span><span class="c4">(</span><span class="c9">int</span><span>&nbsp;</span><span class="c0">i</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c14">0</span><span class="c7">;</span><span>&nbsp;</span><span class="c0">i</span><span>&nbsp;</span><span class="c7">&lt;</span><span>&nbsp;</span><span class="c0">persons</span><span>.</span><span class="c0">length</span><span>&nbsp;</span><span class="c7">;</span><span>&nbsp;</span><span class="c0">i</span><span class="c7">++</span><span class="c4">){</span></p><p class="c3"><span>&nbsp;</span><span class="c0">persons</span><span class="c4">[</span><span class="c0">i</span><span class="c4">]</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c0">contacts</span><span>.</span><span class="c0">subImage</span><span class="c4">((</span><span class="c0">i</span><span class="c7">%</span><span class="c0">cols</span><span class="c4">)</span><span class="c7">*</span><span class="c0">contactWidth</span><span>, </span><span class="c4">(</span><span class="c0">i</span><span>/</span><span class="c0">cols</span><span class="c4">)</span><span class="c7">*</span><span class="c0">contactHeight</span><span>, </span><span class="c0">contactWidth</span><span>, </span><span class="c0">contactHeight</span><span>, </span><span class="c9">true</span><span class="c4">)</span><span class="c7">;</span></p><p class="c3"><span class="c4">}</span></p><p class="c3 c5"><span class="c4"></span></p><p class="c3"><span class="c9">final</span><span>&nbsp;</span><span class="c0">Contact</span><span class="c4">[]</span><span>&nbsp;</span><span class="c0">contactArray</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Contact</span><span class="c4">[</span><span class="c0">persons</span><span>.</span><span class="c0">length</span><span class="c4">]</span><span class="c7">;</span></p><p class="c3"><span class="c9">for</span><span>&nbsp;</span><span class="c4">(</span><span class="c9">int</span><span>&nbsp;</span><span class="c0">i</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c14">0</span><span class="c7">;</span><span>&nbsp;</span><span class="c0">i</span><span>&nbsp;</span><span class="c7">&lt;</span><span>&nbsp;</span><span class="c0">contactArray</span><span>.</span><span class="c0">length</span><span class="c7">;</span><span>&nbsp;</span><span class="c0">i</span><span class="c7">++</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span></p><p class="c3"><span>&nbsp;</span><span class="c9">int</span><span>&nbsp;</span><span class="c0">pos</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c0">i</span><span>&nbsp;</span><span class="c7">%</span><span>&nbsp;</span><span class="c0">CONTACTS_INFO</span><span>.</span><span class="c0">length</span><span class="c7">;</span></p><p class="c3"><span>&nbsp;</span><span class="c0">contactArray</span><span class="c4">[</span><span class="c0">i</span><span class="c4">]</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Contact</span><span class="c4">(</span><span class="c0">CONTACTS_INFO</span><span class="c4">[</span><span class="c0">pos</span><span class="c4">][</span><span class="c14">0</span><span class="c4">]</span><span>, </span><span class="c0">CONTACTS_INFO</span><span class="c4">[</span><span class="c0">pos</span><span class="c4">][</span><span class="c14">1</span><span class="c4">]</span><span>, </span><span class="c0">persons</span><span class="c4">[</span><span class="c0">pos</span><span class="c4">])</span><span class="c7">;</span></p><p class="c3"><span class="c4">}</span></p><p class="c3 c5"><span class="c4"></span></p><p class="c3"><span class="c0">Form</span><span>&nbsp;</span><span class="c0">millionList</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Form</span><span class="c4">(</span><span class="c22">&quot;Million&quot;</span><span class="c4">)</span><span class="c7">;</span></p><p class="c3"><span class="c0">millionList</span><span>.</span><span class="c0">setScrollable</span><span class="c4">(</span><span class="c9">false</span><span class="c4">)</span><span class="c7">;</span></p><p class="c3"><span class="c0">List</span><span>&nbsp;</span><span class="c0">l</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">List</span><span class="c4">(</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">ListModel</span><span class="c4">()</span><span>&nbsp;</span><span class="c4">{</span></p><p class="c3"><span>&nbsp;</span><span class="c9">private</span><span>&nbsp;</span><span class="c9">int</span><span>&nbsp;</span><span class="c0">selection</span><span class="c7">;</span></p><p class="c3"><span>&nbsp;</span><span class="c9">public</span><span>&nbsp;</span><span class="c0">Object</span><span>&nbsp;</span><span class="c0">getItemAt</span><span class="c4">(</span><span class="c9">int</span><span>&nbsp;</span><span class="c0">index</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span></p><p class="c3"><span>&nbsp; &nbsp; &nbsp;</span><span class="c9">return</span><span>&nbsp;</span><span class="c0">contactArray</span><span class="c4">[</span><span class="c0">index</span><span>&nbsp;</span><span class="c7">%</span><span>&nbsp;</span><span class="c0">contactArray</span><span>.</span><span class="c0">length</span><span class="c4">]</span><span class="c7">;</span></p><p class="c3"><span>&nbsp;</span><span class="c4">}</span></p><p class="c3 c5"><span class="c4"></span></p><p class="c3"><span>&nbsp;</span><span class="c9">public</span><span>&nbsp;</span><span class="c9">int</span><span>&nbsp;</span><span class="c0">getSize</span><span class="c4">()</span><span>&nbsp;</span><span class="c4">{</span></p><p class="c3"><span>&nbsp; &nbsp; &nbsp;</span><span class="c9">return</span><span>&nbsp;</span><span class="c14">1000000</span><span class="c7">;</span></p><p class="c3"><span>&nbsp;</span><span class="c4">}</span></p><p class="c3 c5"><span class="c4"></span></p><p class="c3"><span>&nbsp;</span><span class="c9">public</span><span>&nbsp;</span><span class="c9">int</span><span>&nbsp;</span><span class="c0">getSelectedIndex</span><span class="c4">()</span><span>&nbsp;</span><span class="c4">{</span></p><p class="c3"><span>&nbsp; &nbsp; &nbsp;</span><span class="c9">return</span><span>&nbsp;</span><span class="c0">selection</span><span class="c7">;</span></p><p class="c3"><span>&nbsp;</span><span class="c4">}</span></p><p class="c3 c5"><span class="c4"></span></p><p class="c3"><span>&nbsp;</span><span class="c9">public</span><span>&nbsp;</span><span class="c9">void</span><span>&nbsp;</span><span class="c0">setSelectedIndex</span><span class="c4">(</span><span class="c9">int</span><span>&nbsp;</span><span class="c0">index</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span></p><p class="c3"><span>&nbsp; &nbsp; &nbsp;</span><span class="c0">selection</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c0">index</span><span class="c7">;</span></p><p class="c3"><span>&nbsp;</span><span class="c4">}</span></p><p class="c3 c5"><span class="c4"></span></p><p class="c3"><span>&nbsp;</span><span class="c9">public</span><span>&nbsp;</span><span class="c9">void</span><span>&nbsp;</span><span class="c0">addDataChangedListener</span><span class="c4">(</span><span class="c0">DataChangedListener</span><span>&nbsp;</span><span class="c0">l</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span></p><p class="c3"><span>&nbsp;</span><span class="c4">}</span></p><p class="c3 c5"><span class="c4"></span></p><p class="c3"><span>&nbsp;</span><span class="c9">public</span><span>&nbsp;</span><span class="c9">void</span><span>&nbsp;</span><span class="c0">removeDataChangedListener</span><span class="c4">(</span><span class="c0">DataChangedListener</span><span>&nbsp;</span><span class="c0">l</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span></p><p class="c3"><span>&nbsp;</span><span class="c4">}</span></p><p class="c3 c5"><span class="c4"></span></p><p class="c3"><span>&nbsp;</span><span class="c9">public</span><span>&nbsp;</span><span class="c9">void</span><span>&nbsp;</span><span class="c0">addSelectionListener</span><span class="c4">(</span><span class="c0">SelectionListener</span><span>&nbsp;</span><span class="c0">l</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span></p><p class="c3"><span>&nbsp;</span><span class="c4">}</span></p><p class="c3 c5"><span class="c4"></span></p><p class="c3"><span>&nbsp;</span><span class="c9">public</span><span>&nbsp;</span><span class="c9">void</span><span>&nbsp;</span><span class="c0">removeSelectionListener</span><span class="c4">(</span><span class="c0">SelectionListener</span><span>&nbsp;</span><span class="c0">l</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span></p><p class="c3"><span>&nbsp;</span><span class="c4">}</span></p><p class="c3 c5"><span class="c4"></span></p><p class="c3"><span>&nbsp;</span><span class="c9">public</span><span>&nbsp;</span><span class="c9">void</span><span>&nbsp;</span><span class="c0">addItem</span><span class="c4">(</span><span class="c0">Object</span><span>&nbsp;</span><span class="c0">item</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span></p><p class="c3"><span>&nbsp;</span><span class="c4">}</span></p><p class="c3 c5"><span class="c4"></span></p><p class="c3"><span>&nbsp;</span><span class="c9">public</span><span>&nbsp;</span><span class="c9">void</span><span>&nbsp;</span><span class="c0">removeItem</span><span class="c4">(</span><span class="c9">int</span><span>&nbsp;</span><span class="c0">index</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span></p><p class="c3"><span>&nbsp;</span><span class="c4">}</span></p><p class="c3"><span class="c4">})</span><span class="c7">;</span></p><p class="c3"><span class="c0">l</span><span>.</span><span class="c0">setListCellRenderer</span><span class="c4">(</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">ContactsRenderer</span><span class="c4">())</span><span class="c7">;</span></p><p class="c3"><span class="c0">l</span><span>.</span><span class="c0">setFixedSelection</span><span class="c4">(</span><span class="c0">List</span><span>.</span><span class="c0">FIXED_NONE_CYCLIC</span><span class="c4">)</span><span class="c7">;</span></p><p class="c3"><span class="c0">millionList</span><span>.</span><span class="c0">setLayout</span><span class="c4">(</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">BorderLayout</span><span class="c4">())</span><span class="c7">;</span></p><p class="c3"><span class="c0">millionList</span><span>.</span><span class="c0">addComponent</span><span class="c4">(</span><span class="c0">BorderLayout</span><span>.</span><span class="c0">CENTER</span><span>, </span><span class="c0">l</span><span class="c4">)</span><span class="c7">;</span></p><p class="c3"><span class="c0">millionList</span><span>.</span><span class="c0">show</span><span class="c4">()</span><span class="c7">;</span></p><p class="c3 c5"><span></span></p><h2 class="c37 c3"><a name="h.5hfrd1k8j5d5"></a><span class="c10">MultiList</span></h2><p class="c3"><span>The MultiList is a preconfigured list that contains a ready made renderer with defaults that make sense for the most common use cases. It still retains most of the power available to the list component but reduces the complexity of one of the hardest things to grasp for most developers: rendering.</span></p><p class="c3"><span>It still has the full power of the model and allows you to create a million entry list with just a few lines of code, however the objects the model returns should always be in the form of Hashtables and not any arbitrary object like the standard list allows.</span></p><p class="c3"><span>You can create a MutiList by just dropping it into place in the GUI builder and just editing the list data property (see the instructions above for creating a list in the GUI builder, you won&rsquo;t need the renderer portion).</span></p><h2 class="c37 c3"><a name="h.drl3fffazu5n"></a><span class="c10">Slider</span></h2><p class="c3"><span>A slider is an empty component that can be filled horizontally or vertically to allow indicating progress/volume etc. It can be editable to allow the user to determine its value or none editable to just relay that information to the user. </span></p><p class="c3"><span>It can have a thumb on top to show its current position.</span></p><p class="c3"><img height="36" src="images/image80.png" width="339"></p><p class="c3"><span>The interesting part about the slider is that it has two separate style UIID&rsquo;s, Slider &amp; SliderFull. The Slider UIID is always painted and SliderFull is rendered on top based on the amount the slider should be filled. </span></p><h2 class="c37 c3"><a name="h.vdpto6qems0b"></a><span class="c10">Table</span></h2><p class="c3"><span>Unlike list the table is a &nbsp;composite component, which means it is really a subclass of a Container and is effectively built from multiple components. The general thought process is that Table is an elaborate component and should include complex editing, while the list is more of a selection component designed for scalability.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span class="c17">Here is a minor sample of using the standard table component, it should be pretty self explanatory:</span></p><p class="c3 c5"><span></span></p><p class="c3"><span class="c9">final</span><span>&nbsp;</span><span class="c0">Form</span><span>&nbsp;</span><span class="c0">f</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Form</span><span class="c4">(</span><span class="c22">&quot;Table Test&quot;</span><span class="c4">)</span><span class="c7">;</span><span><br></span><span class="c0">TableModel</span><span>&nbsp;</span><span class="c0">model</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">DefaultTableModel</span><span class="c4">(</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">String</span><span class="c4">[]</span><span>&nbsp;</span><span class="c4">{</span><span class="c22">&quot;Col 1&quot;</span><span>, </span><span class="c22">&quot;Col 2&quot;</span><span>, </span><span class="c22">&quot;Col 3&quot;</span><span class="c4">}</span><span>, </span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Object</span><span class="c4">[][]</span><span>&nbsp;</span><span class="c4">{</span><span><br></span><span class="c4">{</span><span class="c22">&quot;Row 1&quot;</span><span>, </span><span class="c22">&quot;Row A&quot;</span><span>, </span><span class="c22">&quot;Row X&quot;</span><span class="c4">}</span><span>,<br></span><span class="c4">{</span><span class="c22">&quot;Row 2&quot;</span><span>, </span><span class="c22">&quot;Row B&quot;</span><span>, </span><span class="c22">&quot;Row Y&quot;</span><span class="c4">}</span><span>,<br></span><span class="c4">{</span><span class="c22">&quot;Row 3&quot;</span><span>, </span><span class="c22">&quot;Row C&quot;</span><span>, </span><span class="c22">&quot;Row Z&quot;</span><span class="c4">}</span><span>,<br></span><span class="c4">{</span><span class="c22">&quot;Row 4&quot;</span><span>, </span><span class="c22">&quot;Row D&quot;</span><span>, </span><span class="c22">&quot;Row K&quot;</span><span class="c4">}</span><span>,<br></span><span class="c4">})</span><span>&nbsp;</span><span class="c4">{</span><span><br></span><span class="c9">public</span><span>&nbsp;</span><span class="c9">boolean</span><span>&nbsp;</span><span class="c0">isCellEditable</span><span class="c4">(</span><span class="c9">int</span><span>&nbsp;</span><span class="c0">row</span><span>, </span><span class="c9">int</span><span>&nbsp;</span><span class="c0">col</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp;</span><span class="c9">return</span><span>&nbsp;</span><span class="c0">col</span><span>&nbsp;</span><span class="c7">!=</span><span>&nbsp;</span><span class="c14">0</span><span class="c7">;</span><span><br></span><span class="c4">}</span><span><br></span><span class="c4">}</span><span class="c7">;</span><span><br></span><span class="c0">Table</span><span>&nbsp;</span><span class="c0">table</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Table</span><span class="c4">(</span><span class="c0">model</span><span class="c4">)</span><span class="c7">;</span><span><br></span><span class="c0">table</span><span>.</span><span class="c0">setScrollableX</span><span class="c4">(</span><span class="c9">true</span><span class="c4">)</span><span class="c7">;</span><span><br></span><span class="c0">f</span><span>.</span><span class="c0">setLayout</span><span class="c4">(</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">BorderLayout</span><span class="c4">())</span><span class="c7">;</span><span><br></span><span class="c0">f</span><span>.</span><span class="c0">addComponent</span><span class="c4">(</span><span class="c0">BorderLayout</span><span>.</span><span class="c0">CENTER</span><span>, </span><span class="c0">table</span><span class="c4">)</span><span class="c7">;</span><span><br></span><span class="c0">f</span><span>.</span><span class="c0">show</span><span class="c4">()</span><span class="c7">;</span></p><p class="c3 c5"><span class="c7 c73"></span></p><p class="c3"><span>However, the more &quot;interesting&quot; aspect of the table is the table layout and its ability to create rather unique layouts relatively easily similarly to HTML&#39;s tables. You can use the layout constraints (also exposed in the table class) to create spanning and elaborate UI&#39;s.</span></p><p class="c3"><span>In order to customize the table cell behavior you can now derive the table to create a &quot;renderer like&quot; widget, however unlike the list this component is &quot;kept&quot; and used as is. This means you can bind listeners to this component and work with it as you would with any other component in Codename One. </span></p><h2 class="c37 c3"><a name="h.v7dpj4oiucub"></a><span class="c10">Tree</span></h2><p class="c3"><span>A tree allows displaying hierarchical data such as folders and files in a collapsible/expandable UI. Like the Table it is a Container derived component that works against a model to construct its user interface on the fly. </span></p><p class="c3"><span>In order for the tree to have content you need to create a tree model e.g. this:</span></p><p class="c3"><span class="c9">class</span><span>&nbsp;</span><span class="c0">StringArrayTreeModel</span><span>&nbsp;</span><span class="c9">implements</span><span>&nbsp;</span><span class="c0">TreeModel</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp;</span><span class="c0">String</span><span class="c4">[][]</span><span>&nbsp;</span><span class="c0">arr</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">String</span><span class="c4">[][]</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">{</span><span class="c22">&quot;Colors&quot;</span><span>, </span><span class="c22">&quot;Letters&quot;</span><span>, </span><span class="c22">&quot;Numbers&quot;</span><span class="c4">}</span><span>,<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">{</span><span class="c22">&quot;Red&quot;</span><span>, </span><span class="c22">&quot;Green&quot;</span><span>, </span><span class="c22">&quot;Blue&quot;</span><span class="c4">}</span><span>,<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">{</span><span class="c22">&quot;A&quot;</span><span>, </span><span class="c22">&quot;B&quot;</span><span>, </span><span class="c22">&quot;C&quot;</span><span class="c4">}</span><span>,<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">{</span><span class="c22">&quot;1&quot;</span><span>, </span><span class="c22">&quot;2&quot;</span><span>, </span><span class="c22">&quot;3&quot;</span><span class="c4">}</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">}</span><span class="c7">;</span><span><br><br> &nbsp; &nbsp;</span><span class="c9">public</span><span>&nbsp;</span><span class="c0">Vector</span><span>&nbsp;</span><span class="c0">getChildren</span><span class="c4">(</span><span class="c0">Object</span><span>&nbsp;</span><span class="c0">parent</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">if</span><span class="c4">(</span><span class="c0">parent</span><span>&nbsp;</span><span class="c7">==</span><span>&nbsp;</span><span class="c9">null</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">Vector</span><span>&nbsp;</span><span class="c0">v</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Vector</span><span class="c4">()</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">for</span><span class="c4">(</span><span class="c9">int</span><span>&nbsp;</span><span class="c0">iter</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c14">0</span><span>&nbsp;</span><span class="c7">;</span><span>&nbsp;</span><span class="c0">iter</span><span>&nbsp;</span><span class="c7">&lt;</span><span>&nbsp;</span><span class="c0">arr</span><span class="c4">[</span><span class="c14">0</span><span class="c4">]</span><span>.</span><span class="c0">length</span><span>&nbsp;</span><span class="c7">;</span><span>&nbsp;</span><span class="c0">iter</span><span class="c7">++</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">v</span><span>.</span><span class="c0">addElement</span><span class="c4">(</span><span class="c0">arr</span><span class="c4">[</span><span class="c14">0</span><span class="c4">][</span><span class="c0">iter</span><span class="c4">])</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">}</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">return</span><span>&nbsp;</span><span class="c0">v</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">}</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">Vector</span><span>&nbsp;</span><span class="c0">v</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Vector</span><span class="c4">()</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">for</span><span class="c4">(</span><span class="c9">int</span><span>&nbsp;</span><span class="c0">iter</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c14">0</span><span>&nbsp;</span><span class="c7">;</span><span>&nbsp;</span><span class="c0">iter</span><span>&nbsp;</span><span class="c7">&lt;</span><span>&nbsp;</span><span class="c0">arr</span><span class="c4">[</span><span class="c14">0</span><span class="c4">]</span><span>.</span><span class="c0">length</span><span>&nbsp;</span><span class="c7">;</span><span>&nbsp;</span><span class="c0">iter</span><span class="c7">++</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">if</span><span class="c4">(</span><span class="c0">parent</span><span>&nbsp;</span><span class="c7">==</span><span>&nbsp;</span><span class="c0">arr</span><span class="c4">[</span><span class="c14">0</span><span class="c4">][</span><span class="c0">iter</span><span class="c4">])</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">if</span><span class="c4">(</span><span class="c0">arr</span><span>.</span><span class="c0">length</span><span>&nbsp;</span><span class="c7">&gt;</span><span>&nbsp;</span><span class="c0">iter</span><span>&nbsp;</span><span class="c7">+</span><span>&nbsp;</span><span class="c14">1</span><span>&nbsp;</span><span class="c7">&amp;&amp;</span><span>&nbsp;</span><span class="c0">arr</span><span class="c4">[</span><span class="c0">iter</span><span>&nbsp;</span><span class="c7">+</span><span>&nbsp;</span><span class="c14">1</span><span class="c4">]</span><span>&nbsp;</span><span class="c7">!=</span><span>&nbsp;</span><span class="c9">null</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">for</span><span class="c4">(</span><span class="c9">int</span><span>&nbsp;</span><span class="c0">i</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c14">0</span><span>&nbsp;</span><span class="c7">;</span><span>&nbsp;</span><span class="c0">i</span><span>&nbsp;</span><span class="c7">&lt;</span><span>&nbsp;</span><span class="c0">arr</span><span class="c4">[</span><span class="c0">iter</span><span>&nbsp;</span><span class="c7">+</span><span>&nbsp;</span><span class="c14">1</span><span class="c4">]</span><span>.</span><span class="c0">length</span><span>&nbsp;</span><span class="c7">;</span><span>&nbsp;</span><span class="c0">i</span><span class="c7">++</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">v</span><span>.</span><span class="c0">addElement</span><span class="c4">(</span><span class="c0">arr</span><span class="c4">[</span><span class="c0">iter</span><span>&nbsp;</span><span class="c7">+</span><span>&nbsp;</span><span class="c14">1</span><span class="c4">][</span><span class="c0">i</span><span class="c4">])</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">}</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">}</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">}</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">}</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">return</span><span>&nbsp;</span><span class="c0">v</span><span class="c7">;</span><span><br> &nbsp; &nbsp;</span><span class="c4">}</span><span><br><br> &nbsp; &nbsp;</span><span class="c9">public</span><span>&nbsp;</span><span class="c9">boolean</span><span>&nbsp;</span><span class="c0">isLeaf</span><span class="c4">(</span><span class="c0">Object</span><span>&nbsp;</span><span class="c0">node</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">Vector</span><span>&nbsp;</span><span class="c0">v</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c0">getChildren</span><span class="c4">(</span><span class="c0">node</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">return</span><span>&nbsp;</span><span class="c0">v</span><span>&nbsp;</span><span class="c7">==</span><span>&nbsp;</span><span class="c9">null</span><span>&nbsp;</span><span class="c7">||</span><span>&nbsp;</span><span class="c0">v</span><span>.</span><span class="c0">size</span><span class="c4">()</span><span>&nbsp;</span><span class="c7">==</span><span>&nbsp;</span><span class="c14">0</span><span class="c7">;</span><span><br> &nbsp; &nbsp;</span><span class="c4">}</span><span><br></span><span class="c4">}</span><span><br><br></span><span class="c0">Tree</span><span>&nbsp;</span><span class="c0">dt</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Tree</span><span class="c4">(</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">StringArrayTreeModel</span><span class="c4">())</span><span class="c7">;</span><span><br></span></p><p class="c3"><span>Will result in this:</span></p><p class="c3"><img height="346" src="images/image34.png" width="276"></p><h2 class="c37 c3"><a name="h.b9sw7eyk7a3m"></a><span class="c10">Share Button</span></h2><p class="c3"><span>The share button allows you to help your users market your application by sharing it with their friends easily. When they press the button they will be faced with either the native sharing capability of the platform (as is available on Android &amp; iOS) or a builtin set of sharing features such as facebook, email, SMS etc. You can customize the button to add additional sharing options.</span></p><p class="c3"><img height="293" src="images/image92.png" width="261"></p><h2 class="c37 c3"><a name="h.yxs0ydrizw06"></a><span class="c10">Infinite </span><span class="c10">Progress</span></h2><p class="c3"><span>The infinite progress indicator spins an image infinitely, it is automatically associated with a default image for infinite progress from the native theme. This can be used in several ways e.g. you can place this component into a layout to indicate work underway.</span></p><p class="c3"><span>A useful function in the infinite progress component is the showInifiniteBlocking() method which modelessly shows a translucent dialog with the infinite progress indicator in it. &nbsp;</span></p><p class="c3"><img height="277" src="images/image83.png" width="209"></p><h2 class="c37 c3"><a name="h.g0ixxkg21hx5"></a><span class="c10">Tabs</span></h2><p class="c3"><span>The Tabs component allows arranging components into groups within containers, its a container type that allows leafing through its children using labeled buttons. The tabs can be placed in multiple different ways (top, bottom, left or right) with the default being determined by the platform. This class also allows swiping between components to leaf between said tabs (for this purpose the tabs themselves can also be hidden).</span></p><p class="c3"><img height="263" src="images/image76.png" width="202"></p><h2 class="c37 c3"><a name="h.vvbpbr6nosf2"></a><span class="c10">MediaPlayer</span></h2><p class="c3"><span>The media player allows you to control video playback e.g. to show a video one can simply use something like this:</span></p><p class="c3"><span class="c9">final</span><span>&nbsp;</span><span class="c0">MediaPlayer</span><span>&nbsp;</span><span class="c0">mp</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">MediaPlayer</span><span class="c4">()</span><span class="c7">;</span><span><br></span><span class="c9">try</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp;</span><span class="c0">mp</span><span>.</span><span class="c0">setDataSource</span><span class="c4">(</span><span class="c0">myMediaFile</span><span class="c4">)</span><span class="c7">;</span><span><br></span><span class="c4">}</span><span>&nbsp;</span><span class="c9">catch</span><span>&nbsp;</span><span class="c4">(</span><span class="c0">IOException</span><span>&nbsp;</span><span class="c0">ex</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp;</span><span class="c0">ex</span><span>.</span><span class="c0">printStackTrace</span><span class="c4">()</span><span class="c7">;</span><span><br></span><span class="c4">}</span><span><br></span><span class="c0">player</span><span>.</span><span class="c0">addComponent</span><span class="c4">(</span><span class="c0">BorderLayout</span><span>.</span><span class="c0">CENTER</span><span>, </span><span class="c0">mp</span><span class="c4">)</span><span class="c7">;</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>In order to run the media/video in the simulator you will need to run a version of Java 7 update 6 or newer. We rely on features that were integrated into that version in order to provide proper video codec support.</span></p><h2 class="c3"><a name="h.xx3y19cnr4jt"></a><span class="c10">ImageViewer</span></h2><p class="c3"><span>The image viewer allows you to inspect, zoom and pan into an image. It also allows swiping between images if you have a set of images (using an image list model).</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>Here is a simple example of using the ImageViewer:</span></p><p class="c3"><span class="c0">ImageViewer</span><span>&nbsp;</span><span class="c0">imv</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">ImageViewer</span><span class="c4">()</span><span class="c7">;</span><span><br></span><span class="c0">DefaultListModel</span><span class="c7">&lt;</span><span class="c0">Image</span><span class="c7">&gt;</span><span>&nbsp;</span><span class="c0">images</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">DefaultListModel</span><span class="c7">&lt;</span><span class="c0">Image</span><span class="c7">&gt;</span><span class="c4">(</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Image</span><span class="c4">[]</span><span>&nbsp;</span><span class="c4">{</span><span><br></span><span class="c0">EncodedImage</span><span>.</span><span class="c0">create</span><span class="c4">(</span><span class="c22">&quot;/a.jpg&quot;</span><span class="c4">)</span><span>, </span><span class="c0">EncodedImage</span><span>.</span><span class="c0">create</span><span class="c4">(</span><span class="c22">&quot;/b.jpg&quot;</span><span class="c4">)</span><span>, </span><span class="c0">EncodedImage</span><span>.</span><span class="c0">create</span><span class="c4">(</span><span class="c22">&quot;/c.jpg&quot;</span><span class="c4">)</span><span><br></span><span class="c4">})</span><span class="c7">;</span><span><br></span><span class="c0">imv</span><span>.</span><span class="c0">setImage</span><span class="c4">(</span><span class="c0">images</span><span>.</span><span class="c0">getItemAt</span><span class="c4">(</span><span class="c14">0</span><span class="c4">))</span><span class="c7">;</span><span><br></span><span class="c0">imv</span><span>.</span><span class="c0">setImageList</span><span class="c4">(</span><span class="c0">images</span><span class="c4">)</span><span class="c7">;</span><span><br></span><span class="c0">imv</span><span>.</span><span class="c0">setSwipePlaceholder</span><span class="c4">(</span><span class="c0">Image</span><span>.</span><span class="c0">createImage</span><span class="c4">(</span><span class="c14">5</span><span>, </span><span class="c14">5</span><span class="c4">))</span><span class="c7">;</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>Notice that we use a list to allow swiping between images (unnecessary if you have only one image), we also create a placeholder image to show while the image is still loading. Notice that encoded images aren&#39;t always fully loaded and so when you swipe if the images are really large you might see delays!</span></p><h2 class="c37 c3"><a name="h.3f0iv0xw60ts"></a><span class="c10">WebBrowser</span></h2><p class="c3"><span>The web browser component shows the native device web browser when supported by the device and the HTMLComponent when the web browser isn&rsquo;t supported on the given device.</span></p><p class="c3"><span>To create a simple web browser component we can do something like this (assuming page.html is present in the jar):</span></p><p class="c3"><span class="c0">WebBrowser</span><span>&nbsp;</span><span class="c0">wb</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">WebBrowser</span><span class="c4">()</span><span class="c7">;</span><span><br></span><span class="c0">wb</span><span>.</span><span class="c0">setURL</span><span class="c4">(</span><span class="c22">&quot;jar:///Page.html&quot;</span><span class="c4">)</span><span class="c7">;</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>However, on devices where more elaborate HTML rendering exists we can also do things such as communicate with the HTML code using JavaScript calls (notice that opening an alert in an embedded native browser might not work). E.g. we can create HTML like this:</span></p><p class="c3"><span class="c4">&lt;</span><span class="c0 c9">html lang=</span><span class="c9 c22">&quot;en&quot;</span><span class="c4">&gt;</span><span><br> &nbsp; &nbsp;</span><span class="c4">&lt;</span><span class="c0 c9">head</span><span class="c4">&gt;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">&lt;</span><span class="c0 c9">meta charset=</span><span class="c9 c22">&quot;utf-8&quot;</span><span class="c4">&gt;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">&lt;</span><span class="c0 c9">title</span><span class="c4">&gt;</span><span>Test</span><span class="c4">&lt;</span><span class="c0 c9">/title</span><span class="c4">&gt;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">&lt;</span><span class="c0 c9">script</span><span class="c4">&gt;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;function &nbsp;fnc(message) {<br> &nbsp; &nbsp; &nbsp; &nbsp; document.write(message);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;};<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">&lt;</span><span class="c0 c9">/script</span><span class="c4">&gt;</span><span>&nbsp; &nbsp; &nbsp; &nbsp; <br> &nbsp; &nbsp;</span><span class="c4">&lt;</span><span class="c0 c9">/head</span><span class="c4">&gt;</span><span><br> &nbsp; &nbsp;</span><span class="c4">&lt;</span><span class="c0 c9">body </span><span class="c4">&gt;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">&lt;</span><span class="c0 c9">p</span><span class="c4">&gt;</span><span>Demo</span><span class="c4">&lt;</span><span class="c0 c9">/p</span><span class="c4">&gt;</span><span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br> &nbsp; &nbsp;</span><span class="c4">&lt;</span><span class="c0 c9">/body</span><span class="c4">&gt;</span><span><br></span><span class="c4">&lt;</span><span class="c0 c9">/html</span><span class="c4">&gt;</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>And then communicate with the function from code like this:</span></p><p class="c3"><span class="c0">WebBrowser</span><span>&nbsp;</span><span class="c0">web</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">WebBrowser</span><span class="c4">(){</span><span><br> &nbsp; &nbsp;@</span><span class="c0">Override</span><span><br> &nbsp; &nbsp;</span><span class="c9">public</span><span>&nbsp;</span><span class="c9">void</span><span>&nbsp;</span><span class="c0">onLoad</span><span class="c4">(</span><span class="c0">String</span><span>&nbsp;</span><span class="c0">url</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">Component</span><span>&nbsp;</span><span class="c0">c</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c0">getInternal</span><span class="c4">()</span><span class="c7">;</span><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">if</span><span class="c4">(</span><span class="c0">c</span><span>&nbsp;</span><span class="c9">instanceof</span><span>&nbsp;</span><span class="c0">BrowserComponent</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">BrowserComponent</span><span>&nbsp;</span><span class="c0">b</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c4">(</span><span class="c0">BrowserComponent</span><span class="c4">)</span><span class="c0">c</span><span class="c7">;</span><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">b</span><span>.</span><span class="c0">execute</span><span class="c4">(</span><span class="c22">&quot;fnc(&#39;&lt;p&gt;Hello World&lt;/p&gt;&#39;)&quot;</span><span class="c4">)</span><span class="c7">;</span><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">}</span><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp;</span><span class="c4">}</span><span><br></span><span class="c4">}</span><span class="c7">;</span><span><br></span><span class="c0">f</span><span>.</span><span class="c0">addComponent</span><span class="c4">(</span><span class="c0">BorderLayout</span><span>.</span><span class="c0">CENTER</span><span>, </span><span class="c0">web</span><span class="c4">)</span><span class="c7">;</span><span><br></span><span class="c0">web</span><span>.</span><span class="c0">setURL</span><span class="c4">(</span><span class="c22">&quot;jar:///page.html&quot;</span><span class="c4">)</span><span class="c7">;</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>In order to see the native web browser in the simulator you will need to run using Java 7 update 6 or newer.</span></p><h2 class="c37 c3"><a name="h.yazkqtisar5y"></a><span class="c10">Auto Complete</span><img height="162" src="images/image56.png" width="243"></h2><p class="c3"><span>The AutoCompleteTextField allows us to write text into a text field and select a completion entry from the list in a similar way to a search engine.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>This is really easy to incorporate into your code, just replace your usage of TextField with AutoCompleteTextField and define the data that the auto complete should work from. There is a default implementation that accepts a String array or a ListModel for completion strings, this can work well for a &quot;small&quot; set of thousands (or tens of thousands) of entries.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>However, if you wish to query a database or a web service you will need to derive the class and perform more advanced filtering by overriding the filter method and the getSuggestionModel method. You might also need to invoke updateFilterList() if your filter algorithm is asynchronous.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>Here is a sample of a simple auto-complete that doesn&#39;t use the advanced features:</span></p><p class="c3"><span class="c0">Form</span><span>&nbsp;</span><span class="c0">test</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Form</span><span class="c4">(</span><span class="c22">&quot;Complete&quot;</span><span class="c4">)</span><span class="c7">;</span><span><br></span><span class="c0">test</span><span>.</span><span class="c0">setLayout</span><span class="c4">(</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">BoxLayout</span><span class="c4">(</span><span class="c0">BoxLayout</span><span>.</span><span class="c0">Y_AXIS</span><span class="c4">))</span><span class="c7">;</span><span><br></span><span class="c0">AutoCompleteTextField</span><span>&nbsp;</span><span class="c0">at</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">AutoCompleteTextField</span><span class="c4">(</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">String</span><span class="c4">[]</span><span>&nbsp;</span><span class="c4">{</span><span class="c22">&quot;Common&quot;</span><span>, </span><span class="c22">&quot;Code&quot;</span><span>, </span><span class="c22">&quot;Codename One&quot;</span><span>, </span><span class="c22">&quot;Correct&quot;</span><span>, </span><span class="c22">&quot;Correlation&quot;</span><span>, </span><span class="c22">&quot;Co-location&quot;</span><span>, </span><span class="c22">&quot;Corporate&quot;</span><span class="c4">}</span><span>&nbsp;</span><span class="c4">)</span><span class="c7">;</span><span><br></span><span class="c0">test</span><span>.</span><span class="c0">addComponent</span><span class="c4">(</span><span class="c0">at</span><span class="c4">)</span><span class="c7">;</span><span><br></span><span class="c0">test</span><span>.</span><span class="c0">show</span><span class="c4">()</span><span class="c7">;</span></p><h2 class="c37 c3"><a name="h.6ldpjkwz6qzc"></a><span class="c10">Spinner &amp; Picker</span><img height="149" src="images/image17.jpg" width="199"></h2><p class="c3"><span>Spinner is a form of list that allows picking specific platform values from a spinning wheel in a similar way to the iOS date control. We are in the process of de-emphasizing Spinner which varies too much between platforms in favor of the new Picker component which uses a native interface to pick an entry </span></p><h2 class="c3"><a name="h.76xad6h57fbl"></a><span class="c10">Embedded Container</span></h2><p class="c3"><span>EmbeddedContainer solves a problem that exists only within the GUI builder and the class makes no sense outside of the context of the GUI builder.</span></p><p class="c3"><span>The necessity for EmbeddedContainer came about due to iPhone inspired designs that relied on tabs (iPhone style tabs at the bottom of the screen) where different features of the application are within a different tab.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>This didn&#39;t mesh well with the GUI builder navigation logic and so we needed to rethink some of it. We wanted to reuse GUI as much as possible while still enjoying the advantage of navigation being completely managed for me.</span></p><p class="c3"><span>Android does this with Activities and the iPhone itself has a view controller, we don&#39;t like both approaches and think they both suck. The problem is that you have what is effectively two incompatible hierarchies to mix and match which is why Android needed to &quot;invent&quot; fragments and Apple can&#39;t mix view controllers within a single application.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>The Component/Container hierarchy is powerful enough to represent such a UI but we needed a &quot;marker&quot; to indicate to the UIBuilder where a &quot;root&quot; component exists so navigation occurs only within the given &quot;root&quot;. Here EmbeddedContainer comes into play, its a simple container that can only contain another GUI from the GUI builder. Nothing else. So we can place it in any form of UI and effectively have the UI change appropriately and navigation would default to &quot;sensible values&quot;.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>Navigation replaces the content of the embedded container, it finds the embedded container based on the component that broadcast the event. If you want to navigate manually just use the showContainer() method which accepts a component, you can give any component that is under the EmbeddedContainer you want to replace and Codename One will be smart enough to replace only that component.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>The nice part about using the EmbeddedContainer is that the resulting UI can be very easily refactored to provide a more traditional form based UI without duplicating effort and can be easily adapted to a more tablet oriented UI (with a side bar) again without much effort. </span></p><h2 class="c3"><a name="h.g3wg6yaz6s38"></a><span class="c10">The Map Component</span></h2><p class="c3"><span>The MapComponent uses the OpenStreetMap webservice by default to display a navigatable map.</span></p><p class="c3"><span>The code was contributed by Roman Kamyk and was originally used for a LWUIT application.</span></p><p class="c3 c5"><span></span></p><p class="c32 c3 c53"><img height="426" src="images/image02.png" width="284"></p><p class="c3 c5"><span></span></p><p class="c3"><span>The screenshot above was produced using the following code:</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>&nbsp; &nbsp; &nbsp; </span><span class="c0">Form</span><span>&nbsp;</span><span class="c0">map</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Form</span><span class="c4">(</span><span class="c22">&quot;Map&quot;</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; </span><span class="c0">map</span><span>.</span><span class="c0">setLayout</span><span class="c4">(</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">BorderLayout</span><span class="c4">())</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; </span><span class="c0">map</span><span>.</span><span class="c0">setScrollable</span><span class="c4">(</span><span class="c9">false</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; </span><span class="c9">final</span><span>&nbsp;</span><span class="c0">MapComponent</span><span>&nbsp;</span><span class="c0">mc</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">MapComponent</span><span class="c4">()</span><span class="c7">;</span><span><br><br> &nbsp; &nbsp; &nbsp; </span><span class="c9">try</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c11">//get the current location from the Location API</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">Location</span><span>&nbsp;</span><span class="c0">loc</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c0">LocationManager</span><span>.</span><span class="c0">getLocationManager</span><span class="c4">()</span><span>.</span><span class="c0">getCurrentLocation</span><span class="c4">()</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">Coord</span><span>&nbsp;</span><span class="c0">lastLocation</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Coord</span><span class="c4">(</span><span class="c0">loc</span><span>.</span><span class="c0">getLatitude</span><span class="c4">()</span><span>, </span><span class="c0">loc</span><span>.</span><span class="c0">getLongtitude</span><span class="c4">())</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">Image</span><span>&nbsp;</span><span class="c0">i</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c0">Image</span><span>.</span><span class="c0">createImage</span><span class="c4">(</span><span class="c22">&quot;/blue_pin.png&quot;</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">PointsLayer</span><span>&nbsp;</span><span class="c0">pl</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">PointsLayer</span><span class="c4">()</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">pl</span><span>.</span><span class="c0">setPointIcon</span><span class="c4">(</span><span class="c0">i</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">PointLayer</span><span>&nbsp;</span><span class="c0">p</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">PointLayer</span><span class="c4">(</span><span class="c0">lastLocation</span><span>, </span><span class="c22">&quot;You Are Here&quot;</span><span>, </span><span class="c0">i</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">p</span><span>.</span><span class="c0">setDisplayName</span><span class="c4">(</span><span class="c9">true</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">pl</span><span>.</span><span class="c0">addPoint</span><span class="c4">(</span><span class="c0">p</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">mc</span><span>.</span><span class="c0">addLayer</span><span class="c4">(</span><span class="c0">pl</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; </span><span class="c4">}</span><span>&nbsp;</span><span class="c9">catch</span><span>&nbsp;</span><span class="c4">(</span><span class="c0">IOException</span><span>&nbsp;</span><span class="c0">ex</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">ex</span><span>.</span><span class="c0">printStackTrace</span><span class="c4">()</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; </span><span class="c4">}</span><span><br> &nbsp; &nbsp; &nbsp; </span><span class="c0">mc</span><span>.</span><span class="c0">zoomToLayers</span><span class="c4">()</span><span class="c7">;</span><span><br><br> &nbsp; &nbsp; &nbsp; </span><span class="c0">map</span><span>.</span><span class="c0">addComponent</span><span class="c4">(</span><span class="c0">BorderLayout</span><span>.</span><span class="c0">CENTER</span><span>, </span><span class="c0">mc</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; </span><span class="c0">map</span><span>.</span><span class="c0">addCommand</span><span class="c4">(</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">BackCommand</span><span class="c4">())</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; </span><span class="c0">map</span><span>.</span><span class="c0">setBackCommand</span><span class="c4">(</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">BackCommand</span><span class="c4">())</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; </span><span class="c0">map</span><span>.</span><span class="c0">show</span><span class="c4">()</span><span class="c7">;</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>The example below shows how to integrate the MapComponent with the Google Location API.</span></p><p class="c3"><span>make sure to obtain your secret api key from the Google Location data API at:</span></p><p class="c3"><span class="c8"><a class="c15" href="https://developers.google.com/maps/documentation/places/">https://developers.google.com/maps/documentation/places/</a></span></p><p class="c32 c3 c53"><img height="426" src="images/image93.png" width="284"></p><p class="c3 c5"><span></span></p><p class="c3 c5"><span></span></p><p class="c3"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c9">final</span><span>&nbsp;</span><span class="c0">Form</span><span>&nbsp;</span><span class="c0">map</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Form</span><span class="c4">(</span><span class="c22">&quot;Map&quot;</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">map</span><span>.</span><span class="c0">setLayout</span><span class="c4">(</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">BorderLayout</span><span class="c4">())</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">map</span><span>.</span><span class="c0">setScrollable</span><span class="c4">(</span><span class="c9">false</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c9">final</span><span>&nbsp;</span><span class="c0">MapComponent</span><span>&nbsp;</span><span class="c0">mc</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">MapComponent</span><span class="c4">()</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">Location</span><span>&nbsp;</span><span class="c0">loc</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c0">LocationManager</span><span>.</span><span class="c0">getLocationManager</span><span class="c4">()</span><span>.</span><span class="c0">getCurrentLocation</span><span class="c4">()</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c11">//use the code from above to show you on the map</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">putMeOnMap</span><span class="c4">(</span><span class="c0">mc</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">map</span><span>.</span><span class="c0">addComponent</span><span class="c4">(</span><span class="c0">BorderLayout</span><span>.</span><span class="c0">CENTER</span><span>, </span><span class="c0">mc</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">map</span><span>.</span><span class="c0">addCommand</span><span class="c4">(</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">BackCommand</span><span class="c4">())</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">map</span><span>.</span><span class="c0">setBackCommand</span><span class="c4">(</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">BackCommand</span><span class="c4">())</span><span class="c7">;</span><span><br><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">ConnectionRequest</span><span>&nbsp;</span><span class="c0">req</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">ConnectionRequest</span><span class="c4">()</span><span>&nbsp;</span><span class="c4">{</span><span><br><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c9">protected</span><span>&nbsp;</span><span class="c9">void</span><span>&nbsp;</span><span class="c0">readResponse</span><span class="c4">(</span><span class="c0">InputStream</span><span>&nbsp;</span><span class="c0">input</span><span class="c4">)</span><span>&nbsp;</span><span class="c9">throws</span><span>&nbsp;</span><span class="c0">IOException</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">JSONParser</span><span>&nbsp;</span><span class="c0">p</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">JSONParser</span><span class="c4">()</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">Hashtable</span><span>&nbsp;</span><span class="c0">h</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c0">p</span><span>.</span><span class="c0">parse</span><span class="c4">(</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">InputStreamReader</span><span class="c4">(</span><span class="c0">input</span><span class="c4">))</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c11">// &quot;status&quot; : &quot;REQUEST_DENIED&quot;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">String</span><span>&nbsp;</span><span class="c0">response</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c4">(</span><span class="c0">String</span><span class="c4">)</span><span class="c0">h</span><span>.</span><span class="c0">get</span><span class="c4">(</span><span class="c22">&quot;status&quot;</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c9">if</span><span class="c4">(</span><span class="c0">response</span><span>.</span><span class="c0">equals</span><span class="c4">(</span><span class="c22">&quot;REQUEST_DENIED&quot;</span><span class="c4">)){</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">System</span><span>.</span><span class="c0">out</span><span>.</span><span class="c0">println</span><span class="c4">(</span><span class="c22">&quot;make sure to obtain a key from &quot;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c7">+</span><span>&nbsp;</span><span class="c22">&quot;https://developers.google.com/maps/documentation/places/&quot;</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">progress</span><span>.</span><span class="c0">dispose</span><span class="c4">()</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">Dialog</span><span>.</span><span class="c0">show</span><span class="c4">(</span><span class="c22">&quot;Info&quot;</span><span>, </span><span class="c22">&quot;make sure to obtain an application key from &quot;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c7">+</span><span>&nbsp;</span><span class="c22">&quot;google places api&#39;s&quot;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; , </span><span class="c22">&quot;Ok&quot;</span><span>, </span><span class="c9">null</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c9">return</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c4">}</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c9">final</span><span>&nbsp;</span><span class="c0">Vector</span><span>&nbsp;</span><span class="c0">v</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c4">(</span><span class="c0">Vector</span><span class="c4">)</span><span>&nbsp;</span><span class="c0">h</span><span>.</span><span class="c0">get</span><span class="c4">(</span><span class="c22">&quot;results&quot;</span><span class="c4">)</span><span class="c7">;</span><span><br><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">Image</span><span>&nbsp;</span><span class="c0">im</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c0">Image</span><span>.</span><span class="c0">createImage</span><span class="c4">(</span><span class="c22">&quot;/red_pin.png&quot;</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">PointsLayer</span><span>&nbsp;</span><span class="c0">pl</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">PointsLayer</span><span class="c4">()</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">pl</span><span>.</span><span class="c0">setPointIcon</span><span class="c4">(</span><span class="c0">im</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">pl</span><span>.</span><span class="c0">addActionListener</span><span class="c4">(</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">ActionListener</span><span class="c4">()</span><span>&nbsp;</span><span class="c4">{</span><span><br><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c9">public</span><span>&nbsp;</span><span class="c9">void</span><span>&nbsp;</span><span class="c0">actionPerformed</span><span class="c4">(</span><span class="c0">ActionEvent</span><span>&nbsp;</span><span class="c0">evt</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">PointLayer</span><span>&nbsp;</span><span class="c0">p</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c4">(</span><span class="c0">PointLayer</span><span class="c4">)</span><span>&nbsp;</span><span class="c0">evt</span><span>.</span><span class="c0">getSource</span><span class="c4">()</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">System</span><span>.</span><span class="c0">out</span><span>.</span><span class="c0">println</span><span class="c4">(</span><span class="c22">&quot;pressed &quot;</span><span>&nbsp;</span><span class="c7">+</span><span>&nbsp;</span><span class="c0">p</span><span class="c4">)</span><span class="c7">;</span><span><br><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">Dialog</span><span>.</span><span class="c0">show</span><span class="c4">(</span><span class="c22">&quot;Details&quot;</span><span>, </span><span class="c22">&quot;&quot;</span><span>&nbsp;</span><span class="c7">+</span><span>&nbsp;</span><span class="c0">p</span><span>.</span><span class="c0">getName</span><span class="c4">()</span><span>, </span><span class="c22">&quot;Ok&quot;</span><span>, </span><span class="c9">null</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c4">}</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c4">})</span><span class="c7">;</span><span><br><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c9">for</span><span>&nbsp;</span><span class="c4">(</span><span class="c9">int</span><span>&nbsp;</span><span class="c0">i</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c14">0</span><span class="c7">;</span><span>&nbsp;</span><span class="c0">i</span><span>&nbsp;</span><span class="c7">&lt;</span><span>&nbsp;</span><span class="c0">v</span><span>.</span><span class="c0">size</span><span class="c4">()</span><span class="c7">;</span><span>&nbsp;</span><span class="c0">i</span><span class="c7">++</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">Hashtable</span><span>&nbsp;</span><span class="c0">entry</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c4">(</span><span class="c0">Hashtable</span><span class="c4">)</span><span>&nbsp;</span><span class="c0">v</span><span>.</span><span class="c0">elementAt</span><span class="c4">(</span><span class="c0">i</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">Hashtable</span><span>&nbsp;</span><span class="c0">geo</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c4">(</span><span class="c0">Hashtable</span><span class="c4">)</span><span>&nbsp;</span><span class="c0">entry</span><span>.</span><span class="c0">get</span><span class="c4">(</span><span class="c22">&quot;geometry&quot;</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">Hashtable</span><span>&nbsp;</span><span class="c0">loc</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c4">(</span><span class="c0">Hashtable</span><span class="c4">)</span><span>&nbsp;</span><span class="c0">geo</span><span>.</span><span class="c0">get</span><span class="c4">(</span><span class="c22">&quot;location&quot;</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">Double</span><span>&nbsp;</span><span class="c0">lat</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c4">(</span><span class="c0">Double</span><span class="c4">)</span><span>&nbsp;</span><span class="c0">loc</span><span>.</span><span class="c0">get</span><span class="c4">(</span><span class="c22">&quot;lat&quot;</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">Double</span><span>&nbsp;</span><span class="c0">lng</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c4">(</span><span class="c0">Double</span><span class="c4">)</span><span>&nbsp;</span><span class="c0">loc</span><span>.</span><span class="c0">get</span><span class="c4">(</span><span class="c22">&quot;lng&quot;</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">PointLayer</span><span>&nbsp;</span><span class="c0">point</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">PointLayer</span><span class="c4">(</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Coord</span><span class="c4">(</span><span class="c0">lat</span><span>.</span><span class="c0">doubleValue</span><span class="c4">()</span><span>, </span><span class="c0">lng</span><span>.</span><span class="c0">doubleValue</span><span class="c4">())</span><span>,<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c4">(</span><span class="c0">String</span><span class="c4">)</span><span>&nbsp;</span><span class="c0">entry</span><span>.</span><span class="c0">get</span><span class="c4">(</span><span class="c22">&quot;name&quot;</span><span class="c4">)</span><span>, </span><span class="c9">null</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">pl</span><span>.</span><span class="c0">addPoint</span><span class="c4">(</span><span class="c0">point</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c4">}</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">progress</span><span>.</span><span class="c0">dispose</span><span class="c4">()</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">mc</span><span>.</span><span class="c0">addLayer</span><span class="c4">(</span><span class="c0">pl</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">map</span><span>.</span><span class="c0">show</span><span class="c4">()</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">mc</span><span>.</span><span class="c0">zoomToLayers</span><span class="c4">()</span><span class="c7">;</span><span><br><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c4">}</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c4">}</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">req</span><span>.</span><span class="c0">setUrl</span><span class="c4">(</span><span class="c22">&quot;https://maps.googleapis.com/maps/api/place/search/json&quot;</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">req</span><span>.</span><span class="c0">setPost</span><span class="c4">(</span><span class="c9">false</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">req</span><span>.</span><span class="c0">addArgument</span><span class="c4">(</span><span class="c22">&quot;location&quot;</span><span>, </span><span class="c22">&quot;&quot;</span><span>&nbsp;</span><span class="c7">+</span><span>&nbsp;</span><span class="c0">loc</span><span>.</span><span class="c0">getLatitude</span><span class="c4">()</span><span>&nbsp;</span><span class="c7">+</span><span>&nbsp;</span><span class="c22">&quot;,&quot;</span><span>&nbsp;</span><span class="c7">+</span><span>&nbsp;</span><span class="c0">loc</span><span>.</span><span class="c0">getLongtitude</span><span class="c4">())</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">req</span><span>.</span><span class="c0">addArgument</span><span class="c4">(</span><span class="c22">&quot;radius&quot;</span><span>, </span><span class="c22">&quot;500&quot;</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">req</span><span>.</span><span class="c0">addArgument</span><span class="c4">(</span><span class="c22">&quot;types&quot;</span><span>, </span><span class="c22">&quot;food&quot;</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">req</span><span>.</span><span class="c0">addArgument</span><span class="c4">(</span><span class="c22">&quot;sensor&quot;</span><span>, </span><span class="c22">&quot;false&quot;</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c11">//get your own key from https://developers.google.com/maps/documentation/places/</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c11">//and replace it here.</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">String</span><span>&nbsp;</span><span class="c0">key</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c22">&quot;yourAPIKey&quot;</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">req</span><span>.</span><span class="c0">addArgument</span><span class="c4">(</span><span class="c22">&quot;key&quot;</span><span>, </span><span class="c0">key</span><span class="c4">)</span><span class="c7">;</span><span><br><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">NetworkManager</span><span>.</span><span class="c0">getInstance</span><span class="c4">()</span><span>.</span><span class="c0">addToQueue</span><span class="c4">(</span><span class="c0">req</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; </span><span class="c4">}</span><span><br> &nbsp; &nbsp; &nbsp; </span><span class="c9">catch</span><span>&nbsp;</span><span class="c4">(</span><span class="c0">IOException</span><span>&nbsp;</span><span class="c0">ex</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">ex</span><span>.</span><span class="c0">printStackTrace</span><span class="c4">()</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; </span><span class="c4">}</span><span><br> &nbsp; </span><span class="c4">}</span><span><br></span></p><h1 class="c23 c3 c63"><a name="h.j0oz5oaycn4b"></a></h1><hr style="page-break-before:always;display:none;"><h1 class="c23 c3 c63"><a name="h.qxmts93l99xa"></a></h1><h1 class="c3 c23"><a name="h.vj77f6wj2rbu"></a><span class="c10">Animations &amp; Transitions</span></h1><p class="c3"><span>There are many ways to animate and liven the data within a Codename One application, one which we already discussed is the </span><span class="c8"><a class="c15" href="#id.tdspb2pzbz8o">layout animations mechanism</a></span><span>&nbsp;however there is a great more. </span></p><h2 class="c3"><a name="h.d6sqggvrefhu"></a><span class="c10">Low Level Animations</span></h2><p class="c3"><span>To understand the flow of animations in Codename One we can start by discussing the underlying low level animations and the motivations behind them. The Codename One event dispatch thread has a special animation &ldquo;pulse&rdquo; allowing an animation to update its state and draw itself. Code can make use of this pulse to implement repetitive polling tasks that have very little to do with drawing. </span></p><p class="c3"><span>This is helpful since the callback will always occur on the event dispatch thread.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>Every component in Codename One contains an animate() method that returns a boolean value, you can also implement the Animation interface in an arbitrary component to implement your own animation. In order to receive animation events you need to register yourself within the parent form, it is the responsibility of the parent for to call animate().</span></p><p class="c3"><span>If the animate method returns true then the animation will be painted. It is important to deregister animations when they aren&rsquo;t needed to conserve battery life. However, if you derive from a component which has its own animation logic you might damage its animation behavior by deregistering it, so tread gently with the low level API&rsquo;s.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span class="c0">myForm</span><span>.</span><span class="c0">registerAnimated</span><span class="c4">(</span><span class="c9">this</span><span class="c4">)</span><span class="c7">;</span><span><br><br></span><span class="c9">private</span><span>&nbsp;</span><span class="c9">int</span><span>&nbsp;</span><span class="c0">spinValue</span><span class="c7">;</span><span><br></span><span class="c9">public</span><span>&nbsp;</span><span class="c9">boolean</span><span>&nbsp;</span><span class="c0">animate</span><span class="c4">()</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; </span><span class="c9">if</span><span class="c4">(</span><span class="c0">userStatusPending</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; </span><span class="c0">spinValue</span><span class="c7">++;</span><span><br> &nbsp; &nbsp; &nbsp; </span><span class="c9">super</span><span>.</span><span class="c0">animate</span><span class="c4">()</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; </span><span class="c9">return</span><span>&nbsp;</span><span class="c9">true</span><span class="c7">;</span><span><br> &nbsp; </span><span class="c4">}</span><span><br> &nbsp; </span><span class="c9">return</span><span>&nbsp;</span><span class="c9">super</span><span>.</span><span class="c0">animate</span><span class="c4">()</span><span class="c7">;</span><span><br></span><span class="c4">}</span></p><h2 class="c37 c3"><a name="h.glim6sv7163y"></a><span class="c10">Transitions</span></h2><p class="c3"><span>Transitions allow us to replace one component with another, most typically forms or dialogs are replaced with a transition however a transition can be applied to replace any arbitrary component. </span></p><p class="c3"><span>Developers can implement their own custom transition and install it to components by deriving the transition class, although most commonly the built in CommonTransition class is used for almost everything. </span></p><p class="c3"><span>You can define transitions for forms/dialogs/menus globally either via the theme constant or via the LookAndFeel class. Alternatively you can install a transition on top level components via setter methods. </span></p><p class="c3"><span>To apply a transition to a component we can just use the Container.replace method as such:</span></p><p class="c3"><span class="c0">Container</span><span>&nbsp;</span><span class="c0">c</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c0">replace</span><span>.</span><span class="c0">getParent</span><span class="c4">()</span><span class="c7">;</span><span><br></span><span class="c0">ta</span><span>.</span><span class="c0">setPreferredSize</span><span class="c4">(</span><span class="c0">replace</span><span>.</span><span class="c0">getPreferredSize</span><span class="c4">())</span><span class="c7">;</span><span><br></span><span class="c0">c</span><span>.</span><span class="c0">replaceAndWait</span><span class="c4">(</span><span class="c0">replace</span><span>, </span><span class="c0">ta</span><span>, </span><span class="c0">CommonTransitions</span><span>.</span><span class="c0">createSlide</span><span class="c4">(</span><span class="c0">CommonTransitions</span><span>.</span><span class="c0">SLIDE_VERTICAL</span><span>, </span><span class="c9">true</span><span>, </span><span class="c14">500</span><span class="c4">))</span><span class="c7">;</span><span><br></span><span class="c0">c</span><span>.</span><span class="c0">replaceAndWait</span><span class="c4">(</span><span class="c0">ta</span><span>, </span><span class="c0">replace</span><span>, </span><span class="c0">CommonTransitions</span><span>.</span><span class="c0">createSlide</span><span class="c4">(</span><span class="c0">CommonTransitions</span><span>.</span><span class="c0">SLIDE_VERTICAL</span><span>, </span><span class="c9">false</span><span>, </span><span class="c14">500</span><span class="c4">))</span><span class="c7">;</span><span><br></span></p><p class="c3"><span>In addition we can implement our own transitions, e.g. the following code demonstrates an explosion transition in which an explosion animation is displayed on every component as the explode one by one while we move from one screen to the next.</span></p><p class="c3 c5"><span></span></p><p class="c3"><img height="243" src="images/image09.png" width="236"></p><p class="c3"><span class="c6">public</span><span class="c10">&nbsp;</span><span class="c6">class</span><span class="c10">&nbsp;</span><span class="c0">ExplosionTransition</span><span class="c10">&nbsp;</span><span class="c6">extends</span><span class="c10">&nbsp;</span><span class="c0">Transition</span><span class="c10">&nbsp;</span><span class="c4">{</span><span class="c10"><br> &nbsp; &nbsp;</span><span class="c6">private</span><span class="c10">&nbsp;</span><span class="c6">int</span><span class="c10">&nbsp;</span><span class="c0">duration</span><span class="c7">;</span><span class="c10"><br> &nbsp; &nbsp;</span><span class="c6">private</span><span class="c10">&nbsp;</span><span class="c0">Image</span><span class="c4">[]</span><span class="c10">&nbsp;</span><span class="c0">explosions</span><span class="c7">;</span><span class="c10"><br> &nbsp; &nbsp;</span><span class="c6">private</span><span class="c10">&nbsp;</span><span class="c0">Motion</span><span class="c10">&nbsp;</span><span class="c0">anim</span><span class="c7">;</span><span class="c10"><br> &nbsp; &nbsp;</span><span class="c6">private</span><span class="c10">&nbsp;</span><span class="c0">Class</span><span class="c4">[]</span><span class="c10">&nbsp;</span><span class="c0">classes</span><span class="c7">;</span><span class="c10"><br> &nbsp; &nbsp;</span><span class="c6">private</span><span class="c10">&nbsp;</span><span class="c6">boolean</span><span class="c10">&nbsp;</span><span class="c0">done</span><span class="c7">;</span><span class="c10"><br> &nbsp; &nbsp;</span><span class="c6">private</span><span class="c10">&nbsp;</span><span class="c6">int</span><span class="c4">[]</span><span class="c10">&nbsp;</span><span class="c0">locationX</span><span class="c7">;</span><span class="c10"><br> &nbsp; &nbsp;</span><span class="c6">private</span><span class="c10">&nbsp;</span><span class="c6">int</span><span class="c4">[]</span><span class="c10">&nbsp;</span><span class="c0">locationY</span><span class="c7">;</span><span class="c10"><br> &nbsp; &nbsp;</span><span class="c6">private</span><span class="c10">&nbsp;</span><span class="c0">Vector</span><span class="c10">&nbsp;</span><span class="c0">components</span><span class="c7">;</span><span class="c10"><br> &nbsp; &nbsp;</span><span class="c6">private</span><span class="c10">&nbsp;</span><span class="c0">Vector</span><span class="c10">&nbsp;</span><span class="c0">sequence</span><span class="c7">;</span><span class="c10"><br> &nbsp; &nbsp;</span><span class="c6">private</span><span class="c10">&nbsp;</span><span class="c6">boolean</span><span class="c10">&nbsp;</span><span class="c0">sequential</span><span class="c7">;</span><span class="c10"><br> &nbsp; &nbsp;</span><span class="c6">private</span><span class="c10">&nbsp;</span><span class="c6">int</span><span class="c10">&nbsp;</span><span class="c0">seqLocation</span><span class="c7">;</span><span class="c10"><br> &nbsp; &nbsp;</span><span class="c6">public</span><span class="c10">&nbsp;</span><span class="c0">ExplosionTransition</span><span class="c4">(</span><span class="c6">int</span><span class="c10">&nbsp;</span><span class="c0">duration</span><span class="c10">, </span><span class="c0">Class</span><span class="c4">[]</span><span class="c10">&nbsp;</span><span class="c0">classes</span><span class="c10">, </span><span class="c6">boolean</span><span class="c10">&nbsp;</span><span class="c0">sequential</span><span class="c4">)</span><span class="c10">&nbsp;</span><span class="c4">{</span><span class="c10"><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c6">this</span><span class="c10">.</span><span class="c0">duration</span><span class="c10">&nbsp;</span><span class="c7">=</span><span class="c10">&nbsp;</span><span class="c0">duration</span><span class="c7">;</span><span class="c10"><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c6">this</span><span class="c10">.</span><span class="c0">classes</span><span class="c10">&nbsp;</span><span class="c7">=</span><span class="c10">&nbsp;</span><span class="c0">classes</span><span class="c7">;</span><span class="c10"><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c6">this</span><span class="c10">.</span><span class="c0">sequential</span><span class="c10">&nbsp; </span><span class="c7">=</span><span class="c10">&nbsp;</span><span class="c0">sequential</span><span class="c7">;</span><span class="c10"><br> &nbsp; &nbsp;</span><span class="c4">}</span><span class="c10"><br><br> &nbsp; &nbsp;</span><span class="c6">public</span><span class="c10">&nbsp;</span><span class="c6">void</span><span class="c10">&nbsp;</span><span class="c0">initTransition</span><span class="c4">()</span><span class="c10">&nbsp;</span><span class="c4">{</span><span class="c10"><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c6">try</span><span class="c10">&nbsp;</span><span class="c4">{</span><span class="c10"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">explosions</span><span class="c10">&nbsp;</span><span class="c7">=</span><span class="c10">&nbsp;</span><span class="c6">new</span><span class="c10">&nbsp;</span><span class="c0">Image</span><span class="c4">[]</span><span class="c10">&nbsp;</span><span class="c4">{</span><span class="c10"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">Image</span><span class="c10">.</span><span class="c0">createImage</span><span class="c4">(</span><span class="c22">&quot;/explosion1.png&quot;</span><span class="c4">)</span><span class="c10">,<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">Image</span><span class="c10">.</span><span class="c0">createImage</span><span class="c4">(</span><span class="c22">&quot;/explosion2.png&quot;</span><span class="c4">)</span><span class="c10">,<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">Image</span><span class="c10">.</span><span class="c0">createImage</span><span class="c4">(</span><span class="c22">&quot;/explosion3.png&quot;</span><span class="c4">)</span><span class="c10">,<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">Image</span><span class="c10">.</span><span class="c0">createImage</span><span class="c4">(</span><span class="c22">&quot;/explosion4.png&quot;</span><span class="c4">)</span><span class="c10">,<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">Image</span><span class="c10">.</span><span class="c0">createImage</span><span class="c4">(</span><span class="c22">&quot;/explosion5.png&quot;</span><span class="c4">)</span><span class="c10">,<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">Image</span><span class="c10">.</span><span class="c0">createImage</span><span class="c4">(</span><span class="c22">&quot;/explosion6.png&quot;</span><span class="c4">)</span><span class="c10">,<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">Image</span><span class="c10">.</span><span class="c0">createImage</span><span class="c4">(</span><span class="c22">&quot;/explosion7.png&quot;</span><span class="c4">)</span><span class="c10">,<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">Image</span><span class="c10">.</span><span class="c0">createImage</span><span class="c4">(</span><span class="c22">&quot;/explosion8.png&quot;</span><span class="c4">)</span><span class="c10"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">}</span><span class="c7">;</span><span class="c10"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">done</span><span class="c10">&nbsp;</span><span class="c7">=</span><span class="c10">&nbsp;</span><span class="c6">false</span><span class="c7">;</span><span class="c10"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">Container</span><span class="c10">&nbsp;</span><span class="c0">c</span><span class="c10">&nbsp;</span><span class="c7">=</span><span class="c10">&nbsp;</span><span class="c4">(</span><span class="c0">Container</span><span class="c4">)</span><span class="c0">getSource</span><span class="c4">()</span><span class="c7">;</span><span class="c10"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">components</span><span class="c10">&nbsp;</span><span class="c7">=</span><span class="c10">&nbsp;</span><span class="c6">new</span><span class="c10">&nbsp;</span><span class="c0">Vector</span><span class="c4">()</span><span class="c7">;</span><span class="c10"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">addComponentsOfClasses</span><span class="c4">(</span><span class="c0">c</span><span class="c10">, </span><span class="c0">components</span><span class="c4">)</span><span class="c7">;</span><span class="c10"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c6">if</span><span class="c4">(</span><span class="c0">components</span><span class="c10">.</span><span class="c0">size</span><span class="c4">()</span><span class="c10">&nbsp;</span><span class="c7">==</span><span class="c10">&nbsp;</span><span class="c14">0</span><span class="c4">)</span><span class="c10">&nbsp;</span><span class="c4">{</span><span class="c10"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c6">return</span><span class="c7">;</span><span class="c10"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">}</span><span class="c10"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">locationX</span><span class="c10">&nbsp;</span><span class="c7">=</span><span class="c10">&nbsp;</span><span class="c6">new</span><span class="c10">&nbsp;</span><span class="c6">int</span><span class="c4">[</span><span class="c0">components</span><span class="c10">.</span><span class="c0">size</span><span class="c4">()]</span><span class="c7">;</span><span class="c10"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">locationY</span><span class="c10">&nbsp;</span><span class="c7">=</span><span class="c10">&nbsp;</span><span class="c6">new</span><span class="c10">&nbsp;</span><span class="c6">int</span><span class="c4">[</span><span class="c0">components</span><span class="c10">.</span><span class="c0">size</span><span class="c4">()]</span><span class="c7">;</span><span class="c10"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c6">int</span><span class="c10">&nbsp;</span><span class="c0">w</span><span class="c10">&nbsp;</span><span class="c7">=</span><span class="c10">&nbsp;</span><span class="c0">explosions</span><span class="c4">[</span><span class="c14">0</span><span class="c4">]</span><span class="c10">.</span><span class="c0">getWidth</span><span class="c4">()</span><span class="c7">;</span><span class="c10"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c6">int</span><span class="c10">&nbsp;</span><span class="c0">h</span><span class="c10">&nbsp;</span><span class="c7">=</span><span class="c10">&nbsp;</span><span class="c0">explosions</span><span class="c4">[</span><span class="c14">0</span><span class="c4">]</span><span class="c10">.</span><span class="c0">getHeight</span><span class="c4">()</span><span class="c7">;</span><span class="c10"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c6">for</span><span class="c4">(</span><span class="c6">int</span><span class="c10">&nbsp;</span><span class="c0">iter</span><span class="c10">&nbsp;</span><span class="c7">=</span><span class="c10">&nbsp;</span><span class="c14">0</span><span class="c10">&nbsp;</span><span class="c7">;</span><span class="c10">&nbsp;</span><span class="c0">iter</span><span class="c10">&nbsp;</span><span class="c7">&lt;</span><span class="c10">&nbsp;</span><span class="c0">locationX</span><span class="c10">.</span><span class="c0">length</span><span class="c10">&nbsp;</span><span class="c7">;</span><span class="c10">&nbsp;</span><span class="c0">iter</span><span class="c7">++</span><span class="c4">)</span><span class="c10">&nbsp;</span><span class="c4">{</span><span class="c10"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">Component</span><span class="c10">&nbsp;</span><span class="c0">current</span><span class="c10">&nbsp;</span><span class="c7">=</span><span class="c10">&nbsp;</span><span class="c4">(</span><span class="c0">Component</span><span class="c4">)</span><span class="c0">components</span><span class="c10">.</span><span class="c0">elementAt</span><span class="c4">(</span><span class="c0">iter</span><span class="c4">)</span><span class="c7">;</span><span class="c10"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">locationX</span><span class="c4">[</span><span class="c0">iter</span><span class="c4">]</span><span class="c10">&nbsp;</span><span class="c7">=</span><span class="c10">&nbsp;</span><span class="c0">current</span><span class="c10">.</span><span class="c0">getAbsoluteX</span><span class="c4">()</span><span class="c10">&nbsp;</span><span class="c7">+</span><span class="c10">&nbsp;</span><span class="c0">current</span><span class="c10">.</span><span class="c0">getWidth</span><span class="c4">()</span><span class="c10">&nbsp;/ </span><span class="c14">2</span><span class="c10">&nbsp;</span><span class="c7">-</span><span class="c10">&nbsp;</span><span class="c0">w</span><span class="c10">&nbsp;/ </span><span class="c14">2</span><span class="c7">;</span><span class="c10"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">locationY</span><span class="c4">[</span><span class="c0">iter</span><span class="c4">]</span><span class="c10">&nbsp;</span><span class="c7">=</span><span class="c10">&nbsp;</span><span class="c0">current</span><span class="c10">.</span><span class="c0">getAbsoluteY</span><span class="c4">()</span><span class="c10">&nbsp;</span><span class="c7">+</span><span class="c10">&nbsp;</span><span class="c0">current</span><span class="c10">.</span><span class="c0">getHeight</span><span class="c4">()</span><span class="c10">&nbsp;/ </span><span class="c14">2</span><span class="c10">&nbsp;</span><span class="c7">-</span><span class="c10">&nbsp;</span><span class="c0">h</span><span class="c10">&nbsp;/ </span><span class="c14">2</span><span class="c7">;</span><span class="c10"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">}</span><span class="c10"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c6">if</span><span class="c4">(</span><span class="c0">sequential</span><span class="c4">)</span><span class="c10">&nbsp;</span><span class="c4">{</span><span class="c10"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">anim</span><span class="c10">&nbsp;</span><span class="c7">=</span><span class="c10">&nbsp;</span><span class="c0">Motion</span><span class="c10">.</span><span class="c0">createSplineMotion</span><span class="c4">(</span><span class="c14">0</span><span class="c10">, </span><span class="c0">explosions</span><span class="c10">.</span><span class="c0">length</span><span class="c10">&nbsp;</span><span class="c7">-</span><span class="c10">&nbsp;</span><span class="c14">1</span><span class="c10">, </span><span class="c0">duration</span><span class="c10">&nbsp;/ </span><span class="c0">locationX</span><span class="c10">.</span><span class="c0">length</span><span class="c4">)</span><span class="c7">;</span><span class="c10"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">sequence</span><span class="c10">&nbsp;</span><span class="c7">=</span><span class="c10">&nbsp;</span><span class="c6">new</span><span class="c10">&nbsp;</span><span class="c0">Vector</span><span class="c4">()</span><span class="c7">;</span><span class="c10"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">}</span><span class="c10">&nbsp;</span><span class="c6">else</span><span class="c10">&nbsp;</span><span class="c4">{</span><span class="c10"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">anim</span><span class="c10">&nbsp;</span><span class="c7">=</span><span class="c10">&nbsp;</span><span class="c0">Motion</span><span class="c10">.</span><span class="c0">createSplineMotion</span><span class="c4">(</span><span class="c14">0</span><span class="c10">, </span><span class="c0">explosions</span><span class="c10">.</span><span class="c0">length</span><span class="c10">&nbsp;</span><span class="c7">-</span><span class="c10">&nbsp;</span><span class="c14">1</span><span class="c10">, </span><span class="c0">duration</span><span class="c4">)</span><span class="c7">;</span><span class="c10"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">}</span><span class="c10"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">anim</span><span class="c10">.</span><span class="c0">start</span><span class="c4">()</span><span class="c7">;</span><span class="c10"><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">}</span><span class="c10">&nbsp;</span><span class="c6">catch</span><span class="c10">&nbsp;</span><span class="c4">(</span><span class="c0">IOException</span><span class="c10">&nbsp;</span><span class="c0">ex</span><span class="c4">)</span><span class="c10">&nbsp;</span><span class="c4">{</span><span class="c10"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">ex</span><span class="c10">.</span><span class="c0">printStackTrace</span><span class="c4">()</span><span class="c7">;</span><span class="c10"><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">}</span><span class="c10"><br> &nbsp; &nbsp;</span><span class="c4">}</span><span class="c10"><br><br> &nbsp; &nbsp;</span><span class="c6">private</span><span class="c10">&nbsp;</span><span class="c6">void</span><span class="c10">&nbsp;</span><span class="c0">addComponentsOfClasses</span><span class="c4">(</span><span class="c0">Container</span><span class="c10">&nbsp;</span><span class="c0">c</span><span class="c10">, </span><span class="c0">Vector</span><span class="c10">&nbsp;</span><span class="c0">result</span><span class="c4">)</span><span class="c10">&nbsp;</span><span class="c4">{</span><span class="c10"><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c6">for</span><span class="c4">(</span><span class="c6">int</span><span class="c10">&nbsp;</span><span class="c0">iter</span><span class="c10">&nbsp;</span><span class="c7">=</span><span class="c10">&nbsp;</span><span class="c14">0</span><span class="c10">&nbsp;</span><span class="c7">;</span><span class="c10">&nbsp;</span><span class="c0">iter</span><span class="c10">&nbsp;</span><span class="c7">&lt;</span><span class="c10">&nbsp;</span><span class="c0">c</span><span class="c10">.</span><span class="c0">getComponentCount</span><span class="c4">()</span><span class="c10">&nbsp;</span><span class="c7">;</span><span class="c10">&nbsp;</span><span class="c0">iter</span><span class="c7">++</span><span class="c4">)</span><span class="c10">&nbsp;</span><span class="c4">{</span><span class="c10"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">Component</span><span class="c10">&nbsp;</span><span class="c0">current</span><span class="c10">&nbsp;</span><span class="c7">=</span><span class="c10">&nbsp;</span><span class="c0">c</span><span class="c10">.</span><span class="c0">getComponentAt</span><span class="c4">(</span><span class="c0">iter</span><span class="c4">)</span><span class="c7">;</span><span class="c10"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c6">if</span><span class="c4">(</span><span class="c0">current</span><span class="c10">&nbsp;</span><span class="c6">instanceof</span><span class="c10">&nbsp;</span><span class="c0">Container</span><span class="c4">)</span><span class="c10">&nbsp;</span><span class="c4">{</span><span class="c10"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">addComponentsOfClasses</span><span class="c4">((</span><span class="c0">Container</span><span class="c4">)</span><span class="c0">current</span><span class="c10">, </span><span class="c0">result</span><span class="c4">)</span><span class="c7">;</span><span class="c10"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">}</span><span class="c10"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c6">for</span><span class="c4">(</span><span class="c6">int</span><span class="c10">&nbsp;</span><span class="c0">ci</span><span class="c10">&nbsp;</span><span class="c7">=</span><span class="c10">&nbsp;</span><span class="c14">0</span><span class="c10">&nbsp;</span><span class="c7">;</span><span class="c10">&nbsp;</span><span class="c0">ci</span><span class="c10">&nbsp;</span><span class="c7">&lt;</span><span class="c10">&nbsp;</span><span class="c0">classes</span><span class="c10">.</span><span class="c0">length</span><span class="c10">&nbsp;</span><span class="c7">;</span><span class="c10">&nbsp;</span><span class="c0">ci</span><span class="c7">++</span><span class="c4">)</span><span class="c10">&nbsp;</span><span class="c4">{</span><span class="c10"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c6">if</span><span class="c4">(</span><span class="c0">current</span><span class="c10">.</span><span class="c0">getClass</span><span class="c4">()</span><span class="c10">&nbsp;</span><span class="c7">==</span><span class="c10">&nbsp;</span><span class="c0">classes</span><span class="c4">[</span><span class="c0">ci</span><span class="c4">])</span><span class="c10">&nbsp;</span><span class="c4">{</span><span class="c10"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">result</span><span class="c10">.</span><span class="c0">addElement</span><span class="c4">(</span><span class="c0">current</span><span class="c4">)</span><span class="c7">;</span><span class="c10"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c6">break</span><span class="c7">;</span><span class="c10"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">}</span><span class="c10"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">}</span><span class="c10"><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">}</span><span class="c10"><br> &nbsp; &nbsp;</span><span class="c4">}</span><span class="c10"><br><br> &nbsp; &nbsp;</span><span class="c6">public</span><span class="c10">&nbsp;</span><span class="c6">void</span><span class="c10">&nbsp;</span><span class="c0">cleanup</span><span class="c4">()</span><span class="c10">&nbsp;</span><span class="c4">{</span><span class="c10"><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c6">super</span><span class="c10">.</span><span class="c0">cleanup</span><span class="c4">()</span><span class="c7">;</span><span class="c10"><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">explosions</span><span class="c10">&nbsp;</span><span class="c7">=</span><span class="c10">&nbsp;</span><span class="c6">null</span><span class="c7">;</span><span class="c10"><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c6">if</span><span class="c4">(</span><span class="c0">sequential</span><span class="c4">)</span><span class="c10">&nbsp;</span><span class="c4">{</span><span class="c10"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">components</span><span class="c10">&nbsp;</span><span class="c7">=</span><span class="c10">&nbsp;</span><span class="c0">sequence</span><span class="c7">;</span><span class="c10"><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">}</span><span class="c10"><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c6">if</span><span class="c4">(</span><span class="c0">components</span><span class="c10">&nbsp;</span><span class="c7">!=</span><span class="c10">&nbsp;</span><span class="c6">null</span><span class="c4">)</span><span class="c10">&nbsp;</span><span class="c4">{</span><span class="c10"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c6">for</span><span class="c4">(</span><span class="c6">int</span><span class="c10">&nbsp;</span><span class="c0">iter</span><span class="c10">&nbsp;</span><span class="c7">=</span><span class="c10">&nbsp;</span><span class="c14">0</span><span class="c10">&nbsp;</span><span class="c7">;</span><span class="c10">&nbsp;</span><span class="c0">iter</span><span class="c10">&nbsp;</span><span class="c7">&lt;</span><span class="c10">&nbsp;</span><span class="c0">components</span><span class="c10">.</span><span class="c0">size</span><span class="c4">()</span><span class="c10">&nbsp;</span><span class="c7">;</span><span class="c10">&nbsp;</span><span class="c0">iter</span><span class="c7">++</span><span class="c4">)</span><span class="c10">&nbsp;</span><span class="c4">{</span><span class="c10"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">((</span><span class="c0">Component</span><span class="c4">)</span><span class="c0">components</span><span class="c10">.</span><span class="c0">elementAt</span><span class="c4">(</span><span class="c0">iter</span><span class="c4">))</span><span class="c10">.</span><span class="c0">setVisible</span><span class="c4">(</span><span class="c6">true</span><span class="c4">)</span><span class="c7">;</span><span class="c10"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">}</span><span class="c10"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">components</span><span class="c10">.</span><span class="c0">removeAllElements</span><span class="c4">()</span><span class="c7">;</span><span class="c10"><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">}</span><span class="c10"><br> &nbsp; &nbsp;</span><span class="c4">}</span><span class="c10"><br><br> &nbsp; &nbsp;</span><span class="c6">public</span><span class="c10">&nbsp;</span><span class="c0">Transition</span><span class="c10">&nbsp;</span><span class="c0">copy</span><span class="c4">()</span><span class="c10">&nbsp;</span><span class="c4">{</span><span class="c10"><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c6">return</span><span class="c10">&nbsp;</span><span class="c6">new</span><span class="c10">&nbsp;</span><span class="c0">ExplosionTransition</span><span class="c4">(</span><span class="c0">duration</span><span class="c10">, </span><span class="c0">classes</span><span class="c10">, </span><span class="c0">sequential</span><span class="c4">)</span><span class="c7">;</span><span class="c10"><br> &nbsp; &nbsp;</span><span class="c4">}</span><span class="c10"><br><br> &nbsp; &nbsp;</span><span class="c6">public</span><span class="c10">&nbsp;</span><span class="c6">boolean</span><span class="c10">&nbsp;</span><span class="c0">animate</span><span class="c4">()</span><span class="c10">&nbsp;</span><span class="c4">{</span><span class="c10"><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c6">if</span><span class="c4">(</span><span class="c0">sequential</span><span class="c4">)</span><span class="c10">&nbsp;</span><span class="c4">{</span><span class="c10"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c6">if</span><span class="c4">(</span><span class="c0">anim</span><span class="c10">&nbsp;</span><span class="c7">!=</span><span class="c10">&nbsp;</span><span class="c6">null</span><span class="c10">&nbsp;</span><span class="c7">&amp;&amp;</span><span class="c10">&nbsp;</span><span class="c0">anim</span><span class="c10">.</span><span class="c0">isFinished</span><span class="c4">()</span><span class="c10">&nbsp;</span><span class="c7">&amp;&amp;</span><span class="c10">&nbsp;</span><span class="c0">components</span><span class="c10">.</span><span class="c0">size</span><span class="c4">()</span><span class="c10">&nbsp;</span><span class="c7">&gt;</span><span class="c10">&nbsp;</span><span class="c14">0</span><span class="c4">)</span><span class="c10">&nbsp;</span><span class="c4">{</span><span class="c10"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">Component</span><span class="c10">&nbsp;</span><span class="c0">c</span><span class="c10">&nbsp;</span><span class="c7">=</span><span class="c10">&nbsp;</span><span class="c4">(</span><span class="c0">Component</span><span class="c4">)</span><span class="c0">components</span><span class="c10">.</span><span class="c0">elementAt</span><span class="c4">(</span><span class="c14">0</span><span class="c4">)</span><span class="c7">;</span><span class="c10"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">components</span><span class="c10">.</span><span class="c0">removeElementAt</span><span class="c4">(</span><span class="c14">0</span><span class="c4">)</span><span class="c7">;</span><span class="c10"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">sequence</span><span class="c10">.</span><span class="c0">addElement</span><span class="c4">(</span><span class="c0">c</span><span class="c4">)</span><span class="c7">;</span><span class="c10"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">c</span><span class="c10">.</span><span class="c0">setVisible</span><span class="c4">(</span><span class="c6">false</span><span class="c4">)</span><span class="c7">;</span><span class="c10"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c6">if</span><span class="c4">(</span><span class="c0">components</span><span class="c10">.</span><span class="c0">size</span><span class="c4">()</span><span class="c10">&nbsp;</span><span class="c7">&gt;</span><span class="c10">&nbsp;</span><span class="c14">0</span><span class="c4">)</span><span class="c10">&nbsp;</span><span class="c4">{</span><span class="c10"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">seqLocation</span><span class="c7">++;</span><span class="c10"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">anim</span><span class="c10">.</span><span class="c0">start</span><span class="c4">()</span><span class="c7">;</span><span class="c10"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">}</span><span class="c10"><br><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c6">return</span><span class="c10">&nbsp;</span><span class="c6">true</span><span class="c7">;</span><span class="c10"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">}</span><span class="c10"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c6">return</span><span class="c10">&nbsp;</span><span class="c0">components</span><span class="c10">.</span><span class="c0">size</span><span class="c4">()</span><span class="c10">&nbsp;</span><span class="c7">&gt;</span><span class="c10">&nbsp;</span><span class="c14">0</span><span class="c7">;</span><span class="c10"><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">}</span><span class="c10"><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c6">if</span><span class="c4">(</span><span class="c0">anim</span><span class="c10">&nbsp;</span><span class="c7">!=</span><span class="c10">&nbsp;</span><span class="c6">null</span><span class="c10">&nbsp;</span><span class="c7">&amp;&amp;</span><span class="c10">&nbsp;</span><span class="c0">anim</span><span class="c10">.</span><span class="c0">isFinished</span><span class="c4">()</span><span class="c10">&nbsp;</span><span class="c7">&amp;&amp;</span><span class="c10">&nbsp;</span><span class="c7">!</span><span class="c0">done</span><span class="c4">)</span><span class="c10">&nbsp;</span><span class="c4">{</span><span class="c10"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c11">// allows us to animate the last frame, we should animate once more when</span><span class="c10"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c11">// finished == true</span><span class="c10"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">done</span><span class="c10">&nbsp;</span><span class="c7">=</span><span class="c10">&nbsp;</span><span class="c6">true</span><span class="c7">;</span><span class="c10"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c6">return</span><span class="c10">&nbsp;</span><span class="c6">true</span><span class="c7">;</span><span class="c10"><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">}</span><span class="c10"><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c6">return</span><span class="c10">&nbsp;</span><span class="c7">!</span><span class="c0">done</span><span class="c7">;</span><span class="c10"><br> &nbsp; &nbsp;</span><span class="c4">}</span><span class="c10"><br><br> &nbsp; &nbsp;</span><span class="c6">public</span><span class="c10">&nbsp;</span><span class="c6">void</span><span class="c10">&nbsp;</span><span class="c0">paint</span><span class="c4">(</span><span class="c0">Graphics</span><span class="c10">&nbsp;</span><span class="c0">g</span><span class="c4">)</span><span class="c10">&nbsp;</span><span class="c4">{</span><span class="c10"><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">getSource</span><span class="c4">()</span><span class="c10">.</span><span class="c0">paintComponent</span><span class="c4">(</span><span class="c0">g</span><span class="c4">)</span><span class="c7">;</span><span class="c10"><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c6">int</span><span class="c10">&nbsp;</span><span class="c0">offset</span><span class="c10">&nbsp;</span><span class="c7">=</span><span class="c10">&nbsp;</span><span class="c0">anim</span><span class="c10">.</span><span class="c0">getValue</span><span class="c4">()</span><span class="c7">;</span><span class="c10"><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c6">if</span><span class="c4">(</span><span class="c0">sequential</span><span class="c4">)</span><span class="c10">&nbsp;</span><span class="c4">{</span><span class="c10"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">g</span><span class="c10">.</span><span class="c0">drawImage</span><span class="c4">(</span><span class="c0">explosions</span><span class="c4">[</span><span class="c0">offset</span><span class="c4">]</span><span class="c10">, </span><span class="c0">locationX</span><span class="c4">[</span><span class="c0">seqLocation</span><span class="c4">]</span><span class="c10">, </span><span class="c0">locationY</span><span class="c4">[</span><span class="c0">seqLocation</span><span class="c4">])</span><span class="c7">;</span><span class="c10"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c6">return</span><span class="c7">;</span><span class="c10"><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">}</span><span class="c10"><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c6">for</span><span class="c4">(</span><span class="c6">int</span><span class="c10">&nbsp;</span><span class="c0">iter</span><span class="c10">&nbsp;</span><span class="c7">=</span><span class="c10">&nbsp;</span><span class="c14">0</span><span class="c10">&nbsp;</span><span class="c7">;</span><span class="c10">&nbsp;</span><span class="c0">iter</span><span class="c10">&nbsp;</span><span class="c7">&lt;</span><span class="c10">&nbsp;</span><span class="c0">locationX</span><span class="c10">.</span><span class="c0">length</span><span class="c10">&nbsp;</span><span class="c7">;</span><span class="c10">&nbsp;</span><span class="c0">iter</span><span class="c7">++</span><span class="c4">)</span><span class="c10">&nbsp;</span><span class="c4">{</span><span class="c10"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">g</span><span class="c10">.</span><span class="c0">drawImage</span><span class="c4">(</span><span class="c0">explosions</span><span class="c4">[</span><span class="c0">offset</span><span class="c4">]</span><span class="c10">, </span><span class="c0">locationX</span><span class="c4">[</span><span class="c0">iter</span><span class="c4">]</span><span class="c10">, </span><span class="c0">locationY</span><span class="c4">[</span><span class="c0">iter</span><span class="c4">])</span><span class="c7">;</span><span class="c10"><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">}</span><span class="c10"><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c6">if</span><span class="c4">(</span><span class="c0">offset</span><span class="c10">&nbsp;</span><span class="c7">&gt;</span><span class="c10">&nbsp;</span><span class="c14">4</span><span class="c4">)</span><span class="c10">&nbsp;</span><span class="c4">{</span><span class="c10"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c6">for</span><span class="c4">(</span><span class="c6">int</span><span class="c10">&nbsp;</span><span class="c0">iter</span><span class="c10">&nbsp;</span><span class="c7">=</span><span class="c10">&nbsp;</span><span class="c14">0</span><span class="c10">&nbsp;</span><span class="c7">;</span><span class="c10">&nbsp;</span><span class="c0">iter</span><span class="c10">&nbsp;</span><span class="c7">&lt;</span><span class="c10">&nbsp;</span><span class="c0">components</span><span class="c10">.</span><span class="c0">size</span><span class="c4">()</span><span class="c10">&nbsp;</span><span class="c7">;</span><span class="c10">&nbsp;</span><span class="c0">iter</span><span class="c7">++</span><span class="c4">)</span><span class="c10">&nbsp;</span><span class="c4">{</span><span class="c10"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">((</span><span class="c0">Component</span><span class="c4">)</span><span class="c0">components</span><span class="c10">.</span><span class="c0">elementAt</span><span class="c4">(</span><span class="c0">iter</span><span class="c4">))</span><span class="c10">.</span><span class="c0">setVisible</span><span class="c4">(</span><span class="c6">false</span><span class="c4">)</span><span class="c7">;</span><span class="c10"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">}</span><span class="c10"><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">}</span><span class="c10"><br> &nbsp; &nbsp;</span><span class="c4">}</span><span class="c10"><br></span><span class="c4">}</span></p><p class="c3 c5"><span class="c10"></span></p><hr style="page-break-before:always;display:none;"><h1 class="c23 c3 c63"><a name="h.kxm5viqyumqi"></a></h1><h1 class="c23 c3"><a name="h.m0jj4ee9occe"></a><span class="c10">The EDT - Event Dispatch Thread</span></h1><p class="c3"><span>This chapter covers the basic concepts of the EDT</span></p><p class="c3 c5"><span></span></p><h2 class="c3"><a name="h.1r5ue2d7iaz2"></a><span class="c10">What Is The EDT</span></h2><p class="c3"><span>Codename One allows developers to create as many threads as they want, however in order to interact with the Codename One user interface components a developer must use the EDT. The EDT is the main thread of Codename One, by using just one thread Codename One can avoid complex synchronization code and focus on simple functionality that assumes only one thread.</span></p><p class="c3"><span>This has huge advantages in your code as well, you can normally assume that all code will occur on a single thread, however this also comes with a price...</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>Normally, every call you receive from Codename One will occur on the EDT. E.g. every event, calls to paint(), lifecycle calls (start etc.) should all occur on the EDT. This is pretty powerful, however it means that as long as your code is processing nothing else can happen in Codename One... If your code takes too long to execute then no painting or event processing will occur during that time, so a call to Thread.sleep() will actually stop everything!</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>The solution is pretty simple, if you need to perform something that requires intensive CPU you can spawn a thread, Codename One&rsquo;s networking code automatically spawns a separate thread (see that NetworkManager chapter for more). However, we now run into a problem... Codename One assumes all modifications to the UI are performed on the EDT but we just spawned a separate thread. How do we force our modifications back into the EDT?</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>Codename One includes 3 methods in the Display class to help in these situations: isEDT(), callSerially(Runnable) &amp; callSeriallyAndWait(Runnable).</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>isEDT() is useful for generic code that needs to test whether the current code is executing on the EDT. &nbsp;</span></p><h2 class="c3"><a name="h.lo2stl7wctco"></a><span class="c10">Debugging EDT Violations</span></h2><p class="c3"><span>There are two types of EDT violations:</span></p><ol class="c45 lst-kix_4lmfa9d5trzd-0 start" start="1"><li class="c3 c20 c12"><span>Blocking the EDT thread so the UI performance is considerably slower.</span></li><li class="c3 c20 c12"><span>Invoking UI code on a separate thread</span></li></ol><p class="c3 c5"><span></span></p><p class="c3"><span>Codename One provides a tool to help you detect some of these violations with some caveats, it is an imperfect tool. It might fire &ldquo;false positives&rdquo; meaning it might detect a violation for perfectly legal code and it might miss some illegal calls. </span></p><p class="c3"><span>However, it is a valuable tool in the process of detecting hard to track bugs which are sometimes only reproducible on the devices (due to race condition behavior).</span></p><p class="c3"><span>To activate this tool just select the Debug EDT menu option in the simulator and pick the level of output you wish to receive:</span></p><p class="c3"><img height="402" src="images/image71.png" width="378"><span>&nbsp;</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>Full output will include stack traces to the area in the code that is suspected in the violation.</span></p><h2 class="c3"><a name="h.k377dh805b42"></a><span class="c10">Call Serially (And Wait)</span></h2><p class="c3"><span>callSerially(Runnable) should normally be called off the EDT (in a separate thread), the run method within the submitted runnable will be invoked on the EDT. E.g.:</span></p><p class="c3 c5"><span></span></p><p class="c3"><span class="c11">// this code is executing in a separate thread</span><span><br></span><span class="c9">final</span><span>&nbsp;</span><span class="c0">String</span><span>&nbsp;</span><span class="c0">res</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c0">methodThatTakesALongTime</span><span class="c4">()</span><span class="c7">;</span><span><br></span><span class="c0">Display</span><span>.</span><span class="c0">getInstance</span><span class="c4">()</span><span>.</span><span class="c0">callSerially</span><span class="c4">(</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Runnable</span><span class="c4">()</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; </span><span class="c9">public</span><span>&nbsp;</span><span class="c9">void</span><span>&nbsp;</span><span class="c0">run</span><span class="c4">()</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c11">// this occurs on the EDT so I can make changes to UI components</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">resultLabel</span><span>.</span><span class="c0">setText</span><span class="c4">(</span><span class="c0">res</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; </span><span class="c4">}</span><span><br></span><span class="c4">})</span><span class="c7">;</span><span><br></span></p><p class="c3"><span>This allows code to leave the EDT and then later on return to it to perform things within the EDT. </span></p><p class="c3 c5"><span></span></p><p class="c3"><span>The callSeriallyAndWait(Runnable) method blocks the current thread until the method completes, this is useful for cases such as user notification e.g.:</span></p><p class="c3 c5"><span></span></p><p class="c3"><span class="c11">// this code is executing in a separate thread</span><span><br></span><span class="c0">methodThatTakesALongTime</span><span class="c4">()</span><span class="c7">;</span><span><br></span><span class="c0">Display</span><span>.</span><span class="c0">getInstance</span><span class="c4">()</span><span>.</span><span class="c0">callSeriallyAndWait</span><span class="c4">(</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Runnable</span><span class="c4">()</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; </span><span class="c9">public</span><span>&nbsp;</span><span class="c9">void</span><span>&nbsp;</span><span class="c0">run</span><span class="c4">()</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c11">// this occurs on the EDT so I can make changes to UI components</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">globalFlag</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c0">Dialog</span><span>.</span><span class="c0">show</span><span class="c4">(</span><span class="c22">&quot;Are You Sure?&quot;</span><span>, </span><span class="c22">&quot;Do you want to continue?&quot;</span><span>, </span><span class="c22">&quot;Continue&quot;</span><span>, </span><span class="c22">&quot;Stop&quot;</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; </span><span class="c4">}</span><span><br></span><span class="c4">})</span><span class="c7">;</span><span><br></span><span class="c11">// this code is executing the separate thread</span><span><br></span><span class="c11">// global flag was already set by the call above</span><span><br></span><span class="c9">if</span><span class="c4">(</span><span class="c7">!</span><span class="c0">globalFlag</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; </span><span class="c9">return</span><span class="c7">;</span><span><br></span><span class="c4">}</span><span><br></span><span class="c0">otherMethod</span><span class="c4">()</span><span class="c7">;</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>It sometimes makes sense to invoke callSerially (but not call serially and wait) on the EDT. We sometimes want to postpone an action to the next cycle of the EDT loop, but that is a rare occurrence.</span></p><h2 class="c3"><a name="h.1874wilv5xo7"></a><span class="c10">Invoke And Block</span></h2><p class="c3"><span>Invoke and block is the exact opposite of callSeriallyAndWait(), it blocks the EDT and opens a separate thread for the runnable call.</span></p><p class="c3"><span>Codename One has some nifty threading tools inspired by</span><span><a class="c15" href="http://foxtrot.sourceforge.net/">&nbsp;</a></span><span class="c8"><a class="c15" href="http://foxtrot.sourceforge.net/">Foxtrot</a></span><span>, which is a remarkably powerful tool most Swing developers don&#39;t know enough about. </span></p><p class="c3 c5"><span></span></p><p class="c3"><span>When people talk about dialog modality they often mean two separate things, the first indicates that the dialog intercepts all input and blocks the background form/window which is the true definition of modality. However, there is another aspect often associated with modality that is really important from a programmers perspective and simplified our code considerably:</span></p><p class="c3 c5"><span></span></p><p class="c3"><span class="c9">public</span><span>&nbsp;</span><span class="c9">void</span><span>&nbsp;</span><span class="c0">actionPerformed</span><span class="c4">(</span><span class="c0">ActionEvent</span><span>&nbsp;</span><span class="c0">ev</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span></p><p class="c3"><span>&nbsp; </span><span class="c11">// will return true if the user clicks &quot;OK&quot;</span></p><p class="c3"><span>&nbsp; </span><span class="c9">if</span><span class="c4">(</span><span class="c7">!</span><span class="c0">Dialog</span><span>.</span><span class="c0">show</span><span class="c4">(</span><span class="c22">&quot;Question&quot;</span><span>, </span><span class="c22">&quot;How Are You&quot;</span><span>, </span><span class="c22">&quot;OK&quot;</span><span>, </span><span class="c22">&quot;Not OK&quot;</span><span class="c4">))</span><span>&nbsp;</span><span class="c4">{</span></p><p class="c3"><span>&nbsp; </span><span class="c11">// ask what went wrong...</span></p><p class="c3"><span>&nbsp; </span><span class="c4">}</span></p><p class="c3"><span class="c4">}</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>Notice that the dialog show method will block the calling thread until the user clicks OK or Not OK...</span></p><p class="c3"><span>If you read a bit about Codename One you would notice that we are blocking the EDT (Event Dispatch Thread) which is also responsible for painting, how does the dialog paint itself or handle events?</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>The secret is invokeAndBlock, it allows us to &quot;block&quot; the EDT and resume it while keeping a &quot;nested&quot; EDT functioning. The semantics of this logic are a bit hairy so I won&#39;t try to explain them further, this functionality is also available in Swing which has the exact same modality feature however Swing doesn&#39;t expose the &quot;engine&quot; to developers.</span><span><a class="c15" href="http://foxtrot.sourceforge.net/">&nbsp;</a></span><span class="c8"><a class="c15" href="http://foxtrot.sourceforge.net/">Foxtrot</a></span><span>, exposes this undocumented engine to Swing developers, in Codename One we chose to expose the ability to block the EDT (without &quot;really&quot; blocking it) as a simple API: invokeAndBlock.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>The best way to explain this is by example:</span></p><p class="c3"><span class="c9">public</span><span>&nbsp;</span><span class="c9">void</span><span>&nbsp;</span><span class="c0">actionPerformed</span><span class="c4">(</span><span class="c0">ActionEvent</span><span>&nbsp;</span><span class="c0">ev</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span></p><p class="c3"><span>&nbsp; </span><span class="c0">label</span><span>.</span><span class="c0">setText</span><span class="c4">(</span><span class="c22">&quot;Initiating IO, please wait...&quot;</span><span class="c4">)</span><span class="c7">;</span></p><p class="c3"><span>&nbsp; </span><span class="c0">Display</span><span>.</span><span class="c0">getInstance</span><span class="c4">()</span><span>.</span><span class="c0">invokeAndBlock</span><span class="c4">(</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Runnable</span><span class="c4">()</span><span>&nbsp;</span><span class="c4">{</span></p><p class="c3"><span>&nbsp; &nbsp; &nbsp; </span><span class="c9">public</span><span>&nbsp;</span><span class="c9">void</span><span>&nbsp;</span><span class="c0">run</span><span class="c4">()</span><span>&nbsp;</span><span class="c4">{</span></p><p class="c3"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c11">// perform IO operation...</span></p><p class="c3"><span>&nbsp; &nbsp; &nbsp; </span><span class="c4">}</span></p><p class="c3"><span>&nbsp; </span><span class="c4">})</span><span class="c7">;</span></p><p class="c3"><span>&nbsp; </span><span class="c0">label</span><span>.</span><span class="c0">setText</span><span class="c4">(</span><span class="c22">&quot;IO completed!&quot;</span><span class="c4">)</span><span class="c7">;</span></p><p class="c3"><span>&nbsp; </span><span class="c11">// update UI...</span></p><p class="c3"><span class="c4">}</span></p><p class="c3 c5"><span class="c4"></span></p><p class="c3"><span>Notice that the behavior here is similar to the modal dialog, invokeAndBlock &quot;blocked&quot; the current thread despite the fact that it is the EDT and performed the run() method in a separate thread. When run() completes the EDT is resumed. All the while repaints and events occur as usual, you can have invokeAndBlock calls occurring while another invokeAndBlock is still pending there are no limitations here although we would recommend against it since invokeAndBlock does carry some overhead.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>As you can see this is a very simple approach for thread programming in UI, you don&#39;t need to block your flow and track the UI thread. You can just program in a way that seems sequential (top to bottom) but really uses multi-threading correctly without blocking the EDT.</span></p><p class="c3 c5"><span></span></p><hr style="page-break-before:always;display:none;"><p class="c3 c5"><span></span></p><h1 class="c3"><a name="h.upfmetl8u62a"></a><span class="c10">Monetization</span></h1><p class="c3"><span>Codename One tries to make the lives of software developers easier by integrating several forms of builtin monetization solutions such as ad network support, in-app-purchase etc.</span></p><p class="c3"><span>The Codename One integration is only applicable when developing the application, the actual integration is a matter of runtime relationship with the service provider</span><sup><a href="#ftnt3" name="ftnt_ref3">[3]</a></sup><span>.</span></p><p class="c3 c5"><span></span></p><h2 class="c3"><a name="h.ctj1sqtkmtqp"></a><span class="c10">Ad Networks</span><span>&nbsp;</span></h2><h3 class="c3"><a name="h.1b59lihegqno"></a><span class="c10">vserv</span></h3><p class="c25 c3"><span>The</span><span><a class="c15" href="http://www.vserv.mobi/">&nbsp;</a></span><span class="c8"><a class="c15" href="http://www.vserv.mobi/">vserv</a></span><span>&nbsp;ad network provides a unique proposition where ads are displayed in full screen before during and sometimes after application execution. The biggest feature within vserv is its ability to seamlessly integrate with an existing application and provide value to the developers without changing a single line of application code.</span></p><p class="c25 c3 c5"><span></span></p><p class="c25 c3"><img height="333" src="images/image97.png" width="615"></p><p class="c25 c3 c5"><span></span></p><p class="c25 c3"><span>Codename One provides deep integration with this unique ad network the the IDE plugin where developers can input their vserv Zone Id (login to</span><span><a class="c15" href="http://www.vserv.mobi/">&nbsp;</a></span><span class="c8"><a class="c15" href="http://www.vserv.mobi/">vserv</a></span><span>&nbsp;to acquire a zone Id). Setting the zone ID to an empty string disables vserv ads, zone ID 6216 is useful for debugging purposes.</span></p><p class="c25 c3 c5"><span></span></p><p class="c25 c3"><span>The transition ad timeout indicates the amount of time to wait before pushing an ad between transitions in milliseconds. You can set it to a very large number to disable that functionality.</span></p><p class="c25 c3 c5"><span></span></p><p class="c25 c3"><span>The other properties are entirely optional and allow vserv to better target its ads to different application needs.</span></p><h3 class="c3"><a name="h.x5vaj57s4a39"></a><span class="c10">Inneractive</span><span>&nbsp;</span></h3><p class="c25 c3"><span>To integrate</span><span><a class="c15" href="http://console.inner-active.com/iamp/publisher/register?ref_id=affiliate_CodenameOne">&nbsp;</a></span><span class="c8"><a class="c15" href="http://console.inner-active.com/iamp/publisher/register?ref_id=affiliate_CodenameOne">Inneractive</a></span><span>&nbsp;banner ad&#39;s please register first using</span><span><a class="c15" href="http://console.inner-active.com/iamp/publisher/register?ref_id=affiliate_CodenameOne">&nbsp;</a></span><span class="c43 c54"><a class="c15" href="http://console.inner-active.com/iamp/publisher/register?ref_id=affiliate_CodenameOne">http://console.inner-active.com/iamp/publisher/register?ref_id=affiliate_CodenameOne</a></span><span>.</span></p><p class="c25 c3 c5"><span></span></p><p class="c25 c3"><span>Once registered you will be able to create an application id with which you will be able to associate ads with your account.</span></p><p class="c25 c3 c5"><span></span></p><p class="c25 c3"><span>To initiate the inneractive ads you will need to enter the following line in your application init(Object) or start() method:</span></p><p class="c25 c3 c5"><span></span></p><p class="c25 c3"><span>AdsService.setAdsProvider(InnerActive.class);</span></p><p class="c25 c3 c5"><span></span></p><p class="c25 c3"><span>From here on you can just use the standard Codename One Ads Component and place it as you wish within the UI or drag it into place within the GUI builder. The Ads Component has multiple properties you can set to indicate your activity but the most important one is the setAppID() attribute (appId in the GUI builder) with which you can determine the application that will receive the payouts for the ads.</span></p><h2 class="c37 c3"><a name="h.dd0rvvummsfi"></a><span class="c10">Google Play Ads</span><img height="135" src="images/image37.png" width="189"></h2><p class="c3"><span>T</span><span>he most effective network is the simplest banner ad support. To enable mobile ads just </span><span class="c8"><a class="c15" href="https://apps.admob.com/?pli=1#monetize/adunit:create">create an ad unit</a></span><span>&nbsp;in Admob&#39;s website, you should end up with the key similar to this: ca-app-pub-8610616152754010/3413603324</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>To enable this for Android just define the android.googleAdUnitId=ca-app-pub-8610616152754010/3413603324 in the build arguments and for iOS use the same as in ios.googleAdUnitId. The rest is seamless, the right ad will be created for you at the bottom of the screen and the form should automatically shrink to fit the ad. This shrinking is implemented differently between iOS and Android due to some constraints but the result should be similar and this should work reasonably well with device rotation as well.</span></p><h2 class="c37 c3"><a name="h.yyfbuxwbl0we"></a><span class="c10">In App Purchase</span><span>&nbsp;</span></h2><p class="c3"><span>Codename One&rsquo;s in app purchase API&rsquo;s try to generalize 3 different concepts for purchase:</span></p><ol class="c45 lst-kix_yh0juvtigter-0 start" start="1"><li class="c3 c20 c12"><span>Google&#39;s in app purchase</span></li><li class="c3 c20 c12"><span>Apple&#39;s in app purchase</span></li><li class="c3 c20 c12"><span>Mobile payments for physical goods</span></li></ol><p class="c3 c5"><span></span></p><p class="c3"><span>While all 3 approaches end up with the developer getting paid, all 3 take a different approach to the same idea. Google and Apple work with &ldquo;products&rdquo; which you can define and buy through their respective stores. You need to define the product in the development environment and then send the user to purchase said product.</span></p><p class="c3"><span>Once the product is purchased you receive an event that the purchase was completed and you can act appropriately. On the other hand mobile payments are just a transfer of a sum of money.</span></p><p class="c3"><span>Both Google&rsquo;s and Apple&rsquo;s stores prohibit the sale of physical goods via the stores, so a mobile payment system needs to be used for those cases.</span></p><p class="c3"><span>This is where the similarity ends between the Google &amp; Apple approach. Google expects developers to build their own storefront and provides developers with an API to extract the data in order to construct said storefront. Apple expects the developers to open its storefront to perform everything. </span></p><p class="c3"><span>We tried to encode all 3 approaches into the purchase API which means you would need to handle all 3 cases when working. Unfortunately these things are very hard to simulate and can only be properly tested on the device.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>So to organize the above we have:</span></p><ol class="c45 lst-kix_m6n3l31yanm8-0 start" start="1"><li class="c3 c20 c12"><span>Managed payments - payments are handled by the platform. We essentially buy an item not transfer money (in app purchase).</span></li><li class="c3 c20 c12"><span>Manual payments - we transfer money, there are no items involved.</span></li></ol><p class="c3 c5"><span></span></p><p class="c3"><span class="c9">final </span><span class="c0 c9">Purchase</span><span class="c9">&nbsp;</span><span class="c0 c9">p</span><span class="c9">&nbsp;</span><span class="c4">=</span><span class="c9">&nbsp;</span><span class="c0 c9">Purchase</span><span class="c9">.</span><span class="c0 c9">getInAppPurchase</span><span class="c4">();</span><span class="c9"><br><br>if</span><span class="c4">(</span><span class="c0 c9">p</span><span class="c9">&nbsp;</span><span class="c4">!=</span><span class="c9">&nbsp;null</span><span class="c4">)</span><span class="c9">&nbsp;</span><span class="c4">{</span><span class="c9"><br> &nbsp; &nbsp;if</span><span class="c4">(</span><span class="c0 c9">p</span><span class="c9">.</span><span class="c0 c9">isManualPaymentSupported</span><span class="c4">())</span><span class="c9">&nbsp;</span><span class="c4">{</span><span class="c9"><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c9">purchaseDemo</span><span class="c9">.</span><span class="c0 c9">addComponent</span><span class="c4">(</span><span class="c9">new </span><span class="c0 c9">Label</span><span class="c4">(</span><span class="c9 c22">&quot;Manual Payment Mode&quot;</span><span class="c4">));</span><span class="c9"><br> &nbsp; &nbsp; &nbsp; &nbsp;final </span><span class="c0 c9">TextField</span><span class="c9">&nbsp;</span><span class="c0 c9">tf</span><span class="c9">&nbsp;</span><span class="c4">=</span><span class="c9">&nbsp;new </span><span class="c0 c9">TextField</span><span class="c4">(</span><span class="c9 c22">&quot;100&quot;</span><span class="c4">);</span><span class="c9"><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c9">tf</span><span class="c9">.</span><span class="c0 c9">setHint</span><span class="c4">(</span><span class="c9 c22">&quot;Send us money, thanks&quot;</span><span class="c4">);</span><span class="c9"><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c9">Button</span><span class="c9">&nbsp;</span><span class="c0 c9">sendMoney</span><span class="c9">&nbsp;</span><span class="c4">=</span><span class="c9">&nbsp;new </span><span class="c0 c9">Button</span><span class="c4">(</span><span class="c9 c22">&quot;Send Us Money&quot;</span><span class="c4">);</span><span class="c9"><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c9">sendMoney</span><span class="c9">.</span><span class="c0 c9">addActionListener</span><span class="c4">(</span><span class="c9">new </span><span class="c0 c9">ActionListener</span><span class="c4">()</span><span class="c9">&nbsp;</span><span class="c4">{</span><span class="c9"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;public void </span><span class="c0 c9">actionPerformed</span><span class="c4">(</span><span class="c0 c9">ActionEvent</span><span class="c9">&nbsp;</span><span class="c0 c9">evt</span><span class="c4">)</span><span class="c9">&nbsp;</span><span class="c4">{</span><span class="c9"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c9">p</span><span class="c9">.</span><span class="c0 c9">pay</span><span class="c4">(</span><span class="c0 c9">Double</span><span class="c9">.</span><span class="c0 c9">parseDouble</span><span class="c4">(</span><span class="c0 c9">tf</span><span class="c9">.</span><span class="c0 c9">getText</span><span class="c4">())</span><span class="c9">, </span><span class="c9 c22">&quot;USD&quot;</span><span class="c4">);</span><span class="c9"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">}</span><span class="c9"><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">});</span><span class="c9"><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c9">purchaseDemo</span><span class="c9">.</span><span class="c0 c9">addComponent</span><span class="c4">(</span><span class="c0 c9">tf</span><span class="c4">);</span><span class="c9"><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c9">purchaseDemo</span><span class="c9">.</span><span class="c0 c9">addComponent</span><span class="c4">(</span><span class="c0 c9">sendMoney</span><span class="c4">);</span><span class="c9"><br> &nbsp; &nbsp;</span><span class="c4">}</span><span class="c9">&nbsp;<br> &nbsp; &nbsp;if</span><span class="c4">(</span><span class="c0 c9">p</span><span class="c9">.</span><span class="c0 c9">isManagedPaymentSupported</span><span class="c4">())</span><span class="c9">&nbsp;</span><span class="c4">{</span><span class="c9"><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c9">purchaseDemo</span><span class="c9">.</span><span class="c0 c9">addComponent</span><span class="c4">(</span><span class="c9">new </span><span class="c0 c9">Label</span><span class="c4">(</span><span class="c9 c22">&quot;Managed Payment Mode&quot;</span><span class="c4">));</span><span class="c9"><br> &nbsp; &nbsp; &nbsp; &nbsp;for</span><span class="c4">(</span><span class="c9">int </span><span class="c0 c9">iter</span><span class="c9">&nbsp;</span><span class="c4">=</span><span class="c9">&nbsp;</span><span class="c9 c14">0</span><span class="c9">&nbsp;</span><span class="c4">;</span><span class="c9">&nbsp;</span><span class="c0 c9">iter</span><span class="c9">&nbsp;</span><span class="c4">&lt;</span><span class="c9">&nbsp;</span><span class="c0 c9">ITEM_NAMES</span><span class="c9">.</span><span class="c0 c9">length</span><span class="c9">&nbsp;</span><span class="c4">;</span><span class="c9">&nbsp;</span><span class="c0 c9">iter</span><span class="c4">++)</span><span class="c9">&nbsp;</span><span class="c4">{</span><span class="c9"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c9">Button</span><span class="c9">&nbsp;</span><span class="c0 c9">buy</span><span class="c9">&nbsp;</span><span class="c4">=</span><span class="c9">&nbsp;new </span><span class="c0 c9">Button</span><span class="c4">(</span><span class="c0 c9">ITEM_NAMES</span><span class="c4">[</span><span class="c0 c9">iter</span><span class="c4">]);</span><span class="c9"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;final </span><span class="c0 c9">String</span><span class="c9">&nbsp;</span><span class="c0 c9">id</span><span class="c9">&nbsp;</span><span class="c4">=</span><span class="c9">&nbsp;</span><span class="c0 c9">ITEM_IDS</span><span class="c4">[</span><span class="c0 c9">iter</span><span class="c4">];</span><span class="c9"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c9">buy</span><span class="c9">.</span><span class="c0 c9">addActionListener</span><span class="c4">(</span><span class="c9">new </span><span class="c0 c9">ActionListener</span><span class="c4">()</span><span class="c9">&nbsp;</span><span class="c4">{</span><span class="c9"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;public void </span><span class="c0 c9">actionPerformed</span><span class="c4">(</span><span class="c0 c9">ActionEvent</span><span class="c9">&nbsp;</span><span class="c0 c9">evt</span><span class="c4">)</span><span class="c9">&nbsp;</span><span class="c4">{</span><span class="c9"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c9">p</span><span class="c9">.</span><span class="c0 c9">purchase</span><span class="c4">(</span><span class="c0 c9">id</span><span class="c4">);</span><span class="c9"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">}</span><span class="c9"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">});</span><span class="c9"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c9">purchaseDemo</span><span class="c9">.</span><span class="c0 c9">addComponent</span><span class="c4">(</span><span class="c0 c9">buy</span><span class="c4">);</span><span class="c9"><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">}</span><span class="c9"><br> &nbsp; &nbsp;</span><span class="c4">}</span><span class="c9">&nbsp;<br></span><span class="c4">}</span><span class="c9">&nbsp;else </span><span class="c4">{</span><span class="c9"><br> &nbsp; &nbsp;</span><span class="c0 c9">purchaseDemo</span><span class="c9">.</span><span class="c0 c9">addComponent</span><span class="c4">(</span><span class="c9">new </span><span class="c0 c9">Label</span><span class="c4">(</span><span class="c9 c22">&quot;Payment unsupported on this device&quot;</span><span class="c4">));</span><span class="c9"><br></span><span class="c4">}</span><span class="c9"><br></span></p><p class="c3"><span>The item names in the demo code above should be hard coded and added to the appropriate stores inventory. Which is a very platform specific process for iTunes and Google play. Once this is done you should be able to issue a purchase request either in the real or the sandbox store.</span></p><p class="c3 c5"><span></span></p><p class="c3 c5"><span></span></p><p class="c3 c5"><span></span></p><hr style="page-break-before:always;display:none;"><p class="c3 c5"><span></span></p><h1 class="c3"><a name="h.66znh1vydyao"></a><span class="c10">Graphics, Drawing, Images &amp; Fonts</span></h1><p class="c3"><span>This chapter covers the basics of drawing manually using the Codename One API, notice that drawing is considered a low level API which might introduce some platform fragmentation.</span></p><p class="c3 c5"><span></span></p><h2 class="c3"><a name="h.htp0o9rhpby3"></a><span class="c10">Basics - Where &amp; How Do I Draw Manually?</span></h2><p class="c3"><span>The </span><span class="c8"><a class="c15" href="https://codenameone.googlecode.com/svn/trunk/CodenameOne/javadoc/com/codename1/ui/Graphics.html">Graphics class</a></span><span>&nbsp;is responsible for drawing basics, shapes, images and text, it is never instantiated by the developer and is always passed on by the Codename One API. </span></p><p class="c3"><span>You can gain access to a Graphics object by doing one of the following:</span></p><p class="c3 c5"><span></span></p><ul class="c45 lst-kix_3xsv2kn12h6y-0 start"><li class="c3 c20 c12"><span>Derive </span><span class="c8"><a class="c15" href="https://codenameone.googlecode.com/svn/trunk/CodenameOne/javadoc/com/codename1/ui/Component.html">Component</a></span><span>&nbsp;or a subclass of Component - within Component there are several methods that allow developers to modify the drawing behavior, notice that Form is a subclass of component and thus features all of these methods. These can be overridden to change the way the component is drawn:</span></li></ul><ul class="c45 lst-kix_3xsv2kn12h6y-1 start"><li class="c3 c20 c34"><span class="c8"><a class="c15" href="https://codenameone.googlecode.com/svn/trunk/CodenameOne/javadoc/com/codename1/ui/Component.html#paint(com.codename1.ui.Graphics)">paint(Graphics)</a></span><span>&nbsp;- invoked to draw the component, this can be overridden to draw the component from scratch.</span></li><li class="c3 c20 c34"><span class="c8"><a class="c15" href="https://codenameone.googlecode.com/svn/trunk/CodenameOne/javadoc/com/codename1/ui/Component.html#paintBackground(com.codename1.ui.Graphics)">paintBackground(Graphics)</a></span><span>/</span><span class="c8"><a class="c15" href="https://codenameone.googlecode.com/svn/trunk/CodenameOne/javadoc/com/codename1/ui/Component.html#paintBackgrounds(com.codename1.ui.Graphics)">paintBackgrounds(Graphics)</a></span><span>&nbsp;- these allow overriding the way the component background is painted although you would probably be better off implementing a painter (see below).</span></li><li class="c3 c20 c34"><span class="c8"><a class="c15" href="https://codenameone.googlecode.com/svn/trunk/CodenameOne/javadoc/com/codename1/ui/Component.html#paintBorder(com.codename1.ui.Graphics)">paintBorder(Graphics)</a></span><span>&nbsp;- allows overriding the process of drawing a border, notice that border drawing might differ based on the style of the component.</span></li><li class="c3 c20 c34"><span class="c8"><a class="c15" href="https://codenameone.googlecode.com/svn/trunk/CodenameOne/javadoc/com/codename1/ui/Component.html#paintComponent(com.codename1.ui.Graphics)">paintComponent(Graphics)</a></span><span>&nbsp;- allows painting only the components contents while leaving the default paint behavior to the style.</span></li><li class="c3 c20 c34"><span class="c8"><a class="c15" href="https://codenameone.googlecode.com/svn/trunk/CodenameOne/javadoc/com/codename1/ui/Component.html#paintScrollbars(com.codename1.ui.Graphics)">paintScrollbars(Graphics)</a></span><span>,</span><span class="c8"><a class="c15" href="https://codenameone.googlecode.com/svn/trunk/CodenameOne/javadoc/com/codename1/ui/Component.html#paintScrollbarX(com.codename1.ui.Graphics)">paintScrollbarX(Graphics)</a></span><span>,</span><span class="c8"><a class="c15" href="https://codenameone.googlecode.com/svn/trunk/CodenameOne/javadoc/com/codename1/ui/Component.html#paintScrollbarY(com.codename1.ui.Graphics)">paintScrollbarY(Graphics)</a></span><span>&nbsp;- allows overriding the behavior of scrollbar painting.</span></li></ul><ul class="c45 lst-kix_3xsv2kn12h6y-0"><li class="c3 c20 c12"><span>Implement the </span><span class="c8"><a class="c15" href="https://codenameone.googlecode.com/svn/trunk/CodenameOne/javadoc/com/codename1/ui/Painter.html">painter interface</a></span><span>, this interface can be used as a GlassPane or a background painter.<br>The painter interface is a simple interface that includes 1 paint method, this is a useful way to allow developers to perform custom painting without subclassing component. Painters can be chained together to create elaborate paint behavior by using the </span><span class="c8"><a class="c15" href="https://codenameone.googlecode.com/svn/trunk/CodenameOne/javadoc/com/codename1/ui/painter/PainterChain.html">PainterChain class</a></span><span>.</span></li></ul><ul class="c45 lst-kix_3xsv2kn12h6y-1"><li class="c3 c20 c34"><span class="c8"><a class="c15" href="https://codenameone.googlecode.com/svn/trunk/CodenameOne/javadoc/com/codename1/ui/Form.html#setGlassPane(com.codename1.ui.Painter)">Glass pane</a></span><span>&nbsp;- a glass pane allows developers to paint on top of the form painting. This allows an overlay effect on top of a form.<br>For a novice it might seem that a glass pane is similar to overriding the Form&rsquo;s paint method and drawing after super.paint(g) completed. This isn&rsquo;t the case. <br>When a component repaints (by invoking the repaint() method) only that component is drawn and Form&rsquo;s paint() method wouldn&rsquo;t be invoked. However, the glass pane painter is invoked for such cases and would work exactly as expected.<br>Container has a glass pane method called </span><span class="c8"><a class="c15" href="https://codenameone.googlecode.com/svn/trunk/CodenameOne/javadoc/com/codename1/ui/Container.html#paintGlass(com.codename1.ui.Graphics)">paintGlass(Graphics)</a></span><span>, which can be overridden to provide a similar effect on a Container level. This is especially useful for complex containers such as Table which draws its lines using such a methodology.</span></li><li class="c3 c20 c34"><span class="c8"><a class="c15" href="https://codenameone.googlecode.com/svn/trunk/CodenameOne/javadoc/com/codename1/ui/plaf/Style.html#setBgPainter(com.codename1.ui.Painter)">Background painter</a></span><span>&nbsp;- the background painter is installed via the style, by default Codename installs a custom background painter of its own. Installing a custom painter allows a developer to completely define how the background of the component is drawn.</span></li></ul><p class="c3 c5"><span></span></p><p class="c3"><span>A paint method can be implemented by deriving a Form as such:</span></p><p class="c3"><span class="c9">public</span><span>&nbsp;</span><span class="c0">MyForm</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp;</span><span class="c9">public</span><span>&nbsp;</span><span class="c9">void</span><span>&nbsp;</span><span class="c0">paint</span><span class="c4">(</span><span class="c0">Graphics</span><span>&nbsp;</span><span class="c0">g</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; </span><span class="c11">// red color</span><span><br> &nbsp; &nbsp; &nbsp; </span><span class="c0">g</span><span>.</span><span class="c0">setColor</span><span class="c4">(</span><span class="c14">0xff0000</span><span class="c4">)</span><span class="c7">;</span><span><br><br> &nbsp; &nbsp; &nbsp; </span><span class="c11">// paint the screen in red</span><span><br> &nbsp; &nbsp; &nbsp; </span><span class="c0">g</span><span>.</span><span class="c0">fillRect</span><span class="c4">(</span><span class="c0">getX</span><span class="c4">()</span><span>, </span><span class="c0">getY</span><span class="c4">()</span><span>, </span><span class="c0">getWidth</span><span class="c4">()</span><span>, </span><span class="c0">getHeight</span><span class="c4">())</span><span class="c7">;</span><span><br><br> &nbsp; &nbsp; &nbsp; </span><span class="c11">// draw hi world in white text at the top left corner of the screen</span><span><br> &nbsp; &nbsp; &nbsp; </span><span class="c0">g</span><span>.</span><span class="c0">setColor</span><span class="c4">(</span><span class="c14">0xffffff</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; </span><span class="c0">g</span><span>.</span><span class="c0">drawString</span><span class="c4">(</span><span>&ldquo;</span><span class="c0">Hi</span><span>&nbsp;</span><span class="c0">World</span><span>&rdquo;, </span><span class="c0">getX</span><span class="c4">()</span><span>, </span><span class="c0">getY</span><span class="c4">())</span><span class="c7">;</span><span><br> &nbsp;</span><span class="c4">}</span><span><br></span><span class="c4">}</span></p><h2 class="c3"><a name="h.q3at4ssros8b"></a><span class="c10">Images</span></h2><p class="c3"><span>Codename One has quite a few image types: loaded, RGB (builtin), RGB (Codename One), Mutable, EncodedImage,SVG, Multi-Image &amp; Timeline. There are also FileEncodedImage, FileEncodedImageAsync, StorageEncodedImage/Async which will be covered in the IO section.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>Here are the pros/cons and logic behind every image type and how its created:</span></p><p class="c3 c5"><span></span></p><ul class="c45 lst-kix_myukvtuabqpd-0 start"><li class="c3 c20 c12"><span>Loaded Image - this is the basic image you get when loading an image from the jar or network using Image.createImage(String)/Image.createImage(InputStream)/Image.createImage(byte[], int, int).<br>In some platforms (e.g. MIDP) calling getGraphics() on an image like this will throw an exception (its immutable in MIDP terms), this is true for almost all other images as well. &nbsp;This restriction might not apply for all platforms. <br>The image is encoded based on device logic and should be reasonably efficient.<br></span></li><li class="c3 c20 c12"><span>RGB Image (internal) - close cousin of the loaded image. This image is created using the method Image.createImage(int[], int, int) and receives ARGB data forming the image. It is usually (although not always) a high color image. Its more efficient than the Codename One RGB image but can&#39;t be modified, at least not on the pixel level.<br></span></li><li class="c3 c20 c12"><span>RGBImage (Codenme One) - constructed via the RGBImage constructors this image is effectively an ARGB array that can be drawn by Codename One. On many platforms this is quite inefficient but for some pixel level manipulations there is just no other way.<br></span></li><li class="c3 c20 c12"><span>EncodedImage - created via the encoded image static methods, the encoded image is effectively a loaded image that is &quot;hidden&quot;. When creating an encoded image only the PNG (or jpeg etc.) is loaded to an array in RAM. Normally such images are very small relatively so they can be kept in memory without much effect. When image information is needed (e.g. pixels, dimension etc.) the image is decoded into RAM and kept in a weak/sort reference.<br>This allows the image to be cached for performance and allows the garbage collector to reclaim it when the memory becomes scarce. <br>Encoded image is not final and can be derived to produce complex image fetching strategies such as lazily loading an image from the filesystem (read more about it in the IO section).<br></span></li><li class="c3 c20 c12"><span>SVG - SVG&#39;s can be loaded directly via Image.createSVG() if Image.isSVGSupported() returns true. When adding SVG&#39;s via the Codename One Designer fallback images are produced for devices that do not support SVG. The fallback images are effectively multi-images.<br></span></li><li class="c3 c20 c12"><span>Multi-Image - The multi-image is seamless to developers it is strictly a design time feature, during runtime an EncodedImage is returned whenever a multi-image is used. In the Codename One Designer one can add several images based on the DPI of the device (one of several predefined ranges). When loading the resource file irrelevant images are skipped thus saving the additional memory.<br>Multi-images are ideal for icons or small artifacts that are hard to scale properly. They are not meant to replace things such as 9-image borders etc. since adapting them to every resolution or to device rotation isn&#39;t practical.<br>9-image borders use multi-images by default internally to keep their appearance more refined on the different DPI&rsquo;s.<br></span></li><li class="c3 c20 c12"><span>Timeline - Timeline&#39;s allow rudimentary animation and enable GIF importing using the Codename One Designer. Effectively a timeline is a set of images that can be moved rotated, scaled &amp; blended to provide interesting animation effects. It can be created manually using the Timeline class.</span></li></ul><p class="c3 c5"><span></span></p><p class="c3"><span>All image types are mostly seamless to use and will just work with drawImage and various image related image API&#39;s for the most part with caveats on performance etc. For animation images the code must invoke images animate() method &nbsp;(this is done automatically by Codename One when placing the image as a background or as an icon! You only need to do it if you invoke drawImage in code rather than use a builtin component).</span></p><p class="c3"><span>All images might also be animated in theory e.g. my</span><span class="c8"><a class="c15" href="http://codenameone.blogspot.com/2010/05/animated-gifs-everywhere.html">&nbsp;gif implementation</a></span><span>&nbsp;returned animated gifs from the standard Loaded Image methods and this worked pretty seamlessly (since Icons&#39;s and backgrounds just work). To find out if an image is animated you need to use the isAnimation() method, currently SVG images are animated in MIDP but most of our ports don&#39;t support GIF animations by default (although it should be easy to add to some of them).</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>Performance and memory wise you should read the above carefully and be aware of the image types you use. The Codename One designer tries to conserve memory and be &quot;clever&quot; by using only encoded images, while these are great for low memory they are not as efficient as loaded images in terms of speed. Also when scaled these images have much larger overhead since they need to be converted to RGB, scaled and then a new image is created. Keeping all these things in mind when optimizing a specific UI is very important.</span></p><h2 class="c3"><a name="h.o6gl4rj5u8ho"></a><span class="c10">Understanding Encoded Images &amp; Image Locking</span></h2><p class="c3"><span>To understand locking we first need to understand EncodedImage. EncodedImage stores the data of the image in RAM (png or JPEG data) which is normally pretty small, unlike the full decoded image which can take up to width X height X 4. When a user tries to draw an encoded image we check a WeakReference cache and if the image is cached then we show it otherwise we load the image, cache it then draw.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>Naturally loading the image is more expensive so we want the images that are on the current form to remain in cache (otherwise GC will thrash a lot). That&#39;s where lock() kicks in, when lock() is active we keep a hard reference to the actual native image so it won&#39;t get GC&#39;d. This REALLY improves performance! </span></p><p class="c3"><span>Internally we invoke this automatically for bg images, icons etc. which results in a huge performance boost. This makes sense since these images are currently showing so they will be in RAM anyway. However, if you use a complex renderer or custom drawing UI you should lock() your images where possible!</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>To verify that locking might be a problem you can launch the performance monitor tool, if you get log messages that indicate that an unlocked image was drawn you might have a problem.</span></p><h2 class="c3"><a name="h.2rwcbqq8sake"></a><span class="c10">Glass Pane</span></h2><p class="c3"><span>The GlassPane in Codename One is inspired by the Swing GlassPane &amp; layered pane with quite a few twists. We tried to imagine how Swing developers would have implemented the glass pane knowing what they do now about </span><span>painters</span><span>&nbsp;and Swings learning curve. But I&#39;m getting ahead of myself, what is the glass pane?</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>A typical Codename One application is essentially composed of 3 layers (this is a gross simplification though), the bg painters are responsible for drawing the background of all components including the main form. The component draws its own content which might overrule the painter and the glass pane paints last...</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>Essentially the glass pane is a painter that allows us to draw an overlay on top of the Codename One application. Initially we didn&#39;t think we need a glass pane, we used to suggest that people should override the form&#39;s paint() method to reach the same result. Feel free to try and guess why this failed before reading the explanation in the next paragraph.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>Overriding the paint method of a form worked initially, when you enter a form this behaves just as you would expect. However, when modifying an element within the form only that element gets repainted not the entire form! So if I had a form with a Button and text drawn on top using the Form&#39;s paint method it would get erased whenever the button got focus.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>Thats good for the forms paint method, calling the forms paint method would be REALLY expensive for every little thing that occurs in Codename One. However, we do want overlays for some things and we don&#39;t need to repaint every component in the screen to get them. The glass pane is called whenever a component gets painted, it only paints within the clipping region of the component hence it won&#39;t break the rest of the glass pane.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>The painter chain is a tool that allows us to chain several painters together to perform different logistical tasks such as a validation painter coupled with a fade out painter. The sample below shows a crude validation panel that allows us to draw error icons next to components while exceeding their physical bounds as is common in many user interfaces</span></p><p class="c3 c5"><span></span></p><p class="c3"><span class="c9">public</span><span>&nbsp;</span><span class="c9">class</span><span>&nbsp;</span><span class="c0">ValidationPane</span><span>&nbsp;</span><span class="c9">implements</span><span>&nbsp;</span><span class="c0">Painter</span><span>&nbsp;</span><span class="c4">{</span></p><p class="c3"><span>&nbsp;</span><span class="c9">private</span><span>&nbsp;</span><span class="c0">Vector</span><span>&nbsp;</span><span class="c0">components</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Vector</span><span class="c4">()</span><span class="c7">;</span></p><p class="c3"><span>&nbsp;</span><span class="c9">private</span><span>&nbsp;</span><span class="c9">static</span><span>&nbsp;</span><span class="c0">Image</span><span>&nbsp;</span><span class="c0">error</span><span class="c7">;</span></p><p class="c3"><span>&nbsp;</span><span class="c9">public</span><span>&nbsp;</span><span class="c0">ValidationPane</span><span class="c4">(</span><span class="c0">Form</span><span>&nbsp;</span><span class="c0">parentForm</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span></p><p class="c3"><span>&nbsp; &nbsp; &nbsp;</span><span class="c9">try</span><span>&nbsp;</span><span class="c4">{</span></p><p class="c3"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">if</span><span class="c4">(</span><span class="c0">error</span><span>&nbsp;</span><span class="c7">==</span><span>&nbsp;</span><span class="c9">null</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span></p><p class="c3"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">error</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c0">Image</span><span>.</span><span class="c0">createImage</span><span class="c4">(</span><span class="c22">&quot;/error.png&quot;</span><span class="c4">)</span><span class="c7">;</span></p><p class="c3"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">}</span></p><p class="c3"><span>&nbsp; &nbsp; &nbsp;</span><span class="c4">}</span><span>&nbsp;</span><span class="c9">catch</span><span>&nbsp;</span><span class="c4">(</span><span class="c0">IOException</span><span>&nbsp;</span><span class="c0">ex</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span></p><p class="c3"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">ex</span><span>.</span><span class="c0">printStackTrace</span><span class="c4">()</span><span class="c7">;</span></p><p class="c3"><span>&nbsp; &nbsp; &nbsp;</span><span class="c4">}</span></p><p class="c3"><span class="c0">PainterChain</span><span>.</span><span class="c0">installGlassPane</span><span class="c4">(</span><span class="c0">parentForm</span><span>, </span><span class="c9">this</span><span class="c4">)</span><span class="c7">;</span></p><p class="c3"><span>&nbsp;</span><span class="c4">}</span></p><p class="c3 c5"><span class="c4"></span></p><p class="c3"><span>&nbsp;</span><span class="c9">public</span><span>&nbsp;</span><span class="c9">void</span><span>&nbsp;</span><span class="c0">paint</span><span class="c4">(</span><span class="c0">Graphics</span><span>&nbsp;</span><span class="c0">g</span><span>, </span><span class="c0">Rectangle</span><span>&nbsp;</span><span class="c0">rect</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span></p><p class="c3"><span>&nbsp; &nbsp; &nbsp;</span><span class="c9">for</span><span class="c4">(</span><span class="c9">int</span><span>&nbsp;</span><span class="c0">iter</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c14">0</span><span>&nbsp;</span><span class="c7">;</span><span>&nbsp;</span><span class="c0">iter</span><span>&nbsp;</span><span class="c7">&lt;</span><span>&nbsp;</span><span class="c0">components</span><span>.</span><span class="c0">size</span><span class="c4">()</span><span>&nbsp;</span><span class="c7">;</span><span>&nbsp;</span><span class="c0">iter</span><span class="c7">++</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span></p><p class="c3"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">Component</span><span>&nbsp;</span><span class="c0">c</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c4">(</span><span class="c0">Component</span><span class="c4">)</span><span>&nbsp;</span><span class="c0">components</span><span>.</span><span class="c0">elementAt</span><span class="c4">(</span><span class="c0">iter</span><span class="c4">)</span><span class="c7">;</span></p><p class="c3"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">if</span><span class="c4">(</span><span class="c0">c</span><span>&nbsp;</span><span class="c7">==</span><span>&nbsp;</span><span class="c9">null</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span></p><p class="c3"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">components</span><span>.</span><span class="c0">removeElementAt</span><span class="c4">(</span><span class="c0">iter</span><span class="c4">)</span><span class="c7">;</span></p><p class="c3"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">continue</span><span class="c7">;</span></p><p class="c3"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">}</span></p><p class="c3"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">Object</span><span>&nbsp;</span><span class="c0">p</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c0">c</span><span>.</span><span class="c0">getClientProperty</span><span class="c4">(</span><span class="c0">VALIDATION_PROP</span><span class="c4">)</span><span class="c7">;</span></p><p class="c3"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">int</span><span>&nbsp;</span><span class="c0">x</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c0">c</span><span>.</span><span class="c0">getAbsoluteX</span><span class="c4">()</span><span class="c7">;</span></p><p class="c3"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">int</span><span>&nbsp;</span><span class="c0">y</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c0">c</span><span>.</span><span class="c0">getAbsoluteY</span><span class="c4">()</span><span class="c7">;</span></p><p class="c3"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">x</span><span>&nbsp;</span><span class="c7">-=</span><span>&nbsp;</span><span class="c0">error</span><span>.</span><span class="c0">getWidth</span><span class="c4">()</span><span>&nbsp;/ </span><span class="c14">2</span><span class="c7">;</span></p><p class="c3"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">y</span><span>&nbsp;</span><span class="c7">+=</span><span>&nbsp;</span><span class="c0">c</span><span>.</span><span class="c0">getHeight</span><span class="c4">()</span><span>&nbsp;</span><span class="c7">-</span><span>&nbsp;</span><span class="c0">error</span><span>.</span><span class="c0">getHeight</span><span class="c4">()</span><span>&nbsp;/ </span><span class="c14">2</span><span class="c7">;</span><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span></p><p class="c3"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">g</span><span>.</span><span class="c0">drawImage</span><span class="c4">(</span><span class="c0">error</span><span>, </span><span class="c0">x</span><span>, </span><span class="c0">y</span><span class="c4">)</span><span class="c7">;</span></p><p class="c3"><span>&nbsp; &nbsp; &nbsp;</span><span class="c4">}</span></p><p class="c3"><span>&nbsp;</span><span class="c4">}</span></p><p class="c3 c5"><span class="c4"></span></p><p class="c3"><span>&nbsp;</span><span class="c9">public</span><span>&nbsp;</span><span class="c9">void</span><span>&nbsp;</span><span class="c0">addInvalid</span><span class="c4">(</span><span class="c0">Component</span><span>&nbsp;</span><span class="c0">c</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span></p><p class="c3"><span>&nbsp; &nbsp; &nbsp;</span><span class="c0">components</span><span>.</span><span class="c0">addElement</span><span class="c4">(</span><span class="c0">c</span><span class="c4">)</span><span class="c7">;</span></p><p class="c3"><span>&nbsp;</span><span class="c4">}</span></p><p class="c3 c5"><span class="c4"></span></p><p class="c3"><span>&nbsp;</span><span class="c9">public</span><span>&nbsp;</span><span class="c9">void</span><span>&nbsp;</span><span class="c0">removeInvalid</span><span class="c4">(</span><span class="c0">Component</span><span>&nbsp;</span><span class="c0">c</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span></p><p class="c3"><span>&nbsp; &nbsp; &nbsp;</span><span class="c0">components</span><span>.</span><span class="c0">removeElement</span><span class="c4">(</span><span class="c0">c</span><span class="c4">)</span><span class="c7">;</span></p><p class="c3"><span>&nbsp;</span><span class="c4">}</span><span>&nbsp;</span></p><p class="c3"><span class="c4">}</span></p><p class="c3 c5"><span class="c4"></span></p><h2 class="c3"><a name="h.rsc14lw5md42"></a><span class="c10">True Type Fonts (TTF)</span></h2><p class="c3"><span>Fonts were a painful subject in Codename One, historically devices supported a very limited set of fonts and we were bound by said limitations. However, devices moved forward and finally we too can move forward to more reasonable font support.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>The built in fonts (system fonts) are divided to 3 types of which we can get 3 sizes and 3 weights. This is the very concervative lowest common denominator and if you wish to write very portable code you should stick with those fonts.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>TTF support is limited to Android, iOS and RIM. On the other platforms a standard system font will be used where fonts aren&#39;t supported.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>In order to use a font just add the ttf file into the src directory, notice that the file must have the &quot;.ttf&quot; extension otherwise the build server won&#39;t be able to recognize the file as a font and set it up accordingly (devices need fonts to be defined in very specific ways). Once you do that you can use the font from code or from the theme.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>In the theme section of the Codename One designer you now have the option to define the font like this:</span></p><p class="c3"><img height="143" src="images/image24.png" width="523"></p><p class="c3"><span>The system font will be used where True Type fonts aren&#39;t supported, the size of the font can be one of 5 options.</span></p><p class="c3"><span>Small, medium &amp; large correspond to the 3 system font sizes and occupy the exact same sizes of the system fonts.</span></p><p class="c3"><span>Millimeters &amp; pixels will size the fonts appropriately using the numeric field.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>To use fonts from code just use:</span></p><p class="c3"><span class="c9">if</span><span class="c4">(</span><span class="c0">Font</span><span>.</span><span class="c0">isTrueTypeFileSupported</span><span class="c4">())</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp;</span><span class="c0">Font</span><span>&nbsp;</span><span class="c0">myFont</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c0">Font</span><span>.</span><span class="c0">createTrueTypeFont</span><span class="c4">(</span><span class="c0">fontName</span><span>, </span><span class="c0">fontFileName</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp;</span><span class="c0">myFont</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c0">myFont</span><span>.</span><span class="c0">derive</span><span class="c4">(</span><span class="c0">sizeInPixels</span><span>, </span><span class="c0">Font</span><span>.</span><span class="c0">STYLE_PLAIN</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp;</span><span class="c11">// do something with the font </span><span><br></span><span class="c4">}</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>Notice that in code only pixel sizes are supported so its up to you to decide how to convert that. You also need to derive the font with the proper size unless you want a 0 sized font which probably isn&#39;t very useful.</span></p><p class="c3"><span>The font name is the difficult bit, iOS requires the name of the font which doesn&#39;t always correlate to the file name in order to load the font, its sometimes viewable within a font viewer but isn&#39;t always intuitive so be sure to test that on the device to make sure you got it right.</span></p><p class="c3 c5"><span></span></p><hr style="page-break-before:always;display:none;"><p class="c3 c5"><span></span></p><h1 class="c3"><a name="h.d3uhe2c3epxy"></a><span class="c10">File System, Storage, Network &amp; Parsing</span></h1><p class="c3"><span>In this chapter we cover the IO frameworks which include everything from network to storage, filesystem and parsing.</span></p><h2 class="c37 c3"><a name="h.jkoy0sp3ans5"></a><span class="c10">Externalizable Objects</span></h2><p class="c3"><span>Codename One provides the externalizable interface which is similar to the Java SE externalizable interface. This interface allows an object to declare itself as externalizable for serialization (so an object can be stored in a file/storage or sent over the network). However, due to the lack of reflection and use of obfuscation these objects must be registered with the Util class.</span></p><p class="c3"><span>Codename One will probably never support the Java SE Serialization API due to the size issues and complexities related to obfuscation.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>The major objects used by Codename One are externalizable by default:</span></p><p class="c3"><span>String, Vector, Hashtable, Integer, Double, Float, Byte, Short, Long, Character, Boolean, Object[], byte[], int[], float[], long[], double[].</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>Externalizing an object such as h below should work just fine: </span></p><p class="c3"><span class="c0">Hashtable</span><span>&nbsp;</span><span class="c0">h</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Hashtable</span><span class="c4">()</span><span class="c7">;</span><span><br></span><span class="c0">h</span><span>.</span><span class="c0">put</span><span class="c4">(</span><span class="c22">&quot;Hi&quot;</span><span>,</span><span class="c22">&quot;World&quot;</span><span class="c4">)</span><span class="c7">;</span><span><br></span><span class="c0">h</span><span>.</span><span class="c0">put</span><span class="c4">(</span><span class="c22">&quot;data&quot;</span><span>, </span><span class="c9">new</span><span>&nbsp;</span><span class="c9">byte</span><span class="c4">[]</span><span>&nbsp;</span><span class="c4">{</span><span>...</span><span class="c4">})</span><span class="c7">;</span><span><br></span></p><p class="c3"><span>However, notice that some things aren&rsquo;t polymorphic e.g. if I will externalize a String array I will get back an Object array since String arrays aren&rsquo;t supported.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>So implementing the Externalizable interface is only important when we want to store a proprietary object. In this case we must register the object with the com.codename1.io.Util class so the externalization algorithm will be able to recognize it by name by invoking:</span></p><p class="c3"><span class="c0">Util</span><span>.</span><span class="c0">register</span><span class="c4">(</span><span class="c22">&quot;MyClass&quot;</span><span>, </span><span class="c0">MyClass</span><span>.</span><span class="c9">class</span><span class="c4">)</span><span class="c7">;</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>A externalizable objects must have a default public constructor and must implement the following 4 methods:</span></p><p class="c3"><span>&nbsp; &nbsp;</span><span class="c9">public</span><span>&nbsp;</span><span class="c9">int</span><span>&nbsp;</span><span class="c0">getVersion</span><span class="c4">()</span><span class="c7">;</span><span><br> &nbsp; &nbsp;</span><span class="c9">public</span><span>&nbsp;</span><span class="c9">void</span><span>&nbsp;</span><span class="c0">externalize</span><span class="c4">(</span><span class="c0">DataOutputStream</span><span>&nbsp;</span><span class="c0">out</span><span class="c4">)</span><span>&nbsp;</span><span class="c9">throws</span><span>&nbsp;</span><span class="c0">IOException</span><span class="c7">;</span><span><br> &nbsp; &nbsp;</span><span class="c9">public</span><span>&nbsp;</span><span class="c9">void</span><span>&nbsp;</span><span class="c0">internalize</span><span class="c4">(</span><span class="c9">int</span><span>&nbsp;</span><span class="c0">version</span><span>, </span><span class="c0">DataInputStream</span><span>&nbsp;</span><span class="c0">in</span><span class="c4">)</span><span>&nbsp;</span><span class="c9">throws</span><span>&nbsp;</span><span class="c0">IOException</span><span class="c7">;</span><span><br> &nbsp; &nbsp;</span><span class="c9">public</span><span>&nbsp;</span><span class="c0">String</span><span>&nbsp;</span><span class="c0">getObjectId</span><span class="c4">()</span><span class="c7">;</span><span><br></span></p><p class="c3"><span>The version just returns the current version of the object allowing the algorithm to change in the future (the version is then passed when internalizing the object). The object id is a String uniquely representing the object, it usually corresponds to the class name (in the example above the Unique Name should be MyClass).</span></p><p class="c3"><span>Developers need to write the data of the object in the externalize method using the methods in the data output stream and read the data of the object in the internalize method e.g.:</span></p><p class="c3"><span>&nbsp; &nbsp;</span><span class="c9">public</span><span>&nbsp;</span><span class="c9">void</span><span>&nbsp;</span><span class="c0">externalize</span><span class="c4">(</span><span class="c0">DataOutputStream</span><span>&nbsp;</span><span class="c0">out</span><span class="c4">)</span><span>&nbsp;</span><span class="c9">throws</span><span>&nbsp;</span><span class="c0">IOException</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">out</span><span>.</span><span class="c0">writeUTF</span><span class="c4">(</span><span class="c0">name</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">if</span><span class="c4">(</span><span class="c0">value</span><span>&nbsp;</span><span class="c7">!=</span><span>&nbsp;</span><span class="c9">null</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">out</span><span>.</span><span class="c0">writeBoolean</span><span class="c4">(</span><span class="c9">true</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">out</span><span>.</span><span class="c0">writeUTF</span><span class="c4">(</span><span class="c0">value</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">}</span><span>&nbsp;</span><span class="c9">else</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">out</span><span>.</span><span class="c0">writeBoolean</span><span class="c4">(</span><span class="c9">false</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">}</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">if</span><span class="c4">(</span><span class="c0">domain</span><span>&nbsp;</span><span class="c7">!=</span><span>&nbsp;</span><span class="c9">null</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">out</span><span>.</span><span class="c0">writeBoolean</span><span class="c4">(</span><span class="c9">true</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">out</span><span>.</span><span class="c0">writeUTF</span><span class="c4">(</span><span class="c0">domain</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">}</span><span>&nbsp;</span><span class="c9">else</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">out</span><span>.</span><span class="c0">writeBoolean</span><span class="c4">(</span><span class="c9">false</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">}</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">out</span><span>.</span><span class="c0">writeLong</span><span class="c4">(</span><span class="c0">expires</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp;</span><span class="c4">}</span><span><br><br> &nbsp; &nbsp;</span><span class="c9">public</span><span>&nbsp;</span><span class="c9">void</span><span>&nbsp;</span><span class="c0">internalize</span><span class="c4">(</span><span class="c9">int</span><span>&nbsp;</span><span class="c0">version</span><span>, </span><span class="c0">DataInputStream</span><span>&nbsp;</span><span class="c0">in</span><span class="c4">)</span><span>&nbsp;</span><span class="c9">throws</span><span>&nbsp;</span><span class="c0">IOException</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">name</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c0">in</span><span>.</span><span class="c0">readUTF</span><span class="c4">()</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">if</span><span class="c4">(</span><span class="c0">in</span><span>.</span><span class="c0">readBoolean</span><span class="c4">())</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">value</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c0">in</span><span>.</span><span class="c0">readUTF</span><span class="c4">()</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">}</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">if</span><span class="c4">(</span><span class="c0">in</span><span>.</span><span class="c0">readBoolean</span><span class="c4">())</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">domain</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c0">in</span><span>.</span><span class="c0">readUTF</span><span class="c4">()</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">}</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">expires</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c0">in</span><span>.</span><span class="c0">readLong</span><span class="c4">()</span><span class="c7">;</span><span><br> &nbsp; &nbsp;</span><span class="c4">}</span><span><br> </span></p><h2 class="c3"><a name="h.29xz5cqmoyv6"></a><span class="c10">Storage vs. File System</span></h2><p class="c25 c3"><span>The question of storage vs. file system is often confusing for novice mobile developers.</span></p><p class="c25 c3 c5"><span></span></p><p class="c25 c3"><span>Generally storage is where you store information that will be deleted if the application is removed. It is private to the application and is supported by every platform although implementations sometimes differ by a great deal (e.g. in J2ME/RIM storage is really a type of byte array store called RMS and not a file system, Codename One hides that fact).</span></p><p class="c25 c3 c5"><span></span></p><p class="c25 c3"><span>A file system can span over an SD card area and has a hierarchy/rules. Not all phones support a &ldquo;proper&rdquo; file system e.g. the iPhone doesn&rsquo;t work well with such stepping outside of the applications boxed area.</span></p><p class="c25 c3 c5"><span></span></p><p class="c25 c3"><span>When in doubt we always recommend using Storage which is simpler. </span></p><h2 class="c37 c3"><a name="h.7nxor8fpvg2k"></a><span class="c10">Storage</span></h2><p class="c3"><span>Storage is accessed via the </span><span class="c8"><a class="c15" href="https://codenameone.googlecode.com/svn/trunk/CodenameOne/javadoc/com/codename1/io/Storage.html">com.codename1.io.Storage</a></span><span>&nbsp;class. It is not a hierarchy and contains the ability to list/delete and write to named storage entries.</span></p><p class="c3"><span>The Storage API also provides convenient methods to write objects to Storage and read them from Storage specifically </span><span class="c8"><a class="c15" href="https://codenameone.googlecode.com/svn/trunk/CodenameOne/javadoc/com/codename1/io/Storage.html#readObject(java.lang.String)">readObject</a></span><span>&nbsp;&amp; </span><span class="c8"><a class="c15" href="https://codenameone.googlecode.com/svn/trunk/CodenameOne/javadoc/com/codename1/io/Storage.html#writeObject(java.lang.String,%20java.lang.Object)">writeObject</a></span><span>.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>Storage also offers a very simple API in the form of the Preferences class. Preferences allows developers to store simple variables, strings, numbers, booleans etc. in storage without wringing any storage code. This is a common usage within applications e.g. you have a server token that you need to store:</span></p><p class="c3"><span class="c0">Preferences</span><span>.</span><span class="c0">set</span><span class="c4">(</span><span class="c22">&quot;token&quot;</span><span>, </span><span class="c0">myToken</span><span class="c4">)</span><span class="c7">;</span><span><br><br></span><span class="c11">// token will be null if it was never set</span><span><br></span><span class="c0">String</span><span>&nbsp;</span><span class="c0">token</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c0">Preferences</span><span>.</span><span class="c0">get</span><span class="c4">(</span><span class="c22">&quot;token&quot;</span><span>, </span><span class="c9">null</span><span class="c4">)</span><span class="c7">;</span></p><h2 class="c37 c3"><a name="h.n1ttcg63rl9v"></a><span class="c10">File System</span></h2><p class="c3"><span>The file system is accessed via the </span><span class="c8"><a class="c15" href="https://codenameone.googlecode.com/svn/trunk/CodenameOne/javadoc/com/codename1/io/FileSystemStorage.html">com.codename1.io.FileSystemStorage</a></span><span>&nbsp;class. It maps to the underlying OS&rsquo;s file system API providing all the common operations on a file name from </span><span class="c8"><a class="c15" href="https://codenameone.googlecode.com/svn/trunk/CodenameOne/javadoc/com/codename1/io/FileSystemStorage.html#openInputStream(java.lang.String)">opening</a></span><span>&nbsp;to </span><span class="c8"><a class="c15" href="https://codenameone.googlecode.com/svn/trunk/CodenameOne/javadoc/com/codename1/io/FileSystemStorage.html#rename(java.lang.String,%20java.lang.String)">renaming</a></span><span>&nbsp;and </span><span class="c8"><a class="c15" href="https://codenameone.googlecode.com/svn/trunk/CodenameOne/javadoc/com/codename1/io/FileSystemStorage.html#delete(java.lang.String)">deleting</a></span><span>.</span></p><p class="c3"><span>Notice that the file system API is somewhat platform specific in its behavior, all paths used the API should be absolute otherwise they are not guaranteed to work.</span></p><h2 class="c3"><a name="h.lqoq9qd9x8ie"></a><span class="c10">Cloud Storage</span></h2><p class="c3"><span>Notice: the cloud storage is a premium paid service. Codename One offers a free quota for all developers using its platform.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>Cloud storage is an API that allows us to persist objects into Codename One&rsquo;s cloud servers hosted by the Google App Engine. This guarantees high reliability and speed, it also implies some constraints.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>Cloud objects are stored using a distributed object database, don&rsquo;t think of them as you would of tables or typical SQL like storage since they are backed by Google&rsquo;s big table API. Each cloud object is very much like a Map allowing set/get operations on properties. An object can have a type associated with it as well as a visibility scope for the world.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>A simple example might be in order:</span></p><p class="c3"><span class="c0">CloudObject</span><span>&nbsp;</span><span class="c0">obj</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">CloudObject</span><span class="c4">(</span><span class="c22">&quot;MyObject&quot;</span><span>,<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">CloudObject</span><span>.</span><span class="c0">ACCESS_PUBLIC_READ_ONLY</span><span class="c4">)</span><span class="c7">;</span><span><br></span><span class="c0">obj</span><span>.</span><span class="c0">setString</span><span class="c4">(</span><span class="c22">&quot;txt&quot;</span><span>, </span><span class="c0">title</span><span>.</span><span class="c0">getText</span><span class="c4">())</span><span class="c7">;</span><span><br></span><span class="c0">obj</span><span>.</span><span class="c0">setIndexString</span><span class="c4">(</span><span class="c14">1</span><span>, </span><span class="c0">title</span><span>.</span><span class="c0">getText</span><span class="c4">())</span><span class="c7">;</span><span><br></span><span class="c0">CloudStorage</span><span>.</span><span class="c0">getInstance</span><span class="c4">()</span><span>.</span><span class="c0">save</span><span class="c4">(</span><span class="c0">obj</span><span class="c4">)</span><span class="c7">;</span><span><br></span><span class="c9">int</span><span>&nbsp;</span><span class="c0">result</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c0">CloudStorage</span><span>.</span><span class="c0">getInstance</span><span class="c4">()</span><span>.</span><span class="c0">commit</span><span class="c4">()</span><span class="c7">;</span><span><br></span><span class="c9">if</span><span class="c4">(</span><span class="c0">result</span><span>&nbsp;</span><span class="c7">!=</span><span>&nbsp;</span><span class="c0">CloudStorage</span><span>.</span><span class="c0">RETURN_CODE_SUCCESS</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp;</span><span class="c0">Dialog</span><span>.</span><span class="c0">show</span><span class="c4">(</span><span class="c22">&quot;Cloud Error&quot;</span><span>, </span><span class="c22">&quot;Error &quot;</span><span>&nbsp;</span><span class="c7">+</span><span>&nbsp;</span><span class="c0">result</span><span>, </span><span class="c22">&quot;OK&quot;</span><span>, </span><span class="c9">null</span><span class="c4">)</span><span class="c7">;</span><span><br></span><span class="c4">}</span><span><br></span></p><p class="c3"><span>As you can see, the code above creates and stores a cloud object, there are several things to notice about the example above: </span></p><ol class="c45 lst-kix_qibc3js0tsci-0 start" start="1"><li class="c3 c20 c12"><span>Cloud object is a specific Codename One type, you cannot store arbitrary objects.</span></li><li class="c3 c20 c12"><span>Values can be anything</span></li><li class="c3 c20 c12"><span>We can define object visibility scope</span></li><li class="c3 c20 c12"><span>There is a special index column</span></li><li class="c3 c20 c12"><span>Save doesn&rsquo;t actually send data to the server</span></li><li class="c3 c20 c12"><span>Commit is synchronous which means we know whether the commit succeeded in the next line.</span></li></ol><p class="c3 c5"><span></span></p><p class="c3"><span>Lets go over this line by line:</span></p><p class="c3"><span class="c0">CloudObject</span><span>&nbsp;</span><span class="c0">obj</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">CloudObject</span><span class="c4">(</span><span class="c22">&quot;MyObject&quot;</span><span>,<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">CloudObject</span><span>.</span><span class="c0">ACCESS_PUBLIC_READ_ONLY</span><span class="c4">)</span><span class="c7">;</span><span><br></span></p><p class="c3"><span>Here we create a new cloud object, we give it a type (sort of like a class). Notice that properties we store into the object can be anything and don&rsquo;t have to be identical for objects that have the same type, this is mostly for your convenience as developers.</span></p><p class="c3"><span>Then we give the object its visibility scope, when the visibility is defined you will only be able to work with an object that is within your scope. Cloud objects have 5 levels of visibility:</span></p><ul class="c45 lst-kix_4yf2vpczbkfl-0 start"><li class="c3 c20 c12"><span>ACCESS_PUBLIC - A world visible/modifiable object!</span></li><li class="c3 c20 c12"><span>ACCESS_PUBLIC_READ_ONLY - A world visible object! Can only be modified by its creator.</span></li><li class="c3 c20 c12"><span>ACCESS_APPLICATION - An application visible/modifiable object!</span></li><li class="c3 c20 c12"><span>ACCESS_APPLICATION_READ_ONLY - An application scope readable object! Can only be modified by its creator</span></li><li class="c3 c20 c12"><span>ACCESS_PRIVATE - An object that can only be viewed or modified by its creator</span></li></ul><p class="c3 c5"><span></span></p><p class="c3"><span>When creating an object you determine its scope and once the scope is assigned it cannot be modified, you will need to create a new object to do so. When querying you can only query one scope (more on that later).</span></p><p class="c3"><span>Application scope is determined by your application package and developer email, since these are entirely unique and can&rsquo;t be occupied by another developer you are safe to assume that only your applications have access to that data. However, since this data is visible it isn&rsquo;t hacker safe. Any sensitive data should be password protected.</span></p><p class="c3"><span>Some of the scopes require a user identity in order to modify or access an object, a unique user is automatically created when logging into an application. However, you can login explicitly with a specific user by using the CloudPersona API. E.g.: CloudPersona.createFromToken(String);</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>The creatFromToken method initializes the persona based on a token, since this method assumes binary transfer of a completed token the token isn&#39;t verified in any way and the user is considered logged in. The idea here is that when a user logs in using some other means (e.g. Facebook), identifying information e.g. the users email can be used as a &ldquo;token&rdquo;. That way when a user logs in from another device the same token (email) would be used and he would have the same objects visible to him on both devices. </span></p><p class="c3"><span>A user doesn&rsquo;t have to be a single person, it can be a corporation identity or any such group thus allowing the whole group to share a single token to get access to the private scope together. </span></p><p class="c3 c5"><span></span></p><p class="c3"><span class="c0">obj</span><span>.</span><span class="c0">setString</span><span class="c4">(</span><span class="c22">&quot;txt&quot;</span><span>, </span><span class="c0">title</span><span>.</span><span class="c0">getText</span><span class="c4">())</span><span class="c7">;</span><span><br>Here we see a string being placed into the object store, you can place Strings and numbers into the object store but not too much data. String length is limited to 500 bytes and objects can&rsquo;t be too large or you will get a server failure. We suggest staying well below the 100kb mark.</span></p><p class="c3"><span>To store large files you will need to use the filestore API which will be explained bellow.</span></p><p class="c3"><span>&nbsp;</span></p><p class="c3"><span class="c0">obj</span><span>.</span><span class="c0">setIndexString</span><span class="c4">(</span><span class="c14">1</span><span>, </span><span class="c0">title</span><span>.</span><span class="c0">getText</span><span class="c4">())</span><span class="c7">;</span><span><br>Querying in an object datastore is pretty difficult, since you can define a property to be almost anything, we also want the queries to be REALLY fast even on stores containing more than 1 million entries. </span></p><p class="c3"><span>To accomplish both goals we created 10 index entries in the object store (from 1 to 10) into which you can put any arbitrary data that you can query or sort. E.g. say you have an entity such as:</span></p><p class="c3"><span class="c0">CloudObject</span><span>&nbsp;</span><span class="c0">o</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;...</span><span class="c7">;</span><span><br></span><span class="c0">o</span><span>.</span><span class="c0">setString</span><span class="c4">(</span><span class="c22">&quot;firstName&quot;</span><span>, </span><span class="c0">first</span><span class="c4">)</span><span class="c7">;</span><span><br></span><span class="c0">o</span><span>.</span><span class="c0">setString</span><span class="c4">(</span><span class="c22">&quot;surname&quot;</span><span>, </span><span class="c0">last</span><span class="c4">)</span><span class="c7">;</span><span><br></span></p><p class="c3"><span>And you would like to sort them in a case insensitive way based on firstName-lastName and by lastName-firstName. To do this you will need to create two indexes:</span></p><p class="c3"><span class="c0">o</span><span>.</span><span class="c0">setIndexString</span><span class="c4">(</span><span class="c14">1</span><span>, </span><span class="c4">(</span><span class="c0">first</span><span>&nbsp;</span><span class="c7">+</span><span>&nbsp;</span><span class="c22">&quot; &quot;</span><span>&nbsp;</span><span class="c7">+</span><span>&nbsp;</span><span class="c0">last</span><span class="c4">)</span><span>.</span><span class="c0">toLowerCase</span><span class="c4">())</span><span class="c7">;</span><span>&nbsp;<br></span><span class="c0">o</span><span>.</span><span class="c0">setIndexString</span><span class="c4">(</span><span class="c14">2</span><span>, </span><span class="c4">(</span><span class="c0">last</span><span>&nbsp;</span><span class="c7">+</span><span>&nbsp;</span><span class="c22">&quot; &quot;</span><span>&nbsp;</span><span class="c7">+</span><span>&nbsp;</span><span class="c0">first</span><span class="c4">)</span><span>.</span><span class="c0">toLowerCase</span><span class="c4">())</span><span class="c7">;</span><span>&nbsp;<br></span></p><p class="c3"><span>This will allow you to order your responses either based on the first or the second index. This is a bit difficult but it guarantees ridiculously fast queries since every query is effectively an object lookup.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span class="c0">CloudStorage</span><span>.</span><span class="c0">getInstance</span><span class="c4">()</span><span>.</span><span class="c0">save</span><span class="c4">(</span><span class="c0">obj</span><span class="c4">)</span><span class="c7">;</span><span><br>The cloud storage class is the singleton that allows you to save, delete, query and refresh your objects. </span></p><p class="c3 c5"><span></span></p><p class="c3"><span class="c9">int</span><span>&nbsp;</span><span class="c0">result</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c0">CloudStorage</span><span>.</span><span class="c0">getInstance</span><span class="c4">()</span><span>.</span><span class="c0">commit</span><span class="c4">()</span><span class="c7">;</span><span><br>Most modification operations aren&rsquo;t sent to the server immediately, they should be committed or rolled back which can be done synchronously on the EDT or asynchronously. Commit returns a server response which can indicate the type of failure if a failure has occurred. </span></p><p class="c3"><span>Do not mistake commit/rollback to SQL type transactions, unlike SQL part of the operation can succeed while another part can fail, the commit command allows you to batch several operations into a single ordered server request which is more performant than sending multiple small requests.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>A couple of other things we should keep in mind:</span></p><ul class="c45 lst-kix_waduenz1mfgd-0 start"><li class="c3 c20 c12"><span>Every object has a modification date which is tested against the server timestamp. This prevents two users/devices from changing a cloud object concurrently.</span></li><li class="c3 c20 c12"><span>Every object has a unique ID String identifying it, you can instantly access any object via that CloudId</span></li></ul><p class="c3 c5"><span></span></p><p class="c3"><span>We can now fetch the data we committed:</span></p><p class="c3"><span class="c0">CloudObject</span><span class="c4">[]</span><span>&nbsp;</span><span class="c0">objects</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c0">CloudStorage</span><span>.</span><span class="c0">getInstance</span><span class="c4">()</span><span>.</span><span class="c0">querySorted</span><span class="c4">(</span><span class="c22">&quot;MyObject&quot;</span><span>, </span><span class="c14">1</span><span>, </span><span class="c9">true</span><span>, </span><span class="c14">0</span><span>, </span><span class="c14">10</span><span>, </span><span class="c0">CloudObject</span><span>.</span><span class="c0">ACCESS_PUBLIC_READ_ONLY</span><span class="c4">)</span><span class="c7">;</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>Notice that this query is synchronous (there is an asynchronous version of this query as well), its functionality is relatively simple though.</span></p><p class="c3"><span>It searches for objects of type MyObject and returns them sorted in ascending order (the true argument) based on index number 1. It only returns the first 10 objects (start offset 0 and destination 10) and only searches the public read only scope.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>Once fetched you can modify/save the objects and commit them. </span></p><p class="c3 c5"><span></span></p><p class="c3"><span>This can be further simplified by binding a user interface directly to a Cloud Object using our Cloud Bind&trade; feature. To bind a component UI tree created in the GUI builder use the following:</span></p><p class="c3"><span class="c0">CloudObject</span><span>&nbsp;</span><span class="c0">objectToBind</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;&hellip;</span><span class="c7">;</span><span><br></span><span class="c0">objectToBind</span><span>.</span><span class="c0">bindTree</span><span class="c4">(</span><span class="c0">form</span><span>, </span><span class="c0">CloudObject</span><span>.</span><span class="c0">BINDING_IMMEDIATE</span><span>, </span><span class="c9">true</span><span class="c4">)</span><span class="c7">;</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>There are several things happening here. The UI is assumed to have names associated with the relevant components, these names are used as the keys for the Cloud Object&rsquo;s created. The last argument indicates whether the UI should get the initial values for the entries from the cloud object or visa versa (true means the Cloud Object determines initial values).</span></p><p class="c3"><span>The binding options in between has 3 different levels:</span></p><ul class="c45 lst-kix_odqytza08vnw-0 start"><li class="c3 c20 c12"><span>BINDING_DEFERRED - Changes to the bound property won&#39;t be reflected into the bound cloud object until commit binding is invoked.</span></li><li class="c3 c20 c12"><span>BINDING_IMMEDIATE - Changes to the bound property will be reflected instantly into the cloud object</span></li><li class="c3 c20 c12"><span>BINDING_AUTO_SAVE - Changes to the bound property will be reflected instantly into the cloud object and the object would be saved immediately (not committed!).</span></li></ul><p class="c3 c5"><span></span></p><p class="c3"><span>These 3 essentially match typical UI use cases. Deferred binding is great for UI that has a &ldquo;cancel&rdquo; option, if the user presses cancel you don&rsquo;t have to do anything (although you can invoke cancelBinding() to cleanup). If the user presses save you will need to invoke the method commitBinding() and your changes will be applied (but not saved or committed despite the name).</span></p><p class="c3"><span>Binding immediate changes the cloud object instantly which is great for UI&rsquo;s that don&rsquo;t have a save option (as is common on mobile devices and the Mac). &nbsp;The same is true for the last option only it goes further and invokes save for you. It still doesn&rsquo;t invoke commit which you will have to do at some point.</span></p><h2 class="c3"><a name="h.o9s121ke6w29"></a><span class="c10">Cloud File Storage</span></h2><p class="c3"><span>Notice: the cloud file storage is a premium paid service. Codename One offers a free quota for all developers using its platform.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>The cloud file storage is a complimentary service to the cloud storage API, it allows storing large files such as images, videos etc. It doesn&rsquo;t allow file modification only upload, delete and getting a URL to the file. </span></p><p class="c3"><span>To use it with the Cloud Storage API just store the file key within a cloud object. </span></p><p class="c3"><span>The code to work with cloud files is encoded into the CloudStorage class, simply use the methods uploadCloudFile, deleteCloudFile or getUrlForCloudFileId. The upload method returns an id which is improbable to guess. You can use this id to delete or to get a URL which you can use to show the file. </span></p><h2 class="c3"><a name="h.vhkncoed4s3c"></a><span class="c10">SQL</span></h2><p class="c25 c3"><span>Most newer devices contain one version of sqlite or another, sqlite is a very lightweight SQL database designed for embedding into devices. For portability </span><span class="c36 c9">we recommend avoiding SQL</span><span>&nbsp;altogether since it is both fragmented between devices (different sqlite versions) and isn&rsquo;t supported on other devices.</span></p><p class="c25 c3"><span>In general SQL seems overly complex for most embedded device programming tasks.</span></p><p class="c25 c3 c5"><span></span></p><p class="c25 c3"><span>If you wish to use SQL and are willing to work around the limitations just use</span></p><p class="c25 c3"><span>&nbsp;</span></p><p class="c25 c3"><span class="c0">Database</span><span>&nbsp;</span><span class="c0">db</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c0">Display</span><span>.</span><span class="c0">getInstance</span><span class="c4">()</span><span>.</span><span class="c0">openOrCreate</span><span class="c4">(</span><span>&ldquo;</span><span class="c0">databaseName</span><span>&rdquo;</span><span class="c4">)</span><span class="c7">;</span><span>&nbsp;</span></p><p class="c25 c3 c5"><span></span></p><p class="c25 c3"><span>Notice that db will be null if the SQL API isn&rsquo;t supported on the given platform. You can invoke standard queries on the database and traverse it using a Cursor object.</span></p><h2 class="c37 c3"><a name="h.g0e51ieofzv6"></a><span class="c10">Network Manager &amp; Connection Request</span></h2><p class="c3"><span>One of the more common problems in Network programming is spawning a new thread to handle the network operations. In Codename One this is done seamlessly and becomes unessential thanks to the </span><span class="c8"><a class="c15" href="https://codenameone.googlecode.com/svn/trunk/CodenameOne/javadoc/com/codename1/io/NetworkManager.html">NetworkManager</a></span><span>&nbsp;class which effectively alleviates the need for managing network threads. &nbsp;The connection request class can be used to facilitate WebService requests when coupled with the JSON/XML parsing capabilities.</span></p><p class="c3"><span>Currently Codename One only supports http/https connections due to limitations inherent in many devices/network operator backends. To open a connection one needs to use a </span><span class="c8"><a class="c15" href="https://codenameone.googlecode.com/svn/trunk/CodenameOne/javadoc/com/codename1/io/ConnectionRequest.html">ConnectionRequest</a></span><span>&nbsp;object which has some similarities to the networking mechanism in JavaScript but is obviously somewhat more elaborate. </span></p><p class="c3 c5"><span></span></p><p class="c3"><span>To send a get request to a URL one performs something like:</span></p><p class="c3"><span class="c0">ConnectionRequest</span><span>&nbsp;</span><span class="c0">request</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">ConnectionRequest</span><span class="c4">()</span><span class="c7">;</span><span><br></span><span class="c0">request</span><span>.</span><span class="c0">setUrl</span><span class="c4">(</span><span class="c0">url</span><span class="c4">)</span><span class="c7">;</span><span><br></span><span class="c0">request</span><span>.</span><span class="c0">setPost</span><span class="c4">(</span><span class="c9">false</span><span class="c4">)</span><span class="c7">;</span><span><br></span><span class="c0">request</span><span>.</span><span class="c0">setContentType</span><span class="c4">(</span><span class="c0">contentType</span><span class="c4">)</span><span class="c7">;</span><span><br></span><span class="c0">request</span><span>.</span><span class="c0">addRequestHeader</span><span class="c4">(</span><span class="c0">headerName</span><span>, </span><span class="c0">headerValue</span><span class="c4">)</span><span class="c7">;</span><span><br></span><span class="c0">requestElement</span><span>.</span><span class="c0">addArgument</span><span class="c4">(</span><span class="c0">parameter</span><span>, </span><span class="c0">value</span><span class="c4">)</span><span class="c7">;</span><span><br></span><span class="c0">request</span><span>.</span><span class="c0">addResponseListener</span><span class="c4">(</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">ActionListener</span><span class="c4">()</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp;</span><span class="c9">public</span><span>&nbsp;</span><span class="c9">void</span><span>&nbsp;</span><span class="c0">actionPerformed</span><span class="c4">(</span><span class="c0">ActionEvent</span><span>&nbsp;</span><span class="c0">ev</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">NetworkEvent</span><span>&nbsp;</span><span class="c0">e</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c4">(</span><span class="c0">NetworkEvent</span><span class="c4">)</span><span class="c0">ev</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c11">// &hellip; process the response</span><span><br> &nbsp; &nbsp;</span><span class="c4">}</span><span><br></span><span class="c4">})</span><span class="c7">;</span><span><br><br></span><span class="c11">// request will be handled asynchronously</span><span><br></span><span class="c0">NetworkManager</span><span>.</span><span class="c0">addToQueue</span><span class="c4">(</span><span class="c0">request</span><span class="c4">)</span><span class="c7">;</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>Notice that you can also implement the same thing and much more by avoiding the response listener code and instead overriding the methods of the </span><span class="c8"><a class="c15" href="https://codenameone.googlecode.com/svn/trunk/CodenameOne/javadoc/com/codename1/io/ConnectionRequest.html">ConnectionRequest</a></span><span>&nbsp;class which offers multiple points to override e.g. </span></p><p class="c3"><span class="c0">ConnectionRequest</span><span>&nbsp;</span><span class="c0">request</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">ConnectionRequest</span><span class="c4">()</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; </span><span class="c9">protected</span><span>&nbsp;</span><span class="c9">void</span><span>&nbsp;</span><span class="c0">readResponse</span><span class="c4">(</span><span class="c0">InputStream</span><span>&nbsp;</span><span class="c0">input</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c11">// just read from the response input stream</span><span><br> &nbsp; </span><span class="c4">}</span><span><br><br> &nbsp; </span><span class="c9">protected</span><span>&nbsp;</span><span class="c9">void</span><span>&nbsp;</span><span class="c0">postResponse</span><span class="c4">()</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c11">// invoked on the EDT after processing is complete to allow the networking code</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c11">// to update the UI</span><span><br> &nbsp; </span><span class="c4">}</span><span><br><br> &nbsp; </span><span class="c9">protected</span><span>&nbsp;</span><span class="c9">void</span><span>&nbsp;</span><span class="c0">buildRequestBody</span><span class="c4">(</span><span class="c0">OutputStream</span><span>&nbsp;</span><span class="c0">os</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c11">// writes post data, by default this &ldquo;just works&rdquo; but if you want to write this</span><span><br> &nbsp; &nbsp; &nbsp; </span><span class="c11">// manually then override this</span><span><br> &nbsp; </span><span class="c4">}</span><span><br></span><span class="c4">}</span><span class="c7">;</span></p><h2 class="c3"><a name="h.u6pdcjz3exvo"></a><span class="c10">Debugging Network Connections</span></h2><p class="c3"><span>Codename One includes a Network Monitor tool which you can access via the file menu of the simulator, this tool reflects all the requests made through the connection requests and echos them all. Allowing you to track issues in your code/web service and see everything &ldquo;going through the wire&rdquo;. </span><img height="182" src="images/image84.png" width="250"></p><p class="c3 c5"><span></span></p><p class="c3"><span>This is a remarkably useful tool for optimizing and for figuring out what exactly is happening with your server connection logic.</span></p><h2 class="c37 c3"><a name="h.6qqrykdfvbqw"></a><span class="c10">Network Services</span></h2><p class="c3"><span>Codename One ships with a few default bindings for common network services such as downloading and caching images locally &amp; RSS. You can find out more about these services in the </span><span class="c8"><a class="c15" href="https://codenameone.googlecode.com/svn/trunk/CodenameOne/javadoc/com/codename1/io/services/package-summary.html">services package</a></span><span>. </span></p><p class="c3 c5"><span></span></p><p class="c3"><span>Of note is the MultiPartRequest which allows submitting large blocks of data to a server without the limitations of typical requests. It includes special API&rsquo;s to add files thus allows upload of images, video etc. Notice that the server to which the upload request submits data needs to be able to process a multipart request which is a special mime type request.</span></p><h2 class="c37 c3"><a name="h.kfvvil8yqu9l"></a><span class="c10">UI Bindings &amp; Utilities</span></h2><p class="c3"><span>Codename One provides several tools to simplify the path between networking/IO &amp; GUI. A common task of showing a wait dialog or progress indication while fetching network data can be simplified by using the InfiniteProgress class e.g.:</span></p><p class="c3 c5"><span></span></p><p class="c3"><span class="c0">InfiniteProgress</span><span>&nbsp;</span><span class="c0">ip</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">InfiniteProgress</span><span class="c4">()</span><span class="c7">;</span><span><br></span><span class="c0">Dialog</span><span>&nbsp;</span><span class="c0">dlg</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c0">ip</span><span>.</span><span class="c0">showInifiniteBlocking</span><span class="c4">()</span><span class="c7">;</span><span><br></span><span class="c0">request</span><span>.</span><span class="c0">setDisposeOnCompletion</span><span class="c4">(</span><span class="c0">dlg</span><span class="c4">)</span><span class="c7">;</span><span><br></span></p><p class="c3"><span>The process of showing a progress bar for a long IO operation such as downloading is automatically mapped to the IO stream in Codename One using the </span><span class="c8"><a class="c15" href="https://codenameone.googlecode.com/svn/trunk/CodenameOne/javadoc/com/codename1/components/SliderBridge.html">SliderBridge</a></span><span>&nbsp;class.</span></p><h2 class="c37 c3"><a name="h.5ni2826pk0b9"></a><span class="c10">Logging &amp; Crash Protection</span></h2><p class="c3"><span>Codename One includes a Log API that allows developers to just invoke Log.p(String) or Log.e(Throwable) to log information to storage.</span></p><p class="c3"><span>As part of the premium cloud features it is possible to invoke Log.sendLog() in order to email a log directly to the developer account. Codename One can do that seamlessly based on changes printed into the log or based on exceptions that are uncaught or logged e.g.:</span></p><p class="c3 c5"><span></span></p><p class="c3"><span class="c0">Log</span><span>.</span><span class="c0">setReportingLevel</span><span class="c4">(</span><span class="c0">Log</span><span>.</span><span class="c0">REPORTING_DEBUG</span><span class="c4">)</span><span class="c7">;</span><span><br></span><span class="c0">DefaultCrashReporter</span><span>.</span><span class="c0">init</span><span class="c4">(</span><span class="c9">true</span><span>, </span><span class="c14">2</span><span class="c4">)</span><span class="c7">;</span><span><br></span></p><p class="c3"><span>This code will send a log every 2 minutes to your email if anything was changed. You can place it within the init(Object) method of your application.</span></p><p class="c3"><span>For a production application you can use Log.REPORTING_PRODUCTION which will only email the log on exception.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>Codename One also supports a crash_protection: true build parameter. However, this argument causes significant performance overhead at the moment and is only recommended during development time. It allows developers to receive a stack trace for crashes and in logging. However, the stack traces are only limited to the Codename One and developer classes and don&rsquo;t apply to operating system classes. </span></p><h2 class="c37 c3"><a name="h.cfw98fvrf692"></a><span class="c10">Parsing: JSON, XML &amp; CSV</span></h2><p class="c3"><span>Codename One has several built in parsers for JSON, XML &amp; CSV formats which you can use to parse data from the internet or data that is shipping with your product. E.g. use the CSV data to setup default values for your application.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>The parsers are all geared towards simplicity and small size, they don&#39;t validate and will fail in odd ways when faced with broken data.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>CSV is probably the easiest to use, the &quot;Comma Separated Values&quot; format is just a list of values separated by commas (or some other character) with new lines to indicate another row in the table. These usually map well to an Excel spreadsheet or database table.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>To parse a CSV just use the CSVParser class as such:</span></p><p class="c3 c5"><span></span></p><p class="c3"><span class="c0">CSVParser</span><span>&nbsp;</span><span class="c0">parser</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">CSVParser</span><span class="c4">()</span><span class="c7">;</span><span><br></span><span class="c0">String</span><span class="c4">[][]</span><span>&nbsp;</span><span class="c0">data</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c0">parser</span><span>.</span><span class="c0">read</span><span class="c4">(</span><span class="c0">stream</span><span class="c4">)</span><span class="c7">;</span><span><br></span></p><p class="c3"><span>The data array will contain a two dimensional array of the CSV data. You can change the delimiter character by using the CSVParser constructor that accepts a character.</span></p><p class="c3 c5"><span></span></p><p class="c3 c5"><span></span></p><p class="c3"><span>The JSON &quot;Java Script Object Notation&quot; format is popular on the web for passing values to/from webservices since it works so well with JavaScript. Parsing JSON is just as easy but has two different variations. You can use the JSONParser class to build a tree of the JSON data as such:</span></p><p class="c3 c5"><span></span></p><p class="c3"><span class="c0">JSONParser</span><span>&nbsp;</span><span class="c0">parser</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">JSONParser</span><span class="c4">()</span><span class="c7">;</span><span><br></span><span class="c0">Hashtable</span><span>&nbsp;</span><span class="c0">response</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c0">parser</span><span>.</span><span class="c0">parse</span><span class="c4">(</span><span class="c0">reader</span><span class="c4">)</span><span class="c7">;</span><span><br></span></p><p class="c3"><span>The response is a Hashtable containing a nested hierarchy of Vectors, Strings and numbers to represent the content of the submitted JSON. To extract the data from a specific path just iterate the Hashtable keys and recurs into it. Notice that there is a webservices demo as part of the kitchen sink showing the returned data as a Tree structure.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>An alternative approach is to use the static data parse() method of the JSONParser class and implement a callback parser e.g.:</span></p><p class="c3 c5"><span></span></p><p class="c3"><span class="c0">JSONParser</span><span>.</span><span class="c0">parse</span><span class="c4">(</span><span class="c0">reader</span><span>, </span><span class="c0">callback</span><span class="c4">)</span><span class="c7">;</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>Notice that a static version of the method is used! The callback object is an instance of the JSONParseCallback interface which includes multiple methods. These will be invoked by the parser to indicate internal parser states in a similar way to a traditional XML SAX event based parser.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>Advanced readers might want to dig deeper into the processing language contributed by Eric Coolman which allows for xpath like expressions when parsing JSON &amp; XML. Read about it in</span><span><a class="c15" href="http://gadgets.coolman.ca/new-feature-introduction-expression-language-for-json-and-xml/">&nbsp;</a></span><span class="c8"><a class="c15" href="http://gadgets.coolman.ca/new-feature-introduction-expression-language-for-json-and-xml/">Eric&#39;s blog</a></span><span>.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>Last but not least is the XML parser, to use it just create an instance of the XMLParser class and invoke parse:</span></p><p class="c3 c5"><span></span></p><p class="c3"><span class="c0">XMLParser</span><span>&nbsp;</span><span class="c0">parser</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">XMLParser</span><span class="c4">()</span><span class="c7">;</span><span><br></span><span class="c0">Element</span><span>&nbsp;</span><span class="c0">elem</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c0">parser</span><span>.</span><span class="c0">parse</span><span class="c4">(</span><span class="c0">reader</span><span class="c4">)</span><span class="c7">;</span><span><br></span></p><p class="c3"><span>The element contains children and attributes and represents a tag element within the XML document or even the document itself. You can iterate over the XML tree to extract the data from within the XML file.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>On the opposite side of the XMLParser we also have the XMLWriter class which can generate XML from the Element hierarachy thus allowing a developer to mutate (modify) the elements and save them to a writer stream.</span></p><h2 class="c3"><a name="h.5q5b33obmp47"></a><span class="c10">Cached Data Service</span></h2><p class="c3"><span>The CachedDataService pretty useful, say you have an image stored locally as image X. Normally the ImageDownloadService will never check for update if it has a local cache of the image. This isn&#39;t a bad thing, its pretty efficient.</span></p><p class="c3"><span>However, it might be important to update the image if it changed but you don&#39;t want to fetch the whole thing...</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>The cached data service will fetch data if it isn&#39;t cached locally and cache it. When you &quot;refresh&quot; it will send a special HTTP request that will only send back the data if it has been updated since the last refresh:</span></p><p class="c3"><span class="c0">CachedDataService</span><span>.</span><span class="c0">register</span><span class="c4">()</span><span class="c7">;</span><span><br></span><span class="c0">CachedData</span><span>&nbsp;</span><span class="c0">d</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c4">(</span><span class="c0">CachedData</span><span class="c4">)</span><span class="c0">Storage</span><span>.</span><span class="c0">getInstance</span><span class="c4">()</span><span>.</span><span class="c0">readObject</span><span class="c4">(</span><span class="c22">&quot;LocallyCachedData&quot;</span><span class="c4">)</span><span class="c7">;</span><span><br> <br></span><span class="c9">if</span><span class="c4">(</span><span class="c0">d</span><span>&nbsp;</span><span class="c7">==</span><span>&nbsp;</span><span class="c9">null</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp;</span><span class="c0">d</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">CachedData</span><span class="c4">()</span><span class="c7">;</span><span><br> &nbsp;</span><span class="c0">d</span><span>.</span><span class="c0">setUrl</span><span class="c4">(</span><span class="c22">&quot;http://....&quot;</span><span class="c4">)</span><span class="c7">;</span><span><br></span><span class="c4">}</span><span><br></span><span class="c11">// check if there is a new version of this on the server</span><span><br></span><span class="c0">CachedDataService</span><span>.</span><span class="c0">updateData</span><span class="c4">(</span><span class="c0">d</span><span>, </span><span class="c9">new</span><span>&nbsp;</span><span class="c0">ActionListener</span><span class="c4">()</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp;</span><span class="c9">public</span><span>&nbsp;</span><span class="c9">void</span><span>&nbsp;</span><span class="c0">actionPerformed</span><span class="c4">(</span><span class="c0">ActionEvent</span><span>&nbsp;</span><span class="c0">ev</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c11">// invoked when/if the data arrives, we now have a fresh cache </span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">Storage</span><span>.</span><span class="c0">getInstance</span><span class="c4">()</span><span>.</span><span class="c0">writeObject</span><span class="c4">(</span><span class="c22">&quot;LocallyCachedData&quot;</span><span>, </span><span class="c0">d</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp;</span><span class="c4">}</span><span><br></span><span class="c4">})</span><span class="c7">;</span></p><h2 class="c3"><a name="h.9l64bmper8wn"></a><span class="c10">GZIP</span></h2><p class="c3"><span>Gzip is a very common compression format based on the lz algorithm, it&rsquo;s used by web servers around the world to compress data. </span></p><p class="c3"><span>Codename One</span><span>&nbsp;supports GZipInputStream and GZipOutputStream which allow you to compress data seamlessly into a stream and extract compressed data from a stream. This is very useful and can be apprlied to every arbitrary stream.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>Codename One also features a GZConnectionRequest which will automatically unzip an HTTP response if it is indeed gzipped. Notice that some devices (iOS) always request gzip&rsquo;ed data and always decompress it for us, however in the case of iOS it doesn&rsquo;t remove the gziped header. The GZConnectionRequest is aware of such behaviors so its better to use that when connecting to the network (if applicable).</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>By default GZConnectionRequest doesn&#39;t request gzipped data (only unzips it when its received) but its pretty easy to do so just add the HTTP header Accept-Encoding: gzip e.g.:</span></p><p class="c3"><span class="c0">GZConnectionRequest</span><span>&nbsp;</span><span class="c0">con</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">GZConnectionRequest</span><span class="c4">()</span><span class="c7">;</span><span><br></span><span class="c0">con</span><span>.</span><span class="c0">addRequestHeader</span><span class="c4">(</span><span class="c22">&quot;Accept-Encoding&quot;</span><span>, </span><span class="c22">&quot;gzip&quot;</span><span class="c4">)</span><span class="c7">;</span><span><br></span></p><p class="c3"><span>Do the rest as usual and you should have smaller responses by potential.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>This capability isn&rsquo;t in the global ConnectionRequest since it will increase the size of the distribution to everyone. If you do not need the gzip functionality the obfuscator will just strip it out during the compile process. </span></p><p class="c3 c5"><span></span></p><hr style="page-break-before:always;display:none;"><p class="c3 c5"><span></span></p><h1 class="c3"><a name="h.ld5sseu7svpb"></a><span class="c10">Miscellaneous Features</span></h1><p class="c3"><span>This chapter covers various features of Codename One that don&rsquo;t quite fit in any of the other chapters.</span></p><h2 class="c3"><a name="h.t9gxf0cvhfkf"></a><span class="c10">SMS, Dial (Phone) &amp; E-Mail</span></h2><p class="c3"><span>SMS calling and emailing seem unrelated yet they are all available in Display as a one line command specifically Display&rsquo;s sendSMS, sendMessage &amp; dial all allow you to perform these common tasks usually by launching the native application that performs the task.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>The email messaging API has an additional ability within the Message class in sendMessageViaCloud. This method allows you to use the Codename One cloud to send an email without end user interaction. This feature is available to pro users only since it makes use of the Codename One cloud:</span></p><p class="c3"><span class="c0">Message</span><span>&nbsp;</span><span class="c0">m</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Message</span><span class="c4">(</span><span class="c22">&quot;&lt;html&gt;&lt;body&gt;Check out &lt;a href=</span><span class="c59">\&quot;</span><span class="c22">http://www.codenameone.com/</span><span class="c59">\&quot;</span><span class="c22">&gt;Codename One&lt;/a&gt;&lt;/body&gt;&lt;/html&gt;&quot;</span><span class="c4">)</span><span class="c7">;</span><span><br></span><span class="c0">m</span><span>.</span><span class="c0">setMimeType</span><span class="c4">(</span><span class="c0">Message</span><span>.</span><span class="c0">MIME_HTML</span><span class="c4">)</span><span class="c7">;</span><span><br> <br></span><span class="c11">// notice that we provide a plain text alternative as well in the send method</span><span><br></span><span class="c9">boolean</span><span>&nbsp;</span><span class="c0">success</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c0">m</span><span>.</span><span class="c0">sendMessageViaCloudSync</span><span class="c4">(</span><span class="c22">&quot;Codename One&quot;</span><span>, </span><span class="c22">&quot;destination@domain.com&quot;</span><span>, </span><span class="c22">&quot;Name Of User&quot;</span><span>, </span><span class="c22">&quot;Message Subject&quot;</span><span>, <br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c22">&quot;Check out Codename One at http://www.codenameone.com/&quot;</span><span class="c4">)</span><span class="c7">;</span></p><h2 class="c3"><a name="h.vupmnxpkvdii"></a><span class="c10">Contacts API</span></h2><p class="c3"><span>The contacts API provides us with the means to query the phone&rsquo;s addressbook, delete elements from it and create new entries into it. To get the platform specific list of contacts you can use String[] contacts = ContactsManager.getAllContacts(); </span></p><p class="c3 c5"><span></span></p><p class="c3"><span>Notice that on some platforms this will prompt the user for permissions (specifically iOS) and the user might choose not to grant that permission. To detect whether this is the case you can invoke isContactsPermissionGranted() </span><span class="c9">after</span><span>&nbsp;invoking getAllContacts(). This can help you adapt your error message to the user.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>Once you have a Contact you can use the getContactById method, however the default method is a bit slow if you want to pull a large batch of contacts. The solution for this is to only extract the data that you need via getContactById(String id, boolean includesFullName, </span></p><p class="c3"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; boolean includesPicture, boolean includesNumbers, boolean includesEmail, </span></p><p class="c3"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; boolean includeAddress)</span></p><p class="c3"><span>Here you can specify true only for the attributes the at actually matter to you.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>You can use createContact(String firstName, String familyName, String officePhone, String homePhone, String cellPhone, String email) to add a new contact and deleteContact(String id) to delete a contact. </span></p><p class="c3 c5"><span></span></p><p class="c3"><span>If you just want to display all contacts in a List to allow the user to pick a contact you can use the ContactsModel with a set of ID&rsquo;s.</span></p><h2 class="c3"><a name="h.dhwbgzywq8l6"></a><span class="c10">Localization &amp; Internationalization (L10N &amp; I18N)</span></h2><p class="c3"><span>Localization (l10n) means adapting to a locale which is more than just translating to a specific language but also to a specific language within environment e.g. en_US != en_UK.</span></p><p class="c3"><span>Internationalization (i18n) is the process of creating one application that adapts to all locales and regional requirements.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>Codename One supports automatic localization and seamless internationalization of an application using the Codename One design tool. Notice that although localization is performed in the design tool most features apply to hand coded applications as well. The only exception is the tool that automatically extracts localizable strings from the GUI.</span></p><p class="c3"><img height="372" src="images/image27.png" width="624"></p><p class="c3"><span>To translate an application you need to use the localization section of the Codename One Designer. This section features a handy tool to extract localization called Sync With UI, its a great tool to get you started assuming you used the GUI builder.</span></p><p class="c3"><span>You can add additional languages by pressing the Add Locale button.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>This generates &ldquo;bundles&rdquo; in the resource file which are really just key/value pairs mapping a string in one language to another language. </span></p><p class="c3"><span>You can install the bundle using code like this:</span></p><p class="c3"><span class="c0">UIManager</span><span>.</span><span class="c0">getInstance</span><span class="c4">()</span><span>.</span><span class="c0">setBundle</span><span class="c4">(</span><span class="c0">res</span><span>.</span><span class="c0">getL10N</span><span class="c4">(</span><span class="c22">&quot;l10n&quot;</span><span>, </span><span class="c0">local</span><span class="c4">))</span><span class="c7">;</span></p><p class="c3"><span>Once installed a resource bundle takes over the UI and every string set to a label (and label like components) will be automatically localized based on the bundle. You can also use the localize method of UIManager to perform localization on your own.</span></p><p class="c3"><span>An exception for localization is the TextField/TextArea components both of which contain user data, in those cases the text will not be localized to avoid accidental localization of user input.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>You can preview localization in the theme mode within the Codename One designer by selecting advanced and picking your locale then clicking the theme again.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>You can export and import resource bundles as standard Java properties files, CSV and XML. The formats are pretty standard for most localization shops, the XML format Codename One supports is the one used by Android&rsquo;s string bundles which means most shops should easily localize it.</span></p><h3 class="c3"><a name="h.3iugqinslaci"></a><span class="c10">Localization Manager</span></h3><p class="c3"><span>The LocalizationManager class includes a multitude of features useful for common localization tasks. It allows formatting numbers/dates &amp; time based on platform locale. It also provides a great deal of the information you need such as the language/locale information you need to pick the proper resource bundle.</span></p><h3 class="c3"><a name="h.5il7j9jwgniy"></a><span class="c10">RTL/Bidi</span></h3><p class="c3"><span>RTL stands for right to left, in the world of internationalization it refers to languages that are written from right to left (e.g. Hebrew, Arabic etc.). </span></p><p class="c3"><span>Bidi stands for bi-directional and represents the real problem of RTL text layout. In these languages numbers and latin text is still written LTR (left to right) thus the cursor and the language direction flows in two opposite directions.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>The main issue in the Codename One world is in the layouts which need to reverse on the fly. Codename One supports this via an RTL flag on all components that is derived from the global RTL flag in UIManager. </span></p><p class="c3"><span>Resource bundles can also include special case constant @rtl which indicates if a language is written from right to left. This allows everything to automatically reverse. </span></p><p class="c3 c5"><span></span></p><p class="c3"><span>When in RTL mode the UI will be the exact mirror so WEST will become EAST, RIGHT will become LEFT and this would be true for paddings/margins as well. </span></p><p class="c3"><span>If you have a special case where you don&rsquo;t want this behavior you will need to wrap it with an isRTL check.</span></p><h2 class="c3"><a name="h.e6yl1s5jb2yh"></a><span class="c10">Location - GPS</span></h2><p class="c3"><span>The location API allows us to track changes in device location or the current user position. The most basic usage for the API allows us to just fetch a device Location, notice that this API is blocking and can take a while to return:</span></p><p class="c3"><span class="c0">Location</span><span>&nbsp;</span><span class="c0">position</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c0">LocationManager</span><span>.</span><span class="c0">getLocationManager</span><span class="c4">()</span><span>.</span><span class="c0">getCurrentLocationSync</span><span class="c4">()</span><span class="c7">;</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>Notice that there is a method called getCurrentLocation() which will return the current state immediately and might not be accurate for some cases.</span></p><p class="c3"><span>The getCurrentLocationSync() method is very good for cases where you only need to fetch a current location once and not repeatedly query location. It activates the GPS then turns it off to avoid excessive battery usage. However, if an application needs to track motion or position over time it should use the location listener API to track location as such:</span></p><p class="c3"><span class="c9">public</span><span>&nbsp;</span><span class="c0">MyListener</span><span>&nbsp;</span><span class="c9">implements</span><span>&nbsp;</span><span class="c0">LocationListener</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp;</span><span class="c9">public</span><span>&nbsp;</span><span class="c9">void</span><span>&nbsp;</span><span class="c0">locationUpdated</span><span class="c4">(</span><span class="c0">Location</span><span>&nbsp;</span><span class="c0">location</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c11">// update UI etc.</span><span><br> &nbsp; &nbsp;</span><span class="c4">}</span><span><br><br> &nbsp; &nbsp;</span><span class="c9">public</span><span>&nbsp;</span><span class="c9">void</span><span>&nbsp;</span><span class="c0">providerStateChanged</span><span class="c4">(</span><span class="c9">int</span><span>&nbsp;</span><span class="c0">newState</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c11">// handle status changes/errors appropriately</span><span><br> &nbsp; &nbsp;</span><span class="c4">}</span><span><br></span><span class="c4">}</span><span><br></span><span class="c0">LocationManager</span><span>.</span><span class="c0">getLocationManager</span><span class="c4">()</span><span>.</span><span class="c0">setLocationListener</span><span class="c4">(</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">MyListener</span><span class="c4">())</span><span class="c7">;</span></p><h2 class="c3"><a name="h.bhvclly0c6qz"></a><span class="c10">Capture - Photos, Video, Audio</span></h2><p class="c3"><span>The capture API allows us to use the camera to capture photographs or the microphone to capture audio. It even includes an API for video capture.</span></p><p class="c3"><span>The API itself couldn&rsquo;t be simpler:</span></p><p class="c3"><span class="c0">String</span><span>&nbsp;</span><span class="c0">filePath</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c0">Capture</span><span>.</span><span class="c0">capturePhoto</span><span class="c4">()</span><span class="c7">;</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>Just captures and returns a path to a photo (temporary file which you should copy locally), you can either open it using the Image class or copy it using the FileSystemStorage class. Video and audio include similar API&rsquo;s.</span></p><h2 class="c3"><a name="h.l7cqdxdwd6cr"></a><span class="c10">Codescan - Barcode &amp; QR code scanner</span></h2><p class="c3"><span>The codescan package allows us to scan barcodes and qr codes using the device camera. Notice that on weaker devices (feature phones and RIM devices) this functionality is very limited and as of this writing this feature isn&rsquo;t available on Windows Phone.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>Using the API is quite simple, just invoke the call to scan and implement the proper callback to get the results:</span></p><p class="c3"><span class="c9">if</span><span class="c4">(</span><span class="c0">CodeScanner</span><span>.</span><span class="c0">getInstance</span><span class="c4">()</span><span>&nbsp;</span><span class="c7">!=</span><span>&nbsp;</span><span class="c9">null</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp;</span><span class="c9">final</span><span>&nbsp;</span><span class="c0">Button</span><span>&nbsp;</span><span class="c0">qrCode</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Button</span><span class="c4">(</span><span class="c22">&quot;Scan QR&quot;</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp;</span><span class="c0">cnt</span><span>.</span><span class="c0">addComponent</span><span class="c4">(</span><span class="c0">qrCode</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp;</span><span class="c0">qrCode</span><span>.</span><span class="c0">addActionListener</span><span class="c4">(</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">ActionListener</span><span class="c4">()</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">public</span><span>&nbsp;</span><span class="c9">void</span><span>&nbsp;</span><span class="c0">actionPerformed</span><span class="c4">(</span><span class="c0">ActionEvent</span><span>&nbsp;</span><span class="c0">evt</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">CodeScanner</span><span>.</span><span class="c0">getInstance</span><span class="c4">()</span><span>.</span><span class="c0">scanQRCode</span><span class="c4">(</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">ScanResult</span><span class="c4">()</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">public</span><span>&nbsp;</span><span class="c9">void</span><span>&nbsp;</span><span class="c0">scanCompleted</span><span class="c4">(</span><span class="c0">String</span><span>&nbsp;</span><span class="c0">contents</span><span>, </span><span class="c0">String</span><span>&nbsp;</span><span class="c0">formatName</span><span>, </span><span class="c9">byte</span><span class="c4">[]</span><span>&nbsp;</span><span class="c0">rawBytes</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">qrCode</span><span>.</span><span class="c0">setText</span><span class="c4">(</span><span class="c22">&quot;QR: &quot;</span><span>&nbsp;</span><span class="c7">+</span><span>&nbsp;</span><span class="c0">contents</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">}</span><span><br><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">public</span><span>&nbsp;</span><span class="c9">void</span><span>&nbsp;</span><span class="c0">scanCanceled</span><span class="c4">()</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">}</span><span><br><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">public</span><span>&nbsp;</span><span class="c9">void</span><span>&nbsp;</span><span class="c0">scanError</span><span class="c4">(</span><span class="c9">int</span><span>&nbsp;</span><span class="c0">errorCode</span><span>, </span><span class="c0">String</span><span>&nbsp;</span><span class="c0">message</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">}</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">})</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">}</span><span><br> &nbsp; &nbsp;</span><span class="c4">})</span><span class="c7">;</span><span><br> &nbsp; &nbsp;</span><span class="c9">final</span><span>&nbsp;</span><span class="c0">Button</span><span>&nbsp;</span><span class="c0">barCode</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Button</span><span class="c4">(</span><span class="c22">&quot;Scan Barcode&quot;</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp;</span><span class="c0">cnt</span><span>.</span><span class="c0">addComponent</span><span class="c4">(</span><span class="c0">barCode</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp;</span><span class="c0">barCode</span><span>.</span><span class="c0">addActionListener</span><span class="c4">(</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">ActionListener</span><span class="c4">()</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">public</span><span>&nbsp;</span><span class="c9">void</span><span>&nbsp;</span><span class="c0">actionPerformed</span><span class="c4">(</span><span class="c0">ActionEvent</span><span>&nbsp;</span><span class="c0">evt</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">CodeScanner</span><span>.</span><span class="c0">getInstance</span><span class="c4">()</span><span>.</span><span class="c0">scanBarCode</span><span class="c4">(</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">ScanResult</span><span class="c4">()</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">public</span><span>&nbsp;</span><span class="c9">void</span><span>&nbsp;</span><span class="c0">scanCompleted</span><span class="c4">(</span><span class="c0">String</span><span>&nbsp;</span><span class="c0">contents</span><span>, </span><span class="c0">String</span><span>&nbsp;</span><span class="c0">formatName</span><span>, </span><span class="c9">byte</span><span class="c4">[]</span><span>&nbsp;</span><span class="c0">rawBytes</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">barCode</span><span>.</span><span class="c0">setText</span><span class="c4">(</span><span class="c22">&quot;Bar: &quot;</span><span>&nbsp;</span><span class="c7">+</span><span>&nbsp;</span><span class="c0">contents</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">}</span><span><br><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">public</span><span>&nbsp;</span><span class="c9">void</span><span>&nbsp;</span><span class="c0">scanCanceled</span><span class="c4">()</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">}</span><span><br><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">public</span><span>&nbsp;</span><span class="c9">void</span><span>&nbsp;</span><span class="c0">scanError</span><span class="c4">(</span><span class="c9">int</span><span>&nbsp;</span><span class="c0">errorCode</span><span>, </span><span class="c0">String</span><span>&nbsp;</span><span class="c0">message</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">}</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">})</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">}</span><span><br> &nbsp; &nbsp;</span><span class="c4">})</span><span class="c7">;</span><span><br></span><span class="c4">}</span><span><br></span></p><p class="c3"><span>&nbsp;</span></p><h2 class="c3"><a name="h.x470awke4krg"></a><span class="c10">Analytics Integration</span></h2><p class="c3"><span>One of the features in Codename One is builtin support for analytic instrumentation. Currently Codename One has builtin support for</span><span><a class="c15" href="https://www.google.com/analytics/">&nbsp;</a></span><span class="c8"><a class="c15" href="https://www.google.com/analytics/">Google Analytics</a></span><span>&nbsp;which provides reasonable enough statistics of application usage.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>The infrastructure is there to support any other form of analytics solution of your own choosing.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>Analytics is pretty seamless for a GUI builder application since navigation occurs via the Codename One API and can be logged without developer interaction. However, to begin the instrumentation one needs to add the line:</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>&nbsp; &nbsp; &nbsp; </span><span class="c0">AnalyticsService</span><span>.</span><span class="c0">init</span><span class="c4">(</span><span class="c0">agent</span><span>, </span><span class="c0">domain</span><span class="c4">)</span><span class="c7">;</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>To get the value for the agent value just create a Google Analytics account and add a domain, then copy and paste the string that looks something like UA-99999999-8 from the console to the agent string. Once this is in place you should start receiving statistic events for the application.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>If your application is not a GUI builder application or you would like to send more detailed data you can use the Analytics.visit() method to indicate that you are entering a specific page.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>In 2013 Google introduced an improved application level analytics API that is specifically built for mobile apps. However, it requires a slightly different API from the server. You can activate this specific mode by invoking setAppsMode(true).</span></p><p class="c3"><span>When using this mode you can also report errors and crashes to the Google analytics server using the sendCrashReport(Throwable, String message, boolean fatal) method. &nbsp; </span></p><h2 class="c37 c3"><a name="h.8rj3eg89s4rm"></a><span class="c10">Facebook Support (legacy)</span><img height="135" src="images/image37.png" width="189"></h2><p class="c3"><span>Facebook uses the </span><span class="c8"><a class="c15" href="http://developers.facebook.com/docs/reference/api/">Graph API</a></span><sup><a href="#ftnt4" name="ftnt_ref4">[4]</a></sup><span>&nbsp;which is a JSON based web protocol that allows developers to traverse the information within facebook and update it. To work with Facebook you need to read about the process of creating a facebook application. A Facebook application identifies your application to Facebook and allows them to associate invocations/changes made by your application with you.</span></p><p class="c3"><span>The main issue with Facebook is the authentication process which requires the OAuth standard to validate against the website. OAuth forces the user to login to the website and approve the permissions requested by the application, once these credentials are given in the web browser the application is given a token which it can use for all its calls. This token can be reused between invocations so the user doesn&rsquo;t need to re-enter his password. However, the token needs to be revalidated in case the user is logged out or changed his settings.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>The main class of interest is FaceBookAccess with which we obtain the token, notice that in the following code you should probably update all the strings to match your actual needs: </span></p><p class="c3 c5"><span></span></p><p class="c3"><span>&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">FaceBookAccess</span><span>.</span><span class="c0">setClientId</span><span class="c4">(</span><span class="c22">&quot;132970916828080&quot;</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">FaceBookAccess</span><span>.</span><span class="c0">setClientSecret</span><span class="c4">(</span><span class="c22">&quot;6aaf4c8ea791f08ea15735eb647becfe&quot;</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">FaceBookAccess</span><span>.</span><span class="c0">setRedirectURI</span><span class="c4">(</span><span class="c22">&quot;http://www.codenameone.com/&quot;</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">FaceBookAccess</span><span>.</span><span class="c0">setPermissions</span><span class="c4">(</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">String</span><span class="c4">[]{</span><span class="c22">&quot;user_location&quot;</span><span>, </span><span class="c22">&quot;user_photos&quot;</span><span>, </span><span class="c22">&quot;friends_photos&quot;</span><span>, </span><span class="c22">&quot;publish_stream&quot;</span><span>, </span><span class="c22">&quot;read_stream&quot;</span><span>, </span><span class="c22">&quot;user_relationships&quot;</span><span>, </span><span class="c22">&quot;user_birthday&quot;</span><span>,<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c22">&quot;friends_birthday&quot;</span><span>, </span><span class="c22">&quot;friends_relationships&quot;</span><span>, </span><span class="c22">&quot;read_mailbox&quot;</span><span>, </span><span class="c22">&quot;user_events&quot;</span><span>, </span><span class="c22">&quot;friends_events&quot;</span><span>, </span><span class="c22">&quot;user_about_me&quot;</span><span class="c4">})</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">FaceBookAccess</span><span>.</span><span class="c0">getInstance</span><span class="c4">()</span><span>.</span><span class="c0">showAuthentication</span><span class="c4">(</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">ActionListener</span><span class="c4">()</span><span>&nbsp;</span><span class="c4">{</span><span><br><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">public</span><span>&nbsp;</span><span class="c9">void</span><span>&nbsp;</span><span class="c0">actionPerformed</span><span class="c4">(</span><span class="c0">ActionEvent</span><span>&nbsp;</span><span class="c0">evt</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">if</span><span>&nbsp;</span><span class="c4">(</span><span class="c0">evt</span><span>.</span><span class="c0">getSource</span><span class="c4">()</span><span>&nbsp;</span><span class="c9">instanceof</span><span>&nbsp;</span><span class="c0">String</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">String</span><span>&nbsp;</span><span class="c0">token</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c4">(</span><span class="c0">String</span><span class="c4">)</span><span>&nbsp;</span><span class="c0">evt</span><span>.</span><span class="c0">getSource</span><span class="c4">()</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">String</span><span>&nbsp;</span><span class="c0">expires</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c0">Oauth2</span><span>.</span><span class="c0">getExpires</span><span class="c4">()</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">System</span><span>.</span><span class="c0">out</span><span>.</span><span class="c0">println</span><span class="c4">(</span><span class="c22">&quot;recived a token &quot;</span><span>&nbsp;</span><span class="c7">+</span><span>&nbsp;</span><span class="c0">token</span><span>&nbsp;</span><span class="c7">+</span><span>&nbsp;</span><span class="c22">&quot; which expires on &quot;</span><span>&nbsp;</span><span class="c7">+</span><span>&nbsp;</span><span class="c0">expires</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">Storage</span><span>.</span><span class="c0">getInstance</span><span class="c4">()</span><span>.</span><span class="c0">writeObject</span><span class="c4">(</span><span class="c22">&quot;autheniticated&quot;</span><span>, </span><span class="c22">&quot;true&quot;</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">if</span><span class="c4">(</span><span class="c0">main</span><span>&nbsp;</span><span class="c7">!=</span><span>&nbsp;</span><span class="c9">null</span><span class="c4">){</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">main</span><span>.</span><span class="c0">showBack</span><span class="c4">()</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">}</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">}</span><span>&nbsp;</span><span class="c9">else</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">Exception</span><span>&nbsp;</span><span class="c0">err</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c4">(</span><span class="c0">Exception</span><span class="c4">)</span><span>&nbsp;</span><span class="c0">evt</span><span>.</span><span class="c0">getSource</span><span class="c4">()</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">err</span><span>.</span><span class="c0">printStackTrace</span><span class="c4">()</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">Dialog</span><span>.</span><span class="c0">show</span><span class="c4">(</span><span class="c22">&quot;Error&quot;</span><span>, </span><span class="c22">&quot;An error occurred while logging in: &quot;</span><span>&nbsp;</span><span class="c7">+</span><span>&nbsp;</span><span class="c0">err</span><span>, </span><span class="c22">&quot;OK&quot;</span><span>, </span><span class="c9">null</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">}</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">}</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">})</span><span class="c7">;</span><span><br><br></span></p><p class="c3"><span>You can then get access to the wall by doing something like:</span></p><p class="c3 c5"><span></span></p><p class="c3"><span class="c0">FaceBookAccess</span><span>.</span><span class="c0">getInstance</span><span class="c4">()</span><span>.</span><span class="c0">getWallFeed</span><span class="c4">(</span><span class="c22">&quot;me&quot;</span><span>, </span><span class="c4">(</span><span class="c0">DefaultListModel</span><span class="c4">)</span><span>&nbsp;</span><span class="c0">wall</span><span>.</span><span class="c0">getModel</span><span class="c4">()</span><span>, </span><span class="c9">null</span><span class="c4">)</span><span class="c7">;</span></p><p class="c3 c5"><span></span></p><p class="c3"><span class="c6 c24">Native Facebook Support</span></p><p class="c3"><span>The previous section covered support for Facebook that at the time of this writing works on all platforms, however this support is being deprecated partially by Facebook. Currently the old method will still work but developers are expected to migrate to the native login over time.</span></p><p class="c3"><span>The after deprecation the FaceBookAccess class should still work for the most part, the only major change should be in the login process.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>If you just want something in the form of a &quot;share button&quot; we suggest you refer to the builtin share button which uses native sharing on both iOS and Android.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>The new Facebook API is very simple, in fact as of this writing it includes only 5 methods. There are really 3 significant methods in the API, login/logout and isLoggedIn(). You can also bind a listener to login event callbacks which is really pretty simple. The difficulty isn&#39;t here though. </span></p><p class="c3 c5"><span></span></p><p class="c3"><span>Before you get started you need to go to the page on Facebook for app creation:</span><span class="c8"><a class="c15" href="https://developers.facebook.com/apps">https://developers.facebook.com/apps</a></span></p><p class="c3"><span>Here you should create your app and make sure to enter the package name of the Codename One application both for the section marked as Bundle Id and Package Name (see the red highlighting in the figure below).</span></p><p class="c3 c5"><span></span></p><p class="c3"><img height="696" src="images/image06.png" width="624"></p><p class="c3 c5"><span></span></p><p class="c3"><span>Once you do that you need to define the build argument facebook.appId to the app ID in the Facebook application (see the red marking at the top of the image).</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>Now when you send a build and invoke FacebookConnect.login() this should work as expected on iOS but it will fail on Android. The reason is that Facebook requires a hash from Android developers to identify your app. However, their instructions to generate said hash don&#39;t work... The only way we could find for generating the hash properly is on an Android device. </span></p><p class="c3"><span>If you have DDMS you can connect the device to your machine and see the printouts including the hashcode (notice the hashcode will change whenever you send a debug build so make sure to only use Android release builds). You can also get the value of the hashcode from Display.getInstance().getProperty(&quot;facebook_hash&quot;, null);</span></p><p class="c3"><span>This will return the hash only on Android of course.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>You can take this hash and paste it into the section marked Key Hashes in the native android app section. Notice you can have multiple hashes if you have more than one certificates or applications.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>Once login is successful the existing facebook API&#39;s from the Facebook package should work pretty much as you would expect. </span></p><h2 class="c3"><a name="h.9rdpor3lm5z"></a><span class="c10">SideMenuBar - Hamburger Sidemenu</span></h2><p class="c3"><span>The Hambuger sidemenu is the menu style popularized by the Facebook app, its called a Hamburger because of the 3 line icon on the top left resembling a hamburger patty between two buns (get it: its a side menu...)!</span></p><p class="c3"><span>To enable the side menu set the command behavior to side menu and it just works. You can do this by setting the commandBehavior theme constant in the Codename One designer to &quot;Side&quot; or via the setCommandBehavior method in Display. You will also need to invoke:</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>Then just add commands and watch them make their way into the side menu allowing you to build any sort of navigation you desire.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>The side menu goes much deeper than that, e.g.</span><span>&nbsp;the ability to place a side menu on the right, top or on both sides of the title (as in the facebook app). You can accomplish this by using code such as cmd.putClientProperty(SideMenuBar.COMMAND_PLACEMENT_KEY, SideMenuBar.COMMAND_PLACEMENT_VALUE_RIGHT);</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>Or as you might see in this more detailed example where you can just swap menu placements on the fly:</span></p><p class="c3"><span class="c9">public</span><span>&nbsp;</span><span class="c9">class</span><span>&nbsp;</span><span class="c0">MyApplication</span><span>&nbsp;</span><span class="c4">{</span><span><br> <br> &nbsp; &nbsp;</span><span class="c9">private</span><span>&nbsp;</span><span class="c0">Form</span><span>&nbsp;</span><span class="c0">current</span><span class="c7">;</span><span><br> &nbsp; &nbsp;</span><span class="c9">private</span><span>&nbsp;</span><span class="c0">enum</span><span>&nbsp;</span><span class="c0">SideMenuMode</span><span>&nbsp;</span><span class="c4">{</span><span>&nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">SIDE</span><span>, </span><span class="c0">RIGHT_SIDE</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">public</span><span>&nbsp;</span><span class="c0">String</span><span>&nbsp;</span><span class="c0">getCommandHint</span><span class="c4">()</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">return</span><span>&nbsp;</span><span class="c0">SideMenuBar</span><span>.</span><span class="c0">COMMAND_PLACEMENT_VALUE_RIGHT</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">}</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">}</span><span>, </span><span class="c0">BOTH_SIDES</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">boolean</span><span>&nbsp;</span><span class="c0">b</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">public</span><span>&nbsp;</span><span class="c0">String</span><span>&nbsp;</span><span class="c0">getCommandHint</span><span class="c4">()</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">b</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c7">!</span><span class="c0">b</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">if</span><span class="c4">(</span><span class="c0">b</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">return</span><span>&nbsp;</span><span class="c9">null</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">}</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">return</span><span>&nbsp;</span><span class="c0">SideMenuBar</span><span>.</span><span class="c0">COMMAND_PLACEMENT_VALUE_RIGHT</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">}</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">}</span><span>, </span><span class="c0">TOP</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">public</span><span>&nbsp;</span><span class="c0">String</span><span>&nbsp;</span><span class="c0">getCommandHint</span><span class="c4">()</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">return</span><span>&nbsp;</span><span class="c0">SideMenuBar</span><span>.</span><span class="c0">COMMAND_PLACEMENT_VALUE_TOP</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">}</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">}</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">public</span><span>&nbsp;</span><span class="c0">String</span><span>&nbsp;</span><span class="c0">getCommandHint</span><span class="c4">()</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">return</span><span>&nbsp;</span><span class="c9">null</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">}</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">public</span><span>&nbsp;</span><span class="c9">void</span><span>&nbsp;</span><span class="c0">updateCommand</span><span class="c4">(</span><span class="c0">Command</span><span>&nbsp;</span><span class="c0">c</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">String</span><span>&nbsp;</span><span class="c0">h</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c0">getCommandHint</span><span class="c4">()</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">if</span><span class="c4">(</span><span class="c0">h</span><span>&nbsp;</span><span class="c7">==</span><span>&nbsp;</span><span class="c9">null</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">return</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">}</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">c</span><span>.</span><span class="c0">putClientProperty</span><span class="c4">(</span><span class="c0">SideMenuBar</span><span>.</span><span class="c0">COMMAND_PLACEMENT_KEY</span><span>, </span><span class="c0">h</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">}</span><span><br> &nbsp; &nbsp;</span><span class="c4">}</span><span class="c7">;</span><span><br> <br> &nbsp; &nbsp;</span><span class="c0">SideMenuMode</span><span>&nbsp;</span><span class="c0">mode</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c0">SideMenuMode</span><span>.</span><span class="c0">SIDE</span><span class="c7">;</span><span><br> &nbsp; &nbsp;<br> &nbsp; &nbsp;</span><span class="c9">public</span><span>&nbsp;</span><span class="c9">void</span><span>&nbsp;</span><span class="c0">init</span><span class="c4">(</span><span class="c0">Object</span><span>&nbsp;</span><span class="c0">context</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">try</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">Resources</span><span>&nbsp;</span><span class="c0">theme</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c0">Resources</span><span>.</span><span class="c0">openLayered</span><span class="c4">(</span><span class="c22">&quot;/theme&quot;</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">UIManager</span><span>.</span><span class="c0">getInstance</span><span class="c4">()</span><span>.</span><span class="c0">setThemeProps</span><span class="c4">(</span><span class="c0">theme</span><span>.</span><span class="c0">getTheme</span><span class="c4">(</span><span class="c0">theme</span><span>.</span><span class="c0">getThemeResourceNames</span><span class="c4">()[</span><span class="c14">0</span><span class="c4">]))</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">UIManager</span><span>.</span><span class="c0">getInstance</span><span class="c4">()</span><span>.</span><span class="c0">getLookAndFeel</span><span class="c4">()</span><span>.</span><span class="c0">setMenuBarClass</span><span class="c4">(</span><span class="c0">SideMenuBar</span><span>.</span><span class="c9">class</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">Display</span><span>.</span><span class="c0">getInstance</span><span class="c4">()</span><span>.</span><span class="c0">setCommandBehavior</span><span class="c4">(</span><span class="c0">Display</span><span>.</span><span class="c0">COMMAND_BEHAVIOR_SIDE_NAVIGATION</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; </span><span class="c4">}</span><span class="c9">catch</span><span class="c4">(</span><span class="c0">IOException</span><span>&nbsp;</span><span class="c0">e</span><span class="c4">){</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">e</span><span>.</span><span class="c0">printStackTrace</span><span class="c4">()</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">}</span><span><br> &nbsp; &nbsp;</span><span class="c4">}</span><span><br> &nbsp; &nbsp;<br> &nbsp; &nbsp;</span><span class="c9">public</span><span>&nbsp;</span><span class="c9">void</span><span>&nbsp;</span><span class="c0">start</span><span class="c4">()</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">if</span><span class="c4">(</span><span class="c0">current</span><span>&nbsp;</span><span class="c7">!=</span><span>&nbsp;</span><span class="c9">null</span><span class="c4">){</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">current</span><span>.</span><span class="c0">show</span><span class="c4">()</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">return</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">}</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">newHiForm</span><span class="c4">(</span><span class="c22">&quot;Clean&quot;</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp;</span><span class="c4">}</span><span><br> <br> &nbsp; &nbsp;</span><span class="c9">void</span><span>&nbsp;</span><span class="c0">newHiForm</span><span class="c4">(</span><span class="c0">String</span><span>&nbsp;</span><span class="c0">title</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">Form</span><span>&nbsp;</span><span class="c0">hi</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Form</span><span class="c4">(</span><span class="c0">title</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">hi</span><span>.</span><span class="c0">setName</span><span class="c4">(</span><span class="c0">title</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">buildSideMenu</span><span class="c4">(</span><span class="c0">hi</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">hi</span><span>.</span><span class="c0">show</span><span class="c4">()</span><span class="c7">;</span><span><br> &nbsp; &nbsp;</span><span class="c4">}</span><span><br> &nbsp; &nbsp;<br> &nbsp; &nbsp;</span><span class="c9">void</span><span>&nbsp;</span><span class="c0">buildSideMenu</span><span class="c4">(</span><span class="c0">Form</span><span>&nbsp;</span><span class="c0">hi</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">Command</span><span>&nbsp;</span><span class="c0">changeToSideMenuLeft</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Command</span><span class="c4">(</span><span class="c22">&quot;Left Menu&quot;</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">public</span><span>&nbsp;</span><span class="c9">void</span><span>&nbsp;</span><span class="c0">actionPerformed</span><span class="c4">(</span><span class="c0">ActionEvent</span><span>&nbsp;</span><span class="c0">ev</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">mode</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c0">SideMenuMode</span><span>.</span><span class="c0">SIDE</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">newHiForm</span><span class="c4">(</span><span class="c22">&quot;Left&quot;</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">}</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">}</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">Command</span><span>&nbsp;</span><span class="c0">changeToSideMenuRight</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Command</span><span class="c4">(</span><span class="c22">&quot;Right Menu&quot;</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">public</span><span>&nbsp;</span><span class="c9">void</span><span>&nbsp;</span><span class="c0">actionPerformed</span><span class="c4">(</span><span class="c0">ActionEvent</span><span>&nbsp;</span><span class="c0">ev</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">mode</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c0">SideMenuMode</span><span>.</span><span class="c0">RIGHT_SIDE</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">newHiForm</span><span class="c4">(</span><span class="c22">&quot;Right&quot;</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">}</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">}</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">Command</span><span>&nbsp;</span><span class="c0">changeToSideMenuBoth</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Command</span><span class="c4">(</span><span class="c22">&quot;Both Menu&quot;</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">public</span><span>&nbsp;</span><span class="c9">void</span><span>&nbsp;</span><span class="c0">actionPerformed</span><span class="c4">(</span><span class="c0">ActionEvent</span><span>&nbsp;</span><span class="c0">ev</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">mode</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c0">SideMenuMode</span><span>.</span><span class="c0">BOTH_SIDES</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">newHiForm</span><span class="c4">(</span><span class="c22">&quot;Both&quot;</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">}</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">}</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">Command</span><span>&nbsp;</span><span class="c0">changeToSideMenuTop</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Command</span><span class="c4">(</span><span class="c22">&quot;Top Menu&quot;</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">public</span><span>&nbsp;</span><span class="c9">void</span><span>&nbsp;</span><span class="c0">actionPerformed</span><span class="c4">(</span><span class="c0">ActionEvent</span><span>&nbsp;</span><span class="c0">ev</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">mode</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c0">SideMenuMode</span><span>.</span><span class="c0">TOP</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">newHiForm</span><span class="c4">(</span><span class="c22">&quot;Top&quot;</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">}</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">}</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">Command</span><span>&nbsp;</span><span class="c0">dummy</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Command</span><span class="c4">(</span><span class="c22">&quot;Dummy 1&quot;</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">Command</span><span>&nbsp;</span><span class="c0">dummy2</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Command</span><span class="c4">(</span><span class="c22">&quot;Dummy 2&quot;</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">mode</span><span>.</span><span class="c0">updateCommand</span><span class="c4">(</span><span class="c0">dummy</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">hi</span><span>.</span><span class="c0">addCommand</span><span class="c4">(</span><span class="c0">dummy</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">mode</span><span>.</span><span class="c0">updateCommand</span><span class="c4">(</span><span class="c0">dummy2</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">hi</span><span>.</span><span class="c0">addCommand</span><span class="c4">(</span><span class="c0">dummy2</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">mode</span><span>.</span><span class="c0">updateCommand</span><span class="c4">(</span><span class="c0">changeToSideMenuLeft</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">hi</span><span>.</span><span class="c0">addCommand</span><span class="c4">(</span><span class="c0">changeToSideMenuLeft</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">mode</span><span>.</span><span class="c0">updateCommand</span><span class="c4">(</span><span class="c0">changeToSideMenuRight</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">hi</span><span>.</span><span class="c0">addCommand</span><span class="c4">(</span><span class="c0">changeToSideMenuRight</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">mode</span><span>.</span><span class="c0">updateCommand</span><span class="c4">(</span><span class="c0">changeToSideMenuBoth</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">hi</span><span>.</span><span class="c0">addCommand</span><span class="c4">(</span><span class="c0">changeToSideMenuBoth</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">mode</span><span>.</span><span class="c0">updateCommand</span><span class="c4">(</span><span class="c0">changeToSideMenuTop</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">hi</span><span>.</span><span class="c0">addCommand</span><span class="c4">(</span><span class="c0">changeToSideMenuTop</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp;</span><span class="c4">}</span><span><br> &nbsp; &nbsp;<br> &nbsp; &nbsp;</span><span class="c9">public</span><span>&nbsp;</span><span class="c9">void</span><span>&nbsp;</span><span class="c0">stop</span><span class="c4">()</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">current</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c0">Display</span><span>.</span><span class="c0">getInstance</span><span class="c4">()</span><span>.</span><span class="c0">getCurrent</span><span class="c4">()</span><span class="c7">;</span><span><br> &nbsp; &nbsp;</span><span class="c4">}</span><span><br> &nbsp; &nbsp;<br> &nbsp; &nbsp;</span><span class="c9">public</span><span>&nbsp;</span><span class="c9">void</span><span>&nbsp;</span><span class="c0">destroy</span><span class="c4">()</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp;</span><span class="c4">}</span><span>&nbsp;<br></span><span class="c4">}</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>One of the nice things about the side menu bar is that you can add just about anything into the side menu bar by using the SideComponent property e.g.:</span></p><p class="c3"><span class="c0">Component</span><span>&nbsp;</span><span class="c0">customCmp</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;...</span><span class="c7">;</span><span><br></span><span class="c0">Command</span><span>&nbsp;</span><span class="c0">cmd</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;...</span><span class="c7">;</span><span><br></span><span class="c0">cmd</span><span>.</span><span class="c0">putClientProperty</span><span class="c4">(</span><span class="c22">&quot;SideComponent&quot;</span><span>, </span><span class="c0">customCmp</span><span class="c4">)</span><span class="c7">;</span><span><br></span></p><p class="c3"><span>This is remarkably useful but its also somewhat problematic for some developers, the SideMenuBar is pretty complex so if we just set a button to the custom component and invoke showForm() we will not have any transition out of the side menu bar. Thankfully we added several options to solve these issues.</span></p><p class="c3"><span>The first is actionable which you enable by just turning it on as such: </span><span class="c0">cmd</span><span>.</span><span class="c0">putClientProperty</span><span class="c4">(</span><span class="c22">&quot;Actionable&quot;</span><span>, </span><span class="c0">Boolean</span><span>.</span><span class="c0">TRUE</span><span class="c4">)</span><span class="c7">;</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>This effectively means that the custom component will look exactly the same, but when it&#39;s touched/clicked it will act like any other command on the list. This uses a lead component trick to make the hierarchy (or component) in customCmp act as a single action.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>There are several additional options that allow you to just bind action events and then &quot;manage&quot; the SideMenuBar e.g.:</span></p><ul class="c45 lst-kix_fbuo614ks7sr-0 start"><li class="c3 c20 c12"><span>SideMenuBar.isShowing() - useful for writing generic code that might occur when the SideMenuBar is on the form.</span></li><li class="c3 c20 c12"><span>SideMenuBar.closeCurrentMenu() - allows you to close the menu, this is useful if you are not navigating to another form.</span></li><li class="c3 c20 c12"><span>SideMenuBar.closeCurrentMenu(Runnable) - just like closeCurrentMenu() however it will invoke the run() method when complete. This allows you to navigate to another form after the menu close animation completed.</span></li></ul><p class="c3 c5"><span></span></p><p class="c3"><span>The TitleCommand property allows you to flag a command as something you would want to see in the right hand title area and not within the SideMenu area. Just place it into a component using cmd.putClientProperty(&quot;TitleCommand&quot;, Boolean.TRUE);</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>Last but not least we also have some helpful theme constants within the side menu bar that you might not be familiar with:</span></p><ul class="c45 lst-kix_urdoyt9ubq3s-0 start"><li class="c3 c20 c12"><span>sideMenuImage - pretty obvious, this is the hamburger image we use to open the menu.</span></li><li class="c3 c20 c12"><span>sideMenuPressImage - this is the pressed version of the image above. Its optional and the sideMenuImage will be used by default.</span></li><li class="c3 c20 c12"><span>rightSideMenuImage/rightSideMenuPressImage - identical to the sideMenuImage/sideMenuPressImage only specific to the right side navigation.</span></li><li class="c3 c20 c12"><span>sideMenuFoldedSwipeBool - by default a swipe will open the side menu. You can disable that functionality by setting this theme constant to false.</span></li><li class="c3 c20 c12"><span>hideBackCommandBool - often comes up in discussion, allows hiding the back command from the side menu so it only appears in the hardware button/iOS navigation.</span></li><li class="c3 c20 c12"><span>hideLeftSideMenuBool - allows hiding the left hand menu which is useful for a case of top or right based side menu.</span></li><li class="c3 c20 c12"><span>sideMenuShadowImage - image that represents the drop shadow drawn on the side of the menu.</span></li><li class="c3 c20 c12"><span>sideMenuTensileDragBool - allows disabling the tensile draw within the side menu command area</span></li></ul><h2 class="c3"><a name="h.nrj77fbzb9kb"></a><span class="c10">Pull To Refresh</span></h2><p class="c3"><span>Pull to refresh is the common UI paradigm that Twitter popularized where the user can pull down the form/container to receive an update. Adding this to Codename One couldn&rsquo;t be simpler! Just invoke addPullToRefresh(Runnable) on a scrollable container (or form) and the runnable method will be invoked when the refresh operation occurs. </span></p><h2 class="c3"><a name="h.4r6f1y2qd3hg"></a><span class="c10">Infinite Scroll Adapter</span></h2><p class="c3"><span>P</span><span>ull to refresh is only half the story although it is a really nice feature useful for pulling new updates. Codename One has the ability to have infinite (or really large lists) but making a container with arbitrary components grow infinitely is normally a bit of a hassle.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>In some of the newer web UI&#39;s such as Tumblr and Twitter the data is fetched dynamically when you reach a fixed location in the form, this is a simpler approach than the one demonstrated by the list model but in some regards its more practical. A user can&#39;t just start jumping around and fetching the entire list, this works better with most REST API&#39;s and is pretty powerful on its own.</span><img height="205" src="images/image94.jpg" width="250"></p><p class="c3 c5"><span></span></p><p class="c3"><span>For this purpose we created the InfiniteScrollAdapter which is a really simple class that binds to a container and gives you the ability to add components to it. The API is remarkably simple you just invoke the static method InfiniteScrollAdapter.createInfiniteScroll() with an empty container then wait for it to invoke the runnable you submit to it.</span></p><p class="c3"><span>The runnable will be invoked on the EDT so be sure not to block it (unless you use an AndWait or invokeAndBlock method), in it you can fetch data and once you are done add any set of components you like using the addMoreComponents() method. Notice that you shouldn&#39;t just add/remove components on your own since this will mess up the container.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>Here is a simple example that adds buttons and sleeps to simulated slow network activity:</span></p><p class="c3"><span class="c9">final</span><span>&nbsp;</span><span class="c0">Form</span><span>&nbsp;</span><span class="c0">test</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Form</span><span class="c4">(</span><span class="c22">&quot;Infinite&quot;</span><span class="c4">)</span><span class="c7">;</span><span><br> <br></span><span class="c0">test</span><span>.</span><span class="c0">setLayout</span><span class="c4">(</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">BoxLayout</span><span class="c4">(</span><span class="c0">BoxLayout</span><span>.</span><span class="c0">Y_AXIS</span><span class="c4">))</span><span class="c7">;</span><span><br></span><span class="c0">InfiniteScrollAdapter</span><span>.</span><span class="c0">createInfiniteScroll</span><span class="c4">(</span><span class="c0">test</span><span>.</span><span class="c0">getContentPane</span><span class="c4">()</span><span>, </span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Runnable</span><span class="c4">()</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp;</span><span class="c9">private</span><span>&nbsp;</span><span class="c9">int</span><span>&nbsp;</span><span class="c0">counter</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c14">1</span><span class="c7">;</span><span><br> &nbsp; &nbsp;</span><span class="c9">public</span><span>&nbsp;</span><span class="c9">void</span><span>&nbsp;</span><span class="c0">run</span><span class="c4">()</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c11">// simulate network latency</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">Display</span><span>.</span><span class="c0">getInstance</span><span class="c4">()</span><span>.</span><span class="c0">invokeAndBlock</span><span class="c4">(</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Runnable</span><span class="c4">()</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">public</span><span>&nbsp;</span><span class="c9">void</span><span>&nbsp;</span><span class="c0">run</span><span class="c4">()</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">try</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">Thread</span><span>.</span><span class="c0">sleep</span><span class="c4">(</span><span class="c14">2000</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">}</span><span>&nbsp;</span><span class="c9">catch</span><span class="c4">(</span><span class="c0">InterruptedException</span><span>&nbsp;</span><span class="c0">e</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{}</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">}</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">})</span><span class="c7">;</span><span><br> <br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">Component</span><span class="c4">[]</span><span>&nbsp;</span><span class="c0">buttons</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Component</span><span class="c4">[</span><span class="c14">20</span><span class="c4">]</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">for</span><span class="c4">(</span><span class="c9">int</span><span>&nbsp;</span><span class="c0">iter</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c14">0</span><span>&nbsp;</span><span class="c7">;</span><span>&nbsp;</span><span class="c0">iter</span><span>&nbsp;</span><span class="c7">&lt;</span><span>&nbsp;</span><span class="c0">buttons</span><span>.</span><span class="c0">length</span><span>&nbsp;</span><span class="c7">;</span><span>&nbsp;</span><span class="c0">iter</span><span class="c7">++</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">buttons</span><span class="c4">[</span><span class="c0">iter</span><span class="c4">]</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Button</span><span class="c4">(</span><span class="c22">&quot;Button: &quot;</span><span>&nbsp;</span><span class="c7">+</span><span>&nbsp;</span><span class="c0">counter</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">counter</span><span class="c7">++;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">}</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">InfiniteScrollAdapter</span><span>.</span><span class="c0">addMoreComponents</span><span class="c4">(</span><span class="c0">test</span><span>.</span><span class="c0">getContentPane</span><span class="c4">()</span><span>, </span><span class="c0">buttons</span><span>, </span><span class="c9">true</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp;</span><span class="c4">}</span><span><br></span><span class="c4">})</span><span class="c7">;</span><span><br></span><span class="c0">test</span><span>.</span><span class="c0">show</span><span class="c4">()</span><span class="c7">;</span></p><hr style="page-break-before:always;display:none;"><p class="c3 c5"><span></span></p><h1 class="c3"><a name="h.fb3e21f697it"></a><span class="c10">Performance, Size &amp; Debugging</span></h1><h2 class="c3"><a name="h.16ip0cegdvy1"></a><span class="c10">Reducing Resource File Size</span></h2><p class="c3"><span>Its easy to lose track of size/performance when you are working within the comforts of a visual tool like the Codename One Designer. When optimizing resource files you need to keep in mind one thing: it&#39;s all about image sizes.</span></p><p class="c3"><span>Images will take up 95-99% of the resource file size, everything else is peanuts in comparison.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>Like every optimization the first rule is to reduce the size of the biggest images which will provide your biggest improvements, for this purpose I introduced the ability to see image sizes in KB (see the menu option Images -&gt; Image Sizes (KB).</span></p><p class="c3"><span>This produces a list of images sorted by size with the amount of KB each takes. Often the top entries will be multi-images which include HD resolution values that can be pretty large. These very high resolution images take up a significant amount of space! Just going to the multi-images, selecting the unnecessary resolutions &amp; deleting these HUGE images (note you can see the size in KB at the top right side in the image viewer) saves a HUGE amount of space.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>Next you </span><span>should probably </span><span>use the &quot;Delete Unused Images&quot; menu option (it&rsquo;s also under the Images menu). This tool allows detecting and deleting images that aren&rsquo;t used within the theme/GUI.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>If you have a very large image that is opaque you might want to consider converting it to JPEG and replacing the built in PNG&rsquo;s. JPEG&#39;s work on most devices and are much smaller. </span></p><p class="c3 c5"><span></span></p><p class="c3"><span>You can use the excellent OptiPng tool to optimize image files right from the Codename One designer. To use this feature you need to install</span><span><a class="c15" href="http://optipng.sourceforge.net/">&nbsp;</a></span><span class="c8"><a class="c15" href="http://optipng.sourceforge.net/">OptiPng</a></span><span>&nbsp;then select &quot;Images -&gt; Launch OptiPng&quot; from the menu. Once you do that the tool will automatically optimize all your PNG&#39;s.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>When faced with size issues make sure to check the size of your res file, if your JAR file is large open it with a tool such as 7-zip and sort elements by size. Start reviewing which elements justify the size overhead. </span></p><h2 class="c37 c3"><a name="h.cbag7ym5xf3"></a><span class="c10">Improving Performance</span></h2><p class="c3"><span>There are quite a few things you can do as a developer in order to improve the performance and memory footprint of a Codename One application. This sometimes depends on specific device behaviors but some of the tips here are true for all devices. </span></p><p class="c3"><span>The simulator contains some tools to measure performance overhead of a specific component and also detect EDT blocking logic. Other than that follow these guidelines to create more performance code:</span></p><p class="c3 c5"><span></span></p><ul class="c45 lst-kix_5qvklmjzc0c1-0 start"><li class="c3 c20 c12"><span>Avoid round rect borders - they have a huge overhead on all platforms. Use image borders instead (counter intuitively they are MUCH faster).</span></li><li class="c3 c20 c12"><span>Bitmap fonts are pretty slow on many platforms, we recommend avoiding them. Methods such as stringWidth, can also be very slow on some platforms. This means that reflowing the UI (preferred size calls string width) can become very expensive.</span></li><li class="c3 c20 c12"><span>Read carefully the Image section and make sure to make conscious choices regarding the image types you choose.</span></li><li class="c3 c20 c12"><span>Some older devices (symbian mostly) perform very badly with translucent images.</span></li><li class="c3 c20 c12"><span>Use larger images when tiling or building image borders, using a 1 pixel (or event a few pixels) wide or high image and tiling it repeatedly can be very expensive.</span></li></ul><h2 class="c37 c3"><a name="h.gzv0iqlm9ait"></a><span class="c10">Performance Monitor</span></h2><p class="c3"><span>The performance monitor tool is accessible via the menu option in the simulator and it pops up a dialog showing some information that can help you in debugging slow performing UI&rsquo;s. </span></p><p class="c3"><span>You will be able to see the amount of time and amount of paint operations that occur for every component as well as printouts about every image allocation and RAM statistics for said allocations.</span></p><p class="c3 c5"><span class="c10"></span></p><h2 class="c3"><a name="h.oe5snqwo6192"></a><span class="c10">Network Speed</span><img height="89" src="images/image31.png" width="250"></h2><p class="c3"><span>This feature is actually more useful for general debugging however it is sometimes useful to simulate a slow/disconnected network to see how this affects performance. For this purpose the Codename One simulator allows you to slow down networking or even fake a disconnected network to see how your application handles such cases.</span></p><h2 class="c37 c3"><a name="h.cnr6tswj28gi"></a><span class="c10">Debugging Codename One Sources</span></h2><p class="c3"><span>One of &nbsp;the biggest advantages in Codename One over pretty much any other mobile solution is that its realistically open source. Realistically means that even an average developer can dig into 90% of the Codename One source code, change it and contribute to it!</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>However, sadly most developers don&#39;t even try and most of those who do focus only on the aspect of building for devices rather than the advantage of much easier debugging. By incorporating the Codename One sources you can instantly see the effect of changes we made in SVN without waiting for a plugin update. You can, debug into Codename One code which can help you pinpoint issues in your own code and also in resolving issues in Codename One!</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>Start by </span><span class="c8"><a class="c15" href="http://code.google.com/p/codenameone/source/checkout">checking out the Codename One sources from SVN</a></span><span>, use the following URL </span><span class="c8"><a class="c15" href="http://codenameone.googlecode.com/svn/trunk/">http://codenameone.googlecode.com/svn/trunk/ </a></span><span>which should allow for anonymous readonly checkout of the latest sources!</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>Now that you have the sources open the CodenameOne project that is in the root and the JavaSEPort that is in the Ports directory using NetBeans. Notice that these projects might be marked in red and you will probably need to right click on them and select Resolve Reference Problems. You will probably need to fix the JDK settings, and the libraries to point at the correct local paths. </span></p><p class="c3"><span>Once you do that you can build both projects without a problem. Notice that you will probably get a minor compilation error due to a build.xml line in the Codename One project, don&#39;t fret. Just edit that line and comment it out.</span><img height="98" src="images/image87.png" width="250"></p><p class="c3 c5"><span></span></p><p class="c3"><span>Select any Codename One project in NetBeans, right click and click properties.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>Now select &quot;Libraries&quot; from the tree to your right select all the jars within the compile tab. Click remove.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>Click the Add Project button and select the project for Codename One in the SVN.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>Now select the Run tab and remove the JavaSE.jar file from there by selecting it and pressing remove. </span></p><p class="c3 c5"><span></span></p><p class="c3"><span>Add the JavaSEPort project using the Add Project button and then use the Move Up button to make sure it is at the top most position since it needs to override everything else at runtime.</span><img height="76" src="images/image04.png" width="250"></p><p class="c3 c5"><span></span></p><p class="c3"><span>You are now good to go, now you can just place breakpoints within Codename One source code, edit it and test it. You can step into it with &nbsp;the debugger which can save you a lot of time when tracking a problem.</span></p><h2 class="c3"><a name="h.bh99ptqu9isj"></a><span class="c10">Device Testing Framework/Unit Testing</span></h2><p class="c3"><span>Codename One includes a built in testing framework and test recorder tool as part of the simulator. This allows developers to build both functional and unit test executions on top of Codename One and even send tests to execute on the device (pro-only feature). &nbsp;</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>To get started with this tool launch the application and open the test recorder in the simulator menu. Once you press record a test will be generate for you as you use the application. </span></p><p class="c3"><span>Tests using the Codename One testing package to manipulate the Codename One UI programmatically and perform various assertions.</span></p><h2 class="c3"><a name="h.t1gaxk28tb8y"></a><span class="c10">EDT Error Handler and sendLog</span></h2><p class="c3"><span>Handling errors or exceptions in a deployed product is pretty difficult, most users would just throw away your app and some would give it a negative rating without providing you with the opportunity to actually fix the bug that might have happened.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>Google improved on this a bit by allowing users to submit stack traces for failures on Android devices but this requires the users approval for sending personal data which you might not need if you only want to receive the stack trace and maybe some basic application state (without violating user privacy).</span><img height="115" src="images/image73.png" width="193"></p><p class="c3 c5"><span></span></p><p class="c3"><span>For quite some time Codename One had a very powerful feature that allows you to both catch and report such errors, the error reporting feature uses the Codename One cloud which is exclusive for pro/enterprise users. Normally in Codename One we catch all exceptions on the EDT (which is where most exceptions occur) and just display an error to the user &nbsp;as you can see in the picture. Unfortunately this isn&#39;t very helpful to us as developers who really want to see the stack, furthermore we might prefer the user doesn&#39;t see an error message at all!</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>Codename One allows us to grab all exceptions that occur on the EDT and handle them using the method addEdtErrorHandler in the Display class. Adding this to the Log&#39;s ability to report errors directly to us and we can get a very powerful tool that will send us an email with information when a crash occurs!</span></p><p class="c3 c5"><span></span></p><p class="c3"><span class="c0">Display</span><span>.</span><span class="c0">getInstance</span><span class="c4">()</span><span>.</span><span class="c0">addEdtErrorHandler</span><span class="c4">(</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">ActionListener</span><span class="c4">()</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp;</span><span class="c9">public</span><span>&nbsp;</span><span class="c9">void</span><span>&nbsp;</span><span class="c0">actionPerformed</span><span class="c4">(</span><span class="c0">ActionEvent</span><span>&nbsp;</span><span class="c0">evt</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">evt</span><span>.</span><span class="c0">consume</span><span class="c4">()</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">Log</span><span>.</span><span class="c0">p</span><span class="c4">(</span><span class="c22">&quot;Exception in AppName version &quot;</span><span>&nbsp;</span><span class="c7">+</span><span>&nbsp;</span><span class="c0">Display</span><span>.</span><span class="c0">getInstance</span><span class="c4">()</span><span>.</span><span class="c0">getProperty</span><span class="c4">(</span><span class="c22">&quot;AppVersion&quot;</span><span>, </span><span class="c22">&quot;Unknown&quot;</span><span class="c4">))</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">Log</span><span>.</span><span class="c0">p</span><span class="c4">(</span><span class="c22">&quot;OS &quot;</span><span>&nbsp;</span><span class="c7">+</span><span>&nbsp;</span><span class="c0">Display</span><span>.</span><span class="c0">getInstance</span><span class="c4">()</span><span>.</span><span class="c0">getPlatformName</span><span class="c4">())</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">Log</span><span>.</span><span class="c0">p</span><span class="c4">(</span><span class="c22">&quot;Error &quot;</span><span>&nbsp;</span><span class="c7">+</span><span>&nbsp;</span><span class="c0">evt</span><span>.</span><span class="c0">getSource</span><span class="c4">())</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">Log</span><span>.</span><span class="c0">p</span><span class="c4">(</span><span class="c22">&quot;Current Form &quot;</span><span>&nbsp;</span><span class="c7">+</span><span>&nbsp;</span><span class="c0">Display</span><span>.</span><span class="c0">getInstance</span><span class="c4">()</span><span>.</span><span class="c0">getCurrent</span><span class="c4">()</span><span>.</span><span class="c0">getName</span><span class="c4">())</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">Log</span><span>.</span><span class="c0">e</span><span class="c4">((</span><span class="c0">Throwable</span><span class="c4">)</span><span class="c0">evt</span><span>.</span><span class="c0">getSource</span><span class="c4">())</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">Log</span><span>.</span><span class="c0">sendLog</span><span class="c4">()</span><span class="c7">;</span><span><br> &nbsp; &nbsp;</span><span class="c4">}</span><span><br></span><span class="c4">})</span><span class="c7">;</span><span><br></span></p><p class="c3 c5"><span></span></p><hr style="page-break-before:always;display:none;"><h1 class="c3 c63"><a name="h.oy8tnzo2aopl"></a></h1><h1 class="c3"><a name="h.5ptiwp44cd0x"></a><span class="c10">Advanced Topics/Under The Hood</span></h1><p class="c3"><span>This chapter covers the more advanced topics explaining how Codename One actually works.</span></p><h2 class="c3"><a name="h.y0qxqk6afyqd"></a><span class="c10">Sending Arguments To The Build Server&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></h2><p class="c3"><span>When sending a build to the server you can provide additional parameters to the build which will be incorporated into the build process on the server to hint on multiple different build time options.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>Here is the current list of supported arguments, keep up with this page since we intend to update it frequently with new options:</span></p><p class="c3 c5"><span></span></p><a href="#" name="09c053c864fc28aa4c5f162dea7d734a7bfb7882"></a><a href="#" name="1"></a><table cellpadding="0" cellspacing="0" class="c55"><tbody><tr><td class="c41"><p class="c18 c3"><span class="c9">Name</span></p></td><td class="c39"><p class="c18 c3"><span class="c9">Description</span></p></td></tr><tr class="c42"><td class="c41"><p class="c18 c3 c30"><span>android.debug</span></p></td><td class="c39"><p class="c18 c3 c30"><span>true/false defaults to true - indicates whether to include the debug version in the build</span></p></td></tr><tr class="c42"><td class="c41"><p class="c18 c3 c30"><span>android.release</span></p></td><td class="c39"><p class="c18 c3 c30"><span>true/false defaults to true - indicates whether to include the release version in the build</span></p></td></tr><tr class="c42"><td class="c41"><p class="c18 c3 c30"><span>android.installLocation </span></p></td><td class="c39"><p class="c18 c3 c30"><span>Maps to android:installLocation manifest entry defaults to auto. Can also be set to internalOnly or preferExternal.</span></p></td></tr><tr><td class="c41"><p class="c18 c3"><span>android.min_sdk_version</span></p></td><td class="c39"><p class="c18 c3"><span>defaults to &#39;7&quot;. Used in the manifest to indicate the android:minSdkVersion property.</span></p></td></tr><tr><td class="c41"><p class="c18 c3"><span>android.xapplication</span></p></td><td class="c39"><p class="c18 c3"><span>defaults to an empty string. Allows developers of native Android code to add text within the application block to define things such as widgets, services etc.</span></p></td></tr><tr><td class="c41"><p class="c18 c3"><span>android.xpermissions</span></p></td><td class="c39"><p class="c18 c3"><span>additional permissions for the Android manifest</span></p></td></tr><tr class="c42"><td class="c41"><p class="c18 c3 c30"><span>android.xintent_filter</span></p></td><td class="c39"><p class="c18 c3 c30"><span>Allows adding an intent filter to the main android activity</span></p></td></tr><tr><td class="c41"><p class="c18 c3"><span>android.licenseKey</span></p></td><td class="c39"><p class="c18 c3"><span>The license key for the Android app, this is useful when using features such as purchase to verify that the in-app-purchase wasn&rsquo;t injected by an attacker</span></p></td></tr><tr><td class="c41"><p class="c18 c3"><span>android.stack_size</span></p></td><td class="c39"><p class="c18 c3"><span>Size in bytes for the Android stack thread</span></p></td></tr><tr><td class="c41"><p class="c18 c3"><span>android.statusbar_hidden</span></p></td><td class="c39"><p class="c18 c3"><span>true/false defaults to false. When set to true hides the status bar on Android devices.</span></p></td></tr><tr><td class="c41"><p class="c18 c3"><span>android.sharedUserId</span></p></td><td class="c39"><p class="c18 c3"><span>Allows adding a manifest attribute for the sharedUserId option</span></p></td></tr><tr><td class="c41"><p class="c18 c3"><span>android.sharedUserLabel</span></p></td><td class="c39"><p class="c18 c3"><span>Allows adding a manifest attribute for the sharedUserLabel option</span></p></td></tr><tr class="c42"><td class="c41"><p class="c18 c3 c30"><span>android.web_loading_hidden</span></p></td><td class="c39"><p class="c18 c3 c30"><span>true/false defaults to false - set to true to hide the progress indicator that appears when loading a web page on Android.</span></p></td></tr><tr><td class="c41"><p class="c18 c3"><span>block_server_registration</span></p></td><td class="c39"><p class="c3 c64"><span>true/false flag defaults to false. By default Codename One applications register with our server, setting this to true blocks them from sending information to our cloud. We keep this data for statistical purposes and intend to provide additional installation stats in the future.</span></p></td></tr><tr class="c42"><td class="c41"><p class="c18 c3 c30"><span>android.theme</span></p></td><td class="c39"><p class="c18 c3 c30"><span>Light or Dark defaults to Light. On Android 4+ the default Holo theme is used to render the native widgets in some cases and this indicates whether holo light or holo dark is used. Currently this doesn&rsquo;t affect the Codename One theme but that might change in the future.</span></p></td></tr><tr><td class="c41"><p class="c18 c3"><span>ios.project_type</span></p></td><td class="c39"><p class="c18 c3"><span>one of ios, ipad, iphone (defaults to ios). Indicates whether the resulting binary is targeted to the iphone only or ipad only.</span></p></td></tr><tr><td class="c41"><p class="c18 c3"><span>ios.statusbar_hidden</span></p></td><td class="c39"><p class="c18 c3"><span>true/false defaults to false. Hides the iOS status bar if set to true.</span></p></td></tr><tr><td class="c41"><p class="c18 c3"><span>ios.prerendered_icon</span></p></td><td class="c39"><p class="c18 c3"><span>true/false defaults to false. The iOS build process adapts the submitted icon for iOS conventions (adding an overlay) that might not be appropriate on some icons. Setting this to true leaves the icon unchanged (only scaled).</span></p></td></tr><tr><td class="c41"><p class="c18 c3"><span>ios.application_exits</span></p></td><td class="c39"><p class="c18 c3"><span>true/false (defaults to false). Indicates whether the application should exit immediately on home button press. The default is to exit, leaving the application running is only partially tested at the moment.</span></p></td></tr><tr class="c42"><td class="c41"><p class="c18 c3 c30"><span>ios.themeMode</span></p></td><td class="c39"><p class="c18 c3"><span>default/legacy/modern/auto (defaults to default). Default means you don&#39;t define a theme mode. Currently this is equivalent to legacy. In the future we will switch this to be equivalent to auto. legacy - this will behave like iOS 6 regardless of the device you are running on. modern - this will behave like iOS 7 regardless of the device you are running on. auto - this will behave like iOS 6 on older devices and iOS 7 on newer devices.</span></p></td></tr><tr><td class="c41"><p class="c18 c3"><span>ios.interface_orientation</span></p></td><td class="c39"><p class="c18 c3"><span>UIInterfaceOrientationPortrait by default. Indicates the &nbsp;orientation, one or more of (separated by colon :): UIInterfaceOrientationPortrait, UIInterfaceOrientationPortraitUpsideDown, UIInterfaceOrientationLandscapeLeft, UIInterfaceOrientationLandscapeRight</span></p></td></tr><tr class="c42"><td class="c41"><p class="c18 c3 c30"><span>ios.no_strip</span></p></td><td class="c39"><p class="c18 c3 c30"><span>true/false (defaults to false) a pro only feature that keeps debug information within the built binary thus allowing crash reports from iOS to contain symbol information (only on debug builds not on itunes store builds).</span></p></td></tr><tr class="c42"><td class="c41"><p class="c18 c3"><span>ios.xcode_version</span></p></td><td class="c39"><p class="c18 c3 c30"><span>The version of xcode used on the server. Defaults to 4.5 currently accepts 5.0 as an option and nothing else.</span></p></td></tr><tr class="c42"><td class="c41"><p class="c18 c3"><span>ios.unsafe</span></p></td><td class="c39"><p class="c18 c3"><span>true/false (defaults to false). If you define ios.unsafe=true </span></p><p class="c18 c3"><span>You will get an application that won&#39;t throw ArrayIndexOutOfBounds exceptions or NullPointerExceptions, however it might crash for such cases!</span></p><p class="c18 c3"><span>This is one of those flags that you will need to test REALLY well before using in production, however once enabled it should noticeably improve the performance of Codename One.</span></p></td></tr><tr><td class="c41"><p class="c18 c3"><span>rim.askPermissions</span></p></td><td class="c39"><p class="c18 c3"><span>true/false defaults to true. Indicates whether the user is prompted for permissions on RIM devices.</span></p></td></tr><tr><td class="c41"><p class="c18 c3"><span>crash_protect</span></p></td><td class="c39"><p class="c18 c3"><span>true/false defaults to true. Only applicable to paying users. Instruments an application with on device exception logging which allows the application to send a crash log to the server when it fails.</span></p></td></tr><tr><td class="c41"><p class="c18 c3"><span>rim.ignor_legacy</span></p></td><td class="c39"><p class="c18 c3"><span>true/false defaults to false. When set to true the RIM build targets only 5.0 devices and newer and doesn&rsquo;t build the 4.x version.</span></p></td></tr><tr><td class="c41"><p class="c18 c3"><span>rim.nativeBrowser</span></p></td><td class="c39"><p class="c18 c3"><span>true/false defaults to false. Enables the native blackberry browser on OS 5 or higher. It is disabled by default since it might casue crashes on some cases.</span></p></td></tr><tr class="c42"><td class="c41"><p class="c18 c3 c30"><span>rim.obfuscation</span></p></td><td class="c39"><p class="c18 c3 c30"><span>true/false defaults to false. Obfuscate the JAR before invoking the rimc compiler.</span></p></td></tr><tr><td class="c41"><p class="c18 c3"><span>ios.plistInject</span></p></td><td class="c39"><p class="c18 c3"><span>entries to inject into the iOS plist file during build.</span></p></td></tr><tr class="c42"><td class="c41"><p class="c18 c3 c30"><span>ios.includePush</span></p></td><td class="c39"><p class="c18 c3 c30"><span>true/false (defaults to false). Whether to include the push capabilities in the iOS build. </span></p></td></tr><tr><td class="c41"><p class="c18 c3"><a name="h.200efd2vqa6j"></a><span>noExtraResources</span></p></td><td class="c39"><p class="c18 c3"><a name="h.d3k3flobwh8e"></a><span>true/false (defaults to false). Blocks codename one from injecting its own resources when set to true, the only effect this has is in slightly reducing archive size.</span></p></td></tr><tr><td class="c41"><p class="c18 c3"><a name="h.7q5o7f5xkemp"></a><span>j2me.iconSize</span></p></td><td class="c39"><p class="c18 c3"><a name="h.1aol94p0jngq"></a><span>Defaults to 48x48. The size of the icon in the format of width x height (without the spacing).</span></p></td></tr></tbody></table><h2 class="c37 c3"><a name="h.sbh5atmztfo1"></a><span class="c10">The Architecture Of The GUI Builder</span></h2><p class="c3"><span>The Codename One GUI builder has several unique underlying concepts that aren&#39;t as common among such tools, in this article I will try to clarify some of these basic ideas.</span></p><p class="c3 c5"><span></span></p><p class="c3 c5"><span></span></p><p class="c3"><span class="c6 c46">Basic Concepts</span></p><p class="c3"><span>The Codename One Designer isn&#39;t a standard code generator, the UI is saved within the resource file and can be designed without the source files available. This has several advantages:</span></p><ol class="c45 lst-kix_p4xnuclvtdfq-0 start" start="1"><li class="c3 c20 c12"><span>No fragile generated code to break.</span></li><li class="c3 c20 c12"><span>Designers who don&#39;t know Java can use the tool.</span></li><li class="c3 c20 c12"><span>The &quot;</span><span class="c8"><a class="c15" href="http://www.codenameone.com/codename-one-live.html">Codename One LIVE!</a></span><span>&quot; application can show a live preview of your design as you build it.</span></li><li class="c3 c20 c12"><span>Images and theme settings can be integrated directly with the GUI without concern.</span></li><li class="c3 c20 c12"><span>The tool is consistent since the file you save is the file you run.</span></li><li class="c3 c12 c20"><span>GUI&#39;s/themes can be downloaded dynamically without replacing the application (this can reduce download size).</span></li><li class="c3 c20 c12"><span>It allows for control over application flow. It allows preview within the tool without compilation. </span></li></ol><p class="c3 c5"><span></span></p><p class="c3"><span>This does present some disadvantages and oddities:</span></p><ol class="c45 lst-kix_hi0rwinrlznw-0 start" start="1"><li class="c3 c20 c12"><span>Its harder to integrate custom code into the GUI builder/designer tool.</span></li><li class="c3 c20 c12"><span>The tool is somewhat opaque, there is no &quot;code&quot; you can inspect to see what was accomplished by the tool. </span></li><li class="c3 c20 c12"><span>If the resource file grows too large it can significantly impact memory/performance of a running application.</span></li><li class="c3 c20 c12"><span>Binding between code and GUI isn&#39;t as intuitive and is mostly centralized in a single class.</span></li></ol><p class="c3 c5"><span></span></p><p class="c3"><span>In theory you don&#39;t need to generate any code, you can load any resource file that contains a UI element as you would normally load a Resource file:</span></p><p class="c3 c5"><span></span></p><p class="c3"><span class="c0">Resources</span><span>&nbsp;</span><span class="c0">r</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c0">Resources</span><span>.</span><span class="c0">open</span><span class="c4">(</span><span class="c22">&quot;/myFile.res&quot;</span><span class="c4">)</span><span class="c7">;</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>Then you can just create a UI using the UIBuilder API:</span></p><p class="c3 c5"><span></span></p><p class="c3"><span class="c0">UIBuilder</span><span>&nbsp;</span><span class="c0">u</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">UIBuilder</span><span class="c4">()</span><span class="c7">;</span><span><br></span><span class="c0">Container</span><span>&nbsp;</span><span class="c0">c</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c0">u</span><span>.</span><span class="c0">createContainer</span><span class="c4">(</span><span class="c0">r</span><span>, </span><span class="c22">&quot;uiNameInResource&quot;</span><span class="c4">)</span><span class="c7">;</span><span><br></span></p><p class="c3"><span>(Notice that since Form &amp; Dialog both derive from Container you can just downcast to the appropriate type).</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>This would work for any resource file and can work completely dynamically! E.g. you can download a resource file on the fly and just show the UI that is within the resource file... That is what</span><span><a class="c15" href="http://www.codenameone.com/codename-one-live.html">&nbsp;</a></span><span class="c8"><a class="c15" href="http://www.codenameone.com/codename-one-live.html">Codename One LIVE!</a></span><span>&nbsp;is doing internally.</span></p><p class="c3 c5"><span></span></p><p class="c3 c5"><span></span></p><p class="c3"><span class="c6 c46">IDE Bindings</span></p><p class="c3"><span>While the option of creating a Resource file manually is powerful, its not nearly as convenient as modern GUI builders allow. Developers expect the ability to override events and basic behavior directly from the GUI builder and in mobile applications even the flow for some cases.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>To facilitate IDE integration we decided on using a single Statemachine class, similar to the common controller pattern. We considered multiple classes for every form/dialog/container and eventually decided this would make code generation more cumbersome.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>The designer effectively generates one class &quot;StatemachineBase&quot; which is a subclass of UIBuilder (you can change the name/package of the class in the Codename One properties file at the root of the project). StatemachineBase is generated every time the resource file is saved assuming that the resource file is within the src directory of a Codename One project. Since the state machine base class is always generated, all changes made into it will be overwritten without prompting the user.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>User code is placed within the Statemachine class, which is a subclass of the Statemachine Base class. Hence it is a subclass of UIBuilder!</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>When the resource file is saved the designer generates 2 major types of methods into &nbsp;Statemachine base:</span></p><p class="c3"><span>1. Finders - findX(Container c). A shortcut method to find a component instance within a hierarchy of containers. Effectively this is a shortcut syntax for</span><span><a class="c15" href="https://codenameone.googlecode.com/svn/trunk/CodenameOne/javadoc/com/codename1/ui/util/UIBuilder.html#findByName%28java.lang.String,%20com.codename1.ui.Container%29">&nbsp;</a></span><span class="c8"><a class="c15" href="https://codenameone.googlecode.com/svn/trunk/CodenameOne/javadoc/com/codename1/ui/util/UIBuilder.html#findByName%28java.lang.String,%20com.codename1.ui.Container%29">UIBuilder.findByName()</a></span><span>, its still useful since the method is type safe. Hence if a resource component name is changed the find() method will fail in subsequent compilations.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>2. Callback events - these are various callback methods with common names e.g.: onCreateFormX(), beforeFormX() etc. These will be invoked when a particular event/behavior occurs.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>Within the GUI builder, the event buttons would be enabled and the GUI builder provides a quick and dirty way to just override these methods. To prevent a future case in which the underlying resource file will be changed (e.g formX could be renamed to formY) a super method is invoked e.g. super.onCreateFormX();</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>This will probably be replaced with the @Override annotation when Java 5 features are integrated into Codename One.</span></p><p class="c3 c5"><span></span></p><p class="c3 c5"><span></span></p><p class="c3"><span class="c6 c46">Working With The Generated Code</span></p><p class="c3"><span>The generated code is rather simplistic, e.g. the following code from the tzone demo adds a for the remove button toggle:</span></p><p class="c3 c5"><span></span></p><p class="c3"><span class="c9">protected</span><span>&nbsp;</span><span class="c9">void</span><span>&nbsp;</span><span class="c0">onMainUI_RemoveModeButtonAction</span><span class="c4">(</span><span class="c0">Component</span><span>&nbsp;</span><span class="c0">c</span><span>, </span><span class="c0">ActionEvent</span><span>&nbsp;</span><span class="c0">event</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; </span><span class="c11">// If the resource file changes the names of components this call will break notifying you that you should fix the code</span><span><br> &nbsp; </span><span class="c9">super</span><span>.</span><span class="c0">onMainUI_RemoveModeButtonAction</span><span class="c4">(</span><span class="c0">c</span><span>, </span><span class="c0">event</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; </span><span class="c0">removeMode</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c7">!</span><span class="c0">removeMode</span><span class="c7">;</span><span><br> &nbsp; </span><span class="c0">Container</span><span>&nbsp;</span><span class="c0">friendRoot</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c0">findFriendsRoot</span><span class="c4">(</span><span class="c0">c</span><span>.</span><span class="c0">getParent</span><span class="c4">())</span><span class="c7">;</span><span><br> &nbsp; </span><span class="c0">Dimension</span><span>&nbsp;</span><span class="c0">size</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">null</span><span class="c7">;</span><span><br> &nbsp; </span><span class="c9">if</span><span class="c4">(</span><span class="c0">removeMode</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; </span><span class="c9">if</span><span class="c4">(</span><span class="c0">Display</span><span>.</span><span class="c0">getInstance</span><span class="c4">()</span><span>.</span><span class="c0">getDeviceDensity</span><span class="c4">()</span><span>&nbsp;</span><span class="c7">&gt;</span><span>&nbsp;</span><span class="c0">Display</span><span>.</span><span class="c0">DENSITY_LOW</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">findRemoveModeButton</span><span class="c4">(</span><span class="c0">c</span><span>.</span><span class="c0">getParent</span><span class="c4">())</span><span>.</span><span class="c0">setText</span><span class="c4">(</span><span class="c22">&quot;Finish&quot;</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; </span><span class="c4">}</span><span><br> &nbsp; </span><span class="c4">}</span><span>&nbsp;</span><span class="c9">else</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; </span><span class="c0">size</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Dimension</span><span class="c4">(</span><span class="c14">0</span><span>, </span><span class="c14">0</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; </span><span class="c9">if</span><span class="c4">(</span><span class="c0">Display</span><span>.</span><span class="c0">getInstance</span><span class="c4">()</span><span>.</span><span class="c0">getDeviceDensity</span><span class="c4">()</span><span>&nbsp;</span><span class="c7">&gt;</span><span>&nbsp;</span><span class="c0">Display</span><span>.</span><span class="c0">DENSITY_LOW</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">findRemoveModeButton</span><span class="c4">(</span><span class="c0">c</span><span>.</span><span class="c0">getParent</span><span class="c4">())</span><span>.</span><span class="c0">setText</span><span class="c4">(</span><span class="c22">&quot;Remove&quot;</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; </span><span class="c4">}</span><span><br> &nbsp; </span><span class="c4">}</span><span><br> &nbsp; </span><span class="c9">for</span><span class="c4">(</span><span class="c9">int</span><span>&nbsp;</span><span class="c0">iter</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c14">0</span><span>&nbsp;</span><span class="c7">;</span><span>&nbsp;</span><span class="c0">iter</span><span>&nbsp;</span><span class="c7">&lt;</span><span>&nbsp;</span><span class="c0">friendRoot</span><span>.</span><span class="c0">getComponentCount</span><span class="c4">()</span><span>&nbsp;</span><span class="c7">;</span><span>&nbsp;</span><span class="c0">iter</span><span class="c7">++</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; </span><span class="c0">Container</span><span>&nbsp;</span><span class="c0">currentFriend</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c4">(</span><span class="c0">Container</span><span class="c4">)</span><span class="c0">friendRoot</span><span>.</span><span class="c0">getComponentAt</span><span class="c4">(</span><span class="c0">iter</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; </span><span class="c0">currentFriend</span><span>.</span><span class="c0">setShouldCalcPreferredSize</span><span class="c4">(</span><span class="c9">true</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; </span><span class="c0">currentFriend</span><span>.</span><span class="c0">setFocusable</span><span class="c4">(</span><span class="c7">!</span><span class="c0">removeMode</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; </span><span class="c0">findRemoveFriend</span><span class="c4">(</span><span class="c0">currentFriend</span><span class="c4">)</span><span>.</span><span class="c0">setPreferredSize</span><span class="c4">(</span><span class="c0">size</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; </span><span class="c0">currentFriend</span><span>.</span><span class="c0">animateLayout</span><span class="c4">(</span><span class="c14">800</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; </span><span class="c4">}</span><span><br></span><span class="c4">}</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>As you can see from the code above implementing some basic callbacks within the state machine is rather simple. The method findFriendsRoot(c.getParent()); is used to find the &quot;FriendsRoot&quot; component within the hierarchy, notice that we just pass the parent container to the finder method. If the finder method doesn&#39;t find the friend root under the parent it will find the &quot;true&quot; root component and search there.</span></p><p class="c3"><span>The friends root is a container that contains the full list of our &quot;friends&quot; and within it we can just work with the components that were instantiated by the GUI builder.</span></p><p class="c3"><span>Implementing Custom Components There are two basic approaches for custom components:</span></p><ol class="c45 lst-kix_9gd5k2onmye-0 start" start="1"><li class="c3 c20 c12"><span>Override a specific type - e.g. make all Form&#39;s derive a common base class. </span></li><li class="c3 c20 c12"><span>Replace a deployed instance.</span></li></ol><p class="c3 c5"><span></span></p><p class="c3"><span>The first &nbsp;uses a feature of UIBuilder which allows overriding component types, specifically override</span><span><a class="c15" href="https://codenameone.googlecode.com/svn/trunk/CodenameOne/javadoc/com/codename1/ui/util/UIBuilder.html#createComponentInstance%28java.lang.String,%20java.lang.Class%29">&nbsp;</a></span><span class="c8"><a class="c15" href="https://codenameone.googlecode.com/svn/trunk/CodenameOne/javadoc/com/codename1/ui/util/UIBuilder.html#createComponentInstance%28java.lang.String,%20java.lang.Class%29">createComponentInstance</a></span><span>&nbsp;to return an instance of your desired component e.g.:</span></p><p class="c3 c5"><span></span></p><p class="c3"><span class="c9">protected</span><span>&nbsp;</span><span class="c0">Component</span><span>&nbsp;</span><span class="c0">createComponentInstance</span><span class="c4">(</span><span class="c0">String</span><span>&nbsp;</span><span class="c0">componentType</span><span>, </span><span class="c0">Class</span><span>&nbsp;</span><span class="c0">cls</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; </span><span class="c9">if</span><span class="c4">(</span><span class="c0">cls</span><span>&nbsp;</span><span class="c7">==</span><span>&nbsp;</span><span class="c0">Form</span><span>.</span><span class="c9">class</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; </span><span class="c9">return</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">MyForm</span><span class="c4">()</span><span class="c7">;</span><span><br> &nbsp; </span><span class="c4">}</span><span><br> &nbsp; </span><span class="c9">return</span><span>&nbsp;</span><span class="c9">super</span><span>.</span><span class="c0">createComponentInstance</span><span class="c4">(</span><span class="c0">componentType</span><span>, </span><span class="c0">cls</span><span class="c4">)</span><span class="c7">;</span><span><br></span><span class="c4">}</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>This code allows me to create a unified global form subclass. That&#39;s very useful when I want so global system level functionality that isn&#39;t supported by the designer normally.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>The second approach allows me to replace an existing component:</span></p><p class="c3 c5"><span></span></p><p class="c3"><span class="c9">protected</span><span>&nbsp;</span><span class="c9">void</span><span>&nbsp;</span><span class="c0">beforeSplash</span><span class="c4">(</span><span class="c0">Form</span><span>&nbsp;</span><span class="c0">f</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; </span><span class="c9">super</span><span>.</span><span class="c0">beforeSplash</span><span class="c4">(</span><span class="c0">f</span><span class="c4">)</span><span class="c7">;</span><span><br><br> &nbsp; </span><span class="c0">splashTitle</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c0">findTitleArea</span><span class="c4">(</span><span class="c0">f</span><span class="c4">)</span><span class="c7">;</span><span><br><br> &nbsp; </span><span class="c11">// create a &quot;slide in&quot; effect for the title</span><span><br> &nbsp; </span><span class="c0">dummyTitle</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Label</span><span class="c4">()</span><span class="c7">;</span><span><br> &nbsp; </span><span class="c0">dummyTitle</span><span>.</span><span class="c0">setPreferredSize</span><span class="c4">(</span><span class="c0">splashTitle</span><span>.</span><span class="c0">getPreferredSize</span><span class="c4">())</span><span class="c7">;</span><span><br> &nbsp; </span><span class="c0">f</span><span>.</span><span class="c0">replace</span><span class="c4">(</span><span class="c0">splashTitle</span><span>, </span><span class="c0">dummyTitle</span><span>, </span><span class="c9">null</span><span class="c4">)</span><span class="c7">;</span><span><br></span><span class="c4">}</span><span><br><br></span><span class="c9">protected</span><span>&nbsp;</span><span class="c9">void</span><span>&nbsp;</span><span class="c0">postSplash</span><span class="c4">(</span><span class="c0">Form</span><span>&nbsp;</span><span class="c0">f</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; </span><span class="c9">super</span><span>.</span><span class="c0">postSplash</span><span class="c4">(</span><span class="c0">f</span><span class="c4">)</span><span class="c7">;</span><span><br><br> &nbsp; </span><span class="c0">f</span><span>.</span><span class="c0">replace</span><span class="c4">(</span><span class="c0">dummyTitle</span><span>, </span><span class="c0">splashTitle</span><span>, </span><span class="c0">CommonTransitions</span><span>.</span><span class="c0">createSlide</span><span class="c4">(</span><span class="c0">CommonTransitions</span><span>.</span><span class="c0">SLIDE_VERTICAL</span><span>, </span><span class="c9">true</span><span>, </span><span class="c14">1000</span><span class="c4">))</span><span class="c7">;</span><span><br> &nbsp; </span><span class="c0">splashTitle</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">null</span><span class="c7">;</span><span><br> &nbsp; </span><span class="c0">dummyTitle</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">null</span><span class="c7">;</span><span><br></span><span class="c4">}</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>Notice that we replace the title with an empty label, in this case we do this so we can later replace it while animating the replace behavior thus creating a slide-in effect within the title. It can be replaced though, for every purpose including the purpose of a completely different custom made component. By using the replace method the existing layout constraints are automatically maintained.</span></p><p class="c3"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><h2 class="c3"><a name="h.vex457cyb0ke"></a><span class="c10">Native Interfaces</span></h2><p class="c3"><span>Low level calls into the Codename One system, including support for making platform native API calls. Notice that when we say &quot;native&quot; we do not mean C/C++ always but rather the platforms &quot;native&quot; environment. So in the case of J2ME the Java code will be invoked with full access to the J2ME API&#39;s, in case of iOS an Objective-C message would be sent and so forth.</span></p><p class="c3"><span>Native interfaces are designed to only allow primitive types, Strings, arrays (single dimension only!) of primitives and PeerComponent values. Any other type of parameter/return type is prohibited. However, once in the native layer the native code can act freely and query the Java layer for additional information.</span></p><p class="c3"><span>Furthermore, native methods should avoid features such as overloading, varargs (or any Java 5+ feature for that matter) to allow portability for languages that do not support such features (e.g. C).</span></p><p class="c3"><span>Important! Do not rely on pass by reference/value behavior since they vary between platforms.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>Implementing a native layer effectively means:</span></p><ol class="c45 lst-kix_brpwnnkpklch-0 start" start="1"><li class="c3 c20 c12"><span>Creating an interface that extends NativeInterface and only defines methods with the arguments/return values declared in the previous paragraph.</span></li><li class="c3 c20 c12"><span>Creating the proper native implementation hierarchy based on the call conventions for every platform within the native directory</span></li></ol><p class="c3 c5"><span></span></p><p class="c3"><span>E.g. to create a simple hello world interface do something like:</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9 c27">package com.my.code;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c9">public</span><span>&nbsp;</span><span class="c9">interface</span><span>&nbsp;</span><span class="c0">MyNative</span><span>&nbsp;</span><span class="c9">extends</span><span>&nbsp;</span><span class="c0">NativeInteface</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">String</span><span>&nbsp;</span><span class="c0">helloWorld</span><span class="c4">(</span><span class="c0">String</span><span>&nbsp;</span><span class="c0">hi</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c4">}</span></p><p class="c3"><span>&nbsp; &nbsp; &nbsp; &nbsp;</span></p><p class="c3"><span>Then to use that interface use MyNative my = (MyNative)NativeLookup.create(MyNative.class);</span></p><p class="c3"><span>Notice that for this to work you must implement the native code on all supported platforms!</span></p><p class="c3"><span>To implement the native code use the following convention. For Java based platforms (Android, RIM, J2ME):</span></p><p class="c3"><span>Just create a Java class that resides in the same package as the NativeInterface you created and bares the same name with Impl appended e.g.: MyNativeImpl. So for these platforms the code would look something like this:</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c9 c27">package com.my.code;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c9">public</span><span>&nbsp;</span><span class="c9">class</span><span>&nbsp;</span><span class="c0">MyNativeImpl</span><span>&nbsp;</span><span class="c9">implements</span><span>&nbsp;</span><span class="c0">MyNative</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c9">public</span><span>&nbsp;</span><span class="c0">String</span><span>&nbsp;</span><span class="c0">helloWorld</span><span class="c4">(</span><span class="c0">String</span><span>&nbsp;</span><span class="c0">hi</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c11">// code that can invoke Android/RIM/J2ME respectively</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c4">}</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c4">}</span><span><br> &nbsp; &nbsp; &nbsp; </span></p><p class="c3"><span>Notice that this code will only be compiled on the server build and is not compiled on the client. These sources should be placed under the appropriate folder in the native directory and are sent to the server for compilation.</span></p><p class="c3"><span>For Objective-C, one would need to define a class matching the name of the package and the class name combined where the &quot;.&quot; elements are replaced by underscores. One would need to provide both a header and an &quot;m&quot; file following this convention e.g.:</span></p><p class="c3"><span><br>@</span><span class="c9">interface</span><span>&nbsp;</span><span class="c0">com_my_code_MyNative</span><span>&nbsp;</span><span class="c7">:</span><span>&nbsp;</span><span class="c0">NSObject</span><span>&nbsp;</span><span class="c4">{</span><span><br></span><span class="c4">}</span><span><br></span><span class="c7">-</span><span>&nbsp;</span><span class="c4">(</span><span class="c0">id</span><span class="c4">)</span><span class="c0">init</span><span class="c7">;</span><span><br></span><span class="c7">-</span><span>&nbsp;</span><span class="c4">(</span><span class="c0">NSString</span><span class="c7">*</span><span class="c4">)</span><span class="c0">helloWorld</span><span class="c7">:</span><span class="c4">(</span><span class="c0">NSString</span><span>&nbsp;</span><span class="c7">*</span><span class="c4">)</span><span class="c0">param1</span><span class="c7">;</span><span><br>@</span><span class="c0">end</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>Notice that the parameters in Objective-C are named which has no equivalent in Java. That is why the native method in Objective-C MUST follow the convention of naming the parameters &quot;param1&quot;, &quot;param2&quot; etc. for all the native method implementations. Java arrays are converted to NSData objects to allow features such as length indication. </span></p><p class="c3 c5"><span></span></p><p class="c3"><span>PeerComponent return values are automatically translated to the platform native peer as an expected return value. E.g. for a native method such as this: PeerComponent createPeer();</span></p><p class="c3"><span>Android native implementation would need: View createPeer();</span></p><p class="c3"><span>While RIM would expect: Field createPeer()</span></p><p class="c3"><span>The iphone would need to return a pointer to a view e.g.: - (UIView*)createPeer; J2ME doesn&#39;t support native peers hence any method that returns a native peer would always return null.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>Notice that if you want to use a native library (jar, .a file etc.) just place it within the appropriate native directory and it will be packaged into the final executable. You would only be able to reference it from the native code and not from the Codename One code which means you will need to build native interfaces to access it.</span></p><h3 class="c3"><a name="h.hhmaw4yonao1"></a><span class="c10">Native Permissions </span></h3><p class="c3"><span>Normally permissions in Codename One are pretty seamless, we traverse the bytecode and automatically assign permissions to Android applications based on the API&rsquo;s used by the developer.</span></p><p class="c3"><span>However, when accessing native functionality this just won&rsquo;t work since native code might require specialized permissions and we don&rsquo;t/can&rsquo;t run any serious analysis on it (it can be just about anything).</span></p><p class="c3"><span>So if you require additional permissions in your Android native code you need to define them in the build arguments using the android.xpermissions build argument and setting it to your additional permissions e.g.: &lt;uses-permission android:name=&quot;android.permission.READ_CALENDAR&quot; /&gt; </span></p><h2 class="c3"><a name="h.a6jdm9if0py5"></a><span class="c10">Libraries - cn1lib</span></h2><p class="c3"><span>Support for JAR files in Codename One has been a source of confusion so its probably a good idea to revisit this subject again and clarify all the details.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>The first source of confusion is changing the classpath. You should NEVER change the classpath or add an external JAR via the IDE classpath UI. The reasoning here is very simple, these IDE&#39;s don&#39;t package the JAR&#39;s into the final executable and even if they did these JAR&#39;s would probably use features unavailable or inappropriate for the device (e.g. java.io.File etc.).</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>There are two use cases for wanting JAR&#39;s and they both have very different solutions:</span></p><ol class="c45 lst-kix_tj9wfyx2g6g6-0 start" start="1"><li class="c3 c20 c12"><span>Modularity - you want to divide your work to an external group. For this purpose use the cn1lib approach.</span></li><li class="c3 c20 c12"><span>Work with an existing JAR. For this you will need native interfaces mentioned in the section above. Notice that native interfaces can be used within a cn1lib!<br></span></li></ol><p class="c3"><span>Cn1lib&rsquo;s address the m</span><span>odularity aspect for existing jars just refer to the native interfaces section, you can wrap them with a cn1lib but you will need a native interface anyway.<br>You can create a cn1lib in NetBeans and IDEA, its really just a simple ant project with some special targets and a simple ant task for stubbing. In it you can write all your source code (including native code and libs as described below), when you build the file you will get a cn1lib file that you can place in your project&#39;s lib directory.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>After a right click and refresh project libs completion will be available for you and you will be able to work as if the code was a part of your project.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>You can automate this process by editing the build.xml and copying/refreshing projects, all operations with these libs are just simple ant tasks.</span></p><h2 class="c3"><a name="h.w88h0452gckm"></a><span class="c10">Drag &amp; Drop</span></h2><p class="c3"><span>Unlike other platforms who tried to create overly generic catch all API&#39;s we tried to make things as simple as possible. We always drag a component and always drop it onto another component, if something else is dragged to some other place it must be wrapped in a component, the logic of actually performing the operation indicated by the drop is the responsibility of the person implementing the drop.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>There is a minor sample of this in the KitchenSink demo whose drag and drop behavior is implemented using this API. However, the KitchenSink demo relies on built in drop behavior of container specifically designed for this purpose.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>To enable dragging a component it must be flagged as draggable using setDraggable(true), to allow dropping the component onto another component you must first enable the drop target with setDropTarget(true) and override some methods (more on that later).</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>Notice that is a drop target is a container that has children, dropping a component on the child will automatically find the right drop target. You don&#39;t have to make &quot;everything&quot; into a drop target.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>You can override these methods in the draggable components:</span></p><p class="c3"><span>getDragImage - this generates an image preview of the component that will be dragged. This automatically generates a sensible default so you don&#39;t need to override it.</span></p><p class="c3"><span>drawDraggedImage - this method will be invoked to draw the dragged image at a given location, it might be useful to override it if you want to display some drag related information such an additional icon based on location etc. (e.g. a move/copy icon).</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>In the drop target you can override the following methods:</span></p><p class="c3"><span>draggingOver - returns true is a drop operation at this point is permitted. Otherwise releasing the component will have no effect.</span></p><p class="c3"><span>dragEnter/Exit - useful to track and cleanup state related to draging over a specific component.</span></p><p class="c3"><span>drop - the logic for dropping/moving the component must be implemented here!</span></p><p class="c3 c5"><span></span></p><p class="c3 c5"><span></span></p><p class="c3"><span>Notice that the Container class has a simple sample drop implementation you can use to get started.</span></p><p class="c3 c5"><span></span></p><h2 class="c37 c3"><a name="h.sox7bnnscjij"></a><span class="c10">Physics - The Motion Class</span></h2><p class="c3"><span>The motion class represents a physics operation that starts at a fixed time bound to the system current time millis value. The use case is entirely for UI animations and so many of its behaviors are simplified for this purpose.</span></p><p class="c3"><span>The motion class can be replaced in some of the builting classes to provide a slightly different feel to some of the transition effects.</span></p><h2 class="c3"><a name="h.99ye48qud1lz"></a><span class="c10">BiDi/RTL Language Support</span></h2><p class="c3"><span>BiDi is the term referring to bi-directional language support, generally RTL languages (right to left). There is plenty of information about RTL languages (Arabic, Hebrew, Syriac, Thaana) on the internet but as a brief primer here is a minor summary.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>Most western languages are written from left to right (LTR), however some languages are normally written from right to left (RTL) speakers of these languages expect the UI to flow in the opposite direction otherwise it seems weird just like reading this word would be to most English speakers: &quot;drieW&quot;.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>The problem posed by RTL languages is known as BiDi (Bi-directional) and not as RTL since the &quot;true&quot; problem isn&#39;t the reversal of the writing/UI but rather the mixing of RTL and LTR together. E.g. numbers are always written from left to right (just like in English) so in an RTL language the direction is from right to left and once we reach a number or English text embedded in the middle of the sentence (such as a name) the direction switches for a duration and is later restored.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>Codename One&#39;s support for bidi includes the following components:</span></p><p class="c3 c5"><span></span></p><ul class="c45 lst-kix_mxjmykv476bk-0 start"><li class="c3 c20 c12"><span>Bidi algorithm - allows converting between logical to visual representation for rendering</span></li><li class="c3 c20 c12"><span>Globabl RTL flag - default flag for the entire application indicating the UI should flow from right to left</span></li><li class="c3 c20 c12"><span>Individual RTL flag - flag indicating that the specific component/container should be presented as an RTL/LTR component (e.g. for displaying English elements within a RTL UI).</span></li><li class="c3 c20 c12"><span>RTL text field input</span></li><li class="c3 c20 c12"><span>RTL bitmap font rendering</span></li></ul><p class="c3 c5"><span></span></p><p class="c3"><span>Most of Codename One&#39;s RTL support is under the hood, the LookAndFeel global RTL flag can be enabled using:</span></p><p class="c3 c5"><span></span></p><p class="c3"><span class="c0">UIManager</span><span>.</span><span class="c0">getInstance</span><span class="c4">()</span><span>.</span><span class="c0">getLookAndFeel</span><span class="c4">()</span><span>.</span><span class="c0">setRTL</span><span class="c4">(</span><span class="c9">true</span><span class="c4">)</span><span class="c7">;</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>(Notice that setting the RTL to true implicitly activates the bidi algorithm).</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>Once RTL is activated all positions in Codename One become reversed and the UI becomes a mirror of itself. E.g. A softkey placed on the left moves to the right, padding on the left becomes padding on the right, the scroll moves to the left etc.</span></p><p class="c3"><span>This applies to the layout managers (except for group layout) and most components. Bidi is mostly seamless in Codename One but a developer still needs to be aware that his UI might be mirrored for these cases. </span></p><p class="c3 c5"><span></span></p><p class="c3 c5"><span></span></p><hr style="page-break-before:always;display:none;"><p class="c3 c5"><span></span></p><a href="#" name="kix.isai907a0wv3"></a><h2 class="c37 c3"><a name="h.jxxr8b55w4q9"></a><span class="c10">Signing, Certificates &amp; Provisioning</span></h2><p class="c3"><span>While Codename One can simplify allot of the grunt work in creating cross platform mobile applications, signing is not something that can be significantly simplified since it represents the developers individual identity in the markets. In this section we attempt to explain how to acquire certificates for the various platforms and how to set them up.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>The good news is that this is usually a &quot;one time issue&quot; and once its done the work becomes easier (except for the case of iOS where a provisioning profile should be maintained).</span></p><p class="c3 c5"><span></span></p><a href="#" name="id.ys206ekz2d84"></a><h2 class="c37 c3"><a name="h.1v7vqb435g0u"></a><span class="c10">iOS (iPhone/iPad)</span></h2><p class="c3"><span>iOS signing has two distinct modes: App Store signing which is only valid for distribution via iTunes (you won&#39;t be able to run the resulting application without submitting it to Apple) and development mode signing.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>You have two major files to keep track of:</span></p><p class="c3"><span>Certificate - your signature</span></p><p class="c3"><span>Provisioning Profile - details about the application and who is allowed to execute it</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>You need two versions of each file (4 total files) one pair is for development and the other pair is for uploading to the itunes App Store.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span class="c36 c9">Important</span><span>: </span><span class="c9">You need to use a Mac in order to create a certificate file for iOS, methods to achieve this without a Mac produce an invalid certificate that fails on the server and leaves hard to remove residue</span><sup class="c9"><a href="#ftnt5" name="ftnt_ref5">[5]</a></sup><span class="c9">.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>Adobe wrote a pretty</span><span><a class="c15" href="http://help.adobe.com/en_US/as3/iphone/WS789ea67d3e73a8b2-240138de1243a7725e7-8000.html">&nbsp;</a></span><span class="c8"><a class="c15" href="http://help.adobe.com/en_US/as3/iphone/WS789ea67d3e73a8b2-240138de1243a7725e7-8000.html">decent signing tutorial</a></span><span>&nbsp;on this subject for Air which you can pretty much follow to get the files we need (p12 and mobileprovision). </span></p><p class="c3 c5"><span></span></p><p class="c3"><span>The first step you need to accomplish is signing up as a developer to Apple&#39;s</span><span><a class="c15" href="http://developer.apple.com/">&nbsp;</a></span><span class="c8"><a class="c15" href="http://developer.apple.com/">iOS development program</a></span><span>, even for testing on a device this is required! This step requires that you pay Apple 99 USD on a yearly basis.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>The Apple website will guide you through the process of applying for a certificate at the end of this process you should have a distribution and development certificate pair. After that point you can login to the</span><span><a class="c15" href="https://developer.apple.com/ios/manage/overview/index.action">&nbsp;</a></span><span class="c8"><a class="c15" href="https://developer.apple.com/ios/manage/overview/index.action">iOS provisioning portal</a></span><span>&nbsp;where there are plenty of videos and tutorials to guide you through the process. Within the iOS provisioning portal you need to create an application ID and register your development devices.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>You then create a provisioning profile which comes in two flavors: distribution (for building the release version of your application) and development. The development provisioning profile needs to contain the devices on which you want to test.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>You can then configure the 4 files in the IDE and start sending builds to the Codename One cloud.</span></p><h3 class="c3"><a name="h.tldws0zggzfp"></a><span class="c10">iOS Code Signing Fail Checklist</span></h3><p class="c3"><span>Below is a list of common things people get wrong when singing and a set of suggestions for things to check. Notice that some of these signing failures will sometimes manifest themselves during build and sometimes will manifest during the install of the application.</span></p><p class="c3 c5"><span></span></p><ol class="c45 lst-kix_nrrcwey31vi0-0 start" start="1"><li class="c3 c20 c12"><span>You must use a Mac to generate the P12 certificates. There is no way around it! (tutorials that show otherwise will not work). <br>We would like to automate it in the future (in a similar way to our Android signing tool), but for now you can use </span><span class="c8"><a class="c15" href="http://www.macincloud.com/">MacInCloud</a></span><span>&nbsp;which has a free version. <br>Notice that this is something you need to do once a year (generate P12), you will also need a Mac to upload your final app to the store though.</span></li></ol><p class="c3 c5"><span></span></p><ol class="c45 lst-kix_nrrcwey31vi0-0" start="2"><li class="c3 c20 c12"><span>When exporting the P12 certificate make sure that you selected BOTH the public and the private keys as illustrated here. If you only see one entry (no private key) then you created the CSR (singing request) on a different machine than the one where you imported the resulting CER file.<br></span><img height="83" src="images/image67.png" width="444"><span><br></span></li><li class="c3 c20 c12"><span>Make sure the package matches between the main preferences screen in the IDE and the iOS settings screen.<br></span><img height="272" src="images/image109.png" width="624"><span><br></span></li><li class="c3 c20 c12"><span>Make sure the prefix for the app id in the iOS section of the preferences matches the one you have from Apple<br></span><img height="296" src="images/image105.png" width="624"><span><br></span></li><li class="c3 c20 c12"><span>Make sure your provisioning profile&#39;s app id matches your package name or is a * provisioning profile. Both are sampled in the pictures below, notice that you would need an actual package name for push/in-app-purchase support as well as for app store distribution.<br></span><img height="453" src="images/image58.png" width="624"><span><br></span><img height="456" src="images/image46.png" width="624"><span><br></span></li><li class="c3 c20 c12"><span>Make sure the certificate and provisioning profile are from the same source (if you work with multiple accounts), notice that provisioning profiles and certificates expire so you will need to regenerate provisioning when your certificate expires or is revoked.<br></span></li><li class="c3 c20 c12"><span>If you declare push in the provisioning profile then ios.includePush (in the build arguments) MUST be set to true, otherwise it MUST be set to false (see pictures below).<br></span><img height="444" src="images/image95.png" width="624"></li></ol><p class="c3 c5 c72"><span></span></p><h2 class="c37 c3"><a name="h.qoxszgwsxe3h"></a><span class="c10">Android</span></h2><p class="c3"><span>Its really easy to sign Android applications if you have the JDK installed. Find the keytool executable (it should be under the JDK&#39;s bin directory) and execute the following command:</span></p><p class="c3"><span>keytool -genkey -keystore Keystore.ks -alias [alias_name] -keyalg RSA -keysize 2048 -validity 15000 -dname &quot;CN=[full name], OU=[ou], O=[comp], L=[City], S=[State], C=[Country Code]&quot; -storepass [password] -keypass [password]</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>The elements in the brackets should be filled up based on this:</span></p><p class="c3"><span>Alias: [alias_name] (just use your name/company name without spaces)</span></p><p class="c3"><span>Full name: [full name]</span></p><p class="c3"><span>Organizational Unit: [ou]</span></p><p class="c3"><span>Company: [comp]</span></p><p class="c3"><span>City: [City]</span></p><p class="c3"><span>State: [State]</span></p><p class="c3"><span>CountryCode: [Country Code]</span></p><p class="c3"><span>Password: [password] (we expect both passwords to be identical)</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>Executing the command will produce a Keystore.ks file in that directory which you need to keep since if you lose it you will no longer be able to upgrade your applications! Fill in the appropriate details in the project properties or in the CodenameOne section in the Netbeans preferences dialog.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>For more details see</span><span><a class="c15" href="http://developer.android.com/guide/publishing/app-signing.html">&nbsp;</a></span><span class="c8"><a class="c15" href="http://developer.android.com/guide/publishing/app-signing.html">http://developer.android.com/guide/publishing/app-signing.html</a></span></p><h2 class="c37 c3 c48"><a name="h.ahunhzc4ie6j"></a></h2><h2 class="c37 c3"><a name="h.2g6o8dzdpmib"></a><span class="c10">RIM/BlackBerry</span></h2><p class="c3"><span>You can now get signing keys for free from RIM by going</span><span><a class="c15" href="https://www.blackberry.com/SignedKeys/">&nbsp;</a></span><span class="c8"><a class="c15" href="https://www.blackberry.com/SignedKeys/">here</a></span><span>. After obtaining the certificates and installing them on your machine (you will need the RIM development environment for this). You will have two files: sigtool.db and sigtool.csk on your machine (within the JDE directory hierarchy). We need them and their associated password to perform the signed build for Blackberry application.</span></p><h2 class="c37 c3 c48"><a name="h.on9ql4d6v1v9"></a></h2><h2 class="c37 c3"><a name="h.vd83p05pvfb0"></a><span class="c10">J2ME</span></h2><p class="c3"><span>Currently signing J2ME application&#39;s isn&#39;t supported. You can use tools such as the Sprint WTK to sign the resulting jad/jar produced by Codename One.</span></p><p class="c3 c5"><span></span></p><p class="c3 c5"><span></span></p><hr style="page-break-before:always;display:none;"><p class="c3 c5"><span></span></p><h1 class="c3"><a name="h.p6bjojo49yea"></a><span class="c10">Appendix: Working With iOS</span></h1><h2 class="c3"><a name="h.fnk9uq2hq5mz"></a><span class="c10">Provisioning Profile &amp; Certificates</span></h2><p class="c3"><span>One of the hardest parts in developing for iOS is the total mess they made with their overly complex certificate/provisioning process. Relatively for the complexity the guys at Apple did a great job of hiding allot of the crude details but its still difficult to figure out where to start.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>Start by logging in to the iOS provisioning portal</span></p><p class="c3 c5"><span></span></p><p class="c3"><img height="213" src="images/image99.png" width="378"></p><p class="c3 c5"><span></span></p><p class="c3"><span>In the certificates section you can download your development and distribution certificates.</span></p><p class="c3"><img height="291" src="images/image51.png" width="517"></p><p class="c31 c3"><img height="288" src="images/image15.png" width="512"></p><p class="c31 c3 c5"><span></span></p><p class="c31 c3"><span>In the devices section add device id&#39;s for the development devices you want to support. Notice no more than 100 devices are supported!</span></p><p class="c31 c3 c5"><span></span></p><p class="c31 c3"><img height="312" src="images/image108.png" width="554"></p><p class="c31 c3 c5"><span></span></p><p class="c31 c3"><span>Create an application id, it should match the package identifier of your application perfectly!</span></p><p class="c31 c3 c5"><span></span></p><p class="c31 c3"><img height="320" src="images/image35.png" width="569"></p><p class="c31 c3 c5"><span></span></p><p class="c31 c3"><span>Create a provisioning profile for development, make sure to select the right app and make sure to add the devices you want to use during debug.</span></p><p class="c3 c5 c76"><span></span></p><p class="c31 c3"><img height="297" src="images/image47.png" width="528"></p><p class="c31 c3"><img height="312" src="images/image53.png" width="554"></p><p class="c31 c3 c5"><span></span></p><p class="c31 c3"><span>Refresh the screen to see the profile you just created and press the download button to download your development provisioning profile. </span></p><p class="c31 c3 c5"><span></span></p><p class="c31 c3"><img height="311" src="images/image85.png" width="553"></p><p class="c31 c3 c5"><span></span></p><p class="c31 c3"><span>Create a distribution provisioning profile, it will be used when uploading to the app store. There is no need to specify devices here.</span></p><p class="c31 c3 c5"><span></span></p><p class="c31 c3"><img height="306" src="images/image54.png" width="544"></p><p class="c31 c3 c5"><span></span></p><p class="c31 c3"><span>Download the distribution provisioning profile.</span></p><p class="c31 c3 c5"><span></span></p><p class="c31 c3"><img height="317" src="images/image82.png" width="563"></p><p class="c31 c3 c5"><span></span></p><p class="c31 c3"><span>We can now import the cer files into the key chain tool on a Mac by double clicking the file, on Windows the process is slightly more elaborate</span></p><p class="c31 c3 c5"><span></span></p><p class="c3 c31"><img height="277" src="images/image36.png" width="492"></p><p class="c31 c3 c5"><span></span></p><p class="c31 c3"><span>We can export the p12 files for the distribution and development profiles through the keychain tool</span></p><p class="c31 c3 c5"><span></span></p><p class="c31 c3"><img height="311" src="images/image65.png" width="553"></p><p class="c31 c3 c5"><span></span></p><p class="c31 c3"><span>In the IDE we enter the project settings, configure our provisioning profile, the password we typed when exporting and the p12 certificates. It is now possible to send the build to the server.</span></p><p class="c31 c3 c5"><span></span></p><p class="c31 c3"><img height="303" src="images/image18.png" width="538"></p><p class="c3 c5"><span></span></p><h2 class="c3"><a name="h.6yplae24bm9q"></a><span class="c10">Push Notifications</span></h2><p class="c3"><span>Push notification is only enabled for pro accounts in Codename One due to some of the server side infrastructure we need to maintain to support this feature.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>Push notification allows you to send a message to a device, usually a simple text message which is sent to the application or prompted to the user appropriately. When supported by the device it can be received even when the application isn&#39;t running and doesn&#39;t require polling which can drain the devices battery.</span></p><p class="c3"><span>The keyword here is &quot;when supported&quot; unfortunately not all devices support push notification e.g. Android device that don&#39;t have the Google Play application (formerly Android Market) don&#39;t support push and must fall back to polling the server which isn&rsquo;t ideal.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>Currently Codename One supports pushing to Google authorized Android devices: GCM (Google Cloud Messaging), to iOS devices: Push Notification &amp; to blackberry devices.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>For other devices we will fallback to polling the server in a given frequency, not an ideal solution by any means so Codename One provides the option to not fallback.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>This is how Apple describes push notification (image source Apple):</span></p><p class="c32 c3 c53"><img height="81" src="images/image64.jpg" width="587"></p><p class="c3 c5"><span></span></p><p class="c3"><span>The &quot;provider&quot; is the server code that wishes to notify the device. It needs to ask Apple to push to a specific device and a specific client application. There are many complexities not mentioned here such as the need to have a push certificate or how the notification to APNS actually happens but the basic idea is identical in iOS and Android&#39;s GCM.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>Codename One hides some but not all of the complexities involved in the push notification process. Instead of working between the differences of APNS/GCM &amp; falling back to polling, we effectively do everything that&#39;s involved.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>Push consists of the following stages on the client:</span></p><p class="c3 c5 c32"><span></span></p><ol class="c45 lst-kix_nv52f23a6eq2-0 start" start="1"><li class="c3 c20 c12"><span>Local Registration - an application needs to register to ask for push. This is done by invoking:</span><img height="426" src="images/image50.png" width="284"></li><li class="c3 c20 c12"><span>Display.getInstance().registerPush(metaData, fallback);</span></li><li class="c3 c20 c12"><span>The fallback flag indicates whether the system should fallback to polling if push isn&#39;t supported.</span></li><li class="c3 c20 c12"><span>On iOS this stage prompts the user indicating that the application is interested in receiving push notification messages.</span></li><li class="c3 c20 c12"><span>Remote registration - once registration in the client works, the device needs to register to the cloud. This is an important step since push requires a specific device registration key (think of it as a &quot;phone number&quot; for the device). &nbsp;Normally Codename One registers all devices that reach this stage so you can push a notification for everyone, however if you wish to push to a specific device you will need to catch this information! To get push events your main class (important, this must be your main class!) should implement the PushCallback interface. The registeredForPush(String) callback is invoked with the device native push ID (not the id you should use. Once this method is invoked the device is ready to receive push messages.</span></li><li class="c3 c20 c12"><span>In case of an error during push registration you will receive the dreaded: pushRegistrationError.</span></li><li class="c3 c20 c12"><span>This is a very problematic area on iOS, where you must have a package name that matches EXACTLY the options in your provisioning profile which is setup to support push. It is also critical that you do not use a provisioning profile containing a * character in it.</span></li><li class="c3 c20 c12"><span>You will receive a push callback if all goes well.</span></li></ol><p class="c3 c5"><span></span></p><p class="c3"><span>First there are several prerequisites you will need in order to get started with push:</span></p><ul class="c45 lst-kix_w0kfp3vv1roa-0 start"><li class="c3 c20 c12"><span>Android - you can find the full instructions from Google at </span><span class="c8"><a class="c15" href="http://developer.android.com/google/gcm/gs.html">http://developer.android.com/google/gcm/gs.html</a></span><span>. You will need a project id that looks something like this: 4815162342.<br>You will also need the server key which looks something like this: AIzaSyATSw_rGeKnzKWULMGEk7MDfEjRxJ1ybqo.<br></span></li><li class="c3 c20 c12"><span>iOS - You will need to create a provisioning profile that doesn&#39;t have the * element within it. <br>For that provisioning profile you will need to enable push and download a push certificate. Notice that this push certificate should be converted to a P12 file in the same manner we used in the </span><span class="c8"><a class="c15" href="#kix.isai907a0wv3">signing tutorials</a></span><span>. <br>You will need the password for that P12 file as well. <br>You will need a distribution P12 and a testing P12. <br><br></span><span class="c9">Warning!</span><span>&nbsp;The P12 for push is completely different from the one used to build your application, don&#39;t confuse them!<br>You will need to place the certificate on the web so our push server can access them, we often use dropbox to store our certificates for push.</span></li></ul><p class="c3 c5"><span></span></p><ul class="c45 lst-kix_w0kfp3vv1roa-0"><li class="c3 c20 c12"><span>RIM - you need to register with RIM for credentials to use their push servers at </span><span class="c8"><a class="c15" href="https://developer.blackberry.com/devzone/develop/platform_services/push_overview.html">https://developer.blackberry.com/devzone/develop/platform_services/push_overview.html</a></span><span>. <br>Notice that initially you need to register for evaluation and later on move your app to production. This registration will trigger an email which you will receive that will contain all the information you will need later on. Such as your app ID, push URL (which during development is composed from your app ID), special password and client port number.</span></li></ul><p class="c3 c5"><span></span></p><p class="c3"><span>To start using push (on any platform) you will need to implement the PushCallback interface within your main class. The methods in that interface will be invoked when a push message arrives:</span></p><p class="c3"><span class="c9">public</span><span>&nbsp;</span><span class="c9">class</span><span>&nbsp;</span><span class="c0">PushDemo</span><span>&nbsp;</span><span class="c9">implements</span><span>&nbsp;</span><span class="c0">PushCallback</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; <br> &nbsp; &nbsp;</span><span class="c9">private</span><span>&nbsp;</span><span class="c0">Form</span><span>&nbsp;</span><span class="c0">current</span><span class="c7">;</span><span><br> <br> &nbsp; &nbsp;</span><span class="c9">public</span><span>&nbsp;</span><span class="c9">void</span><span>&nbsp;</span><span class="c0">init</span><span class="c4">(</span><span class="c0">Object</span><span>&nbsp;</span><span class="c0">context</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp;</span><span class="c4">}</span><span><br> <br> &nbsp; &nbsp;</span><span class="c9">public</span><span>&nbsp;</span><span class="c9">void</span><span>&nbsp;</span><span class="c0">start</span><span class="c4">()</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">if</span><span class="c4">(</span><span class="c0">current</span><span>&nbsp;</span><span class="c7">!=</span><span>&nbsp;</span><span class="c9">null</span><span class="c4">){</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">current</span><span>.</span><span class="c0">show</span><span class="c4">()</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">return</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">}</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">StateMachine</span><span class="c4">(</span><span class="c22">&quot;/theme&quot;</span><span class="c4">)</span><span class="c7">;</span><span>&nbsp; &nbsp; &nbsp; &nbsp; <br> &nbsp; &nbsp;</span><span class="c4">}</span><span><br> <br> &nbsp; &nbsp;</span><span class="c9">public</span><span>&nbsp;</span><span class="c9">void</span><span>&nbsp;</span><span class="c0">stop</span><span class="c4">()</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">current</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c0">Display</span><span>.</span><span class="c0">getInstance</span><span class="c4">()</span><span>.</span><span class="c0">getCurrent</span><span class="c4">()</span><span class="c7">;</span><span><br> &nbsp; &nbsp;</span><span class="c4">}</span><span><br> &nbsp; &nbsp;<br> &nbsp; &nbsp;</span><span class="c9">public</span><span>&nbsp;</span><span class="c9">void</span><span>&nbsp;</span><span class="c0">destroy</span><span class="c4">()</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp;</span><span class="c4">}</span><span><br> <br> &nbsp; &nbsp;</span><span class="c9">public</span><span>&nbsp;</span><span class="c9">void</span><span>&nbsp;</span><span class="c0">push</span><span class="c4">(</span><span class="c0">String</span><span>&nbsp;</span><span class="c0">value</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">Dialog</span><span>.</span><span class="c0">show</span><span class="c4">(</span><span class="c22">&quot;Push Received&quot;</span><span>, </span><span class="c0">value</span><span>, </span><span class="c22">&quot;OK&quot;</span><span>, </span><span class="c9">null</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp;</span><span class="c4">}</span><span><br> <br> &nbsp; &nbsp;</span><span class="c9">public</span><span>&nbsp;</span><span class="c9">void</span><span>&nbsp;</span><span class="c0">registeredForPush</span><span class="c4">(</span><span class="c0">String</span><span>&nbsp;</span><span class="c0">deviceId</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">Dialog</span><span>.</span><span class="c0">show</span><span class="c4">(</span><span class="c22">&quot;Push Registered&quot;</span><span>, </span><span class="c22">&quot;Device ID: &quot;</span><span>&nbsp;</span><span class="c7">+</span><span>&nbsp;</span><span class="c0">deviceId</span><span>&nbsp;</span><span class="c7">+</span><span>&nbsp;</span><span class="c22">&quot;</span><span class="c59">\n</span><span class="c22">Device Key: &quot;</span><span>&nbsp;</span><span class="c7">+</span><span>&nbsp;</span><span class="c0">Push</span><span>.</span><span class="c0">getDeviceKey</span><span class="c4">()</span><span>&nbsp;, </span><span class="c22">&quot;OK&quot;</span><span>, </span><span class="c9">null</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp;</span><span class="c4">}</span><span><br> <br> &nbsp; &nbsp;</span><span class="c9">public</span><span>&nbsp;</span><span class="c9">void</span><span>&nbsp;</span><span class="c0">pushRegistrationError</span><span class="c4">(</span><span class="c0">String</span><span>&nbsp;</span><span class="c0">error</span><span>, </span><span class="c9">int</span><span>&nbsp;</span><span class="c0">errorCode</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">Dialog</span><span>.</span><span class="c0">show</span><span class="c4">(</span><span class="c22">&quot;Registration Error&quot;</span><span>, </span><span class="c22">&quot;Error &quot;</span><span>&nbsp;</span><span class="c7">+</span><span>&nbsp;</span><span class="c0">errorCode</span><span>&nbsp;</span><span class="c7">+</span><span>&nbsp;</span><span class="c22">&quot;</span><span class="c59">\n</span><span class="c22">&quot;</span><span>&nbsp;</span><span class="c7">+</span><span>&nbsp;</span><span class="c0">error</span><span>, </span><span class="c22">&quot;OK&quot;</span><span>, </span><span class="c9">null</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp;</span><span class="c4">}</span><span><br></span><span class="c4">}</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>You will then need to register to receive push notifications (its OK to call register every time the app loads) by invoking this code below (notice that the google project id needs to be passed to registration):</span></p><p class="c3"><span class="c16 c19">@</span><span class="c0 c16">Override</span><span class="c16 c19"><br></span><span class="c16 c9 c19">protected</span><span class="c16 c19">&nbsp;</span><span class="c16 c9 c19">void</span><span class="c16 c19">&nbsp;</span><span class="c0 c16">onMain_RegisterForPushAction</span><span class="c4 c16">(</span><span class="c0 c16">Component</span><span class="c16 c19">&nbsp;</span><span class="c0 c16">c</span><span class="c16 c19">, </span><span class="c0 c16">ActionEvent</span><span class="c16 c19">&nbsp;</span><span class="c0 c16">event</span><span class="c4 c16">)</span><span class="c16 c19">&nbsp;</span><span class="c4 c16">{</span><span class="c16 c19"><br> &nbsp; &nbsp;</span><span class="c0 c16">Hashtable</span><span class="c16 c19">&nbsp;</span><span class="c0 c16">meta</span><span class="c16 c19">&nbsp;</span><span class="c16 c7">=</span><span class="c16 c19">&nbsp;</span><span class="c16 c9 c19">new</span><span class="c16 c19">&nbsp;</span><span class="c0 c16">Hashtable</span><span class="c4 c16">()</span><span class="c16 c7">;</span><span class="c16 c19"><br> &nbsp; &nbsp;</span><span class="c0 c16">meta</span><span class="c16 c19">.</span><span class="c0 c16">put</span><span class="c4 c16">(</span><span class="c0 c16">com</span><span class="c16 c19">.</span><span class="c0 c16">codename1</span><span class="c16 c19">.</span><span class="c0 c16">push</span><span class="c16 c19">.</span><span class="c0 c16">Push</span><span class="c16 c19">.</span><span class="c0 c16">GOOGLE_PUSH_KEY</span><span class="c16 c19">, </span><span class="c0 c16">findGoogleProjectId</span><span class="c4 c16">(</span><span class="c0 c16">c</span><span class="c4 c16">))</span><span class="c16 c7">;</span><span class="c16 c19">&nbsp; &nbsp; &nbsp; &nbsp; <br> &nbsp; &nbsp;</span><span class="c0 c16">Display</span><span class="c16 c19">.</span><span class="c0 c16">getInstance</span><span class="c4 c16">()</span><span class="c16 c19">.</span><span class="c0 c16">registerPush</span><span class="c4 c16">(</span><span class="c0 c16">meta</span><span class="c16 c19">, </span><span class="c16 c9 c19">true</span><span class="c4 c16">)</span><span class="c16 c7">;</span><span class="c16 c19"><br></span><span class="c4 c16">}</span><span class="c16 c19"><br></span></p><p class="c3"><span>Sending the push is a more elaborate affair, we need to pass the elements to the push that are necessary for the various device types depending on the target device. If we send null as the destination device our message will be sent to all devices running our app. However, if we use the device key which you can get via Push.getDeviceKey() you can target the device directly. </span><span class="c9">Notice that the device key is not the argument passed to the registration confirmation callback!</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>Other than that we need to send various arguments whether this is a production push (valid for iOS where there is a strict separation between the debug and the production push builds) as well as the variables discussed above:</span></p><p class="c3"><span class="c16 c19">@</span><span class="c0 c16">Override</span><span class="c16 c19"><br></span><span class="c16 c9 c19">protected</span><span class="c16 c19">&nbsp;</span><span class="c16 c9 c19">void</span><span class="c16 c19">&nbsp;</span><span class="c0 c16">onMain_SendPushAction</span><span class="c4 c16">(</span><span class="c0 c16">Component</span><span class="c16 c19">&nbsp;</span><span class="c0 c16">c</span><span class="c16 c19">, </span><span class="c0 c16">ActionEvent</span><span class="c16 c19">&nbsp;</span><span class="c0 c16">event</span><span class="c4 c16">)</span><span class="c16 c19">&nbsp;</span><span class="c4 c16">{</span><span class="c16 c19"><br> &nbsp; &nbsp;</span><span class="c0 c16">String</span><span class="c16 c19">&nbsp;</span><span class="c0 c16">dest</span><span class="c16 c19">&nbsp;</span><span class="c16 c7">=</span><span class="c16 c19">&nbsp;</span><span class="c0 c16">findDestinationDevice</span><span class="c4 c16">(</span><span class="c0 c16">c</span><span class="c4 c16">)</span><span class="c16 c19">.</span><span class="c0 c16">getText</span><span class="c4 c16">()</span><span class="c16 c7">;</span><span class="c16 c19"><br> &nbsp; &nbsp;</span><span class="c16 c9 c19">if</span><span class="c4 c16">(</span><span class="c0 c16">dest</span><span class="c16 c19">.</span><span class="c0 c16">equals</span><span class="c4 c16">(</span><span class="c16 c22">&quot;&quot;</span><span class="c4 c16">))</span><span class="c16 c19">&nbsp;</span><span class="c4 c16">{</span><span class="c16 c19"><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c16">dest</span><span class="c16 c19">&nbsp;</span><span class="c16 c7">=</span><span class="c16 c19">&nbsp;</span><span class="c16 c9 c19">null</span><span class="c16 c7">;</span><span class="c16 c19"><br> &nbsp; &nbsp;</span><span class="c4 c16">}</span><span class="c16 c19"><br> &nbsp; &nbsp;</span><span class="c16 c9 c19">boolean</span><span class="c16 c19">&nbsp;</span><span class="c0 c16">prod</span><span class="c16 c19">&nbsp;</span><span class="c16 c7">=</span><span class="c16 c19">&nbsp;</span><span class="c0 c16">findProductionEnvironement</span><span class="c4 c16">(</span><span class="c0 c16">c</span><span class="c4 c16">)</span><span class="c16 c19">.</span><span class="c0 c16">isSelected</span><span class="c4 c16">()</span><span class="c16 c7">;</span><span class="c16 c19"><br> &nbsp; &nbsp;</span><span class="c0 c16">String</span><span class="c16 c19">&nbsp;</span><span class="c0 c16">googleServerKey</span><span class="c16 c19">&nbsp;</span><span class="c16 c7">=</span><span class="c16 c19">&nbsp;</span><span class="c0 c16">findGoogleServerKey</span><span class="c4 c16">(</span><span class="c0 c16">c</span><span class="c4 c16">)</span><span class="c16 c19">.</span><span class="c0 c16">getText</span><span class="c4 c16">()</span><span class="c16 c7">;</span><span class="c16 c19"><br> &nbsp; &nbsp;</span><span class="c0 c16">String</span><span class="c16 c19">&nbsp;</span><span class="c0 c16">iOSCertURL</span><span class="c16 c19">&nbsp;</span><span class="c16 c7">=</span><span class="c16 c19">&nbsp;</span><span class="c0 c16">findIosCert</span><span class="c4 c16">(</span><span class="c0 c16">c</span><span class="c4 c16">)</span><span class="c16 c19">.</span><span class="c0 c16">getText</span><span class="c4 c16">()</span><span class="c16 c7">;</span><span class="c16 c19"><br> &nbsp; &nbsp;</span><span class="c0 c16">String</span><span class="c16 c19">&nbsp;</span><span class="c0 c16">iOSCertPassword</span><span class="c16 c19">&nbsp;</span><span class="c16 c7">=</span><span class="c16 c19">&nbsp;</span><span class="c0 c16">findIosPassword</span><span class="c4 c16">(</span><span class="c0 c16">c</span><span class="c4 c16">)</span><span class="c16 c19">.</span><span class="c0 c16">getText</span><span class="c4 c16">()</span><span class="c16 c7">;</span><span class="c16 c19"><br> &nbsp; &nbsp;</span><span class="c0 c16">String</span><span class="c16 c19">&nbsp;</span><span class="c0 c16">bbPushURL</span><span class="c16 c19">&nbsp;</span><span class="c16 c7">=</span><span class="c16 c19">&nbsp;</span><span class="c0 c16">findBbPushURL</span><span class="c4 c16">(</span><span class="c0 c16">c</span><span class="c4 c16">)</span><span class="c16 c19">.</span><span class="c0 c16">getText</span><span class="c4 c16">()</span><span class="c16 c7">;</span><span class="c16 c19"><br> &nbsp; &nbsp;</span><span class="c0 c16">String</span><span class="c16 c19">&nbsp;</span><span class="c0 c16">bbAppId</span><span class="c16 c19">&nbsp;</span><span class="c16 c7">=</span><span class="c16 c19">&nbsp;</span><span class="c0 c16">findBbAppId</span><span class="c4 c16">(</span><span class="c0 c16">c</span><span class="c4 c16">)</span><span class="c16 c19">.</span><span class="c0 c16">getText</span><span class="c4 c16">()</span><span class="c16 c7">;</span><span class="c16 c19"><br> &nbsp; &nbsp;</span><span class="c0 c16">String</span><span class="c16 c19">&nbsp;</span><span class="c0 c16">bbPassword</span><span class="c16 c19">&nbsp;</span><span class="c16 c7">=</span><span class="c16 c19">&nbsp;</span><span class="c0 c16">findBbPassword</span><span class="c4 c16">(</span><span class="c0 c16">c</span><span class="c4 c16">)</span><span class="c16 c19">.</span><span class="c0 c16">getText</span><span class="c4 c16">()</span><span class="c16 c7">;</span><span class="c16 c19"><br> &nbsp; &nbsp;</span><span class="c0 c16">String</span><span class="c16 c19">&nbsp;</span><span class="c0 c16">bbPort</span><span class="c16 c19">&nbsp;</span><span class="c16 c7">=</span><span class="c16 c19">&nbsp;</span><span class="c0 c16">findBbPort</span><span class="c4 c16">(</span><span class="c0 c16">c</span><span class="c4 c16">)</span><span class="c16 c19">.</span><span class="c0 c16">getText</span><span class="c4 c16">()</span><span class="c16 c7">;</span><span class="c16 c19"><br> &nbsp; &nbsp;</span><span class="c0 c16">Push</span><span class="c16 c19">.</span><span class="c0 c16">sendPushMessage</span><span class="c4 c16">(</span><span class="c0 c16">findPushMessage</span><span class="c4 c16">(</span><span class="c0 c16">c</span><span class="c4 c16">)</span><span class="c16 c19">.</span><span class="c0 c16">getText</span><span class="c4 c16">()</span><span class="c16 c19">, </span><span class="c0 c16">dest</span><span class="c16 c19">, </span><span class="c0 c16">prod</span><span class="c16 c19">, </span><span class="c0 c16">googleServerKey</span><span class="c16 c19">, </span><span class="c0 c16">iOSCertURL</span><span class="c16 c19">, </span><span class="c0 c16">iOSCertPassword</span><span class="c16 c19">, </span><span class="c0 c16">bbPushURL</span><span class="c16 c19">, </span><span class="c0 c16">bbAppId</span><span class="c16 c19">, </span><span class="c0 c16">bbPassword</span><span class="c16 c19">, </span><span class="c0 c16">bbPort</span><span class="c4 c16">)</span><span class="c16 c7">;</span><span class="c16 c19">&nbsp; &nbsp; <br></span><span class="c4 c16">}</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>Unfortunately we aren&#39;t done yet!</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>We must define the following build arguments in the project properties:</span></p><p class="c3"><span>ios.includePush=true</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>rim.includePush=true</span></p><p class="c3"><span>rim.ignor_legacy=true</span></p><p class="c3"><span>rim.pushPort=...</span></p><p class="c3"><span>rim.pushAppId=...</span></p><p class="c3"><span>rim.pushBpsURL=... </span></p><p class="c3 c5"><span></span></p><p class="c3"><span>Once you define all of these push should work for all platforms.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>You can perform the same task using our server API to send a push message directly from your server using the following web API. Notice that all arguments must be submitted as post!</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>URL = https://codename-one.appspot.com/sendPushMessage</span></p><p class="c3 c5"><span></span></p><a href="#" name="2cb5096a97ddb49bfd52cde7dddb5f1fbc547f32"></a><a href="#" name="2"></a><table cellpadding="0" cellspacing="0" class="c55"><tbody><tr><td class="c1"><h4 class="c3 c61"><a name="h.sh019nk71wed"></a><span>Argument</span></h4></td><td class="c1"><h4 class="c61 c3"><a name="h.sh019nk71wed"></a><span>Values</span></h4></td><td class="c1"><h4 class="c61 c3"><a name="h.sh019nk71wed"></a><span>Description</span></h4></td></tr><tr><td class="c1"><p class="c3 c18"><span>device</span></p></td><td class="c1"><p class="c18 c3"><span>numeric id or none</span></p></td><td class="c1"><p class="c18 c3"><span>optional, if omitted the message is sent to all devices</span></p></td></tr><tr><td class="c1"><p class="c18 c3"><span>packageName</span></p></td><td class="c1"><p class="c18 c3"><span>com.myapp...</span></p></td><td class="c1"><p class="c18 c3"><span>The package name of your main class uniquely identifies your app. This is required even when submitting a device ID</span></p></td></tr><tr><td class="c1"><p class="c18 c3"><span>email</span></p></td><td class="c1"><p class="c18 c3"><span>x@y.com</span></p></td><td class="c1"><p class="c18 c3"><span>The email address of the developer who built the app. This provides validation regarding the target of the push</span></p></td></tr><tr><td class="c1"><p class="c18 c3"><span>type</span></p></td><td class="c1"><p class="c18 c3"><span>numeric defaults to 1</span></p></td><td class="c1"><p class="c18 c3"><span>The type of push, standard is 1 but there are additional types like 2 which is a silent push (nothing will be shown to the user) or 3 which combines a hidden payload with text visible to the user</span></p></td></tr><tr><td class="c1"><p class="c18 c3"><span>auth</span></p></td><td class="c1"><p class="c18 c3"><span>Google authorization key</span></p></td><td class="c1"><p class="c18 c3"><span>needed to perform the GCM push</span></p></td></tr><tr><td class="c1"><p class="c18 c3"><span>certPassword</span></p></td><td class="c1"><p class="c18 c3"><span>password</span></p></td><td class="c1"><p class="c18 c3"><span>The password for the P12 push certificate for an iOS push</span></p></td></tr><tr><td class="c1"><p class="c18 c3"><span>cert</span></p></td><td class="c1"><p class="c18 c3"><span>URL</span></p></td><td class="c1"><p class="c18 c3"><span>A url containing a downloadable P12 push certificate for iOS</span></p></td></tr><tr><td class="c1"><p class="c18 c3"><span>body</span></p></td><td class="c1"><p class="c18 c3"><span>Arbitrary message</span></p></td><td class="c1"><p class="c18 c3"><span>The payload message sent to the device</span></p></td></tr><tr class="c42"><td class="c1"><p class="c18 c3 c30"><span>production</span></p></td><td class="c1"><p class="c18 c3 c30"><span>true/false</span></p></td><td class="c1"><p class="c18 c3 c30"><span>Whether the push is sent to the iOS production or debug environment</span></p></td></tr><tr><td class="c1"><p class="c18 c3"><span>burl</span></p></td><td class="c1"><p class="c18 c3"><span>URL</span></p></td><td class="c1"><p class="c18 c3"><span>The blackberry push URL</span></p></td></tr><tr class="c42"><td class="c1"><p class="c18 c3 c30"><span>bbAppId</span></p></td><td class="c1"><p class="c18 c3 c30 c5"><span class="c40 c17"></span></p></td><td class="c1"><p class="c18 c3 c30"><span>App ID sent by RIM</span></p></td></tr><tr class="c42"><td class="c1"><p class="c18 c3 c30"><span>bbPass</span></p></td><td class="c1"><p class="c18 c3 c30 c5"><span class="c40 c17"></span></p></td><td class="c1"><p class="c18 c3 c30"><span>Push password from RIM</span></p></td></tr><tr class="c42"><td class="c1"><p class="c18 c3 c30"><span>bbPort</span></p></td><td class="c1"><p class="c18 c3 c30 c5"><span class="c40 c17"></span></p></td><td class="c1"><p class="c18 c3 c30"><span>Push port from RIM</span></p></td></tr></tbody></table><p class="c3 c5"><span></span></p><hr style="page-break-before:always;display:none;"><p class="c3 c5"><span></span></p><h1 class="c3"><a name="h.t13ls9xq2cmm"></a><span class="c10">Appendix: Creating Codename One Maker Plugins</span></h1><p class="c3"><span>Codename One Maker (</span><span class="c8"><a class="c15" href="http://www.codenameone.com/maker.html">http://www.codenameone.com/maker.html</a></span><span>) is an on device app maker tool that includes a drag and drop GUI builder and a host of other features.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>Codename One developers can create plugins to extend the functionality of Maker and leverage the full scope of Codename One&rsquo;s capabilities within this easy to use tool.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>This effectively turns Maker into a tool that is limited only by your imagination and not by some arbitrary constraints we put forth.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>One thing to keep in mind before proceeding: A plugin can&#39;t be previewed within Maker. The user will be able to pass arguments (settings) to the plugin and see it within the app but he won&#39;t be able to launch it (we can&#39;t dynamically download code according to store EULA&#39;s and also some technical limitations).</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>So how does this work?</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>A Codename One Maker plugin is really just 2 files an XML file and a CN1Lib file.</span></p><p class="c3"><span>The XML file describes the requirements of the plugin from the user and gives us basic details about the plugin, only the XML file is ever downloaded to the device.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>When the user sends the build, the details are sent to the server. The server downloads and incorporates the CN1Lib file which can include native code or any other capabilities. Its compiled like any Codename One library in that regard. When the built application on the device the user can see the plugin in action.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>So how do we build a hello world plugin?</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>I created a simple Twitter feed plugin just to show the basic principals (see the full project at the bottom of this post). To start off we need to create a new Library Project in NetBeans (sorry currently Eclipse doesn&#39;t support Library projects although its theoretically possible to work with it to build these projects).</span></p><p class="c3"><span>We can remove the hello world code and create a new package with our company and name of the plugin, then we need to implement the plugin. The plugin is a class that derives from MakerPlugin here is the simple Twitter plugin from the code below:</span></p><p class="c3"><span class="c9 c27">package com.mycompany.plugin.mytweets;</span><span><br> <br></span><span class="c9 c27">import com.codename1.components.InfiniteProgress;</span><span><br></span><span class="c9 c27">import com.codename1.components.MultiButton;</span><span><br></span><span class="c9 c27">import com.codename1.io.ConnectionRequest;</span><span><br></span><span class="c9 c27">import com.codename1.io.JSONParser;</span><span><br></span><span class="c9 c27">import com.codename1.io.NetworkManager;</span><span><br></span><span class="c9 c27">import com.codename1.maker.MakerPlugin;</span><span><br></span><span class="c9 c27">import com.codename1.ui.Button;</span><span><br></span><span class="c9 c27">import com.codename1.ui.Container;</span><span><br></span><span class="c9 c27">import com.codename1.ui.Display;</span><span><br></span><span class="c9 c27">import com.codename1.ui.Label;</span><span><br></span><span class="c9 c27">import com.codename1.ui.TextArea;</span><span><br></span><span class="c9 c27">import com.codename1.ui.events.ActionEvent;</span><span><br></span><span class="c9 c27">import com.codename1.ui.events.ActionListener;</span><span><br></span><span class="c9 c27">import com.codename1.ui.layouts.BorderLayout;</span><span><br></span><span class="c9 c27">import com.codename1.ui.layouts.BoxLayout;</span><span><br></span><span class="c9 c27">import java.io.IOException;</span><span><br></span><span class="c9 c27">import java.io.InputStream;</span><span><br></span><span class="c9 c27">import java.io.InputStreamReader;</span><span><br></span><span class="c9 c27">import java.util.Hashtable;</span><span><br></span><span class="c9 c27">import java.util.Vector;</span><span><br> <br></span><span class="c11 c56">/**<br> * This is simple hello world maker plugin showing how we can get arguments and then use Codename One<br> * to provide all sorts of functionality<br> *<br> * @author Shai Almog<br> */</span><span><br></span><span class="c9">public</span><span>&nbsp;</span><span class="c9">class</span><span>&nbsp;</span><span class="c0">Plugin</span><span>&nbsp;</span><span class="c9">extends</span><span>&nbsp;</span><span class="c0">MakerPlugin</span><span>&nbsp;</span><span class="c4">{</span><span><br> <br> &nbsp; &nbsp;@</span><span class="c0">Override</span><span><br> &nbsp; &nbsp;</span><span class="c9">public</span><span>&nbsp;</span><span class="c0">String</span><span>&nbsp;</span><span class="c0">getPackageName</span><span class="c4">()</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">return</span><span>&nbsp;</span><span class="c22">&quot;com.mycompany.plugin.mytweets&quot;</span><span class="c7">;</span><span><br> &nbsp; &nbsp;</span><span class="c4">}</span><span><br> <br> &nbsp; &nbsp;@</span><span class="c0">Override</span><span><br> &nbsp; &nbsp;</span><span class="c9">public</span><span>&nbsp;</span><span class="c0">String</span><span>&nbsp;</span><span class="c0">getDeveloperEmailId</span><span class="c4">()</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">return</span><span>&nbsp;</span><span class="c22">&quot;youremailhere@x.com&quot;</span><span class="c7">;</span><span><br> &nbsp; &nbsp;</span><span class="c4">}</span><span><br> <br> &nbsp; &nbsp;@</span><span class="c0">Override</span><span><br> &nbsp; &nbsp;</span><span class="c9">public</span><span>&nbsp;</span><span class="c0">String</span><span>&nbsp;</span><span class="c0">getPluginName</span><span class="c4">()</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">return</span><span>&nbsp;</span><span class="c22">&quot;My Tweets&quot;</span><span class="c7">;</span><span><br> &nbsp; &nbsp;</span><span class="c4">}</span><span><br> <br> &nbsp; &nbsp;@</span><span class="c0">Override</span><span><br> &nbsp; &nbsp;</span><span class="c9">public</span><span>&nbsp;</span><span class="c0">Container</span><span>&nbsp;</span><span class="c0">createEmbeddedUI</span><span class="c4">()</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">final</span><span>&nbsp;</span><span class="c0">Container</span><span>&nbsp;</span><span class="c0">tweets</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Container</span><span class="c4">(</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">BoxLayout</span><span class="c4">(</span><span class="c0">BoxLayout</span><span>.</span><span class="c0">Y_AXIS</span><span class="c4">))</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">tweets</span><span>.</span><span class="c0">setScrollableY</span><span class="c4">(</span><span class="c9">true</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">ConnectionRequest</span><span>&nbsp;</span><span class="c0">t</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">ConnectionRequest</span><span class="c4">()</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">private</span><span>&nbsp;</span><span class="c0">Hashtable</span><span>&nbsp;</span><span class="c0">h</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;@</span><span class="c0">Override</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">protected</span><span>&nbsp;</span><span class="c9">void</span><span>&nbsp;</span><span class="c0">readResponse</span><span class="c4">(</span><span class="c0">InputStream</span><span>&nbsp;</span><span class="c0">input</span><span class="c4">)</span><span>&nbsp;</span><span class="c9">throws</span><span>&nbsp;</span><span class="c0">IOException</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">JSONParser</span><span>&nbsp;</span><span class="c0">jp</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">JSONParser</span><span class="c4">()</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">h</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c0">jp</span><span>.</span><span class="c0">parse</span><span class="c4">(</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">InputStreamReader</span><span class="c4">(</span><span class="c0">input</span><span class="c4">))</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">}</span><span><br> <br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;@</span><span class="c0">Override</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">protected</span><span>&nbsp;</span><span class="c9">void</span><span>&nbsp;</span><span class="c0">postResponse</span><span class="c4">()</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">Vector</span><span>&nbsp;</span><span class="c0">v</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c4">(</span><span class="c0">Vector</span><span class="c4">)</span><span class="c0">h</span><span>.</span><span class="c0">get</span><span class="c4">(</span><span class="c22">&quot;results&quot;</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">tweets</span><span>.</span><span class="c0">removeAll</span><span class="c4">()</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">for</span><span class="c4">(</span><span class="c0">Object</span><span>&nbsp;</span><span class="c0">currentObj</span><span>&nbsp;</span><span class="c7">:</span><span>&nbsp;</span><span class="c0">v</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">Hashtable</span><span>&nbsp;</span><span class="c0">current</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c4">(</span><span class="c0">Hashtable</span><span class="c4">)</span><span class="c0">currentObj</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">String</span><span>&nbsp;</span><span class="c0">user</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c4">(</span><span class="c0">String</span><span class="c4">)</span><span class="c0">current</span><span>.</span><span class="c0">get</span><span class="c4">(</span><span class="c22">&quot;from_user_name&quot;</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">String</span><span>&nbsp;</span><span class="c0">date</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c4">(</span><span class="c0">String</span><span class="c4">)</span><span class="c0">current</span><span>.</span><span class="c0">get</span><span class="c4">(</span><span class="c22">&quot;created_at&quot;</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">String</span><span>&nbsp;</span><span class="c0">text</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c4">(</span><span class="c0">String</span><span class="c4">)</span><span class="c0">current</span><span>.</span><span class="c0">get</span><span class="c4">(</span><span class="c22">&quot;text&quot;</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">String</span><span>&nbsp;</span><span class="c0">url</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c22">&quot;&quot;</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">int</span><span>&nbsp;</span><span class="c0">indi</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c0">text</span><span>.</span><span class="c0">indexOf</span><span class="c4">(</span><span class="c22">&quot;http://t.co/&quot;</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">if</span><span class="c4">(</span><span class="c0">indi</span><span>&nbsp;</span><span class="c7">&gt;</span><span>&nbsp;</span><span class="c7">-</span><span class="c14">1</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">int</span><span>&nbsp;</span><span class="c0">last</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c0">text</span><span>.</span><span class="c0">indexOf</span><span class="c4">(</span><span class="c22">&#39; &#39;</span><span>, </span><span class="c0">indi</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">if</span><span class="c4">(</span><span class="c0">last</span><span>&nbsp;</span><span class="c7">==</span><span>&nbsp;</span><span class="c7">-</span><span class="c14">1</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">last</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c0">last</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c0">text</span><span>.</span><span class="c0">length</span><span class="c4">()</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">}</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">url</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c0">text</span><span>.</span><span class="c0">substring</span><span class="c4">(</span><span class="c0">indi</span><span>, </span><span class="c0">last</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">}</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">final</span><span>&nbsp;</span><span class="c0">String</span><span>&nbsp;</span><span class="c0">finalURL</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c0">url</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">Container</span><span>&nbsp;</span><span class="c0">entry</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Container</span><span class="c4">(</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">BorderLayout</span><span class="c4">())</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">entry</span><span>.</span><span class="c0">setUIID</span><span class="c4">(</span><span class="c22">&quot;MultiButton&quot;</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">TextArea</span><span>&nbsp;</span><span class="c0">t</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">TextArea</span><span class="c4">(</span><span class="c0">text</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">t</span><span>.</span><span class="c0">setEditable</span><span class="c4">(</span><span class="c9">false</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">t</span><span>.</span><span class="c0">setUIID</span><span class="c4">(</span><span class="c22">&quot;MultiLine1&quot;</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">Button</span><span>&nbsp;</span><span class="c0">lead</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Button</span><span class="c4">()</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">lead</span><span>.</span><span class="c0">setUIID</span><span class="c4">(</span><span class="c22">&quot;Label&quot;</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">entry</span><span>.</span><span class="c0">addComponent</span><span class="c4">(</span><span class="c0">BorderLayout</span><span>.</span><span class="c0">CENTER</span><span>, </span><span class="c0">t</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">entry</span><span>.</span><span class="c0">addComponent</span><span class="c4">(</span><span class="c0">BorderLayout</span><span>.</span><span class="c0">EAST</span><span>, </span><span class="c0">lead</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">Container</span><span>&nbsp;</span><span class="c0">south</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Container</span><span class="c4">(</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">BorderLayout</span><span class="c4">())</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">entry</span><span>.</span><span class="c0">addComponent</span><span class="c4">(</span><span class="c0">BorderLayout</span><span>.</span><span class="c0">SOUTH</span><span>, </span><span class="c0">south</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">Label</span><span>&nbsp;</span><span class="c0">dateText</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Label</span><span class="c4">(</span><span class="c0">date</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">dateText</span><span>.</span><span class="c0">setUIID</span><span class="c4">(</span><span class="c22">&quot;MultiLine2&quot;</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">Label</span><span>&nbsp;</span><span class="c0">name</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Label</span><span class="c4">(</span><span class="c0">user</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">name</span><span>.</span><span class="c0">setUIID</span><span class="c4">(</span><span class="c22">&quot;MultiLine3&quot;</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">south</span><span>.</span><span class="c0">addComponent</span><span class="c4">(</span><span class="c0">BorderLayout</span><span>.</span><span class="c0">CENTER</span><span>, </span><span class="c0">dateText</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">south</span><span>.</span><span class="c0">addComponent</span><span class="c4">(</span><span class="c0">BorderLayout</span><span>.</span><span class="c0">EAST</span><span>, </span><span class="c0">name</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">entry</span><span>.</span><span class="c0">setLeadComponent</span><span class="c4">(</span><span class="c0">lead</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">tweets</span><span>.</span><span class="c0">addComponent</span><span class="c4">(</span><span class="c0">entry</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">lead</span><span>.</span><span class="c0">addActionListener</span><span class="c4">(</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">ActionListener</span><span class="c4">()</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">public</span><span>&nbsp;</span><span class="c9">void</span><span>&nbsp;</span><span class="c0">actionPerformed</span><span class="c4">(</span><span class="c0">ActionEvent</span><span>&nbsp;</span><span class="c0">evt</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">if</span><span class="c4">(</span><span class="c0">finalURL</span><span>&nbsp;</span><span class="c7">!=</span><span>&nbsp;</span><span class="c9">null</span><span>&nbsp;</span><span class="c7">&amp;&amp;</span><span>&nbsp;</span><span class="c0">finalURL</span><span>.</span><span class="c0">length</span><span class="c4">()</span><span>&nbsp;</span><span class="c7">&gt;</span><span>&nbsp;</span><span class="c14">0</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">Display</span><span>.</span><span class="c0">getInstance</span><span class="c4">()</span><span>.</span><span class="c0">execute</span><span class="c4">(</span><span class="c0">finalURL</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">}</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">}</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">})</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">}</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">tweets</span><span>.</span><span class="c0">animateLayout</span><span class="c4">(</span><span class="c14">350</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">}</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">}</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">t</span><span>.</span><span class="c0">setUrl</span><span class="c4">(</span><span class="c22">&quot;http://search.twitter.com/search.json&quot;</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">t</span><span>.</span><span class="c0">setPost</span><span class="c4">(</span><span class="c9">false</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">t</span><span>.</span><span class="c0">setContentType</span><span class="c4">(</span><span class="c22">&quot;application/json&quot;</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">t</span><span>.</span><span class="c0">addRequestHeader</span><span class="c4">(</span><span class="c22">&quot;Accept&quot;</span><span>, </span><span class="c22">&quot;application/json&quot;</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c11">// we pass arguments to the plugin via the meta data, the argument types</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c11">// are declated in the plugin XML</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">String</span><span>&nbsp;</span><span class="c0">user</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c4">(</span><span class="c0">String</span><span class="c4">)</span><span class="c0">getMetaData</span><span class="c4">()</span><span>.</span><span class="c0">get</span><span class="c4">(</span><span class="c22">&quot;user&quot;</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">if</span><span class="c4">(</span><span class="c0">user</span><span>&nbsp;</span><span class="c7">==</span><span>&nbsp;</span><span class="c9">null</span><span>&nbsp;</span><span class="c7">||</span><span>&nbsp;</span><span class="c0">user</span><span>.</span><span class="c0">length</span><span class="c4">()</span><span>&nbsp;</span><span class="c7">==</span><span>&nbsp;</span><span class="c14">0</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">user</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c22">&quot;@codename-one&quot;</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">}</span><span>&nbsp;</span><span class="c9">else</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">if</span><span class="c4">(</span><span class="c7">!</span><span class="c0">user</span><span>.</span><span class="c0">startsWith</span><span class="c4">(</span><span class="c22">&quot;@&quot;</span><span class="c4">))</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">user</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c22">&quot;@&quot;</span><span>&nbsp;</span><span class="c7">+</span><span>&nbsp;</span><span class="c0">user</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">}</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">}</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">t</span><span>.</span><span class="c0">addArgument</span><span class="c4">(</span><span class="c22">&quot;q&quot;</span><span>, </span><span class="c0">user</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">tweets</span><span>.</span><span class="c0">addComponent</span><span class="c4">(</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">InfiniteProgress</span><span class="c4">())</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">NetworkManager</span><span>.</span><span class="c0">getInstance</span><span class="c4">()</span><span>.</span><span class="c0">addToQueue</span><span class="c4">(</span><span class="c0">t</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">return</span><span>&nbsp;</span><span class="c0">tweets</span><span class="c7">;</span><span><br> &nbsp; &nbsp;</span><span class="c4">}</span><span><br></span><span class="c4">}</span><span><br></span></p><p class="c3"><span>Notice the overriden methods above are a part of the plugin interface, once we are in the plugin itself we can just write any Codename One code that we want although keep in mind that I try not to block the execution thread... Otherwise I might create an unpleasant experience when building a tabs based application.</span></p><p class="c3"><span>Also notice that I enable scrollability since the parent form won&#39;t be accessible we disabled scrolling there (to avoid nested scrolling issues), if you need scrolling you need to explicitly declare it.</span></p><p class="c3"><span>Its probably obvious but bares stating that the plugin class must be public, have a no argument constructor (or no constructor which is the same thing) and mustn&#39;t be abstract.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>You will also need one more file which is the xml descriptor file, in my case its twitter.mplugin (in the root of the downloaded file) which you can see right here:</span></p><p class="c3"><span class="c6 c33">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></p><p class="c3"><span class="c33 c47">&lt;plugin</span><span class="c33 c19">&nbsp;</span><span class="c33 c60">makerVer=</span><span class="c33 c44">&quot;0.4&quot;</span><span class="c33 c19">&nbsp;</span><span class="c33 c60">name=</span><span class="c33 c44">&quot;My Tweets&quot;</span><span class="c33 c19">&nbsp;</span><span class="c33 c60">package=</span><span class="c33 c44">&quot;com.mycompany.plugin.mytweets&quot;</span><span class="c33 c19">&nbsp;</span><span class="c33 c60">developer=</span><span class="c33 c44">&quot;emailUsedForRegistration@domain.com&quot;</span></p><p class="c3"><span class="c33 c19">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c33 c60">developerName=</span><span class="c33 c44">&quot;My Company Name&quot;</span><span class="c33 c19">&nbsp;</span><span class="c33 c60">version=</span><span class="c33 c44">&quot;1.0&quot;</span><span class="c33 c19">&nbsp;</span><span class="c33 c60">help=</span><span class="c33 c44">&quot;http://website.com/help.html&quot;</span><span class="c33 c19">&nbsp; &nbsp; </span><span class="c33 c60">cn1lib=</span><span class="c33 c44">&quot;https://dl.dropboxusercontent.com/u/57067724/cn1/HelloCodenameOnePlugin.cn1lib&quot;</span><span class="c33 c19">&nbsp;</span><span class="c33 c60">class=</span><span class="c33 c44">&quot;Plugin&quot;</span><span class="c33 c47">&gt;</span></p><p class="c3"><span class="c33 c19">&nbsp; &nbsp;</span><span class="c33 c47">&lt;arg</span><span class="c33 c19">&nbsp;</span><span class="c33 c60">name=</span><span class="c33 c44">&quot;user&quot;</span><span class="c33 c19">&nbsp;</span><span class="c33 c60">display=</span><span class="c33 c44">&quot;Twitter User&quot;</span><span class="c33 c19">&nbsp;</span><span class="c33 c60">type=</span><span class="c33 c44">&quot;string&quot;</span><span class="c33 c19">&nbsp;</span><span class="c33 c60">default=</span><span class="c33 c44">&quot;@codename-one&quot;</span><span class="c33 c19">&nbsp;</span><span class="c33 c60">details=</span><span class="c33 c44">&quot;The twitter user handle with or without the @ sign&quot;</span><span class="c33 c19">&nbsp;</span><span class="c33 c47">/&gt;</span><span class="c33 c19">;</span></p><p class="c3"><span class="c33 c47">&lt;/plugin&gt;</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>Notice several things:</span></p><ul class="c45 lst-kix_sxcl9nkaveap-0 start"><li class="c3 c20 c12"><span>We declare the maker version, this is crucial since if someone hasn&#39;t updated Maker on the device and your plugin expects a specific version... It should fail to install.</span></li><li class="c3 c20 c12"><span>The package name and the class name must match exactly your class since that is how we generate the plugin calls on the server!</span></li><li class="c3 c20 c12"><span>The cn1lib entry MUST point at an absolute URL where the plugin can be downloaded from, the download only happens on the build server so the build will fail if the file isn&#39;t accessible.</span></li><li class="c3 c20 c12"><span>You can define as many arguments as you want but currently all of them must be strings, we are working on adding more options in the future.</span></li></ul><hr style="page-break-before:always;display:none;"><p class="c3 c5"><span></span></p><h1 class="c3"><a name="h.5gy3k2h5cese"></a><span class="c10">Appendix: Cloud Object API On The Desktop</span></h1><p class="c3"><span>Using the cloud object API is remarkably powerful on the devices, however it becomes even more powerful when you can import data into the cloud server or communicate with it from a dedicated client (e.g. push data to the server).</span></p><p class="c3 c5"><span></span></p><p class="c3"><span>To do so you can use the JavaSE.jar within any Java SE application make sure to invoke Display.init(new java.awt.Container()); before starting at which point you will be able to use all the standard methods of the cloud storage API to batch import or export data into/from the cloud storage.</span></p><p class="c3 c5"><span></span></p><p class="c3 c5"><span></span></p><hr style="page-break-before:always;display:none;"><p class="c3 c5"><span></span></p><h1 class="c3"><a name="h.adqh1xcdmcry"></a><span class="c10">Appendix: Casual Game Programming</span></h1><h2 class="c3 c66"><a name="h.wfcyz8shkf0"></a><span class="c62">While game developers have traditionally used C/OpenGL to get every bit of performance out of a device, Java offers a unique opportunity for casual game developers. In this article we will build a simple card game in Java that can run unchanged on iOS, Android and RIM devices. </span></h2><p class="c3"><span>Casual games are often the most influential games of all, they cross demographics such as the ubiquitous solitaire or even the chart topping Angry birds. Putting them in the same game category as 3D FPS games doesn&rsquo;t always make sense.</span></p><p class="c3"><span>Yes, framerates are important but ubiquity, social connectivity &amp; gameplay are even more important for this sub genre of the game industry. The mobile aspect highlights this point further, the way app stores are built releasing often puts your game at an advantage over its competitor&rsquo;s. Yet releasing to all platforms and all screen sizes becomes an issue soon enough.</span></p><p class="c3"><span>Java has been familiar for mobile game developers for quite some time for better or worse. Despite all its issues J2ME was a pretty amazing tool considering the fact that it was last updated in 2004 (iPhone was introduced in 2007), game developers were able to squeeze quite a lot of power from that very limited platform. Many of these early J2ME game developers have since moved to Android game development which is also growing rapidly. </span></p><p class="c3"><span>In this article I&rsquo;m going to go over the process of writing a simple card game for iOS, Android and RIM devices using Codename One which is an open source platform for mobile application development in Java. The value of using Codename One here is mostly in its ability to target iOS which has a far better retention rate and revenue stream than Android, although the true value is in ubiquity and the ability of our users to share the application. Codename One itself is not a game development platform and is designed mostly as an application development platform. However, some developers used the tool to build casual games.</span></p><p class="c3"><span>Typically a game is comprised of a game loop which updates UI status based on game time and renders the UI. However, with casual games constantly rendering is redundant and with mobile games it could put a major drain on the battery life. Instead we will use components to build the game elements and let Codename One do the rendering for us. </span></p><h2 class="c3"><a name="h.8pkz6orm737f"></a><span class="c10">The Game</span></h2><p class="c3"><span>We will create a poker game for 1 player that doesn&rsquo;t include the betting process or any of the complexities such as AI (you can see the game running on the simulator here: </span><span class="c56">www.youtube.com/watch?v=4IQGBT3VsSQ</span><span>), card evaluation or validation. This allows us to fit the whole source code in 270 lines of code (more due to comments). I also chose to simplify the UI for touch devices only, technically it would be pretty easy to add keypad support but it would complicate the code and require additional designs (for focus states).</span></p><p class="c3"><span>The game consists of two forms: Splash screen and the main game UI.</span></p><p class="c3"><span>Codename One has a GUI builder that allows drag and drop development, however we won&rsquo;t be using it since its really difficult to convey GUI builder activity in an article.</span></p><h2 class="c3"><a name="h.xxflo1xfhxas"></a><span class="c10">Getting Started</span></h2><p class="c3"><span>Make sure to select the Hello World (Manual) option since we don&rsquo;t want to use the GUI builder.</span></p><p class="c3"><span>Also make sure to enter a valid package name pointing to a domain you own in the common Java convention, this is important since it would be hard to change the name later on. The package name is used as a unique identifier in most app stores and once the app is published it can&rsquo;t be changed!</span></p><p class="c3"><span>Once you clicked finish you should have a new project and you should be able to write the game interaction code. You can press run to see the hello world app and you will notice the project also has a theme.res file which includes potential project resources. But first lets go over the issue of dealing with screen resolutions.</span></p><h2 class="c3"><a name="h.bk0ctz2amdr2"></a><span class="c10">Handling Multiple Device Resolutions</span></h2><p class="c3"><span>In mobile device programming every pixel is crucial because of the small size of the screen, however we can&rsquo;t shrink down our graphics too much because it needs to be &ldquo;finger friendly&rdquo; (big enough for a finger) and readable. There is great disparity in the device world, even within the iOS family the current iPad has more than twice the screen density of the iPad mini. This means that an image that looks good on the iPad mini will seem either small or very pixelated on an iPad, on the other hand an image that looks good on the iPad would look huge (and take up too much RAM) on the iPad mini. The situation is even worse when dealing with phones and Android devices. </span></p><p class="c3"><span>Thankfully there are solutions, such as using multiple images for every density (DPI). However, this is tedious for developers who need to scale the image and copy it every time for every resolution. Codename One has a feature called MultiImage which implicitly scales the images to all the resolutions on the desktop and places them within the res file, in runtime you will get the image that matches your devices density. </span></p><p class="c3"><span>There is a catch though... MultiImage is designed for applications where we want the density to determine the size. So an iPad will have the same density as an iPhone since both share the same amount of pixels per inch. This makes sense for an app since the images will be big enough to touch and clear. Furthermore, since the iPad screen is larger more data will fit on the screen!</span></p><p class="c3"><span>However, game developers have a different constraint when it comes to game elements. In the case of a game we want the images to match the device resolution and take up as much screen real estate as possible, otherwise our game would be constrained to a small portion of the tablet and look small. There is a solution though, we can determine our own DPI level when loading resources and effectively force a DPI based on screen resolution only when working with game images!</span></p><p class="c3"><span>To work with such varied resolutions/DPI&rsquo;s and potential screen orientation changes we need another tool in our arsenal: layout managers. </span></p><p class="c3"><span>If you are familiar with AWT/Swing this should be pretty easy, Codename One allows you to codify the logic that flows Components within the UI. We will use the layout managers to facilitate that logic and preserve the UI flow when the device is rotated.</span></p><h2 class="c3"><a name="h.qtp9kmjjxviu"></a><span class="c10">Resources</span></h2><p class="c3"><span>To save some time/effort I suggest using the ready made resource files linked in the On The Web section below. I suggest skipping this section and moving on to the code, however for completeness here is what I did to create these resources:</span></p><p class="c3"><span>You will need a gamedata.res file that contains all the 52 cards as multi images using the naming convention of &lsquo;rank suite.png&rsquo; example: 10c.png (10 of clubs) or ad.png (Ace of diamonds). </span></p><p class="c3"><span>To accomplish this I created 52 images of roughly 153x217 pixels for all the cards then used the designer tool and selected &ldquo;Quick Add MultiImages&rdquo; from the menu. When prompted I selected HD resolution. This effectively created 52 multi-images for all relevant resolutions.</span></p><p class="c3"><span>I also modified the default theme that came in the application in small ways to create the white over green color scheme, I opened it in the designer tool by double clicking it and selected the theme.</span></p><p class="c3"><span>I then pressed Add and added a Form entry with background NONE, background color 6600 and transparency 255.</span></p><p class="c3"><span>I added a Label style with transparency 0 and foreground 255 and then copied the style to pressed/selected (since its applied to buttons too).</span></p><p class="c3"><span>I did the same for the SplashTitle/SplashSubtitle but there I also set the alignment to center, the font to bold and in the case of SplashTitle to Large font as well.</span></p><h2 class="c3"><a name="h.d1pk0e9p259q"></a><span class="c10">The Splash Screen</span></h2><p class="c3"><span>The first step is creating the splash animation as you can see in the screenshots in figure 2.</span></p><p class="c3 c5"><span></span></p><p class="c3"><span class="c9">Figure 2</span><span>: Animation stages for the splash screen opening animation</span></p><p class="c3"><img height="195" src="images/image72.jpg" width="609"></p><p class="c3"><span>The animation in the splash screen and most of the following animations are achieved using the simple tool of layout animations. In Codename One components are automatically arranged into position using layout managers, however this isn&rsquo;t implicit unless the device is rotated. A layout animation relies on this fact, it allows you to place components in a position (whether by using a layout manager or by using setX/setY) then invoke the layout animation code so they will slide into their &ldquo;proper&rdquo; position based on the layout manager rules. </span></p><p class="c3"><span>You can see how I achieved the splash screen animation of the cards sliding into place in Listing 1 within the </span><span class="c36">showSplashScreen()</span><span>&nbsp;method. After we change the layout to a box X layout we just invoke </span><span class="c36">animateHierarchy</span><span>&nbsp;to animate the cards into place.</span></p><p class="c3"><span>Notice that we use the </span><span class="c36">callSerially</span><span>&nbsp;method to start the actual animation, it might not seem necessary at first until you try running the code on iOS. The first screen of the UI is very important for the iOS port which uses a screenshot to speed startup (this is a feature of the native iOS platform which as of this writing requires 7 sceenshots in different resolutions/orientations for every application, Codename One generates those shots automatically and adds them to your app). If we won&rsquo;t have this callSerially invocation the screenshot rendering process will not succeed and the animation will stutter. </span></p><p class="c3"><span>We also have a cover transition defined here, its just a simple overlay when moving from one form to another.</span></p><h2 class="c3"><a name="h.c3vescr4stg5"></a><span class="c10">The Game UI</span></h2><p class="c3"><span>Initially when entering the game form we have another animation where all the cards are laid out as you can see in Figure 3. We then have a long sequence of animation where the cards unify into place to form a pile (with a cover background falling on top) after which dealing begins and cards animate to the rival (with back only showing) or to you with the face showing. Then the instructions to swap cards fade into place.</span></p><p class="c3"><span class="c9">Figure 3:</span><span>&nbsp;Game form startup animation and deal animation</span></p><p class="c3"><img height="152" src="images/image48.jpg" width="608"></p><p class="c3"><span>This animation is really easy to accomplish although it does have several stages. In the first stage we layout the cards within a grid layout (13x4), then when the animation starts (see the UITimer code within showGameUI()) we just change the layout to a layered layout, add the back card (so it will come out on top based on z-ordering) and invoke animate layout.</span></p><p class="c3"><span>Notice that here we use </span><span class="c36">animateLayoutAndWait</span><span>, which effectively blocks the calling thread until the animation is completed. This is a VERY important and tricky subject!</span></p><p class="c3"><span>Codename One is for the most part a single threaded API, it supports working on other threads but it is your responsibility to invoke everything on the EDT (Event Dispatch Thread). Since the EDT does all the rendering, events etc. if you block it you will effectively stop Codename One in its place! However, there is a trick: </span><span class="c36">invokeAndBlock</span><span>&nbsp;is a feature that allows you to stop the EDT and do stuff then restore the EDT without &ldquo;really&rdquo; stopping it. Its tricky, I won&rsquo;t get into this in this article (this subject deserves an article of its own) but the gist of it is that you can&rsquo;t just invoke </span><span class="c36">Thread.sleep()</span><span>&nbsp;in a Codename One application (at least not on the EDT) but you can use clever methods such as </span><span class="c36">Dialog.show()</span><span>, </span><span class="c36">animateLayoutAndWait</span><span>&nbsp;etc. and they will block the EDT for you. This is really convenient since you can just write code serially without requiring event handling for every single feature.</span></p><p class="c3"><span>Now that we got that out of the way, the rest of the code is clearer. Now we understand that </span><span class="c36">animateLayoutAndWait</span><span>&nbsp;will literally wait for the animation to complete and the next lines can do the next animation. Indeed after that we invoke the </span><span class="c36">dealCard</span><span>&nbsp;method that hands the cards to the players. This method is also blocking (using and wait methods internally) it also marks the cards as draggable and adds that drag and drop logic which we will later use to swap cards.</span></p><p class="c3"><span>Last but not least in the animation department, we use a method called replace to fade in a component using a transition. </span></p><p class="c3"><span>To handle the dealing we added an action listener to the deck button, this action listener is invoked when the cards are dealt and that completes the game. &nbsp;</span></p><h2 class="c3"><a name="h.sdu0y9tiy4fq"></a><span class="c10">Summary</span></h2><p class="c3"><span>It is really easy to create a functional and attractive mobile game in Java and have it work on all devices. Adding networking and social interaction would be relatively easy and the place where using Java really shines. While normally game developers deal with graphics systems and game loops, you can still create a very attractive casual game while staying within the comfort zone of components. The value here is in easy support for orientation changes and various resolutions.</span></p><p class="c3"><span>Developing this game demo took me one afternoon with most of the time being spent at cutting the card images to the right size, I hope you will find this useful and join us on the Codename One discussion forum with questions/comments. </span></p><p class="c3 c5"><span class="c9 c62"></span></p><p class="c3"><span class="c9 c27">package com.codename1.demo.poker;</span><span><br><br></span><span class="c9 c27">import com.codename1.ui.Button;</span><span><br></span><span class="c9 c27">import com.codename1.ui.Component;</span><span><br></span><span class="c9 c27">import com.codename1.ui.Container;</span><span><br></span><span class="c9 c27">import com.codename1.ui.Dialog;</span><span><br></span><span class="c9 c27">import com.codename1.ui.Display;</span><span><br></span><span class="c9 c27">import com.codename1.ui.Form;</span><span><br></span><span class="c9 c27">import com.codename1.ui.Image;</span><span><br></span><span class="c9 c27">import com.codename1.ui.Label;</span><span><br></span><span class="c9 c27">import com.codename1.ui.TextArea;</span><span><br></span><span class="c9 c27">import com.codename1.ui.animations.CommonTransitions;</span><span><br></span><span class="c9 c27">import com.codename1.ui.events.ActionEvent;</span><span><br></span><span class="c9 c27">import com.codename1.ui.events.ActionListener;</span><span><br></span><span class="c9 c27">import com.codename1.ui.geom.Dimension;</span><span><br></span><span class="c9 c27">import com.codename1.ui.layouts.BorderLayout;</span><span><br></span><span class="c9 c27">import com.codename1.ui.layouts.BoxLayout;</span><span><br></span><span class="c9 c27">import com.codename1.ui.layouts.FlowLayout;</span><span><br></span><span class="c9 c27">import com.codename1.ui.layouts.GridLayout;</span><span><br></span><span class="c9 c27">import com.codename1.ui.layouts.LayeredLayout;</span><span><br></span><span class="c9 c27">import com.codename1.ui.plaf.UIManager;</span><span><br></span><span class="c9 c27">import com.codename1.ui.util.Resources;</span><span><br></span><span class="c9 c27">import com.codename1.ui.util.UITimer;</span><span><br></span><span class="c9 c27">import java.io.IOException;</span><span><br></span><span class="c9 c27">import java.util.ArrayList;</span><span><br></span><span class="c9 c27">import java.util.Arrays;</span><span><br></span><span class="c9 c27">import java.util.Collections;</span><span><br></span><span class="c9 c27">import java.util.List;</span><span><br><br></span><span class="c56 c11">/**<br> * Demo app showing how a simple poker card game can be written using Codename One, this<br> * demo was developed for an &lt;a href=&quot;http://www.sdjournal.org&quot;&gt;SD Journal&lt;/a&gt; article.<br> * @author Shai Almog<br> */</span><span><br></span><span class="c9">public</span><span>&nbsp;</span><span class="c9">class</span><span>&nbsp;</span><span class="c0">Poker</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp;</span><span class="c9">private</span><span>&nbsp;</span><span class="c9">static</span><span>&nbsp;</span><span class="c9">final</span><span>&nbsp;</span><span class="c9">char</span><span>&nbsp;</span><span class="c0">SUITE_SPADE</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c22">&#39;s&#39;</span><span class="c7">;</span><span><br> &nbsp; &nbsp;</span><span class="c9">private</span><span>&nbsp;</span><span class="c9">static</span><span>&nbsp;</span><span class="c9">final</span><span>&nbsp;</span><span class="c9">char</span><span>&nbsp;</span><span class="c0">SUITE_HEART</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c22">&#39;h&#39;</span><span class="c7">;</span><span><br> &nbsp; &nbsp;</span><span class="c9">private</span><span>&nbsp;</span><span class="c9">static</span><span>&nbsp;</span><span class="c9">final</span><span>&nbsp;</span><span class="c9">char</span><span>&nbsp;</span><span class="c0">SUITE_DIAMOND</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c22">&#39;d&#39;</span><span class="c7">;</span><span><br> &nbsp; &nbsp;</span><span class="c9">private</span><span>&nbsp;</span><span class="c9">static</span><span>&nbsp;</span><span class="c9">final</span><span>&nbsp;</span><span class="c9">char</span><span>&nbsp;</span><span class="c0">SUITE_CLUB</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c22">&#39;c&#39;</span><span class="c7">;</span><span><br> &nbsp; &nbsp;<br> &nbsp; &nbsp;</span><span class="c9">private</span><span>&nbsp;</span><span class="c0">Resources</span><span>&nbsp;</span><span class="c0">cards</span><span class="c7">;</span><span><br> &nbsp; &nbsp;</span><span class="c9">private</span><span>&nbsp;</span><span class="c0">Form</span><span>&nbsp;</span><span class="c0">current</span><span class="c7">;</span><span><br> &nbsp; &nbsp;</span><span class="c9">private</span><span>&nbsp;</span><span class="c9">final</span><span>&nbsp;</span><span class="c9">static</span><span>&nbsp;</span><span class="c0">Card</span><span class="c4">[]</span><span>&nbsp;</span><span class="c0">deck</span><span class="c7">;</span><span><br> &nbsp; &nbsp;<br> &nbsp; &nbsp;</span><span class="c9">static</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c11">// we initialize constant card values that will be useful later on in the game</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">deck</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Card</span><span class="c4">[</span><span class="c14">52</span><span class="c4">]</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">for</span><span class="c4">(</span><span class="c9">int</span><span>&nbsp;</span><span class="c0">iter</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c14">0</span><span>&nbsp;</span><span class="c7">;</span><span>&nbsp;</span><span class="c0">iter</span><span>&nbsp;</span><span class="c7">&lt;</span><span>&nbsp;</span><span class="c14">13</span><span>&nbsp;</span><span class="c7">;</span><span>&nbsp;</span><span class="c0">iter</span><span class="c7">++</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">deck</span><span class="c4">[</span><span class="c0">iter</span><span class="c4">]</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Card</span><span class="c4">(</span><span class="c0">SUITE_SPADE</span><span>, </span><span class="c0">iter</span><span>&nbsp;</span><span class="c7">+</span><span>&nbsp;</span><span class="c14">2</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">deck</span><span class="c4">[</span><span class="c0">iter</span><span>&nbsp;</span><span class="c7">+</span><span>&nbsp;</span><span class="c14">13</span><span class="c4">]</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Card</span><span class="c4">(</span><span class="c0">SUITE_HEART</span><span>, </span><span class="c0">iter</span><span>&nbsp;</span><span class="c7">+</span><span>&nbsp;</span><span class="c14">2</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">deck</span><span class="c4">[</span><span class="c0">iter</span><span>&nbsp;</span><span class="c7">+</span><span>&nbsp;</span><span class="c14">26</span><span class="c4">]</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Card</span><span class="c4">(</span><span class="c0">SUITE_DIAMOND</span><span>, </span><span class="c0">iter</span><span>&nbsp;</span><span class="c7">+</span><span>&nbsp;</span><span class="c14">2</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">deck</span><span class="c4">[</span><span class="c0">iter</span><span>&nbsp;</span><span class="c7">+</span><span>&nbsp;</span><span class="c14">39</span><span class="c4">]</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Card</span><span class="c4">(</span><span class="c0">SUITE_CLUB</span><span>, </span><span class="c0">iter</span><span>&nbsp;</span><span class="c7">+</span><span>&nbsp;</span><span class="c14">2</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">}</span><span><br> &nbsp; &nbsp;</span><span class="c4">}</span><span><br><br> &nbsp; &nbsp;</span><span class="c56 c11">/**<br> &nbsp; &nbsp; * We use this method to calculate a &quot;fake&quot; DPI based on screen resolution rather than its actual DPI<br> &nbsp; &nbsp; * this is useful so we can have large images on a tablet<br> &nbsp; &nbsp; */</span><span><br> &nbsp; &nbsp;</span><span class="c9">private</span><span>&nbsp;</span><span class="c9">int</span><span>&nbsp;</span><span class="c0">calculateDPI</span><span class="c4">()</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">int</span><span>&nbsp;</span><span class="c0">pixels</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c0">Display</span><span>.</span><span class="c0">getInstance</span><span class="c4">()</span><span>.</span><span class="c0">getDisplayHeight</span><span class="c4">()</span><span>&nbsp;</span><span class="c7">*</span><span>&nbsp;</span><span class="c0">Display</span><span>.</span><span class="c0">getInstance</span><span class="c4">()</span><span>.</span><span class="c0">getDisplayWidth</span><span class="c4">()</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">if</span><span class="c4">(</span><span class="c0">pixels</span><span>&nbsp;</span><span class="c7">&gt;</span><span>&nbsp;</span><span class="c14">1000000</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">return</span><span>&nbsp;</span><span class="c0">Display</span><span>.</span><span class="c0">DENSITY_HD</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">}</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">if</span><span class="c4">(</span><span class="c0">pixels</span><span>&nbsp;</span><span class="c7">&gt;</span><span>&nbsp;</span><span class="c14">340000</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">return</span><span>&nbsp;</span><span class="c0">Display</span><span>.</span><span class="c0">DENSITY_VERY_HIGH</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">}</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">if</span><span class="c4">(</span><span class="c0">pixels</span><span>&nbsp;</span><span class="c7">&gt;</span><span>&nbsp;</span><span class="c14">150000</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">return</span><span>&nbsp;</span><span class="c0">Display</span><span>.</span><span class="c0">DENSITY_HIGH</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">}</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">return</span><span>&nbsp;</span><span class="c0">Display</span><span>.</span><span class="c0">DENSITY_MEDIUM</span><span class="c7">;</span><span><br> &nbsp; &nbsp;</span><span class="c4">}</span><span><br> &nbsp; &nbsp;<br> &nbsp; &nbsp;</span><span class="c56 c11">/**<br> &nbsp; &nbsp; * This method is invoked by Codename One once when the application loads<br> &nbsp; &nbsp; */</span><span><br> &nbsp; &nbsp;</span><span class="c9">public</span><span>&nbsp;</span><span class="c9">void</span><span>&nbsp;</span><span class="c0">init</span><span class="c4">(</span><span class="c0">Object</span><span>&nbsp;</span><span class="c0">context</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">try</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c11">// after loading the default theme we load the card images as a resource with</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c11">// a fake DPI so they will be large enough. We store them in a resource rather </span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c11">// than as files so we can use the MultiImage functionality</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">Resources</span><span>&nbsp;</span><span class="c0">theme</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c0">Resources</span><span>.</span><span class="c0">openLayered</span><span class="c4">(</span><span class="c22">&quot;/theme&quot;</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">UIManager</span><span>.</span><span class="c0">getInstance</span><span class="c4">()</span><span>.</span><span class="c0">setThemeProps</span><span class="c4">(</span><span class="c0">theme</span><span>.</span><span class="c0">getTheme</span><span class="c4">(</span><span class="c0">theme</span><span>.</span><span class="c0">getThemeResourceNames</span><span class="c4">()[</span><span class="c14">0</span><span class="c4">]))</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">cards</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c0">Resources</span><span>.</span><span class="c0">open</span><span class="c4">(</span><span class="c22">&quot;/gamedata.res&quot;</span><span>, </span><span class="c0">calculateDPI</span><span class="c4">())</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; </span><span class="c4">}</span><span>&nbsp;</span><span class="c9">catch</span><span class="c4">(</span><span class="c0">IOException</span><span>&nbsp;</span><span class="c0">e</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">e</span><span>.</span><span class="c0">printStackTrace</span><span class="c4">()</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; </span><span class="c4">}</span><span><br> &nbsp; &nbsp;</span><span class="c4">}</span><span><br> &nbsp; &nbsp;<br> &nbsp; &nbsp;</span><span class="c56 c11">/**<br> &nbsp; &nbsp; * This method is invoked by Codename One once when the application loads and when it is restarted<br> &nbsp; &nbsp; */</span><span><br> &nbsp; &nbsp;</span><span class="c9">public</span><span>&nbsp;</span><span class="c9">void</span><span>&nbsp;</span><span class="c0">start</span><span class="c4">()</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">if</span><span class="c4">(</span><span class="c0">current</span><span>&nbsp;</span><span class="c7">!=</span><span>&nbsp;</span><span class="c9">null</span><span class="c4">){</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">current</span><span>.</span><span class="c0">show</span><span class="c4">()</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">return</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">}</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">showSplashScreen</span><span class="c4">()</span><span class="c7">;</span><span><br> &nbsp; &nbsp;</span><span class="c4">}</span><span><br> &nbsp; &nbsp;<br> &nbsp; &nbsp;</span><span class="c56 c11">/**<br> &nbsp; &nbsp; * The splash screen is relatively bare bones. Its important to have a splash screen for iOS <br> &nbsp; &nbsp; * since the build process generates a screenshot of this screen to speed up perceived performance<br> &nbsp; &nbsp; */</span><span><br> &nbsp; &nbsp;</span><span class="c9">public</span><span>&nbsp;</span><span class="c9">void</span><span>&nbsp;</span><span class="c0">showSplashScreen</span><span class="c4">()</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">final</span><span>&nbsp;</span><span class="c0">Form</span><span>&nbsp;</span><span class="c0">splash</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Form</span><span class="c4">()</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c11">// a border layout places components in the center and the 4 sides.</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c11">// by default it scales the center component so here we configure</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c11">// it to place the component in the actual center</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">BorderLayout</span><span>&nbsp;</span><span class="c0">border</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">BorderLayout</span><span class="c4">()</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">border</span><span>.</span><span class="c0">setCenterBehavior</span><span class="c4">(</span><span class="c0">BorderLayout</span><span>.</span><span class="c0">CENTER_BEHAVIOR_CENTER_ABSOLUTE</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">splash</span><span>.</span><span class="c0">setLayout</span><span class="c4">(</span><span class="c0">border</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c11">// by default the form&#39;s content pane is scrollable on the Y axis</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c11">// we need to disable it here</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">splash</span><span>.</span><span class="c0">setScrollable</span><span class="c4">(</span><span class="c9">false</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">Label</span><span>&nbsp;</span><span class="c0">title</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Label</span><span class="c4">(</span><span class="c22">&quot;Poker Ace&quot;</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c11">// The UIID is used to determine the appearance of the component in the theme</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">title</span><span>.</span><span class="c0">setUIID</span><span class="c4">(</span><span class="c22">&quot;SplashTitle&quot;</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">Label</span><span>&nbsp;</span><span class="c0">subtitle</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Label</span><span class="c4">(</span><span class="c22">&quot;By Codename One&quot;</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">subtitle</span><span>.</span><span class="c0">setUIID</span><span class="c4">(</span><span class="c22">&quot;SplashSubTitle&quot;</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">splash</span><span>.</span><span class="c0">addComponent</span><span class="c4">(</span><span class="c0">BorderLayout</span><span>.</span><span class="c0">NORTH</span><span>, </span><span class="c0">title</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">splash</span><span>.</span><span class="c0">addComponent</span><span class="c4">(</span><span class="c0">BorderLayout</span><span>.</span><span class="c0">SOUTH</span><span>, </span><span class="c0">subtitle</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">Label</span><span>&nbsp;</span><span class="c0">as</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Label</span><span class="c4">(</span><span class="c0">cards</span><span>.</span><span class="c0">getImage</span><span class="c4">(</span><span class="c22">&quot;as.png&quot;</span><span class="c4">))</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">Label</span><span>&nbsp;</span><span class="c0">ah</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Label</span><span class="c4">(</span><span class="c0">cards</span><span>.</span><span class="c0">getImage</span><span class="c4">(</span><span class="c22">&quot;ah.png&quot;</span><span class="c4">))</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">Label</span><span>&nbsp;</span><span class="c0">ac</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Label</span><span class="c4">(</span><span class="c0">cards</span><span>.</span><span class="c0">getImage</span><span class="c4">(</span><span class="c22">&quot;ac.png&quot;</span><span class="c4">))</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">Label</span><span>&nbsp;</span><span class="c0">ad</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Label</span><span class="c4">(</span><span class="c0">cards</span><span>.</span><span class="c0">getImage</span><span class="c4">(</span><span class="c22">&quot;ad.png&quot;</span><span class="c4">))</span><span class="c7">;</span><span><br><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c11">// a layered layout places components one on top of the other in the same dimension, it is</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c11">// useful for transparency but in this case we are using it for an animation</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">final</span><span>&nbsp;</span><span class="c0">Container</span><span>&nbsp;</span><span class="c0">center</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Container</span><span class="c4">(</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">LayeredLayout</span><span class="c4">())</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">center</span><span>.</span><span class="c0">addComponent</span><span class="c4">(</span><span class="c0">as</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">center</span><span>.</span><span class="c0">addComponent</span><span class="c4">(</span><span class="c0">ah</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">center</span><span>.</span><span class="c0">addComponent</span><span class="c4">(</span><span class="c0">ac</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">center</span><span>.</span><span class="c0">addComponent</span><span class="c4">(</span><span class="c0">ad</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">splash</span><span>.</span><span class="c0">addComponent</span><span class="c4">(</span><span class="c0">BorderLayout</span><span>.</span><span class="c0">CENTER</span><span>, </span><span class="c0">center</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">splash</span><span>.</span><span class="c0">show</span><span class="c4">()</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">splash</span><span>.</span><span class="c0">setTransitionOutAnimator</span><span class="c4">(</span><span class="c0">CommonTransitions</span><span>.</span><span class="c0">createCover</span><span class="c4">(</span><span class="c0">CommonTransitions</span><span>.</span><span class="c0">SLIDE_VERTICAL</span><span>, </span><span class="c9">true</span><span>, </span><span class="c14">800</span><span class="c4">))</span><span class="c7">;</span><span><br><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c11">// postpone the animation to the next cycle of the EDT to allow the UI to render fully once</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">Display</span><span>.</span><span class="c0">getInstance</span><span class="c4">()</span><span>.</span><span class="c0">callSerially</span><span class="c4">(</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Runnable</span><span class="c4">()</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">public</span><span>&nbsp;</span><span class="c9">void</span><span>&nbsp;</span><span class="c0">run</span><span class="c4">()</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c11">// We replace the layout so the cards will be laid out in a line and animate the hierarchy</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c11">// over 2 seconds, this effectively creates the effect of cards spreading out</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">center</span><span>.</span><span class="c0">setLayout</span><span class="c4">(</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">BoxLayout</span><span class="c4">(</span><span class="c0">BoxLayout</span><span>.</span><span class="c0">X_AXIS</span><span class="c4">))</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">center</span><span>.</span><span class="c0">setShouldCalcPreferredSize</span><span class="c4">(</span><span class="c9">true</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">splash</span><span>.</span><span class="c0">getContentPane</span><span class="c4">()</span><span>.</span><span class="c0">animateHierarchy</span><span class="c4">(</span><span class="c14">2000</span><span class="c4">)</span><span class="c7">;</span><span><br><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c11">// after showing the animation we wait for 2.5 seconds and then show the game with a nice</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c11">// transition, notice that we use UI timer which is invoked on the Codename One EDT thread!</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">UITimer</span><span class="c4">(</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Runnable</span><span class="c4">()</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">public</span><span>&nbsp;</span><span class="c9">void</span><span>&nbsp;</span><span class="c0">run</span><span class="c4">()</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">showGameUI</span><span class="c4">()</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">}</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">})</span><span>.</span><span class="c0">schedule</span><span class="c4">(</span><span class="c14">2500</span><span>, </span><span class="c9">false</span><span>, </span><span class="c0">splash</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">}</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">})</span><span class="c7">;</span><span><br> &nbsp; &nbsp;</span><span class="c4">}</span><span><br><br> &nbsp; &nbsp;</span><span class="c56 c11">/**<br> &nbsp; &nbsp; * This is the method that shows the game running, it is invoked to start or restart the game<br> &nbsp; &nbsp; */</span><span><br> &nbsp; &nbsp;</span><span class="c9">private</span><span>&nbsp;</span><span class="c9">void</span><span>&nbsp;</span><span class="c0">showGameUI</span><span class="c4">()</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c11">// we use the java.util classes to shuffle a new instance of the deck </span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">final</span><span>&nbsp;</span><span class="c0">List</span><span class="c7">&lt;</span><span class="c0">Card</span><span class="c7">&gt;</span><span>&nbsp;</span><span class="c0">shuffledDeck</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">ArrayList</span><span class="c7">&lt;</span><span class="c0">Card</span><span class="c7">&gt;</span><span class="c4">(</span><span class="c0">Arrays</span><span>.</span><span class="c0">asList</span><span class="c4">(</span><span class="c0">deck</span><span class="c4">))</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">Collections</span><span>.</span><span class="c0">shuffle</span><span class="c4">(</span><span class="c0">shuffledDeck</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">final</span><span>&nbsp;</span><span class="c0">Form</span><span>&nbsp;</span><span class="c0">gameForm</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Form</span><span class="c4">()</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">gameForm</span><span>.</span><span class="c0">setTransitionOutAnimator</span><span class="c4">(</span><span class="c0">CommonTransitions</span><span>.</span><span class="c0">createCover</span><span class="c4">(</span><span class="c0">CommonTransitions</span><span>.</span><span class="c0">SLIDE_VERTICAL</span><span>, </span><span class="c9">true</span><span>, </span><span class="c14">800</span><span class="c4">))</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">Container</span><span>&nbsp;</span><span class="c0">gameFormBorderLayout</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Container</span><span class="c4">(</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">BorderLayout</span><span class="c4">())</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c11">// while flow layout is the default in this case we want it to center into the middle of the screen</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">FlowLayout</span><span>&nbsp;</span><span class="c0">fl</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">FlowLayout</span><span class="c4">(</span><span class="c0">Component</span><span>.</span><span class="c0">CENTER</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">fl</span><span>.</span><span class="c0">setValign</span><span class="c4">(</span><span class="c0">Component</span><span>.</span><span class="c0">CENTER</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">final</span><span>&nbsp;</span><span class="c0">Container</span><span>&nbsp;</span><span class="c0">gameUpperLayer</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Container</span><span class="c4">(</span><span class="c0">fl</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">gameForm</span><span>.</span><span class="c0">setScrollable</span><span class="c4">(</span><span class="c9">false</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c11">// we place two layers in the game form, one contains the contents of the game and another one on top contains instructions</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c11">// and overlays. In this case we only use it to write a hint to the user when he needs to swap his cards</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">gameForm</span><span>.</span><span class="c0">setLayout</span><span class="c4">(</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">LayeredLayout</span><span class="c4">())</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">gameForm</span><span>.</span><span class="c0">addComponent</span><span class="c4">(</span><span class="c0">gameFormBorderLayout</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">gameForm</span><span>.</span><span class="c0">addComponent</span><span class="c4">(</span><span class="c0">gameUpperLayer</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c11">// The game itself is comprised of 3 containers, one for each player containing a grid of 5 cards (grid layout</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c11">// divides space evenly) and the deck of cards/dealer. Initially we show an animation where all the cards</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c11">// gather into the deck, that is why we set the initial deck layout to show the whole deck 4x13</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">final</span><span>&nbsp;</span><span class="c0">Container</span><span>&nbsp;</span><span class="c0">deckContainer</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Container</span><span class="c4">(</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">GridLayout</span><span class="c4">(</span><span class="c14">4</span><span>, </span><span class="c14">13</span><span class="c4">))</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">final</span><span>&nbsp;</span><span class="c0">Container</span><span>&nbsp;</span><span class="c0">playerContainer</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Container</span><span class="c4">(</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">GridLayout</span><span class="c4">(</span><span class="c14">1</span><span>, </span><span class="c14">5</span><span class="c4">))</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">final</span><span>&nbsp;</span><span class="c0">Container</span><span>&nbsp;</span><span class="c0">rivalContainer</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Container</span><span class="c4">(</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">GridLayout</span><span class="c4">(</span><span class="c14">1</span><span>, </span><span class="c14">5</span><span class="c4">))</span><span class="c7">;</span><span><br><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c11">// we place all the card images within the deck container for the initial animation</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">for</span><span class="c4">(</span><span class="c9">int</span><span>&nbsp;</span><span class="c0">iter</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c14">0</span><span>&nbsp;</span><span class="c7">;</span><span>&nbsp;</span><span class="c0">iter</span><span>&nbsp;</span><span class="c7">&lt;</span><span>&nbsp;</span><span class="c0">deck</span><span>.</span><span class="c0">length</span><span>&nbsp;</span><span class="c7">;</span><span>&nbsp;</span><span class="c0">iter</span><span class="c7">++</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">Label</span><span>&nbsp;</span><span class="c0">face</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Label</span><span class="c4">(</span><span class="c0">cards</span><span>.</span><span class="c0">getImage</span><span class="c4">(</span><span class="c0">deck</span><span class="c4">[</span><span class="c0">iter</span><span class="c4">]</span><span>.</span><span class="c0">getFileName</span><span class="c4">()))</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c11">// containers have no padding or margin this effectively removes redundant spacing</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">face</span><span>.</span><span class="c0">setUIID</span><span class="c4">(</span><span class="c22">&quot;Container&quot;</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">deckContainer</span><span>.</span><span class="c0">addComponent</span><span class="c4">(</span><span class="c0">face</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">}</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c11">// we place our cards at the bottom, the deck at the center and our rival on the north</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">gameFormBorderLayout</span><span>.</span><span class="c0">addComponent</span><span class="c4">(</span><span class="c0">BorderLayout</span><span>.</span><span class="c0">CENTER</span><span>, </span><span class="c0">deckContainer</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">gameFormBorderLayout</span><span>.</span><span class="c0">addComponent</span><span class="c4">(</span><span class="c0">BorderLayout</span><span>.</span><span class="c0">NORTH</span><span>, </span><span class="c0">rivalContainer</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">gameFormBorderLayout</span><span>.</span><span class="c0">addComponent</span><span class="c4">(</span><span class="c0">BorderLayout</span><span>.</span><span class="c0">SOUTH</span><span>, </span><span class="c0">playerContainer</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">gameForm</span><span>.</span><span class="c0">show</span><span class="c4">()</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c11">// we wait 1.8 seconds to start the opening animation, otherwise it might start while the transition is still running</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">UITimer</span><span class="c4">(</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Runnable</span><span class="c4">()</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">public</span><span>&nbsp;</span><span class="c9">void</span><span>&nbsp;</span><span class="c0">run</span><span class="c4">()</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c11">// we add a card back component and make it a drop target so later players</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c11">// can drag their cards here</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">final</span><span>&nbsp;</span><span class="c0">Button</span><span>&nbsp;</span><span class="c0">cardBack</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Button</span><span class="c4">(</span><span class="c0">cards</span><span>.</span><span class="c0">getImage</span><span class="c4">(</span><span class="c22">&quot;card_back.png&quot;</span><span class="c4">))</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">cardBack</span><span>.</span><span class="c0">setDropTarget</span><span class="c4">(</span><span class="c9">true</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c11">// we remove the button styling so it doesn&#39;t look like a button by using setUIID.</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">cardBack</span><span>.</span><span class="c0">setUIID</span><span class="c4">(</span><span class="c22">&quot;Label&quot;</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">deckContainer</span><span>.</span><span class="c0">addComponent</span><span class="c4">(</span><span class="c0">cardBack</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c11">// we set the layout to layered layout which places all components one on top of the other then animate</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c11">// the layout into place, this will cause the spread out deck to &quot;flow&quot; into place</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c11">// Notice we are using the AndWait variant which will block the event dispatch thread (legally) while</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c11">// performing the animation, normally you can&#39;t block the dispatch thread (EDT)</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">deckContainer</span><span>.</span><span class="c0">setLayout</span><span class="c4">(</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">LayeredLayout</span><span class="c4">())</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">deckContainer</span><span>.</span><span class="c0">animateLayoutAndWait</span><span class="c4">(</span><span class="c14">3000</span><span class="c4">)</span><span class="c7">;</span><span><br><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c11">// we don&#39;t need all the card images/labels in the deck, so we place the card back</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c11">// on top then remove all the other components</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">deckContainer</span><span>.</span><span class="c0">removeAll</span><span class="c4">()</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">deckContainer</span><span>.</span><span class="c0">addComponent</span><span class="c4">(</span><span class="c0">cardBack</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c11">// Now we iterate over the cards and deal the top card from the deck to each player</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">for</span><span class="c4">(</span><span class="c9">int</span><span>&nbsp;</span><span class="c0">iter</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c14">0</span><span>&nbsp;</span><span class="c7">;</span><span>&nbsp;</span><span class="c0">iter</span><span>&nbsp;</span><span class="c7">&lt;</span><span>&nbsp;</span><span class="c14">5</span><span>&nbsp;</span><span class="c7">;</span><span>&nbsp;</span><span class="c0">iter</span><span class="c7">++</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">Card</span><span>&nbsp;</span><span class="c0">currentCard</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c0">shuffledDeck</span><span>.</span><span class="c0">get</span><span class="c4">(</span><span class="c14">0</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">shuffledDeck</span><span>.</span><span class="c0">remove</span><span class="c4">(</span><span class="c14">0</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">dealCard</span><span class="c4">(</span><span class="c0">cardBack</span><span>, </span><span class="c0">playerContainer</span><span>, </span><span class="c0">cards</span><span>.</span><span class="c0">getImage</span><span class="c4">(</span><span class="c0">currentCard</span><span>.</span><span class="c0">getFileName</span><span class="c4">())</span><span>, </span><span class="c0">currentCard</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">currentCard</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c0">shuffledDeck</span><span>.</span><span class="c0">get</span><span class="c4">(</span><span class="c14">0</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">shuffledDeck</span><span>.</span><span class="c0">remove</span><span class="c4">(</span><span class="c14">0</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">dealCard</span><span class="c4">(</span><span class="c0">cardBack</span><span>, </span><span class="c0">rivalContainer</span><span>, </span><span class="c0">cards</span><span>.</span><span class="c0">getImage</span><span class="c4">(</span><span class="c22">&quot;card_back.png&quot;</span><span class="c4">)</span><span>, </span><span class="c0">currentCard</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">}</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c11">// After dealing we place a notice in the upper layer by fade in. The trick is in adding a blank component </span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c11">// and replacing it with a fade transition</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">TextArea</span><span>&nbsp;</span><span class="c0">notice</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">TextArea</span><span class="c4">(</span><span class="c22">&quot;Drag cards to the deck to swap</span><span class="c59">\n</span><span class="c22">tap the deck to finish&quot;</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">notice</span><span>.</span><span class="c0">setEditable</span><span class="c4">(</span><span class="c9">false</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">notice</span><span>.</span><span class="c0">setFocusable</span><span class="c4">(</span><span class="c9">false</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">notice</span><span>.</span><span class="c0">setUIID</span><span class="c4">(</span><span class="c22">&quot;Label&quot;</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">notice</span><span>.</span><span class="c0">getUnselectedStyle</span><span class="c4">()</span><span>.</span><span class="c0">setAlignment</span><span class="c4">(</span><span class="c0">Component</span><span>.</span><span class="c0">CENTER</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">gameUpperLayer</span><span>.</span><span class="c0">addComponent</span><span class="c4">(</span><span class="c0">notice</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">gameUpperLayer</span><span>.</span><span class="c0">layoutContainer</span><span class="c4">()</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c11">// we place the notice then remove it without the transition, we need to do this since a text area</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c11">// might resize itself so we need to know its size in advance to fade it in.</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">Label</span><span>&nbsp;</span><span class="c0">temp</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Label</span><span class="c4">(</span><span class="c22">&quot; &quot;</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">temp</span><span>.</span><span class="c0">setPreferredSize</span><span class="c4">(</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Dimension</span><span class="c4">(</span><span class="c0">notice</span><span>.</span><span class="c0">getWidth</span><span class="c4">()</span><span>, </span><span class="c0">notice</span><span>.</span><span class="c0">getHeight</span><span class="c4">()))</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">gameUpperLayer</span><span>.</span><span class="c0">replace</span><span class="c4">(</span><span class="c0">notice</span><span>, </span><span class="c0">temp</span><span>, </span><span class="c9">null</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">gameUpperLayer</span><span>.</span><span class="c0">layoutContainer</span><span class="c4">()</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">gameUpperLayer</span><span>.</span><span class="c0">replace</span><span class="c4">(</span><span class="c0">temp</span><span>, </span><span class="c0">notice</span><span>, </span><span class="c0">CommonTransitions</span><span>.</span><span class="c0">createFade</span><span class="c4">(</span><span class="c14">1500</span><span class="c4">))</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c11">// when the user taps the card back (the deck) we finish the game</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">cardBack</span><span>.</span><span class="c0">addActionListener</span><span class="c4">(</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">ActionListener</span><span class="c4">()</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">public</span><span>&nbsp;</span><span class="c9">void</span><span>&nbsp;</span><span class="c0">actionPerformed</span><span class="c4">(</span><span class="c0">ActionEvent</span><span>&nbsp;</span><span class="c0">evt</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c11">// we clear the notice text</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">gameUpperLayer</span><span>.</span><span class="c0">removeAll</span><span class="c4">()</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c11">// we deal the new cards to the player (the rival never takes new cards)</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">while</span><span class="c4">(</span><span class="c0">playerContainer</span><span>.</span><span class="c0">getComponentCount</span><span class="c4">()</span><span>&nbsp;</span><span class="c7">&lt;</span><span>&nbsp;</span><span class="c14">5</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">Card</span><span>&nbsp;</span><span class="c0">currentCard</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c0">shuffledDeck</span><span>.</span><span class="c0">get</span><span class="c4">(</span><span class="c14">0</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">shuffledDeck</span><span>.</span><span class="c0">remove</span><span class="c4">(</span><span class="c14">0</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">dealCard</span><span class="c4">(</span><span class="c0">cardBack</span><span>, </span><span class="c0">playerContainer</span><span>, </span><span class="c0">cards</span><span>.</span><span class="c0">getImage</span><span class="c4">(</span><span class="c0">currentCard</span><span>.</span><span class="c0">getFileName</span><span class="c4">())</span><span>, </span><span class="c0">currentCard</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">}</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c11">// expose the rivals deck then offer the chance to play again...</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">for</span><span class="c4">(</span><span class="c9">int</span><span>&nbsp;</span><span class="c0">iter</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c14">0</span><span>&nbsp;</span><span class="c7">;</span><span>&nbsp;</span><span class="c0">iter</span><span>&nbsp;</span><span class="c7">&lt;</span><span>&nbsp;</span><span class="c14">5</span><span>&nbsp;</span><span class="c7">;</span><span>&nbsp;</span><span class="c0">iter</span><span class="c7">++</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">Button</span><span>&nbsp;</span><span class="c0">cardButton</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c4">(</span><span class="c0">Button</span><span class="c4">)</span><span class="c0">rivalContainer</span><span>.</span><span class="c0">getComponentAt</span><span class="c4">(</span><span class="c0">iter</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c11">// when creating a card we save the state into the component itself which is very convenient</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">Card</span><span>&nbsp;</span><span class="c0">currnetCard</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c4">(</span><span class="c0">Card</span><span class="c4">)</span><span class="c0">cardButton</span><span>.</span><span class="c0">getClientProperty</span><span class="c4">(</span><span class="c22">&quot;card&quot;</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">Label</span><span>&nbsp;</span><span class="c0">l</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Label</span><span class="c4">(</span><span class="c0">cards</span><span>.</span><span class="c0">getImage</span><span class="c4">(</span><span class="c0">currnetCard</span><span>.</span><span class="c0">getFileName</span><span class="c4">()))</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">rivalContainer</span><span>.</span><span class="c0">replaceAndWait</span><span class="c4">(</span><span class="c0">cardButton</span><span>, </span><span class="c0">l</span><span>, </span><span class="c0">CommonTransitions</span><span>.</span><span class="c0">createCover</span><span class="c4">(</span><span class="c0">CommonTransitions</span><span>.</span><span class="c0">SLIDE_VERTICAL</span><span>, </span><span class="c9">true</span><span>, </span><span class="c14">300</span><span class="c4">))</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">}</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c11">// notice dialogs are blocking by default so its pretty easy to write this logic</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">if</span><span class="c4">(</span><span class="c7">!</span><span class="c0">Dialog</span><span>.</span><span class="c0">show</span><span class="c4">(</span><span class="c22">&quot;Again?&quot;</span><span>, </span><span class="c22">&quot;Ready to play Again&quot;</span><span>, </span><span class="c22">&quot;Yes&quot;</span><span>, </span><span class="c22">&quot;Exit&quot;</span><span class="c4">))</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">Display</span><span>.</span><span class="c0">getInstance</span><span class="c4">()</span><span>.</span><span class="c0">exitApplication</span><span class="c4">()</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">}</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c11">// play again</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">showGameUI</span><span class="c4">()</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">}</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">})</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">}</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">})</span><span>.</span><span class="c0">schedule</span><span class="c4">(</span><span class="c14">1800</span><span>, </span><span class="c9">false</span><span>, </span><span class="c0">gameForm</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp;</span><span class="c4">}</span><span><br> &nbsp; &nbsp;<br> &nbsp; &nbsp;</span><span class="c56 c11">/**<br> &nbsp; &nbsp; * A blocking method that creates the card deal animation and binds the drop logic when cards are dropped on the deck<br> &nbsp; &nbsp; */</span><span><br> &nbsp; &nbsp;</span><span class="c9">private</span><span>&nbsp;</span><span class="c9">void</span><span>&nbsp;</span><span class="c0">dealCard</span><span class="c4">(</span><span class="c0">Component</span><span>&nbsp;</span><span class="c0">deck</span><span>, </span><span class="c9">final</span><span>&nbsp;</span><span class="c0">Container</span><span>&nbsp;</span><span class="c0">destination</span><span>, </span><span class="c0">Image</span><span>&nbsp;</span><span class="c0">cardImage</span><span>, </span><span class="c0">Card</span><span>&nbsp;</span><span class="c0">currentCard</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">final</span><span>&nbsp;</span><span class="c0">Button</span><span>&nbsp;</span><span class="c0">card</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">Button</span><span class="c4">()</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">card</span><span>.</span><span class="c0">setUIID</span><span class="c4">(</span><span class="c22">&quot;Label&quot;</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">card</span><span>.</span><span class="c0">setIcon</span><span class="c4">(</span><span class="c0">cardImage</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c11">// Components are normally placed by layout managers so setX/Y/Width/Height shouldn&#39;t be invoked. However,</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c11">// in this case we want the layout animation to deal from a specific location. Notice that we use absoluteX/Y</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c11">// since the default X/Y are relative to their parent container.</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">card</span><span>.</span><span class="c0">setX</span><span class="c4">(</span><span class="c0">deck</span><span>.</span><span class="c0">getAbsoluteX</span><span class="c4">())</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">int</span><span>&nbsp;</span><span class="c0">deckAbsY</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c0">deck</span><span>.</span><span class="c0">getAbsoluteY</span><span class="c4">()</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">if</span><span class="c4">(</span><span class="c0">destination</span><span>.</span><span class="c0">getY</span><span class="c4">()</span><span>&nbsp;</span><span class="c7">&gt;</span><span>&nbsp;</span><span class="c0">deckAbsY</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">card</span><span>.</span><span class="c0">setY</span><span class="c4">(</span><span class="c0">deckAbsY</span><span>&nbsp;</span><span class="c7">-</span><span>&nbsp;</span><span class="c0">destination</span><span>.</span><span class="c0">getAbsoluteY</span><span class="c4">())</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">}</span><span>&nbsp;</span><span class="c9">else</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">card</span><span>.</span><span class="c0">setY</span><span class="c4">(</span><span class="c0">deckAbsY</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">}</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">card</span><span>.</span><span class="c0">setWidth</span><span class="c4">(</span><span class="c0">deck</span><span>.</span><span class="c0">getWidth</span><span class="c4">())</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">card</span><span>.</span><span class="c0">setHeight</span><span class="c4">(</span><span class="c0">deck</span><span>.</span><span class="c0">getHeight</span><span class="c4">())</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">destination</span><span>.</span><span class="c0">addComponent</span><span class="c4">(</span><span class="c0">card</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c11">// we save the model data directly into the component so we don&#39;t need to keep track of it. Later when we</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c11">// need to check the card type a user touched we can just use getClientProperty</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">card</span><span>.</span><span class="c0">putClientProperty</span><span class="c4">(</span><span class="c22">&quot;card&quot;</span><span>, </span><span class="c0">currentCard</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">destination</span><span>.</span><span class="c0">getParent</span><span class="c4">()</span><span>.</span><span class="c0">animateHierarchyAndWait</span><span class="c4">(</span><span class="c14">400</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">card</span><span>.</span><span class="c0">setDraggable</span><span class="c4">(</span><span class="c9">true</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c11">// when the user drops a card on a drop target (currently only the deck) we remove it and animate it out</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">card</span><span>.</span><span class="c0">addDropListener</span><span class="c4">(</span><span class="c9">new</span><span>&nbsp;</span><span class="c0">ActionListener</span><span class="c4">()</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">public</span><span>&nbsp;</span><span class="c9">void</span><span>&nbsp;</span><span class="c0">actionPerformed</span><span class="c4">(</span><span class="c0">ActionEvent</span><span>&nbsp;</span><span class="c0">evt</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">evt</span><span>.</span><span class="c0">consume</span><span class="c4">()</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">card</span><span>.</span><span class="c0">getParent</span><span class="c4">()</span><span>.</span><span class="c0">removeComponent</span><span class="c4">(</span><span class="c0">card</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">destination</span><span>.</span><span class="c0">animateLayout</span><span class="c4">(</span><span class="c14">300</span><span class="c4">)</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">}</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">})</span><span class="c7">;</span><span><br> &nbsp; &nbsp;</span><span class="c4">}</span><span><br> &nbsp; &nbsp;<br> &nbsp; &nbsp;</span><span class="c9">public</span><span>&nbsp;</span><span class="c9">void</span><span>&nbsp;</span><span class="c0">stop</span><span class="c4">()</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">current</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c0">Display</span><span>.</span><span class="c0">getInstance</span><span class="c4">()</span><span>.</span><span class="c0">getCurrent</span><span class="c4">()</span><span class="c7">;</span><span><br> &nbsp; &nbsp;</span><span class="c4">}</span><span><br> &nbsp; &nbsp;<br> &nbsp; &nbsp;</span><span class="c9">public</span><span>&nbsp;</span><span class="c9">void</span><span>&nbsp;</span><span class="c0">destroy</span><span class="c4">()</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp;</span><span class="c4">}</span><span><br><br> &nbsp; &nbsp;<br> &nbsp; &nbsp;</span><span class="c9">static</span><span>&nbsp;</span><span class="c9">class</span><span>&nbsp;</span><span class="c0">Card</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">private</span><span>&nbsp;</span><span class="c9">char</span><span>&nbsp;</span><span class="c0">suite</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">private</span><span>&nbsp;</span><span class="c9">int</span><span>&nbsp;</span><span class="c0">rank</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">public</span><span>&nbsp;</span><span class="c0">Card</span><span class="c4">(</span><span class="c9">char</span><span>&nbsp;</span><span class="c0">suite</span><span>, </span><span class="c9">int</span><span>&nbsp;</span><span class="c0">rank</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">this</span><span>.</span><span class="c0">suite</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c0">suite</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">this</span><span>.</span><span class="c0">rank</span><span>&nbsp;</span><span class="c7">=</span><span>&nbsp;</span><span class="c0">rank</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">}</span><span><br><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">private</span><span>&nbsp;</span><span class="c0">String</span><span>&nbsp;</span><span class="c0">rankToString</span><span class="c4">()</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">if</span><span class="c4">(</span><span class="c0">rank</span><span>&nbsp;</span><span class="c7">&gt;</span><span>&nbsp;</span><span class="c14">10</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">switch</span><span class="c4">(</span><span class="c0">rank</span><span class="c4">)</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">case</span><span>&nbsp;</span><span class="c14">11</span><span class="c7">:</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">return</span><span>&nbsp;</span><span class="c22">&quot;j&quot;</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">case</span><span>&nbsp;</span><span class="c14">12</span><span class="c7">:</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">return</span><span>&nbsp;</span><span class="c22">&quot;q&quot;</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">case</span><span>&nbsp;</span><span class="c14">13</span><span class="c7">:</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">return</span><span>&nbsp;</span><span class="c22">&quot;k&quot;</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">case</span><span>&nbsp;</span><span class="c14">14</span><span class="c7">:</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">return</span><span>&nbsp;</span><span class="c22">&quot;a&quot;</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">}</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">}</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">return</span><span>&nbsp;</span><span class="c22">&quot;&quot;</span><span>&nbsp;</span><span class="c7">+</span><span>&nbsp;</span><span class="c0">rank</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">}</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">public</span><span>&nbsp;</span><span class="c0">String</span><span>&nbsp;</span><span class="c0">getFileName</span><span class="c4">()</span><span>&nbsp;</span><span class="c4">{</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">return</span><span>&nbsp;</span><span class="c0">rankToString</span><span class="c4">()</span><span>&nbsp;</span><span class="c7">+</span><span>&nbsp;</span><span class="c0">suite</span><span>&nbsp;</span><span class="c7">+</span><span>&nbsp;</span><span class="c22">&quot;.png&quot;</span><span class="c7">;</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">}</span><span><br> &nbsp; &nbsp;</span><span class="c4">}</span><span><br></span><span class="c4">}</span></p><p class="c3 c5"><span></span></p><p class="c3 c5"><span></span></p><div><p class="c28 c25 c3 c5"><span class="c10 c43 c52"></span></p><p class="c28 c25 c3"><span class="c10 c43 c52">&copy; Codename One 2012. All rights Reserved. </span><span class="c36 c10 c43 c52"><a class="c15" href="http://example.com/">http://www.codenameone.com</a></span><span class="c10 c43 c52">&nbsp; </span></p><p class="c25 c3 c28"><span>&nbsp;of </span></p></div><hr class="c29"><div><p class="c21 c3"><a href="#ftnt_ref1" name="ftnt1">[1]</a><span class="c43">&nbsp;See </span><span class="c8 c43"><a class="c15" href="http://lwuit.blogspot.com/">http://lwuit.blogspot.com/</a></span><span class="c43">&nbsp;</span><span class="c8 c43"><a class="c15" href="http://lwuit.java.net/">http://lwuit.java.net/</a></span><span class="c43">&nbsp;</span></p></div><div><p class="c3"><a href="#ftnt_ref2" name="ftnt2">[2]</a><span class="c43">&nbsp;Historically bitmap fonts were also supported, however this functionality is deprecated and might be removed in a future revision. We highly recommend you avoid using the bitmap font functionality.</span></p></div><div><p class="c3"><a href="#ftnt_ref3" name="ftnt3">[3]</a><span class="c43">&nbsp;To Clarify: all payment and financial transactions go through the monetization provider and not through Codename One. E.g. Ad network revenue is the property of the developer and Codename One doesn&rsquo;t take any cut from the developers!</span></p></div><div><p class="c3"><a href="#ftnt_ref4" name="ftnt4">[4]</a><span class="c43">&nbsp;See http://developers.facebook.com/docs/reference/api/</span></p></div><div><p class="c3"><a href="#ftnt_ref5" name="ftnt5">[5]</a><span class="c43">&nbsp;Seriously. An invalid name is stuck in the servers and you won&rsquo;t be able to build later even if you have a valid certificate. Its a pain for us so please follow the instructions properly and use a Mac for this stage.</span></p></div></body></html>